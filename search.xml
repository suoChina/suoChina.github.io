<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Redis中间件学习指南 - 从入门到实战</title>
      <link href="//redis-learning-guide/"/>
      <url>//redis-learning-guide/</url>
      
        <content type="html"><![CDATA[<h1 id="Redis中间件学习指南-从入门到实战-🚀"><a href="#Redis中间件学习指南-从入门到实战-🚀" class="headerlink" title="Redis中间件学习指南 - 从入门到实战 🚀"></a>Redis中间件学习指南 - 从入门到实战 🚀</h1><blockquote><p>Redis（Remote Dictionary Server）是一个开源的、基于内存的数据结构存储系统，可以用作数据库、缓存和消息中间件。本指南将带你全面学习Redis，从基础概念到实战应用，掌握这个强大的中间件！💾</p></blockquote><p><img src="/images/redis/cover.png" alt="Redis学习指南"></p><h2 id="📋-目录"><a href="#📋-目录" class="headerlink" title="📋 目录"></a>📋 目录</h2><ul><li><p><a href="#1-redis%E7%AE%80%E4%BB%8B">1. Redis简介</a></p><ul><li><a href="#11-%E4%BB%80%E4%B9%88%E6%98%AFredis">1.1 什么是Redis</a></li><li><a href="#12-redis%E7%9A%84%E7%89%B9%E7%82%B9">1.2 Redis的特点</a></li><li><a href="#13-redis%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">1.3 Redis的应用场景</a></li><li><a href="#14-redis-vs-%E5%85%B6%E4%BB%96%E7%BC%93%E5%AD%98">1.4 Redis vs 其他缓存</a></li></ul></li><li><p><a href="#2-redis%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE">2. Redis安装与配置</a></p><ul><li><a href="#21-windows%E5%AE%89%E8%A3%85">2.1 Windows安装</a></li><li><a href="#22-linux%E5%AE%89%E8%A3%85">2.2 Linux安装</a></li><li><a href="#23-docker%E5%AE%89%E8%A3%85">2.3 Docker安装</a></li><li><a href="#24-%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE">2.4 基础配置</a></li></ul></li><li><p><a href="#3-redis%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">3. Redis基础数据类型</a></p><ul><li><a href="#31-string%E5%AD%97%E7%AC%A6%E4%B8%B2">3.1 String（字符串）</a></li><li><a href="#32-hash%E5%93%88%E5%B8%8C">3.2 Hash（哈希）</a></li><li><a href="#33-list%E5%88%97%E8%A1%A8">3.3 List（列表）</a></li><li><a href="#34-set%E9%9B%86%E5%90%88">3.4 Set（集合）</a></li><li><a href="#35-zset%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88">3.5 ZSet（有序集合）</a></li></ul></li><li><p><a href="#4-redis%E9%AB%98%E7%BA%A7%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">4. Redis高级数据类型</a></p><ul><li><a href="#41-bitmap%E4%BD%8D%E5%9B%BE">4.1 Bitmap（位图）</a></li><li><a href="#42-hyperloglog">4.2 HyperLogLog</a></li><li><a href="#43-geo%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE">4.3 GEO（地理位置）</a></li><li><a href="#44-stream%E6%B5%81">4.4 Stream（流）</a></li></ul></li><li><p><a href="#5-redis%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4">5. Redis常用命令</a></p><ul><li><a href="#51-%E9%80%9A%E7%94%A8%E5%91%BD%E4%BB%A4">5.1 通用命令</a></li><li><a href="#52-%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4">5.2 数据操作命令</a></li><li><a href="#53-%E4%BA%8B%E5%8A%A1%E5%91%BD%E4%BB%A4">5.3 事务命令</a></li><li><a href="#54-%E6%8C%81%E4%B9%85%E5%8C%96%E5%91%BD%E4%BB%A4">5.4 持久化命令</a></li></ul></li><li><p><a href="#6-redis%E6%8C%81%E4%B9%85%E5%8C%96">6. Redis持久化</a></p><ul><li><a href="#61-rdb%E6%8C%81%E4%B9%85%E5%8C%96">6.1 RDB持久化</a></li><li><a href="#62-aof%E6%8C%81%E4%B9%85%E5%8C%96">6.2 AOF持久化</a></li><li><a href="#63-%E6%B7%B7%E5%90%88%E6%8C%81%E4%B9%85%E5%8C%96">6.3 混合持久化</a></li><li><a href="#64-%E6%8C%81%E4%B9%85%E5%8C%96%E7%AD%96%E7%95%A5%E9%80%89%E6%8B%A9">6.4 持久化策略选择</a></li></ul></li><li><p><a href="#7-redis%E4%BA%8B%E5%8A%A1">7. Redis事务</a></p><ul><li><a href="#71-%E4%BA%8B%E5%8A%A1%E5%9F%BA%E7%A1%80">7.1 事务基础</a></li><li><a href="#72-%E4%BA%8B%E5%8A%A1%E5%91%BD%E4%BB%A4">7.2 事务命令</a></li><li><a href="#73-watch%E6%9C%BA%E5%88%B6">7.3 Watch机制</a></li><li><a href="#74-%E4%BA%8B%E5%8A%A1%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">7.4 事务注意事项</a></li></ul></li><li><p><a href="#8-redis%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85">8. Redis发布订阅</a></p><ul><li><a href="#81-%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F">8.1 发布订阅模式</a></li><li><a href="#82-%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4">8.2 相关命令</a></li><li><a href="#83-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">8.3 应用场景</a></li></ul></li><li><p><a href="#9-redis%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6">9. Redis主从复制</a></p><ul><li><a href="#91-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E5%8E%9F%E7%90%86">9.1 主从复制原理</a></li><li><a href="#92-%E9%85%8D%E7%BD%AE%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6">9.2 配置主从复制</a></li><li><a href="#93-%E5%85%A8%E9%87%8F%E5%A4%8D%E5%88%B6%E4%B8%8E%E5%A2%9E%E9%87%8F%E5%A4%8D%E5%88%B6">9.3 全量复制与增量复制</a></li><li><a href="#94-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">9.4 主从复制注意事项</a></li></ul></li><li><p><a href="#10-redis%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F">10. Redis哨兵模式</a></p><ul><li><a href="#101-%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D">10.1 哨兵模式介绍</a></li><li><a href="#102-%E5%93%A8%E5%85%B5%E9%85%8D%E7%BD%AE">10.2 哨兵配置</a></li><li><a href="#103-%E6%95%85%E9%9A%9C%E8%BD%AC%E7%A7%BB">10.3 故障转移</a></li><li><a href="#104-%E5%93%A8%E5%85%B5%E9%9B%86%E7%BE%A4">10.4 哨兵集群</a></li></ul></li><li><p><a href="#11-redis%E9%9B%86%E7%BE%A4">11. Redis集群</a></p><ul><li><a href="#111-%E9%9B%86%E7%BE%A4%E6%9E%B6%E6%9E%84">11.1 集群架构</a></li><li><a href="#112-%E6%95%B0%E6%8D%AE%E5%88%86%E7%89%87">11.2 数据分片</a></li><li><a href="#113-%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA">11.3 集群搭建</a></li><li><a href="#114-%E9%9B%86%E7%BE%A4%E6%89%A9%E5%AE%B9%E4%B8%8E%E7%BC%A9%E5%AE%B9">11.4 集群扩容与缩容</a></li></ul></li><li><p><a href="#12-redis%E5%AE%9E%E6%88%98%E5%BA%94%E7%94%A8">12. Redis实战应用</a></p><ul><li><a href="#121-%E7%BC%93%E5%AD%98%E8%AE%BE%E8%AE%A1">12.1 缓存设计</a></li><li><a href="#122-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81">12.2 分布式锁</a></li><li><a href="#123-%E5%BB%B6%E6%97%B6%E9%98%9F%E5%88%97">12.3 延时队列</a></li><li><a href="#124-%E6%8E%92%E8%A1%8C%E6%A6%9C">12.4 排行榜</a></li><li><a href="#125-%E9%99%90%E6%B5%81">12.5 限流</a></li></ul></li><li><p><a href="#13-redis%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96">13. Redis性能优化</a></p><ul><li><a href="#131-%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96">13.1 内存优化</a></li><li><a href="#132-%E5%91%BD%E4%BB%A4%E4%BC%98%E5%8C%96">13.2 命令优化</a></li><li><a href="#133-%E7%BD%91%E7%BB%9C%E4%BC%98%E5%8C%96">13.3 网络优化</a></li><li><a href="#134-%E6%85%A2%E6%9F%A5%E8%AF%A2%E5%88%86%E6%9E%90">13.4 慢查询分析</a></li></ul></li><li><p><a href="#14-redis%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98">14. Redis常见问题</a></p><ul><li><a href="#141-%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F">14.1 缓存穿透</a></li><li><a href="#142-%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF">14.2 缓存击穿</a></li><li><a href="#143-%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9">14.3 缓存雪崩</a></li><li><a href="#144-%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7">14.4 数据一致性</a></li></ul></li><li><p><a href="#15-java%E6%95%B4%E5%90%88redis">15. Java整合Redis</a></p><ul><li><a href="#151-jedis%E5%AE%A2%E6%88%B7%E7%AB%AF">15.1 Jedis客户端</a></li><li><a href="#152-lettuce%E5%AE%A2%E6%88%B7%E7%AB%AF">15.2 Lettuce客户端</a></li><li><a href="#153-spring-data-redis">15.3 Spring Data Redis</a></li><li><a href="#154-redistemplate%E4%BD%BF%E7%94%A8">15.4 RedisTemplate使用</a></li></ul></li></ul><hr><h2 id="1-Redis简介"><a href="#1-Redis简介" class="headerlink" title="1. Redis简介"></a>1. Redis简介</h2><h3 id="1-1-什么是Redis"><a href="#1-1-什么是Redis" class="headerlink" title="1.1 什么是Redis"></a>1.1 什么是Redis</h3><p>Redis（Remote Dictionary Server）是一个开源的、基于内存的数据结构存储系统。<br>Redis是一个开源的key-value存储系统。<br>和Memcached类似，它支持存储的value类型相对更多，包括string(字符串)、list(链表)、set(集合)、zset(sorted set –有序集合)和hash（哈希类型）。<br>这些数据类型都支持push&#x2F;pop、add&#x2F;remove及取交集并集和差集及更丰富的操作，而且这些操作都是原子性的。<br>此基础上，Redis支持各种不同方式的排序。<br>与memcached一样，为了保证效率，数据都是缓存在内存中。<br>区别的是Redis会周期性的把更新的数据写入磁盘或者把修改操作写入追加的记录文件。<br>并且在此基础上实现了master-slave(主从)同步。</p><p><strong>核心特点：</strong></p><ul><li>基于内存运行，读写速度极快</li><li>支持多种数据结构</li><li>支持数据持久化</li><li>支持主从复制和集群</li></ul><h3 id="1-2-Redis的特点"><a href="#1-2-Redis的特点" class="headerlink" title="1.2 Redis的特点"></a>1.2 Redis的特点</h3><h4 id="性能优势"><a href="#性能优势" class="headerlink" title="性能优势"></a>性能优势</h4><table><thead><tr><th>特性</th><th>说明</th></tr></thead><tbody><tr><td><strong>高性能</strong></td><td>基于内存，读写速度可达10万+QPS</td></tr><tr><td><strong>丰富的数据类型</strong></td><td>String、Hash、List、Set、ZSet等</td></tr><tr><td><strong>原子性操作</strong></td><td>所有操作都是原子性的</td></tr><tr><td><strong>持久化</strong></td><td>支持RDB和AOF两种持久化方式</td></tr><tr><td><strong>高可用</strong></td><td>支持主从复制、哨兵、集群</td></tr></tbody></table><h4 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h4><p>待补充…</p><h3 id="1-3-Redis的应用场景"><a href="#1-3-Redis的应用场景" class="headerlink" title="1.3 Redis的应用场景"></a>1.3 Redis的应用场景</h3><h4 id="常见应用场景"><a href="#常见应用场景" class="headerlink" title="常见应用场景"></a>常见应用场景</h4><ol><li><strong>缓存</strong>：最常见的使用场景</li><li><strong>分布式锁</strong>：解决分布式系统的并发问题</li><li><strong>消息队列</strong>：发布订阅、延时队列</li><li><strong>排行榜</strong>：利用ZSet实现</li><li><strong>计数器</strong>：网站访问量、点赞数等</li><li><strong>Session共享</strong>：分布式系统中的session存储</li></ol><h3 id="1-4-Redis-vs-其他缓存"><a href="#1-4-Redis-vs-其他缓存" class="headerlink" title="1.4 Redis vs 其他缓存"></a>1.4 Redis vs 其他缓存</h3><h4 id="Redis-vs-Memcached"><a href="#Redis-vs-Memcached" class="headerlink" title="Redis vs Memcached"></a>Redis vs Memcached</h4><table><thead><tr><th>对比维度</th><th>Redis</th><th>Memcached</th></tr></thead><tbody><tr><td><strong>数据类型</strong></td><td>支持String、Hash、List、Set、ZSet等多种数据结构</td><td>仅支持简单的key-value字符串</td></tr><tr><td><strong>持久化</strong></td><td>支持RDB和AOF持久化</td><td>不支持持久化，数据仅存在于内存</td></tr><tr><td><strong>内存管理</strong></td><td>自己实现内存池，可以设置过期策略</td><td>使用Slab Allocation机制</td></tr><tr><td><strong>线程模型</strong></td><td>单线程（6.0后支持多线程IO）</td><td>多线程</td></tr><tr><td><strong>集群支持</strong></td><td>原生支持集群</td><td>需要客户端实现分片</td></tr><tr><td><strong>数据备份</strong></td><td>支持主从复制</td><td>不支持</td></tr><tr><td><strong>应用场景</strong></td><td>缓存、队列、排行榜、分布式锁等</td><td>纯缓存场景</td></tr><tr><td><strong>性能</strong></td><td>单核性能极高（10万+QPS）</td><td>多核性能更好</td></tr><tr><td><strong>内存利用率</strong></td><td>较高（压缩列表等优化）</td><td>较低（固定chunk大小）</td></tr></tbody></table><p><strong>选择建议</strong>：</p><ul><li>需要持久化、复杂数据结构、分布式锁等场景 → <strong>Redis</strong></li><li>纯粹的简单缓存，追求极致多核性能 → <strong>Memcached</strong></li></ul><h4 id="Redis-vs-Ehcache"><a href="#Redis-vs-Ehcache" class="headerlink" title="Redis vs Ehcache"></a>Redis vs Ehcache</h4><table><thead><tr><th>对比维度</th><th>Redis</th><th>Ehcache</th></tr></thead><tbody><tr><td><strong>部署方式</strong></td><td>独立服务，支持分布式</td><td>嵌入式，与应用同进程</td></tr><tr><td><strong>数据共享</strong></td><td>可跨应用共享数据</td><td>仅限当前应用使用</td></tr><tr><td><strong>语言支持</strong></td><td>支持多种语言客户端</td><td>主要用于Java应用</td></tr><tr><td><strong>性能</strong></td><td>网络IO开销，但可分布式</td><td>本地缓存，速度最快</td></tr><tr><td><strong>容量限制</strong></td><td>受服务器内存限制，可扩展</td><td>受JVM堆内存限制</td></tr><tr><td><strong>持久化</strong></td><td>支持RDB和AOF</td><td>支持磁盘存储（可选）</td></tr><tr><td><strong>集群</strong></td><td>原生支持集群</td><td>支持Terracotta集群</td></tr><tr><td><strong>适用场景</strong></td><td>分布式系统、大数据量缓存</td><td>单机应用、小数据量缓存</td></tr></tbody></table><p><strong>选择建议</strong>：</p><ul><li>分布式系统，需要跨应用共享数据 → <strong>Redis</strong></li><li>单机Java应用，追求极致本地缓存性能 → <strong>Ehcache</strong></li><li>也可以组合使用：Ehcache作为一级缓存（本地），Redis作为二级缓存（分布式）</li></ul><h4 id="其他缓存方案对比"><a href="#其他缓存方案对比" class="headerlink" title="其他缓存方案对比"></a>其他缓存方案对比</h4><table><thead><tr><th>缓存方案</th><th>特点</th><th>适用场景</th></tr></thead><tbody><tr><td><strong>Redis</strong></td><td>功能丰富、支持持久化、高可用</td><td>通用分布式缓存，功能需求多</td></tr><tr><td><strong>Memcached</strong></td><td>简单高效、多线程</td><td>纯缓存场景，大规模简单数据</td></tr><tr><td><strong>Ehcache</strong></td><td>进程内缓存、零网络开销</td><td>Java单机应用</td></tr><tr><td><strong>Caffeine</strong></td><td>高性能本地缓存、现代化API</td><td>Java应用本地缓存（推荐）</td></tr><tr><td><strong>Guava Cache</strong></td><td>Google开源、使用简单</td><td>轻量级本地缓存</td></tr><tr><td><strong>Hazelcast</strong></td><td>分布式内存数据网格</td><td>大规模分布式计算</td></tr></tbody></table><h4 id="多级缓存架构"><a href="#多级缓存架构" class="headerlink" title="多级缓存架构"></a>多级缓存架构</h4><p>实际项目中，通常采用<strong>多级缓存</strong>策略：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">客户端请求</span><br><span class="line">    ↓</span><br><span class="line">[进程内缓存] (Caffeine/Ehcache)</span><br><span class="line">    ↓ 未命中</span><br><span class="line">[分布式缓存] (Redis)</span><br><span class="line">    ↓ 未命中</span><br><span class="line">[数据库] (MySQL)</span><br></pre></td></tr></table></figure><p><strong>优势</strong>：</p><ul><li><strong>L1缓存（本地）</strong>：速度最快，无网络开销</li><li><strong>L2缓存（Redis）</strong>：跨应用共享，容量更大</li><li><strong>L3存储（DB）</strong>：持久化数据，最终数据源</li></ul><hr><h2 id="2-Redis安装与配置"><a href="#2-Redis安装与配置" class="headerlink" title="2. Redis安装与配置"></a>2. Redis安装与配置</h2><h3 id="2-1-Linux安装"><a href="#2-1-Linux安装" class="headerlink" title="2.1 Linux安装"></a>2.1 Linux安装</h3><h4 id="步骤1：安装GCC编译器"><a href="#步骤1：安装GCC编译器" class="headerlink" title="步骤1：安装GCC编译器"></a>步骤1：安装GCC编译器</h4><p>Redis是C语言开发的，需要先安装编译环境。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装C语言编译环境</span></span><br><span class="line">yum install centos-release-scl scl-utils-build</span><br><span class="line">yum install -y devtoolset-8-toolchain</span><br><span class="line">scl <span class="built_in">enable</span> devtoolset-8 bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试gcc版本</span></span><br><span class="line">gcc --version</span><br></pre></td></tr></table></figure><p><strong>验证结果</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@chad /]# gcc --version</span><br><span class="line">gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-36)</span><br><span class="line">Copyright (C) 2015 Free Software Foundation, Inc.</span><br><span class="line">This is free software; see the <span class="built_in">source</span> <span class="keyword">for</span> copying conditions.  There is NO</span><br><span class="line">warranty; not even <span class="keyword">for</span> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span><br></pre></td></tr></table></figure><h4 id="步骤2：下载并解压Redis"><a href="#步骤2：下载并解压Redis" class="headerlink" title="步骤2：下载并解压Redis"></a>步骤2：下载并解压Redis</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载Redis安装包到/opt目录</span></span><br><span class="line"><span class="built_in">cd</span> /opt</span><br><span class="line">wget http://download.redis.io/releases/redis-6.2.1.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar -zxvf redis-6.2.1.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入解压后的目录</span></span><br><span class="line"><span class="built_in">cd</span> redis-6.2.1</span><br></pre></td></tr></table></figure><h4 id="步骤3：编译安装"><a href="#步骤3：编译安装" class="headerlink" title="步骤3：编译安装"></a>步骤3：编译安装</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编译（只是编译，不安装）</span></span><br><span class="line">make</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装到默认目录/usr/local/bin</span></span><br><span class="line">make install</span><br></pre></td></tr></table></figure><h4 id="步骤4：查看安装文件"><a href="#步骤4：查看安装文件" class="headerlink" title="步骤4：查看安装文件"></a>步骤4：查看安装文件</h4><p>安装完成后，可在 <code>/usr/local/bin</code> 目录下看到以下可执行文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@chad bin]# <span class="built_in">ls</span> -l</span><br><span class="line">total 18848</span><br><span class="line">-rw-r--r--. 1 root root      92 Nov 12 08:19 dump.rdb</span><br><span class="line">-rwxr-xr-x. 1 root root 4833352 Nov 12 08:12 redis-benchmark</span><br><span class="line">lrwxrwxrwx. 1 root root      12 Nov 12 08:12 redis-check-aof -&gt; redis-server</span><br><span class="line">lrwxrwxrwx. 1 root root      12 Nov 12 08:12 redis-check-rdb -&gt; redis-server</span><br><span class="line">-rwxr-xr-x. 1 root root 5003400 Nov 12 08:12 redis-cli</span><br><span class="line">lrwxrwxrwx. 1 root root      12 Nov 12 08:12 redis-sentinel -&gt; redis-server</span><br><span class="line">-rwxr-xr-x. 1 root root 9450232 Nov 12 08:12 redis-server</span><br></pre></td></tr></table></figure><p><strong>各文件说明</strong>：</p><table><thead><tr><th>文件名</th><th>作用</th></tr></thead><tbody><tr><td><code>redis-server</code></td><td>Redis服务器启动程序</td></tr><tr><td><code>redis-cli</code></td><td>Redis命令行客户端</td></tr><tr><td><code>redis-benchmark</code></td><td>性能测试工具</td></tr><tr><td><code>redis-check-aof</code></td><td>AOF文件修复工具</td></tr><tr><td><code>redis-check-rdb</code></td><td>RDB文件修复工具</td></tr><tr><td><code>redis-sentinel</code></td><td>哨兵模式启动程序（用于集群）</td></tr></tbody></table><h4 id="步骤5：启动Redis"><a href="#步骤5：启动Redis" class="headerlink" title="步骤5：启动Redis"></a>步骤5：启动Redis</h4><h5 id="方式1：前台启动（不推荐）"><a href="#方式1：前台启动（不推荐）" class="headerlink" title="方式1：前台启动（不推荐）"></a>方式1：前台启动（不推荐）</h5><p>前台启动会占用当前命令行窗口，窗口关闭则服务停止。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直接启动</span></span><br><span class="line">redis-server</span><br></pre></td></tr></table></figure><p><img src="/images/redis/image.png" alt="前台启动"></p><h5 id="方式2：后台启动（推荐）"><a href="#方式2：后台启动（推荐）" class="headerlink" title="方式2：后台启动（推荐）"></a>方式2：后台启动（推荐）</h5><p><strong>配置步骤</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 创建配置文件目录</span></span><br><span class="line"><span class="built_in">mkdir</span> /myredis</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 复制配置文件</span></span><br><span class="line"><span class="built_in">cp</span> /opt/redis-6.2.1/redis.conf /myredis/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 修改配置文件</span></span><br><span class="line">vim /myredis/redis.conf</span><br></pre></td></tr></table></figure><p>找到 <code>daemonize</code> 配置项，修改为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 将 no 改为 yes，启用后台运行</span><br><span class="line">daemonize yes</span><br></pre></td></tr></table></figure><p><img src="/images/redis/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.png" alt="配置文件修改"></p><p><strong>启动服务</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定配置文件启动</span></span><br><span class="line">redis-server /myredis/redis.conf</span><br></pre></td></tr></table></figure><p><strong>连接测试</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 连接到默认端口6379</span></span><br><span class="line">redis-cli</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或指定端口连接</span></span><br><span class="line">redis-cli -p 6379</span><br></pre></td></tr></table></figure><p><strong>验证连接</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; ping</span><br><span class="line">PONG</span><br></pre></td></tr></table></figure><h4 id="步骤6：关闭Redis"><a href="#步骤6：关闭Redis" class="headerlink" title="步骤6：关闭Redis"></a>步骤6：关闭Redis</h4><h5 id="单实例关闭"><a href="#单实例关闭" class="headerlink" title="单实例关闭"></a>单实例关闭</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方式1：直接关闭</span></span><br><span class="line">redis-cli shutdown</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式2：进入客户端后关闭</span></span><br><span class="line">redis-cli</span><br><span class="line">127.0.0.1:6379&gt; shutdown</span><br><span class="line">not connected&gt;</span><br></pre></td></tr></table></figure><h5 id="多实例关闭"><a href="#多实例关闭" class="headerlink" title="多实例关闭"></a>多实例关闭</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定端口关闭</span></span><br><span class="line">redis-cli -p 6379 shutdown</span><br></pre></td></tr></table></figure><p><strong>完整操作示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@chad bin]# redis-server /myredis/redis.conf</span><br><span class="line">[root@chad bin]# redis-cli</span><br><span class="line">127.0.0.1:6379&gt; ping</span><br><span class="line">PONG</span><br><span class="line">127.0.0.1:6379&gt; shutdown</span><br><span class="line">not connected&gt;</span><br></pre></td></tr></table></figure><h3 id="2-2-基础配置"><a href="#2-2-基础配置" class="headerlink" title="2.2 基础配置"></a>2.2 基础配置</h3><h4 id="默认端口"><a href="#默认端口" class="headerlink" title="默认端口"></a>默认端口</h4><p>Redis默认使用 <strong>6379</strong> 端口。</p><blockquote><p><strong>小知识</strong>：6379在手机按键上对应MERZ，是意大利歌女Alessia Merz的名字，Redis作者antirez是她的粉丝。</p></blockquote><h4 id="数据库配置"><a href="#数据库配置" class="headerlink" title="数据库配置"></a>数据库配置</h4><p>Redis默认有 <strong>16个数据库</strong>（编号0-15），初始默认使用 <strong>0号库</strong>。</p><p><strong>常用命令</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换到指定数据库</span></span><br><span class="line">SELECT &lt;dbid&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例：切换到8号库</span></span><br><span class="line">SELECT 8</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看当前数据库key的数量</span></span><br><span class="line">DBSIZE</span><br><span class="line"></span><br><span class="line"><span class="comment"># 清空当前库</span></span><br><span class="line">FLUSHDB</span><br><span class="line"></span><br><span class="line"><span class="comment"># 清空所有库（慎用！）</span></span><br><span class="line">FLUSHALL</span><br></pre></td></tr></table></figure><p><strong>操作示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SELECT 8</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[8]&gt; DBSIZE</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">127.0.0.1:6379[8]&gt; SET mykey <span class="string">&quot;test&quot;</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[8]&gt; DBSIZE</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br></pre></td></tr></table></figure><h4 id="密码配置"><a href="#密码配置" class="headerlink" title="密码配置"></a>密码配置</h4><p>Redis采用<strong>统一密码管理</strong>，所有数据库使用相同的密码。</p><p><strong>设置密码</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方式1：命令行临时设置（重启失效）</span></span><br><span class="line">127.0.0.1:6379&gt; CONFIG SET requirepass <span class="string">&quot;your_password&quot;</span></span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式2：配置文件永久设置</span></span><br><span class="line">vim /myredis/redis.conf</span><br></pre></td></tr></table></figure><p>在配置文件中找到并修改：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 取消注释并设置密码</span><br><span class="line">requirepass your_password</span><br></pre></td></tr></table></figure><p><strong>使用密码连接</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方式1：连接时指定密码</span></span><br><span class="line">redis-cli -a your_password</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式2：连接后认证</span></span><br><span class="line">redis-cli</span><br><span class="line">127.0.0.1:6379&gt; AUTH your_password</span><br><span class="line">OK</span><br></pre></td></tr></table></figure><h4 id="其他重要配置"><a href="#其他重要配置" class="headerlink" title="其他重要配置"></a>其他重要配置</h4><table><thead><tr><th>配置项</th><th>说明</th><th>默认值</th><th>推荐值</th></tr></thead><tbody><tr><td><code>bind</code></td><td>绑定IP地址</td><td><code>127.0.0.1</code></td><td><code>0.0.0.0</code>（允许远程连接）</td></tr><tr><td><code>port</code></td><td>监听端口</td><td><code>6379</code></td><td>按需修改</td></tr><tr><td><code>daemonize</code></td><td>后台运行</td><td><code>no</code></td><td><code>yes</code></td></tr><tr><td><code>databases</code></td><td>数据库数量</td><td><code>16</code></td><td>按需调整</td></tr><tr><td><code>maxmemory</code></td><td>最大内存限制</td><td>无限制</td><td>建议设置（如<code>2gb</code>）</td></tr><tr><td><code>maxmemory-policy</code></td><td>内存淘汰策略</td><td><code>noeviction</code></td><td><code>allkeys-lru</code></td></tr><tr><td><code>logfile</code></td><td>日志文件路径</td><td><code>&quot;&quot;</code></td><td><code>/var/log/redis/redis.log</code></td></tr></tbody></table><p><strong>配置示例</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 允许远程访问（注意安全）</span><br><span class="line">bind 0.0.0.0</span><br><span class="line"></span><br><span class="line"># 端口</span><br><span class="line">port 6379</span><br><span class="line"></span><br><span class="line"># 后台运行</span><br><span class="line">daemonize yes</span><br><span class="line"></span><br><span class="line"># 数据库数量</span><br><span class="line">databases 16</span><br><span class="line"></span><br><span class="line"># 最大内存2GB</span><br><span class="line">maxmemory 2gb</span><br><span class="line"></span><br><span class="line"># 内存淘汰策略：优先删除最近最少使用的key</span><br><span class="line">maxmemory-policy allkeys-lru</span><br><span class="line"></span><br><span class="line"># 日志文件</span><br><span class="line">logfile &quot;/var/log/redis/redis.log&quot;</span><br><span class="line"></span><br><span class="line"># 持久化文件目录</span><br><span class="line">dir /var/lib/redis/</span><br></pre></td></tr></table></figure><blockquote><p><strong>安全提示</strong>：如果设置了 <code>bind 0.0.0.0</code> 允许远程访问，务必设置强密码并配置防火墙规则！</p></blockquote><hr><h2 id="3-Redis基础数据类型"><a href="#3-Redis基础数据类型" class="headerlink" title="3. Redis基础数据类型"></a>3. Redis基础数据类型</h2><h3 id="Redis键-key-通用命令"><a href="#Redis键-key-通用命令" class="headerlink" title="Redis键(key)通用命令"></a>Redis键(key)通用命令</h3><p>在学习各种数据类型之前，先了解Redis中<strong>所有数据类型通用的key操作命令</strong>。</p><h4 id="常用Key命令"><a href="#常用Key命令" class="headerlink" title="常用Key命令"></a>常用Key命令</h4><table><thead><tr><th>命令</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td><code>KEYS pattern</code></td><td>查看符合模板的所有key</td><td><code>KEYS *</code>（查看所有）<br><code>KEYS *1</code>（查看以1结尾的）</td></tr><tr><td><code>EXISTS key</code></td><td>判断key是否存在</td><td><code>EXISTS name</code><br>返回1表示存在，0表示不存在</td></tr><tr><td><code>TYPE key</code></td><td>查看key的数据类型</td><td><code>TYPE name</code><br>返回：string&#x2F;list&#x2F;hash&#x2F;set&#x2F;zset</td></tr><tr><td><code>DEL key [key ...]</code></td><td>删除指定的key（阻塞）</td><td><code>DEL name age</code><br>返回删除的key数量</td></tr><tr><td><code>UNLINK key [key ...]</code></td><td>非阻塞删除key</td><td><code>UNLINK name age</code><br>异步删除，性能更好</td></tr><tr><td><code>EXPIRE key seconds</code></td><td>设置key的过期时间（秒）</td><td><code>EXPIRE name 10</code><br>10秒后过期</td></tr><tr><td><code>TTL key</code></td><td>查看key剩余过期时间</td><td><code>TTL name</code><br>-1：永不过期<br>-2：已过期</td></tr><tr><td><code>RENAME key newkey</code></td><td>重命名key</td><td><code>RENAME oldname newname</code></td></tr><tr><td><code>MOVE key db</code></td><td>移动key到其他数据库</td><td><code>MOVE name 1</code>（移动到1号库）</td></tr></tbody></table><p><strong>操作示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SET name <span class="string">&quot;Redis&quot;</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; SET age <span class="string">&quot;5&quot;</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; KEYS *</span><br><span class="line">1) <span class="string">&quot;name&quot;</span></span><br><span class="line">2) <span class="string">&quot;age&quot;</span></span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; EXISTS name</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; TYPE name</span><br><span class="line">string</span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; EXPIRE name 60</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; TTL name</span><br><span class="line">(<span class="built_in">integer</span>) 57</span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; TTL name</span><br><span class="line">(<span class="built_in">integer</span>) -2</span><br><span class="line">127.0.0.1:6379&gt; EXISTS name</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br></pre></td></tr></table></figure><blockquote><p><strong>注意</strong>：<code>DEL</code> 是阻塞删除，删除大key时会阻塞Redis服务；<code>UNLINK</code> 是非阻塞删除，仅将key从keyspace元数据中删除，真正的删除在后续异步操作中完成，推荐使用！</p></blockquote><h3 id="3-1-String（字符串）"><a href="#3-1-String（字符串）" class="headerlink" title="3.1 String（字符串）"></a>3.1 String（字符串）</h3><h4 id="类型介绍"><a href="#类型介绍" class="headerlink" title="类型介绍"></a>类型介绍</h4><p>String是Redis<strong>最基本</strong>的数据类型，一个key对应一个value。</p><p><strong>特点</strong>：</p><ul><li>与Memcached的类型一致，都是简单的key-value存储</li><li><strong>二进制安全</strong>：可以包含任何数据，如文本、数字、jpg图片、序列化对象等</li><li><strong>最大值</strong>：单个value最多可以存储 <strong>512MB</strong></li></ul><p><strong>应用场景</strong>：</p><ul><li>缓存：缓存用户信息、商品详情等</li><li>计数器：点赞数、浏览量、库存数量</li><li>分布式锁：利用SETNX实现</li><li>限流：记录接口调用次数</li></ul><h4 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h4><h5 id="1-基础操作"><a href="#1-基础操作" class="headerlink" title="1. 基础操作"></a>1. 基础操作</h5><table><thead><tr><th>命令</th><th>说明</th><th>示例</th><th>返回值</th></tr></thead><tbody><tr><td><code>SET key value [EX seconds] [NX|XX]</code></td><td>设置键值</td><td><code>SET name &quot;Redis&quot;</code></td><td>OK</td></tr><tr><td><code>GET key</code></td><td>获取值</td><td><code>GET name</code></td><td>“Redis”</td></tr><tr><td><code>APPEND key value</code></td><td>追加值到末尾</td><td><code>APPEND name &quot;DB&quot;</code></td><td>新字符串长度</td></tr><tr><td><code>STRLEN key</code></td><td>获取值的长度</td><td><code>STRLEN name</code></td><td>字符串长度</td></tr><tr><td><code>SETNX key value</code></td><td>不存在时才设置</td><td><code>SETNX lock &quot;1&quot;</code></td><td>1成功，0失败</td></tr><tr><td><code>SETEX key seconds value</code></td><td>设置值+过期时间</td><td><code>SETEX code 60 &quot;123456&quot;</code></td><td>OK</td></tr><tr><td><code>GETSET key value</code></td><td>设置新值并返回旧值</td><td><code>GETSET name &quot;MySQL&quot;</code></td><td>旧值</td></tr></tbody></table><p><strong>SET命令的可选参数</strong>：</p><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td><code>EX seconds</code></td><td>设置过期时间（秒）</td></tr><tr><td><code>PX milliseconds</code></td><td>设置过期时间（毫秒）</td></tr><tr><td><code>NX</code></td><td>仅当key不存在时才设置（Not eXists）</td></tr><tr><td><code>XX</code></td><td>仅当key存在时才设置（eXists）</td></tr></tbody></table><p><strong>示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SET name <span class="string">&quot;Redis&quot;</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; GET name</span><br><span class="line"><span class="string">&quot;Redis&quot;</span></span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; APPEND name <span class="string">&quot; Database&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 14</span><br><span class="line">127.0.0.1:6379&gt; GET name</span><br><span class="line"><span class="string">&quot;Redis Database&quot;</span></span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; STRLEN name</span><br><span class="line">(<span class="built_in">integer</span>) 14</span><br><span class="line"></span><br><span class="line"><span class="comment"># NX参数：key不存在时才设置</span></span><br><span class="line">127.0.0.1:6379&gt; SET lock <span class="string">&quot;user123&quot;</span> NX EX 10</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; SET lock <span class="string">&quot;user456&quot;</span> NX</span><br><span class="line">(nil)  <span class="comment"># 设置失败，因为key已存在</span></span><br></pre></td></tr></table></figure><h5 id="2-数值操作"><a href="#2-数值操作" class="headerlink" title="2. 数值操作"></a>2. 数值操作</h5><p>String类型支持对数字进行原子性的递增&#x2F;递减操作。</p><table><thead><tr><th>命令</th><th>说明</th><th>示例</th><th>返回值</th></tr></thead><tbody><tr><td><code>INCR key</code></td><td>值自增1</td><td><code>INCR counter</code></td><td>自增后的值</td></tr><tr><td><code>DECR key</code></td><td>值自减1</td><td><code>DECR counter</code></td><td>自减后的值</td></tr><tr><td><code>INCRBY key increment</code></td><td>值增加指定步长</td><td><code>INCRBY counter 10</code></td><td>增加后的值</td></tr><tr><td><code>DECRBY key decrement</code></td><td>值减少指定步长</td><td><code>DECRBY counter 5</code></td><td>减少后的值</td></tr><tr><td><code>INCRBYFLOAT key increment</code></td><td>浮点数增加</td><td><code>INCRBYFLOAT price 0.5</code></td><td>增加后的值</td></tr></tbody></table><p><strong>特性</strong>：</p><ul><li>只能对<strong>数字值</strong>操作</li><li>如果key不存在，会先初始化为0，再执行操作</li><li>操作是<strong>原子性</strong>的，线程安全</li></ul><p><strong>示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SET counter 100</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; INCR counter</span><br><span class="line">(<span class="built_in">integer</span>) 101</span><br><span class="line">127.0.0.1:6379&gt; INCRBY counter 10</span><br><span class="line">(<span class="built_in">integer</span>) 111</span><br><span class="line">127.0.0.1:6379&gt; DECR counter</span><br><span class="line">(<span class="built_in">integer</span>) 110</span><br><span class="line">127.0.0.1:6379&gt; DECRBY counter 5</span><br><span class="line">(<span class="built_in">integer</span>) 105</span><br><span class="line"></span><br><span class="line"><span class="comment"># key不存在时，从0开始</span></span><br><span class="line">127.0.0.1:6379&gt; INCR newCounter</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br></pre></td></tr></table></figure><h5 id="3-批量操作"><a href="#3-批量操作" class="headerlink" title="3. 批量操作"></a>3. 批量操作</h5><table><thead><tr><th>命令</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td><code>MSET key1 value1 key2 value2 ...</code></td><td>同时设置多个键值对</td><td><code>MSET name &quot;Redis&quot; age &quot;5&quot;</code></td></tr><tr><td><code>MGET key1 key2 key3 ...</code></td><td>同时获取多个值</td><td><code>MGET name age</code></td></tr><tr><td><code>MSETNX key1 value1 key2 value2 ...</code></td><td>批量设置（仅当所有key都不存在）</td><td><code>MSETNX k1 &quot;v1&quot; k2 &quot;v2&quot;</code></td></tr></tbody></table><p><strong>MSETNX特性</strong>：</p><ul><li><strong>原子性</strong>：要么全部成功，要么全部失败</li><li>只要有一个key存在，所有设置都会失败</li></ul><p><strong>示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; MSET name <span class="string">&quot;Redis&quot;</span> <span class="built_in">type</span> <span class="string">&quot;NoSQL&quot;</span> version <span class="string">&quot;6.2&quot;</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; MGET name <span class="built_in">type</span> version</span><br><span class="line">1) <span class="string">&quot;Redis&quot;</span></span><br><span class="line">2) <span class="string">&quot;NoSQL&quot;</span></span><br><span class="line">3) <span class="string">&quot;6.2&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># MSETNX - 原子性操作</span></span><br><span class="line">127.0.0.1:6379&gt; MSETNX k1 <span class="string">&quot;v1&quot;</span> k2 <span class="string">&quot;v2&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 1  <span class="comment"># 成功</span></span><br><span class="line">127.0.0.1:6379&gt; MSETNX k1 <span class="string">&quot;v1_new&quot;</span> k3 <span class="string">&quot;v3&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 0  <span class="comment"># 失败，因为k1已存在，k3也不会设置</span></span><br><span class="line">127.0.0.1:6379&gt; GET k3</span><br><span class="line">(nil)</span><br></pre></td></tr></table></figure><h5 id="4-范围操作"><a href="#4-范围操作" class="headerlink" title="4. 范围操作"></a>4. 范围操作</h5><table><thead><tr><th>命令</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td><code>GETRANGE key start end</code></td><td>获取指定范围的子串</td><td><code>GETRANGE name 0 4</code></td></tr><tr><td><code>SETRANGE key offset value</code></td><td>从指定位置开始覆写</td><td><code>SETRANGE name 0 &quot;MySQL&quot;</code></td></tr></tbody></table><p><strong>特点</strong>：</p><ul><li>索引从<strong>0</strong>开始</li><li><code>GETRANGE</code> 包含起始和结束位置（类似Java的substring，但是<strong>前包后包</strong>）</li><li>支持负数索引：-1表示最后一个字符，-2表示倒数第二个</li></ul><p><strong>示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SET greeting <span class="string">&quot;Hello Redis&quot;</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; GETRANGE greeting 0 4</span><br><span class="line"><span class="string">&quot;Hello&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; GETRANGE greeting 6 -1</span><br><span class="line"><span class="string">&quot;Redis&quot;</span></span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; SETRANGE greeting 6 <span class="string">&quot;World&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 11</span><br><span class="line">127.0.0.1:6379&gt; GET greeting</span><br><span class="line"><span class="string">&quot;Hello World&quot;</span></span><br></pre></td></tr></table></figure><h4 id="原子性说明"><a href="#原子性说明" class="headerlink" title="原子性说明"></a>原子性说明</h4><p>Redis的<strong>单条命令</strong>都是原子性的，这是由Redis的<strong>单线程</strong>特性决定的。</p><p><strong>原子操作定义</strong>：</p><ul><li>不会被线程调度机制打断的操作</li><li>一旦开始就会运行到结束，中间不会有任何上下文切换</li></ul><p><strong>实现原理</strong>：</p><ol><li><strong>单线程环境</strong>：在单条指令中完成的操作都是原子的，因为中断只能发生在指令之间</li><li><strong>多线程环境</strong>：不能被其他进程&#x2F;线程打断的操作才是原子的</li><li><strong>Redis保证</strong>：单命令的原子性主要得益于Redis的单线程模型</li></ol><p><strong>对比示例</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Java中的i++不是原子操作</span></span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">// 两个线程分别对i进行++100次</span></span><br><span class="line"><span class="comment">// 最终结果可能是：102、150、198等，不一定是200</span></span><br><span class="line"><span class="comment">// 因为i++包含三步：读取、计算、写入，可能被打断</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Redis中的INCR是原子操作</span></span><br><span class="line">INCR counter  <span class="comment">// 读取、计算、写入一次性完成，不会被打断</span></span><br></pre></td></tr></table></figure><h4 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h4><p>String类型的底层实现是<strong>SDS（Simple Dynamic String，简单动态字符串）</strong>。</p><p><strong>SDS vs C字符串</strong>：</p><table><thead><tr><th>特性</th><th>SDS</th><th>C字符串</th></tr></thead><tbody><tr><td>获取长度</td><td>O(1)</td><td>O(n)</td></tr><tr><td>缓冲区溢出</td><td>不会溢出（自动扩容）</td><td>可能溢出</td></tr><tr><td>二进制安全</td><td>是</td><td>否</td></tr><tr><td>内存重分配</td><td>空间预分配+惰性释放</td><td>每次修改都需要</td></tr></tbody></table><p><strong>SDS结构</strong>：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sdshdr</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> len;        <span class="comment">// 已使用长度</span></span><br><span class="line">    <span class="type">int</span> <span class="built_in">free</span>;       <span class="comment">// 未使用长度</span></span><br><span class="line">    <span class="type">char</span> buf[];     <span class="comment">// 字节数组</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>优化策略</strong>：</p><ul><li><strong>空间预分配</strong>：扩容时预留额外空间，减少重分配次数</li><li><strong>惰性释放</strong>：缩短时不立即释放内存，留待后用</li><li><strong>长度缓存</strong>：记录字符串长度，获取长度O(1)</li></ul><h3 id="3-2-Hash（哈希）"><a href="#3-2-Hash（哈希）" class="headerlink" title="3.2 Hash（哈希）"></a>3.2 Hash（哈希）</h3><h4 id="类型介绍-1"><a href="#类型介绍-1" class="headerlink" title="类型介绍"></a>类型介绍</h4><p>Hash是一个<strong>键值对集合</strong>，是一个string类型的field和value的映射表。</p><p><strong>特点</strong>：</p><ul><li>类似Java中的 <code>Map&lt;String, Object&gt;</code> 结构</li><li>特别适合存储<strong>对象</strong></li><li>可以通过 <code>key + field</code> 精确定位到具体属性</li><li>既不需要重复存储数据，也避免了序列化和并发修改问题</li></ul><p><strong>应用场景</strong>：</p><ul><li><strong>用户信息存储</strong>：用户ID作为key，姓名、年龄、生日等作为field</li><li><strong>商品信息</strong>：商品ID作为key，名称、价格、库存等作为field</li><li><strong>购物车</strong>：用户ID作为key，商品ID作为field，数量作为value</li><li><strong>会话缓存</strong>：session ID作为key，各种session属性作为field</li></ul><p><strong>存储结构示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 传统String方式：需要序列化整个对象</span></span><br><span class="line">user:1001 -&gt; &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;张三&quot;</span>,<span class="string">&quot;age&quot;</span>:<span class="string">&quot;25&quot;</span>,<span class="string">&quot;city&quot;</span>:<span class="string">&quot;北京&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Hash方式：可以单独操作每个属性</span></span><br><span class="line">user:1001</span><br><span class="line">    ├─ name: <span class="string">&quot;张三&quot;</span></span><br><span class="line">    ├─ age: <span class="string">&quot;25&quot;</span></span><br><span class="line">    └─ city: <span class="string">&quot;北京&quot;</span></span><br></pre></td></tr></table></figure><h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><table><thead><tr><th>命令</th><th>说明</th><th>示例</th><th>返回值</th></tr></thead><tbody><tr><td><code>HSET key field value</code></td><td>设置单个字段</td><td><code>HSET user:1001 name &quot;张三&quot;</code></td><td>1（新增）或0（更新）</td></tr><tr><td><code>HGET key field</code></td><td>获取单个字段</td><td><code>HGET user:1001 name</code></td><td>“张三”</td></tr><tr><td><code>HMSET key f1 v1 f2 v2 ...</code></td><td>批量设置多个字段</td><td><code>HMSET user:1001 name &quot;张三&quot; age &quot;25&quot;</code></td><td>OK</td></tr><tr><td><code>HMGET key field1 field2 ...</code></td><td>批量获取多个字段</td><td><code>HMGET user:1001 name age</code></td><td>[“张三”, “25”]</td></tr><tr><td><code>HGETALL key</code></td><td>获取所有字段和值</td><td><code>HGETALL user:1001</code></td><td>field1, value1, field2, value2…</td></tr><tr><td><code>HEXISTS key field</code></td><td>判断字段是否存在</td><td><code>HEXISTS user:1001 name</code></td><td>1（存在）或0（不存在）</td></tr><tr><td><code>HKEYS key</code></td><td>获取所有字段名</td><td><code>HKEYS user:1001</code></td><td>[“name”, “age”, “city”]</td></tr><tr><td><code>HVALS key</code></td><td>获取所有值</td><td><code>HVALS user:1001</code></td><td>[“张三”, “25”, “北京”]</td></tr><tr><td><code>HLEN key</code></td><td>获取字段数量</td><td><code>HLEN user:1001</code></td><td>3</td></tr><tr><td><code>HDEL key field1 field2 ...</code></td><td>删除一个或多个字段</td><td><code>HDEL user:1001 age</code></td><td>删除的字段数量</td></tr><tr><td><code>HINCRBY key field increment</code></td><td>字段值增加指定数值</td><td><code>HINCRBY user:1001 age 1</code></td><td>增加后的值</td></tr><tr><td><code>HINCRBYFLOAT key field increment</code></td><td>字段值增加浮点数</td><td><code>HINCRBYFLOAT user:1001 score 0.5</code></td><td>增加后的值</td></tr><tr><td><code>HSETNX key field value</code></td><td>字段不存在时才设置</td><td><code>HSETNX user:1001 email &quot;xx@qq.com&quot;</code></td><td>1（成功）或0（失败）</td></tr></tbody></table><h4 id="操作示例"><a href="#操作示例" class="headerlink" title="操作示例"></a>操作示例</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建用户信息</span></span><br><span class="line">127.0.0.1:6379&gt; HMSET user:1001 name <span class="string">&quot;张三&quot;</span> age <span class="string">&quot;25&quot;</span> city <span class="string">&quot;北京&quot;</span> salary <span class="string">&quot;15000&quot;</span></span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取单个字段</span></span><br><span class="line">127.0.0.1:6379&gt; HGET user:1001 name</span><br><span class="line"><span class="string">&quot;张三&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取多个字段</span></span><br><span class="line">127.0.0.1:6379&gt; HMGET user:1001 name age city</span><br><span class="line">1) <span class="string">&quot;张三&quot;</span></span><br><span class="line">2) <span class="string">&quot;25&quot;</span></span><br><span class="line">3) <span class="string">&quot;北京&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取所有字段</span></span><br><span class="line">127.0.0.1:6379&gt; HGETALL user:1001</span><br><span class="line">1) <span class="string">&quot;name&quot;</span></span><br><span class="line">2) <span class="string">&quot;张三&quot;</span></span><br><span class="line">3) <span class="string">&quot;age&quot;</span></span><br><span class="line">4) <span class="string">&quot;25&quot;</span></span><br><span class="line">5) <span class="string">&quot;city&quot;</span></span><br><span class="line">6) <span class="string">&quot;北京&quot;</span></span><br><span class="line">7) <span class="string">&quot;salary&quot;</span></span><br><span class="line">8) <span class="string">&quot;15000&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断字段是否存在</span></span><br><span class="line">127.0.0.1:6379&gt; HEXISTS user:1001 email</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 增加年龄</span></span><br><span class="line">127.0.0.1:6379&gt; HINCRBY user:1001 age 1</span><br><span class="line">(<span class="built_in">integer</span>) 26</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取所有字段名</span></span><br><span class="line">127.0.0.1:6379&gt; HKEYS user:1001</span><br><span class="line">1) <span class="string">&quot;name&quot;</span></span><br><span class="line">2) <span class="string">&quot;age&quot;</span></span><br><span class="line">3) <span class="string">&quot;city&quot;</span></span><br><span class="line">4) <span class="string">&quot;salary&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除字段</span></span><br><span class="line">127.0.0.1:6379&gt; HDEL user:1001 salary</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br></pre></td></tr></table></figure><h4 id="数据结构-1"><a href="#数据结构-1" class="headerlink" title="数据结构"></a>数据结构</h4><p>Hash类型的底层实现有<strong>两种</strong>数据结构：</p><table><thead><tr><th>数据结构</th><th>使用条件</th><th>特点</th></tr></thead><tbody><tr><td><strong>ziplist（压缩列表）</strong></td><td>• field-value长度较短<br>• 元素个数较少</td><td>紧凑存储，节省内存</td></tr><tr><td><strong>hashtable（哈希表）</strong></td><td>• field-value长度较长<br>• 元素个数较多</td><td>快速查找，O(1)复杂度</td></tr></tbody></table><p><strong>触发条件</strong>（可在redis.conf中配置）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当满足以下任一条件时，从ziplist转为hashtable</span></span><br><span class="line">hash-max-ziplist-entries 512   <span class="comment"># 元素个数超过512</span></span><br><span class="line">hash-max-ziplist-value 64      <span class="comment"># 单个元素大小超过64字节</span></span><br></pre></td></tr></table></figure><p><strong>性能对比</strong>：</p><ul><li><strong>ziplist</strong>：内存占用小，但查找性能O(n)</li><li><strong>hashtable</strong>：查找性能O(1)，但内存占用较大</li></ul><h3 id="3-3-List（列表）"><a href="#3-3-List（列表）" class="headerlink" title="3.3 List（列表）"></a>3.3 List（列表）</h3><h4 id="类型介绍-2"><a href="#类型介绍-2" class="headerlink" title="类型介绍"></a>类型介绍</h4><p>List是一个<strong>简单的字符串列表</strong>，按照插入顺序排序，支持从头部或尾部操作。</p><p><strong>特点</strong>：</p><ul><li><strong>单键多值</strong>：一个key对应多个value</li><li><strong>有序</strong>：按照插入顺序排序</li><li><strong>双向操作</strong>：可以从左边（头部）或右边（尾部）操作</li><li><strong>底层结构</strong>：双向链表，两端操作性能高O(1)，中间操作性能较差O(n)</li><li><strong>可重复</strong>：允许存储重复元素</li></ul><p><strong>应用场景</strong>：</p><ul><li><strong>消息队列</strong>：LPUSH + RPOP &#x3D; 队列，LPUSH + LPOP &#x3D; 栈</li><li><strong>最新列表</strong>：文章列表、评论列表（最新的在前面）</li><li><strong>粉丝列表</strong>：按照关注时间排序</li><li><strong>Timeline时间轴</strong>：微博、朋友圈等社交应用</li></ul><p><strong>存储结构示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从左边插入</span></span><br><span class="line">LPUSH mylist <span class="string">&quot;c&quot;</span> <span class="string">&quot;b&quot;</span> <span class="string">&quot;a&quot;</span></span><br><span class="line">结果：[<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从右边插入</span></span><br><span class="line">RPUSH mylist <span class="string">&quot;d&quot;</span> <span class="string">&quot;e&quot;</span></span><br><span class="line">结果：[<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;e&quot;</span>]</span><br></pre></td></tr></table></figure><h4 id="常用命令-1"><a href="#常用命令-1" class="headerlink" title="常用命令"></a>常用命令</h4><h5 id="1-插入操作"><a href="#1-插入操作" class="headerlink" title="1. 插入操作"></a>1. 插入操作</h5><table><thead><tr><th>命令</th><th>说明</th><th>示例</th><th>返回值</th></tr></thead><tbody><tr><td><code>LPUSH key value1 value2 ...</code></td><td>从左边插入一个或多个值</td><td><code>LPUSH list &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></td><td>列表长度</td></tr><tr><td><code>RPUSH key value1 value2 ...</code></td><td>从右边插入一个或多个值</td><td><code>RPUSH list &quot;x&quot; &quot;y&quot; &quot;z&quot;</code></td><td>列表长度</td></tr><tr><td><code>LPUSHX key value</code></td><td>key存在时从左边插入</td><td><code>LPUSHX list &quot;0&quot;</code></td><td>列表长度</td></tr><tr><td><code>RPUSHX key value</code></td><td>key存在时从右边插入</td><td><code>RPUSHX list &quot;9&quot;</code></td><td>列表长度</td></tr><tr><td><code>LINSERT key BEFORE|AFTER pivot value</code></td><td>在指定元素前&#x2F;后插入</td><td><code>LINSERT list BEFORE &quot;b&quot; &quot;new&quot;</code></td><td>列表长度</td></tr></tbody></table><h5 id="2-弹出操作"><a href="#2-弹出操作" class="headerlink" title="2. 弹出操作"></a>2. 弹出操作</h5><table><thead><tr><th>命令</th><th>说明</th><th>示例</th><th>返回值</th></tr></thead><tbody><tr><td><code>LPOP key</code></td><td>从左边弹出一个值</td><td><code>LPOP list</code></td><td>弹出的值</td></tr><tr><td><code>RPOP key</code></td><td>从右边弹出一个值</td><td><code>RPOP list</code></td><td>弹出的值</td></tr><tr><td><code>BLPOP key1 key2 ... timeout</code></td><td>阻塞式左边弹出</td><td><code>BLPOP list 10</code></td><td>[key, value]</td></tr><tr><td><code>BRPOP key1 key2 ... timeout</code></td><td>阻塞式右边弹出</td><td><code>BRPOP list 10</code></td><td>[key, value]</td></tr><tr><td><code>RPOPLPUSH source destination</code></td><td>从source右边弹出插入destination左边</td><td><code>RPOPLPUSH list1 list2</code></td><td>移动的值</td></tr></tbody></table><blockquote><p><strong>值在键在，值光键亡</strong>：当列表中最后一个元素被弹出时，该key会自动删除</p></blockquote><h5 id="3-查询操作"><a href="#3-查询操作" class="headerlink" title="3. 查询操作"></a>3. 查询操作</h5><table><thead><tr><th>命令</th><th>说明</th><th>示例</th><th>返回值</th></tr></thead><tbody><tr><td><code>LRANGE key start stop</code></td><td>获取指定范围的元素</td><td><code>LRANGE list 0 -1</code></td><td>元素列表</td></tr><tr><td><code>LINDEX key index</code></td><td>获取指定索引的元素</td><td><code>LINDEX list 0</code></td><td>元素值</td></tr><tr><td><code>LLEN key</code></td><td>获取列表长度</td><td><code>LLEN list</code></td><td>列表长度</td></tr></tbody></table><blockquote><p><strong>索引说明</strong>：</p><ul><li>0 表示第一个元素（最左边）</li><li>-1 表示最后一个元素（最右边）</li><li><code>LRANGE list 0 -1</code> 表示获取所有元素</li></ul></blockquote><h5 id="4-修改-删除操作"><a href="#4-修改-删除操作" class="headerlink" title="4. 修改&#x2F;删除操作"></a>4. 修改&#x2F;删除操作</h5><table><thead><tr><th>命令</th><th>说明</th><th>示例</th><th>返回值</th></tr></thead><tbody><tr><td><code>LSET key index value</code></td><td>修改指定索引的值</td><td><code>LSET list 0 &quot;new&quot;</code></td><td>OK</td></tr><tr><td><code>LREM key count value</code></td><td>删除count个指定值</td><td><code>LREM list 2 &quot;a&quot;</code></td><td>删除的数量</td></tr><tr><td><code>LTRIM key start stop</code></td><td>保留指定范围，删除其他</td><td><code>LTRIM list 0 2</code></td><td>OK</td></tr></tbody></table><p><strong>LREM的count参数</strong>：</p><ul><li><code>count &gt; 0</code>：从左边删除count个value</li><li><code>count &lt; 0</code>：从右边删除|count|个value</li><li><code>count = 0</code>：删除所有value</li></ul><h4 id="操作示例-1"><a href="#操作示例-1" class="headerlink" title="操作示例"></a>操作示例</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从左边插入</span></span><br><span class="line">127.0.0.1:6379&gt; LPUSH mylist <span class="string">&quot;c&quot;</span> <span class="string">&quot;b&quot;</span> <span class="string">&quot;a&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line">127.0.0.1:6379&gt; LRANGE mylist 0 -1</span><br><span class="line">1) <span class="string">&quot;a&quot;</span></span><br><span class="line">2) <span class="string">&quot;b&quot;</span></span><br><span class="line">3) <span class="string">&quot;c&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 从右边插入</span></span><br><span class="line">127.0.0.1:6379&gt; RPUSH mylist <span class="string">&quot;d&quot;</span> <span class="string">&quot;e&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 5</span><br><span class="line">127.0.0.1:6379&gt; LRANGE mylist 0 -1</span><br><span class="line">1) <span class="string">&quot;a&quot;</span></span><br><span class="line">2) <span class="string">&quot;b&quot;</span></span><br><span class="line">3) <span class="string">&quot;c&quot;</span></span><br><span class="line">4) <span class="string">&quot;d&quot;</span></span><br><span class="line">5) <span class="string">&quot;e&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取指定元素</span></span><br><span class="line">127.0.0.1:6379&gt; LINDEX mylist 0</span><br><span class="line"><span class="string">&quot;a&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; LINDEX mylist -1</span><br><span class="line"><span class="string">&quot;e&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取列表长度</span></span><br><span class="line">127.0.0.1:6379&gt; LLEN mylist</span><br><span class="line">(<span class="built_in">integer</span>) 5</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从左边弹出</span></span><br><span class="line">127.0.0.1:6379&gt; LPOP mylist</span><br><span class="line"><span class="string">&quot;a&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; LRANGE mylist 0 -1</span><br><span class="line">1) <span class="string">&quot;b&quot;</span></span><br><span class="line">2) <span class="string">&quot;c&quot;</span></span><br><span class="line">3) <span class="string">&quot;d&quot;</span></span><br><span class="line">4) <span class="string">&quot;e&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在指定元素前插入</span></span><br><span class="line">127.0.0.1:6379&gt; LINSERT mylist BEFORE <span class="string">&quot;c&quot;</span> <span class="string">&quot;new&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 5</span><br><span class="line">127.0.0.1:6379&gt; LRANGE mylist 0 -1</span><br><span class="line">1) <span class="string">&quot;b&quot;</span></span><br><span class="line">2) <span class="string">&quot;new&quot;</span></span><br><span class="line">3) <span class="string">&quot;c&quot;</span></span><br><span class="line">4) <span class="string">&quot;d&quot;</span></span><br><span class="line">5) <span class="string">&quot;e&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除指定值</span></span><br><span class="line">127.0.0.1:6379&gt; LREM mylist 1 <span class="string">&quot;new&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改指定索引的值</span></span><br><span class="line">127.0.0.1:6379&gt; LSET mylist 0 <span class="string">&quot;B&quot;</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; LRANGE mylist 0 -1</span><br><span class="line">1) <span class="string">&quot;B&quot;</span></span><br><span class="line">2) <span class="string">&quot;c&quot;</span></span><br><span class="line">3) <span class="string">&quot;d&quot;</span></span><br><span class="line">4) <span class="string">&quot;e&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># RPOPLPUSH 实现队列轮转</span></span><br><span class="line">127.0.0.1:6379&gt; RPOPLPUSH mylist mylist</span><br><span class="line"><span class="string">&quot;e&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; LRANGE mylist 0 -1</span><br><span class="line">1) <span class="string">&quot;e&quot;</span></span><br><span class="line">2) <span class="string">&quot;B&quot;</span></span><br><span class="line">3) <span class="string">&quot;c&quot;</span></span><br><span class="line">4) <span class="string">&quot;d&quot;</span></span><br></pre></td></tr></table></figure><h4 id="数据结构-2"><a href="#数据结构-2" class="headerlink" title="数据结构"></a>数据结构</h4><p>List的底层实现是 <strong>quickList（快速链表）</strong>。</p><p><strong>演进过程</strong>：</p><table><thead><tr><th>版本</th><th>数据结构</th><th>说明</th></tr></thead><tbody><tr><td><strong>早期版本</strong></td><td>ziplist 或 linkedlist</td><td>元素少用ziplist，元素多用linkedlist</td></tr><tr><td><strong>Redis 3.2+</strong></td><td><strong>quicklist</strong></td><td>结合ziplist和linkedlist的优点</td></tr></tbody></table><p><strong>quicklist结构</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">quicklist = ziplist + linkedlist</span><br><span class="line"></span><br><span class="line">[ziplist1] &lt;-&gt; [ziplist2] &lt;-&gt; [ziplist3] &lt;-&gt; [ziplist4]</span><br><span class="line">    ↓              ↓              ↓              ↓</span><br><span class="line"> [a,b,c]       [d,e,f]       [g,h,i]       [j,k,l]</span><br></pre></td></tr></table></figure><p><strong>设计理念</strong>：</p><ul><li>将多个 <strong>ziplist</strong> 使用<strong>双向指针</strong>串起来</li><li>每个ziplist存储一部分连续的元素</li><li>既满足了快速的插入删除性能，又避免了大量指针空间浪费</li></ul><p><strong>优势</strong>：</p><ol><li><strong>ziplist</strong>：紧凑存储，节省内存</li><li><strong>linkedlist</strong>：双向链表，插入删除快O(1)</li><li><strong>quicklist</strong>：结合两者优点，平衡性能和内存</li></ol><p><strong>对比普通链表</strong>：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 普通链表：每个节点都有prev和next指针</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">listNode</span> &#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">listNode</span> *<span class="title">prev</span>;</span>  <span class="comment">// 8字节</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">listNode</span> *<span class="title">next</span>;</span>  <span class="comment">// 8字节</span></span><br><span class="line">    <span class="type">void</span> *value;            <span class="comment">// 8字节</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 存储一个int(4字节)需要24字节，空间浪费严重！</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// quicklist：多个元素共享一组指针</span></span><br><span class="line"><span class="comment">// 存储12个int，只需要2个指针，空间利用率大幅提升</span></span><br></pre></td></tr></table></figure><h3 id="3-4-Set（集合）"><a href="#3-4-Set（集合）" class="headerlink" title="3.4 Set（集合）"></a>3.4 Set（集合）</h3><h4 id="类型介绍-3"><a href="#类型介绍-3" class="headerlink" title="类型介绍"></a>类型介绍</h4><p>Set是一个<strong>无序、不重复</strong>的字符串集合。</p><p><strong>特点</strong>：</p><ul><li><strong>自动去重</strong>：不允许重复元素</li><li><strong>无序性</strong>：元素没有顺序</li><li><strong>高效性</strong>：添加、删除、查找的复杂度都是 <strong>O(1)</strong></li><li><strong>底层结构</strong>：value为null的hash表</li></ul><p><strong>应用场景</strong>：</p><ul><li><strong>标签系统</strong>：一篇文章的标签、一个用户的兴趣标签</li><li><strong>共同好友</strong>：利用交集操作</li><li><strong>抽奖系统</strong>：SPOP随机抽取，自动去重</li><li><strong>点赞&#x2F;收藏</strong>：记录点赞用户ID，自动去重</li><li><strong>黑名单&#x2F;白名单</strong>：快速判断用户是否在名单中</li></ul><p><strong>对比List</strong>：</p><table><thead><tr><th>特性</th><th>Set</th><th>List</th></tr></thead><tbody><tr><td>重复</td><td>不允许重复</td><td>允许重复</td></tr><tr><td>顺序</td><td>无序</td><td>有序（插入顺序）</td></tr><tr><td>查找成员</td><td>O(1)</td><td>O(n)</td></tr><tr><td>集合运算</td><td>支持（交集、并集、差集）</td><td>不支持</td></tr></tbody></table><h4 id="常用命令-2"><a href="#常用命令-2" class="headerlink" title="常用命令"></a>常用命令</h4><h5 id="1-基础操作-1"><a href="#1-基础操作-1" class="headerlink" title="1. 基础操作"></a>1. 基础操作</h5><table><thead><tr><th>命令</th><th>说明</th><th>示例</th><th>返回值</th></tr></thead><tbody><tr><td><code>SADD key member1 member2 ...</code></td><td>添加一个或多个元素</td><td><code>SADD tags &quot;Java&quot; &quot;Redis&quot;</code></td><td>成功添加的数量</td></tr><tr><td><code>SMEMBERS key</code></td><td>获取所有元素</td><td><code>SMEMBERS tags</code></td><td>元素列表</td></tr><tr><td><code>SISMEMBER key member</code></td><td>判断元素是否存在</td><td><code>SISMEMBER tags &quot;Java&quot;</code></td><td>1（存在）或0（不存在）</td></tr><tr><td><code>SCARD key</code></td><td>获取元素个数</td><td><code>SCARD tags</code></td><td>元素数量</td></tr><tr><td><code>SREM key member1 member2 ...</code></td><td>删除一个或多个元素</td><td><code>SREM tags &quot;Java&quot;</code></td><td>成功删除的数量</td></tr><tr><td><code>SPOP key [count]</code></td><td>随机弹出一个或多个元素</td><td><code>SPOP tags 2</code></td><td>弹出的元素</td></tr><tr><td><code>SRANDMEMBER key [count]</code></td><td>随机获取元素（不删除）</td><td><code>SRANDMEMBER tags 3</code></td><td>随机元素列表</td></tr></tbody></table><blockquote><p><strong>SADD自动去重</strong>：已存在的元素会被自动忽略，不会重复添加</p></blockquote><h5 id="2-集合运算"><a href="#2-集合运算" class="headerlink" title="2. 集合运算"></a>2. 集合运算</h5><table><thead><tr><th>命令</th><th>说明</th><th>示例</th><th>返回值</th></tr></thead><tbody><tr><td><code>SINTER key1 key2 ...</code></td><td>交集</td><td><code>SINTER set1 set2</code></td><td>交集元素列表</td></tr><tr><td><code>SINTERSTORE dest key1 key2 ...</code></td><td>交集并存储</td><td><code>SINTERSTORE result set1 set2</code></td><td>交集元素数量</td></tr><tr><td><code>SUNION key1 key2 ...</code></td><td>并集</td><td><code>SUNION set1 set2</code></td><td>并集元素列表</td></tr><tr><td><code>SUNIONSTORE dest key1 key2 ...</code></td><td>并集并存储</td><td><code>SUNIONSTORE result set1 set2</code></td><td>并集元素数量</td></tr><tr><td><code>SDIFF key1 key2 ...</code></td><td>差集</td><td><code>SDIFF set1 set2</code></td><td>差集元素列表</td></tr><tr><td><code>SDIFFSTORE dest key1 key2 ...</code></td><td>差集并存储</td><td><code>SDIFFSTORE result set1 set2</code></td><td>差集元素数量</td></tr><tr><td><code>SMOVE source dest member</code></td><td>移动元素</td><td><code>SMOVE set1 set2 &quot;Java&quot;</code></td><td>1（成功）或0（失败）</td></tr></tbody></table><p><strong>集合运算说明</strong>：</p><ul><li><strong>交集（SINTER）</strong>：A ∩ B，两个集合都有的元素</li><li><strong>并集（SUNION）</strong>：A ∪ B，两个集合的所有元素（去重）</li><li><strong>差集（SDIFF）</strong>：A - B，在A中但不在B中的元素</li></ul><h4 id="操作示例-2"><a href="#操作示例-2" class="headerlink" title="操作示例"></a>操作示例</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加元素</span></span><br><span class="line">127.0.0.1:6379&gt; SADD tags <span class="string">&quot;Java&quot;</span> <span class="string">&quot;Redis&quot;</span> <span class="string">&quot;MySQL&quot;</span> <span class="string">&quot;Spring&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取所有元素</span></span><br><span class="line">127.0.0.1:6379&gt; SMEMBERS tags</span><br><span class="line">1) <span class="string">&quot;Java&quot;</span></span><br><span class="line">2) <span class="string">&quot;Redis&quot;</span></span><br><span class="line">3) <span class="string">&quot;MySQL&quot;</span></span><br><span class="line">4) <span class="string">&quot;Spring&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断元素是否存在</span></span><br><span class="line">127.0.0.1:6379&gt; SISMEMBER tags <span class="string">&quot;Java&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; SISMEMBER tags <span class="string">&quot;Python&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取元素个数</span></span><br><span class="line">127.0.0.1:6379&gt; SCARD tags</span><br><span class="line">(<span class="built_in">integer</span>) 4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 随机获取元素（不删除）</span></span><br><span class="line">127.0.0.1:6379&gt; SRANDMEMBER tags 2</span><br><span class="line">1) <span class="string">&quot;Redis&quot;</span></span><br><span class="line">2) <span class="string">&quot;Java&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 随机弹出元素（删除）</span></span><br><span class="line">127.0.0.1:6379&gt; SPOP tags</span><br><span class="line"><span class="string">&quot;MySQL&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; SMEMBERS tags</span><br><span class="line">1) <span class="string">&quot;Java&quot;</span></span><br><span class="line">2) <span class="string">&quot;Redis&quot;</span></span><br><span class="line">3) <span class="string">&quot;Spring&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 集合运算示例</span></span><br><span class="line">127.0.0.1:6379&gt; SADD user:1:tags <span class="string">&quot;Java&quot;</span> <span class="string">&quot;Redis&quot;</span> <span class="string">&quot;MySQL&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line">127.0.0.1:6379&gt; SADD user:2:tags <span class="string">&quot;Java&quot;</span> <span class="string">&quot;Python&quot;</span> <span class="string">&quot;Redis&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 交集：共同标签</span></span><br><span class="line">127.0.0.1:6379&gt; SINTER user:1:tags user:2:tags</span><br><span class="line">1) <span class="string">&quot;Java&quot;</span></span><br><span class="line">2) <span class="string">&quot;Redis&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 并集：所有标签</span></span><br><span class="line">127.0.0.1:6379&gt; SUNION user:1:tags user:2:tags</span><br><span class="line">1) <span class="string">&quot;Java&quot;</span></span><br><span class="line">2) <span class="string">&quot;Redis&quot;</span></span><br><span class="line">3) <span class="string">&quot;MySQL&quot;</span></span><br><span class="line">4) <span class="string">&quot;Python&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 差集：user1独有的标签</span></span><br><span class="line">127.0.0.1:6379&gt; SDIFF user:1:tags user:2:tags</span><br><span class="line">1) <span class="string">&quot;MySQL&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 移动元素</span></span><br><span class="line">127.0.0.1:6379&gt; SMOVE user:1:tags user:2:tags <span class="string">&quot;MySQL&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br></pre></td></tr></table></figure><h4 id="实际应用案例"><a href="#实际应用案例" class="headerlink" title="实际应用案例"></a>实际应用案例</h4><h5 id="案例1：共同好友"><a href="#案例1：共同好友" class="headerlink" title="案例1：共同好友"></a>案例1：共同好友</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用户A的好友</span></span><br><span class="line">SADD user:A:friends <span class="string">&quot;userB&quot;</span> <span class="string">&quot;userC&quot;</span> <span class="string">&quot;userD&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用户E的好友</span></span><br><span class="line">SADD user:E:friends <span class="string">&quot;userC&quot;</span> <span class="string">&quot;userD&quot;</span> <span class="string">&quot;userF&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找A和E的共同好友</span></span><br><span class="line">SINTER user:A:friends user:E:friends</span><br><span class="line"><span class="comment"># 结果：[&quot;userC&quot;, &quot;userD&quot;]</span></span><br></pre></td></tr></table></figure><h5 id="案例2：抽奖系统"><a href="#案例2：抽奖系统" class="headerlink" title="案例2：抽奖系统"></a>案例2：抽奖系统</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加参与抽奖的用户</span></span><br><span class="line">SADD lottery:2024 <span class="string">&quot;user1&quot;</span> <span class="string">&quot;user2&quot;</span> <span class="string">&quot;user3&quot;</span> <span class="string">&quot;user4&quot;</span> <span class="string">&quot;user5&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 抽取1个一等奖</span></span><br><span class="line">SPOP lottery:2024 1</span><br><span class="line"><span class="comment"># 结果：[&quot;user3&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 抽取2个二等奖</span></span><br><span class="line">SPOP lottery:2024 2</span><br><span class="line"><span class="comment"># 结果：[&quot;user1&quot;, &quot;user5&quot;]</span></span><br></pre></td></tr></table></figure><h5 id="案例3：标签系统"><a href="#案例3：标签系统" class="headerlink" title="案例3：标签系统"></a>案例3：标签系统</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 给文章添加标签</span></span><br><span class="line">SADD article:1001:tags <span class="string">&quot;Java&quot;</span> <span class="string">&quot;后端&quot;</span> <span class="string">&quot;Redis&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询某个标签是否存在</span></span><br><span class="line">SISMEMBER article:1001:tags <span class="string">&quot;Java&quot;</span></span><br><span class="line"><span class="comment"># 结果：1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取文章的所有标签</span></span><br><span class="line">SMEMBERS article:1001:tags</span><br><span class="line"><span class="comment"># 结果：[&quot;Java&quot;, &quot;后端&quot;, &quot;Redis&quot;]</span></span><br></pre></td></tr></table></figure><h4 id="数据结构-3"><a href="#数据结构-3" class="headerlink" title="数据结构"></a>数据结构</h4><p>Set的底层实现是 <strong>dict字典</strong>（哈希表）。</p><p><strong>实现原理</strong>：</p><ul><li>类似Java中的 <code>HashSet</code></li><li>Java的 <code>HashSet</code> 内部使用 <code>HashMap</code> 实现，所有value都指向同一个对象</li><li>Redis的Set也是使用hash结构，<strong>所有的value都指向同一个内部值（NULL）</strong></li></ul><p><strong>结构对比</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Java HashSet实现</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HashSet</span>&lt;E&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> HashMap&lt;E, Object&gt; map;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">PRESENT</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> map.put(e, PRESENT) == <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Redis Set实现（伪代码）</span></span><br><span class="line">struct set &#123;</span><br><span class="line">    dict *dict;  <span class="comment">// 哈希表</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 添加元素时：dict[member] = NULL</span></span><br></pre></td></tr></table></figure><p><strong>性能特点</strong>：</p><table><thead><tr><th>操作</th><th>时间复杂度</th><th>说明</th></tr></thead><tbody><tr><td>SADD</td><td>O(1)</td><td>哈希表直接定位</td></tr><tr><td>SREM</td><td>O(1)</td><td>哈希表直接定位</td></tr><tr><td>SISMEMBER</td><td>O(1)</td><td>哈希表直接判断</td></tr><tr><td>SMEMBERS</td><td>O(n)</td><td>需要遍历所有元素</td></tr><tr><td>SINTER</td><td>O(n*m)</td><td>n为最小集合元素数，m为集合个数</td></tr></tbody></table><p><strong>优化策略</strong>：</p><ul><li>当Set中只包含<strong>整数值</strong>且<strong>元素数量较少</strong>时，使用 <strong>intset</strong>（整数集合）</li><li>其他情况使用 <strong>hashtable</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># intset触发条件（可在redis.conf中配置）</span></span><br><span class="line">set-max-intset-entries 512  <span class="comment"># 元素个数不超过512时使用intset</span></span><br></pre></td></tr></table></figure><h3 id="3-5-ZSet（有序集合）"><a href="#3-5-ZSet（有序集合）" class="headerlink" title="3.5 ZSet（有序集合）"></a>3.5 ZSet（有序集合）</h3><h4 id="类型介绍-4"><a href="#类型介绍-4" class="headerlink" title="类型介绍"></a>类型介绍</h4><p>ZSet（Sorted Set）是一个<strong>有序、不重复</strong>的字符串集合，每个成员都关联一个<strong>分数（score）</strong>。</p><p><strong>特点</strong>：</p><ul><li><strong>有序性</strong>：按照score从低到高排序</li><li><strong>不重复</strong>：member唯一，但score可以重复</li><li><strong>双重索引</strong>：既可以通过member查询，也可以通过score范围查询</li><li><strong>高效性</strong>：插入、删除、查找都很快</li></ul><p><strong>应用场景</strong>：</p><ul><li><strong>排行榜</strong>：游戏排行、销量排行、热搜榜</li><li><strong>延迟队列</strong>：使用时间戳作为score</li><li><strong>优先级队列</strong>：不同优先级的任务</li><li><strong>访问统计</strong>：文章浏览量、点击量排序</li><li><strong>范围查找</strong>：工资范围查询、年龄范围查询</li></ul><p><strong>对比其他集合</strong>：</p><table><thead><tr><th>特性</th><th>Set</th><th>ZSet</th></tr></thead><tbody><tr><td>排序</td><td>无序</td><td>有序（按score）</td></tr><tr><td>重复</td><td>不允许</td><td>member不重复，score可重复</td></tr><tr><td>索引</td><td>仅member</td><td>member + score双重索引</td></tr><tr><td>应用</td><td>标签、去重</td><td>排行榜、优先级队列</td></tr></tbody></table><p><strong>存储结构示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 游戏排行榜</span></span><br><span class="line">player_rank</span><br><span class="line">    ├─ (<span class="string">&quot;Alice&quot;</span>, 1500)    <span class="comment"># member: Alice, score: 1500</span></span><br><span class="line">    ├─ (<span class="string">&quot;Bob&quot;</span>, 2000)      <span class="comment"># member: Bob, score: 2000</span></span><br><span class="line">    └─ (<span class="string">&quot;Charlie&quot;</span>, 2500)  <span class="comment"># member: Charlie, score: 2500</span></span><br></pre></td></tr></table></figure><h4 id="常用命令-3"><a href="#常用命令-3" class="headerlink" title="常用命令"></a>常用命令</h4><h5 id="1-基础操作-2"><a href="#1-基础操作-2" class="headerlink" title="1. 基础操作"></a>1. 基础操作</h5><table><thead><tr><th>命令</th><th>说明</th><th>示例</th><th>返回值</th></tr></thead><tbody><tr><td><code>ZADD key score1 member1 score2 member2 ...</code></td><td>添加一个或多个元素</td><td><code>ZADD rank 100 &quot;Alice&quot;</code></td><td>成功添加的数量</td></tr><tr><td><code>ZCARD key</code></td><td>获取元素个数</td><td><code>ZCARD rank</code></td><td>元素数量</td></tr><tr><td><code>ZSCORE key member</code></td><td>获取元素的分数</td><td><code>ZSCORE rank &quot;Alice&quot;</code></td><td>分数值</td></tr><tr><td><code>ZINCRBY key increment member</code></td><td>给元素的分数增加increment</td><td><code>ZINCRBY rank 10 &quot;Alice&quot;</code></td><td>增加后的分数</td></tr><tr><td><code>ZREM key member1 member2 ...</code></td><td>删除一个或多个元素</td><td><code>ZREM rank &quot;Alice&quot;</code></td><td>成功删除的数量</td></tr><tr><td><code>ZCOUNT key min max</code></td><td>统计分数区间内的元素个数</td><td><code>ZCOUNT rank 0 100</code></td><td>元素数量</td></tr></tbody></table><h5 id="2-范围查询（按索引）"><a href="#2-范围查询（按索引）" class="headerlink" title="2. 范围查询（按索引）"></a>2. 范围查询（按索引）</h5><table><thead><tr><th>命令</th><th>说明</th><th>示例</th><th>返回值</th></tr></thead><tbody><tr><td><code>ZRANGE key start stop [WITHSCORES]</code></td><td>按索引获取元素（升序）</td><td><code>ZRANGE rank 0 9 WITHSCORES</code></td><td>元素列表</td></tr><tr><td><code>ZREVRANGE key start stop [WITHSCORES]</code></td><td>按索引获取元素（降序）</td><td><code>ZREVRANGE rank 0 9 WITHSCORES</code></td><td>元素列表</td></tr><tr><td><code>ZRANK key member</code></td><td>获取元素排名（升序，从0开始）</td><td><code>ZRANK rank &quot;Alice&quot;</code></td><td>排名</td></tr><tr><td><code>ZREVRANK key member</code></td><td>获取元素排名（降序，从0开始）</td><td><code>ZREVRANK rank &quot;Alice&quot;</code></td><td>排名</td></tr></tbody></table><blockquote><p><strong>WITHSCORES参数</strong>：加上此参数可以同时返回分数</p></blockquote><h5 id="3-范围查询（按分数）"><a href="#3-范围查询（按分数）" class="headerlink" title="3. 范围查询（按分数）"></a>3. 范围查询（按分数）</h5><table><thead><tr><th>命令</th><th>说明</th><th>示例</th><th>返回值</th></tr></thead><tbody><tr><td><code>ZRANGEBYSCORE key min max [WITHSCORES] [LIMIT offset count]</code></td><td>按分数范围获取（升序）</td><td><code>ZRANGEBYSCORE rank 0 100</code></td><td>元素列表</td></tr><tr><td><code>ZREVRANGEBYSCORE key max min [WITHSCORES] [LIMIT offset count]</code></td><td>按分数范围获取（降序）</td><td><code>ZREVRANGEBYSCORE rank 100 0</code></td><td>元素列表</td></tr><tr><td><code>ZREMRANGEBYRANK key start stop</code></td><td>删除指定排名范围的元素</td><td><code>ZREMRANGEBYRANK rank 0 2</code></td><td>删除的数量</td></tr><tr><td><code>ZREMRANGEBYSCORE key min max</code></td><td>删除指定分数范围的元素</td><td><code>ZREMRANGEBYSCORE rank 0 100</code></td><td>删除的数量</td></tr></tbody></table><p><strong>分数范围语法</strong>：</p><ul><li><code>ZRANGEBYSCORE key 0 100</code>：0 ≤ score ≤ 100</li><li><code>ZRANGEBYSCORE key (0 (100</code>：0 &lt; score &lt; 100（括号表示开区间）</li><li><code>ZRANGEBYSCORE key -inf +inf</code>：所有元素（-inf表示负无穷，+inf表示正无穷）</li></ul><h4 id="操作示例-3"><a href="#操作示例-3" class="headerlink" title="操作示例"></a>操作示例</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加游戏玩家分数</span></span><br><span class="line">127.0.0.1:6379&gt; ZADD game:rank 1500 <span class="string">&quot;Alice&quot;</span> 2000 <span class="string">&quot;Bob&quot;</span> 1800 <span class="string">&quot;Charlie&quot;</span> 2200 <span class="string">&quot;David&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有玩家（升序）</span></span><br><span class="line">127.0.0.1:6379&gt; ZRANGE game:rank 0 -1 WITHSCORES</span><br><span class="line">1) <span class="string">&quot;Alice&quot;</span></span><br><span class="line">2) <span class="string">&quot;1500&quot;</span></span><br><span class="line">3) <span class="string">&quot;Charlie&quot;</span></span><br><span class="line">4) <span class="string">&quot;1800&quot;</span></span><br><span class="line">5) <span class="string">&quot;Bob&quot;</span></span><br><span class="line">6) <span class="string">&quot;2000&quot;</span></span><br><span class="line">7) <span class="string">&quot;David&quot;</span></span><br><span class="line">8) <span class="string">&quot;2200&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看前3名（降序）</span></span><br><span class="line">127.0.0.1:6379&gt; ZREVRANGE game:rank 0 2 WITHSCORES</span><br><span class="line">1) <span class="string">&quot;David&quot;</span></span><br><span class="line">2) <span class="string">&quot;2200&quot;</span></span><br><span class="line">3) <span class="string">&quot;Bob&quot;</span></span><br><span class="line">4) <span class="string">&quot;2000&quot;</span></span><br><span class="line">5) <span class="string">&quot;Charlie&quot;</span></span><br><span class="line">6) <span class="string">&quot;1800&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取Alice的分数</span></span><br><span class="line">127.0.0.1:6379&gt; ZSCORE game:rank <span class="string">&quot;Alice&quot;</span></span><br><span class="line"><span class="string">&quot;1500&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 给Alice加100分</span></span><br><span class="line">127.0.0.1:6379&gt; ZINCRBY game:rank 100 <span class="string">&quot;Alice&quot;</span></span><br><span class="line"><span class="string">&quot;1600&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看Alice的排名（升序，从0开始）</span></span><br><span class="line">127.0.0.1:6379&gt; ZRANK game:rank <span class="string">&quot;Alice&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看Alice的排名（降序，从0开始）</span></span><br><span class="line">127.0.0.1:6379&gt; ZREVRANK game:rank <span class="string">&quot;Alice&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看1800-2000分的玩家</span></span><br><span class="line">127.0.0.1:6379&gt; ZRANGEBYSCORE game:rank 1800 2000 WITHSCORES</span><br><span class="line">1) <span class="string">&quot;Alice&quot;</span></span><br><span class="line">2) <span class="string">&quot;1600&quot;</span></span><br><span class="line">3) <span class="string">&quot;Charlie&quot;</span></span><br><span class="line">4) <span class="string">&quot;1800&quot;</span></span><br><span class="line">5) <span class="string">&quot;Bob&quot;</span></span><br><span class="line">6) <span class="string">&quot;2000&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计1500-2000分的玩家数量</span></span><br><span class="line">127.0.0.1:6379&gt; ZCOUNT game:rank 1500 2000</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除分数低于1600的玩家</span></span><br><span class="line">127.0.0.1:6379&gt; ZREMRANGEBYSCORE game:rank -inf 1600</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取元素总数</span></span><br><span class="line">127.0.0.1:6379&gt; ZCARD game:rank</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br></pre></td></tr></table></figure><h4 id="实际应用案例-1"><a href="#实际应用案例-1" class="headerlink" title="实际应用案例"></a>实际应用案例</h4><h5 id="案例1：文章访问量排行榜"><a href="#案例1：文章访问量排行榜" class="headerlink" title="案例1：文章访问量排行榜"></a>案例1：文章访问量排行榜</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 初始化文章访问量</span></span><br><span class="line">ZADD article:views 100 <span class="string">&quot;article:1001&quot;</span> 230 <span class="string">&quot;article:1002&quot;</span> 85 <span class="string">&quot;article:1003&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文章被访问，访问量+1</span></span><br><span class="line">ZINCRBY article:views 1 <span class="string">&quot;article:1001&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取访问量最高的10篇文章</span></span><br><span class="line">ZREVRANGE article:views 0 9 WITHSCORES</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取某篇文章的访问量</span></span><br><span class="line">ZSCORE article:views <span class="string">&quot;article:1001&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取某篇文章的排名（第几名）</span></span><br><span class="line">ZREVRANK article:views <span class="string">&quot;article:1001&quot;</span></span><br></pre></td></tr></table></figure><h5 id="案例2：延迟队列"><a href="#案例2：延迟队列" class="headerlink" title="案例2：延迟队列"></a>案例2：延迟队列</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加延迟任务（使用时间戳作为score）</span></span><br><span class="line">ZADD delay:queue 1699999999 <span class="string">&quot;task:1&quot;</span> 1700000100 <span class="string">&quot;task:2&quot;</span> 1700000200 <span class="string">&quot;task:3&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取当前时间戳之前的所有任务（到期的任务）</span></span><br><span class="line">ZRANGEBYSCORE delay:queue -inf 1700000000</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行任务后删除</span></span><br><span class="line">ZREM delay:queue <span class="string">&quot;task:1&quot;</span></span><br></pre></td></tr></table></figure><h5 id="案例3：工资范围查询"><a href="#案例3：工资范围查询" class="headerlink" title="案例3：工资范围查询"></a>案例3：工资范围查询</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加员工工资信息</span></span><br><span class="line">ZADD employee:salary 5000 <span class="string">&quot;emp:1001&quot;</span> 8000 <span class="string">&quot;emp:1002&quot;</span> 12000 <span class="string">&quot;emp:1003&quot;</span> 15000 <span class="string">&quot;emp:1004&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询工资在8000-12000之间的员工</span></span><br><span class="line">ZRANGEBYSCORE employee:salary 8000 12000</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询工资超过10000的员工数量</span></span><br><span class="line">ZCOUNT employee:salary 10000 +inf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取工资最高的5名员工</span></span><br><span class="line">ZREVRANGE employee:salary 0 4 WITHSCORES</span><br></pre></td></tr></table></figure><h4 id="数据结构-4"><a href="#数据结构-4" class="headerlink" title="数据结构"></a>数据结构</h4><p>ZSet的底层实现使用了<strong>两个数据结构</strong>：</p><h5 id="1-Hash（哈希表）"><a href="#1-Hash（哈希表）" class="headerlink" title="1. Hash（哈希表）"></a>1. Hash（哈希表）</h5><p><strong>作用</strong>：</p><ul><li>关联 <strong>member</strong> 和 <strong>score</strong></li><li>保障member的唯一性</li><li>通过member快速找到score：<strong>O(1)</strong></li></ul><h5 id="2-Skip-List（跳跃表）"><a href="#2-Skip-List（跳跃表）" class="headerlink" title="2. Skip List（跳跃表）"></a>2. Skip List（跳跃表）</h5><p><strong>作用</strong>：</p><ul><li>按照score给member排序</li><li>支持按score范围查询</li><li>插入、删除、查找的平均时间复杂度：<strong>O(log n)</strong></li></ul><p><strong>跳跃表原理</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">层级4:  1 --------------------------------&gt; 50</span><br><span class="line">层级3:  1 ----------&gt; 20 -----------------&gt; 50</span><br><span class="line">层级2:  1 -----&gt; 10 -&gt; 20 -&gt; 30 ----------&gt; 50</span><br><span class="line">层级1:  1 -&gt; 5 -&gt; 10 -&gt; 20 -&gt; 30 -&gt; 40 -&gt; 50  (原始链表)</span><br></pre></td></tr></table></figure><p><strong>跳跃表优势</strong>：</p><ul><li><strong>查找效率</strong>：接近二分查找，O(log n)</li><li><strong>实现简单</strong>：比红黑树简单</li><li><strong>区间查询</strong>：天然支持范围查询</li></ul><p><strong>对比其他结构</strong>：</p><table><thead><tr><th>数据结构</th><th>插入&#x2F;删除</th><th>查找</th><th>范围查询</th><th>实现复杂度</th></tr></thead><tbody><tr><td><strong>跳跃表</strong></td><td>O(log n)</td><td>O(log n)</td><td>✅ 支持</td><td>简单</td></tr><tr><td><strong>红黑树</strong></td><td>O(log n)</td><td>O(log n)</td><td>✅ 支持</td><td>复杂</td></tr><tr><td><strong>哈希表</strong></td><td>O(1)</td><td>O(1)</td><td>❌ 不支持</td><td>简单</td></tr><tr><td><strong>数组</strong></td><td>O(n)</td><td>O(n)</td><td>✅ 支持</td><td>简单</td></tr></tbody></table><p><strong>ZSet &#x3D; Hash + Skip List</strong>：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ZSet结构（简化版）</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">zset</span> &#123;</span></span><br><span class="line">    dict *dict;         <span class="comment">// 哈希表：member -&gt; score</span></span><br><span class="line">    zskiplist *zsl;     <span class="comment">// 跳跃表：按score排序</span></span><br><span class="line">&#125; zset;</span><br></pre></td></tr></table></figure><p><strong>为什么需要两个数据结构？</strong></p><ol><li><p><strong>Hash</strong>：通过member快速获取score（O(1)）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZSCORE key member  <span class="comment"># 需要哈希表</span></span><br></pre></td></tr></table></figure></li><li><p><strong>Skip List</strong>：按score排序和范围查询（O(log n)）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ZRANGE key 0 10           <span class="comment"># 需要跳跃表</span></span><br><span class="line">ZRANGEBYSCORE key 0 100   <span class="comment"># 需要跳跃表</span></span><br></pre></td></tr></table></figure></li></ol><p><strong>性能总结</strong>：</p><table><thead><tr><th>操作</th><th>时间复杂度</th><th>使用的结构</th></tr></thead><tbody><tr><td>ZADD</td><td>O(log n)</td><td>Hash + Skip List</td></tr><tr><td>ZREM</td><td>O(log n)</td><td>Hash + Skip List</td></tr><tr><td>ZSCORE</td><td>O(1)</td><td>Hash</td></tr><tr><td>ZRANK</td><td>O(log n)</td><td>Skip List</td></tr><tr><td>ZRANGE</td><td>O(log n + m)</td><td>Skip List（m为返回元素数）</td></tr><tr><td>ZRANGEBYSCORE</td><td>O(log n + m)</td><td>Skip List</td></tr></tbody></table><hr><h2 id="4-Redis配置文件详解"><a href="#4-Redis配置文件详解" class="headerlink" title="4. Redis配置文件详解"></a>4. Redis配置文件详解</h2><p>Redis的配置文件（redis.conf）是Redis服务器的核心配置文件，合理配置可以大幅提升Redis的性能和安全性。</p><blockquote><p><strong>配置文件位置</strong>：</p><ul><li>默认路径：<code>/etc/redis/redis.conf</code></li><li>自定义路径：<code>/myredis/redis.conf</code>（可自定义）</li><li>启动时指定：<code>redis-server /path/to/redis.conf</code></li></ul></blockquote><h3 id="4-1-Units（单位）"><a href="#4-1-Units（单位）" class="headerlink" title="4.1 Units（单位）"></a>4.1 Units（单位）</h3><p>配置文件开头定义了一些基本的度量单位。</p><p><strong>特点</strong>：</p><ul><li>只支持 <strong>bytes</strong>（字节），不支持 <strong>bit</strong>（位）</li><li><strong>大小写不敏感</strong>（1GB &#x3D; 1gb &#x3D; 1Gb）</li></ul><p><strong>示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 单位换算</span></span><br><span class="line">1k =&gt; 1000 bytes</span><br><span class="line">1kb =&gt; 1024 bytes</span><br><span class="line">1m =&gt; 1000000 bytes</span><br><span class="line">1mb =&gt; 1024*1024 bytes</span><br><span class="line">1g =&gt; 1000000000 bytes</span><br><span class="line">1gb =&gt; 1024*1024*1024 bytes</span><br></pre></td></tr></table></figure><h3 id="4-2-INCLUDES（包含）"><a href="#4-2-INCLUDES（包含）" class="headerlink" title="4.2 INCLUDES（包含）"></a>4.2 INCLUDES（包含）</h3><p>支持包含其他配置文件，类似于JSP中的include。</p><p><strong>应用场景</strong>：</p><ul><li><strong>多实例部署</strong>：提取公共配置</li><li><strong>配置模块化</strong>：按功能拆分配置文件</li><li><strong>环境隔离</strong>：开发、测试、生产环境的差异化配置</li></ul><p><strong>示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 包含一个或多个其他配置文件</span></span><br><span class="line">include /path/to/common.conf</span><br><span class="line">include /path/to/redis-common.conf</span><br></pre></td></tr></table></figure><h3 id="4-3-NETWORK（网络配置）"><a href="#4-3-NETWORK（网络配置）" class="headerlink" title="4.3 NETWORK（网络配置）"></a>4.3 NETWORK（网络配置）</h3><h4 id="常用网络配置项"><a href="#常用网络配置项" class="headerlink" title="常用网络配置项"></a>常用网络配置项</h4><table><thead><tr><th>配置项</th><th>说明</th><th>默认值</th><th>推荐配置</th></tr></thead><tbody><tr><td><code>bind</code></td><td>绑定的IP地址</td><td>127.0.0.1</td><td>生产环境配置应用服务器IP</td></tr><tr><td><code>protected-mode</code></td><td>保护模式</td><td>yes</td><td>远程访问设置为no</td></tr><tr><td><code>port</code></td><td>监听端口</td><td>6379</td><td>保持默认或自定义</td></tr><tr><td><code>tcp-backlog</code></td><td>TCP连接队列长度</td><td>511</td><td>高并发场景增大</td></tr><tr><td><code>timeout</code></td><td>客户端空闲超时时间（秒）</td><td>0（永不超时）</td><td>300（5分钟）</td></tr><tr><td><code>tcp-keepalive</code></td><td>TCP心跳检测间隔（秒）</td><td>300</td><td>60</td></tr></tbody></table><h4 id="详细说明"><a href="#详细说明" class="headerlink" title="详细说明"></a>详细说明</h4><h5 id="bind（IP绑定）"><a href="#bind（IP绑定）" class="headerlink" title="bind（IP绑定）"></a>bind（IP绑定）</h5><p><strong>作用</strong>：指定Redis监听的IP地址。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 只允许本机访问</span></span><br><span class="line"><span class="built_in">bind</span> 127.0.0.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 允许指定IP访问</span></span><br><span class="line"><span class="built_in">bind</span> 192.168.1.100</span><br><span class="line"></span><br><span class="line"><span class="comment"># 允许多个IP访问</span></span><br><span class="line"><span class="built_in">bind</span> 127.0.0.1 192.168.1.100</span><br><span class="line"></span><br><span class="line"><span class="comment"># 允许所有IP访问（注释掉bind或不配置）</span></span><br><span class="line"><span class="comment"># bind 127.0.0.1</span></span><br></pre></td></tr></table></figure><p><strong>注意事项</strong>：</p><ul><li>默认 <code>bind 127.0.0.1</code>，只能本机访问</li><li>不配置bind，则无限制接受任何IP访问（<strong>不安全</strong>）</li><li>生产环境建议绑定应用服务器的IP</li><li>如果需要远程访问，需要注释掉bind配置</li></ul><h5 id="protected-mode（保护模式）"><a href="#protected-mode（保护模式）" class="headerlink" title="protected-mode（保护模式）"></a>protected-mode（保护模式）</h5><p><strong>作用</strong>：Redis 3.2以后的安全保护功能。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启保护模式（默认）</span></span><br><span class="line">protected-mode <span class="built_in">yes</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭保护模式（允许远程访问）</span></span><br><span class="line">protected-mode no</span><br></pre></td></tr></table></figure><p><strong>保护逻辑</strong>：</p><ul><li>当 <code>protected-mode yes</code> 时，如果<strong>没有bind IP</strong>且<strong>没有设置密码</strong>，Redis只允许本机访问</li><li>如果需要远程访问，必须：<ul><li>设置 <code>protected-mode no</code>，<strong>或</strong></li><li>配置 <code>bind</code> 指定IP，<strong>或</strong></li><li>设置访问密码</li></ul></li></ul><h5 id="port（端口）"><a href="#port（端口）" class="headerlink" title="port（端口）"></a>port（端口）</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认端口</span></span><br><span class="line">port 6379</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义端口</span></span><br><span class="line">port 6380</span><br></pre></td></tr></table></figure><h5 id="tcp-backlog（TCP连接队列）"><a href="#tcp-backlog（TCP连接队列）" class="headerlink" title="tcp-backlog（TCP连接队列）"></a>tcp-backlog（TCP连接队列）</h5><p><strong>作用</strong>：设置TCP连接队列长度。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcp-backlog 511</span><br></pre></td></tr></table></figure><p><strong>连接队列组成</strong>：</p><ul><li><strong>未完成三次握手队列</strong>（SYN队列）</li><li><strong>已完成三次握手队列</strong>（Accept队列）</li><li><strong>总队列 &#x3D; 未完成 + 已完成</strong></li></ul><p><strong>高并发优化</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 修改Redis配置</span></span><br><span class="line">tcp-backlog 2048</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 修改Linux内核参数</span></span><br><span class="line"><span class="comment"># /etc/sysctl.conf</span></span><br><span class="line">net.core.somaxconn = 2048</span><br><span class="line">net.ipv4.tcp_max_syn_backlog = 2048</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 使配置生效</span></span><br><span class="line">sysctl -p</span><br></pre></td></tr></table></figure><blockquote><p><strong>注意</strong>：Linux内核会将backlog值限制为 <code>/proc/sys/net/core/somaxconn</code> 的值（默认128），需要同时调整内核参数。</p></blockquote><h5 id="timeout（客户端超时）"><a href="#timeout（客户端超时）" class="headerlink" title="timeout（客户端超时）"></a>timeout（客户端超时）</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 0表示永不超时</span></span><br><span class="line"><span class="built_in">timeout</span> 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 300秒（5分钟）无操作自动断开</span></span><br><span class="line"><span class="built_in">timeout</span> 300</span><br></pre></td></tr></table></figure><p><strong>建议</strong>：设置合理的超时时间，避免大量空闲连接占用资源。</p><h5 id="tcp-keepalive（心跳检测）"><a href="#tcp-keepalive（心跳检测）" class="headerlink" title="tcp-keepalive（心跳检测）"></a>tcp-keepalive（心跳检测）</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 每60秒检测一次客户端连接</span></span><br><span class="line">tcp-keepalive 60</span><br></pre></td></tr></table></figure><p><strong>作用</strong>：</p><ul><li>检测死连接（客户端崩溃、网络断开等）</li><li>及时释放无效连接</li><li>0表示不检测（不推荐）</li></ul><h3 id="4-4-GENERAL（通用配置）"><a href="#4-4-GENERAL（通用配置）" class="headerlink" title="4.4 GENERAL（通用配置）"></a>4.4 GENERAL（通用配置）</h3><h4 id="常用通用配置项"><a href="#常用通用配置项" class="headerlink" title="常用通用配置项"></a>常用通用配置项</h4><table><thead><tr><th>配置项</th><th>说明</th><th>默认值</th><th>推荐配置</th></tr></thead><tbody><tr><td><code>daemonize</code></td><td>是否后台运行</td><td>no</td><td>yes</td></tr><tr><td><code>pidfile</code></td><td>PID文件路径</td><td>&#x2F;var&#x2F;run&#x2F;redis.pid</td><td>自定义路径</td></tr><tr><td><code>loglevel</code></td><td>日志级别</td><td>notice</td><td>notice&#x2F;warning</td></tr><tr><td><code>logfile</code></td><td>日志文件路径</td><td>“”</td><td>&#x2F;var&#x2F;log&#x2F;redis&#x2F;redis.log</td></tr><tr><td><code>databases</code></td><td>数据库数量</td><td>16</td><td>16</td></tr></tbody></table><h4 id="详细说明-1"><a href="#详细说明-1" class="headerlink" title="详细说明"></a>详细说明</h4><h5 id="daemonize（守护进程）"><a href="#daemonize（守护进程）" class="headerlink" title="daemonize（守护进程）"></a>daemonize（守护进程）</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 前台运行（调试用）</span></span><br><span class="line">daemonize no</span><br><span class="line"></span><br><span class="line"><span class="comment"># 后台运行（生产环境）</span></span><br><span class="line">daemonize <span class="built_in">yes</span></span><br></pre></td></tr></table></figure><h5 id="pidfile（进程ID文件）"><a href="#pidfile（进程ID文件）" class="headerlink" title="pidfile（进程ID文件）"></a>pidfile（进程ID文件）</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 存放Redis进程ID</span></span><br><span class="line">pidfile /var/run/redis_6379.pid</span><br></pre></td></tr></table></figure><p><strong>多实例部署</strong>：每个实例使用不同的pidfile。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 实例1</span></span><br><span class="line">pidfile /var/run/redis_6379.pid</span><br><span class="line"></span><br><span class="line"><span class="comment"># 实例2</span></span><br><span class="line">pidfile /var/run/redis_6380.pid</span><br></pre></td></tr></table></figure><h5 id="loglevel（日志级别）"><a href="#loglevel（日志级别）" class="headerlink" title="loglevel（日志级别）"></a>loglevel（日志级别）</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 四个级别（从详细到简略）</span></span><br><span class="line">loglevel debug      <span class="comment"># 调试信息（开发环境）</span></span><br><span class="line">loglevel verbose    <span class="comment"># 详细信息</span></span><br><span class="line">loglevel notice     <span class="comment"># 通知信息（生产环境推荐）</span></span><br><span class="line">loglevel warning    <span class="comment"># 警告信息（生产环境推荐）</span></span><br></pre></td></tr></table></figure><p><strong>选择建议</strong>：</p><ul><li><strong>开发&#x2F;测试</strong>：debug 或 verbose</li><li><strong>生产环境</strong>：notice 或 warning</li></ul><h5 id="logfile（日志文件）"><a href="#logfile（日志文件）" class="headerlink" title="logfile（日志文件）"></a>logfile（日志文件）</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 标准输出（不记录文件）</span></span><br><span class="line">logfile <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 记录到文件</span></span><br><span class="line">logfile /var/log/redis/redis.log</span><br></pre></td></tr></table></figure><h5 id="databases（数据库数量）"><a href="#databases（数据库数量）" class="headerlink" title="databases（数据库数量）"></a>databases（数据库数量）</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认16个数据库（编号0-15）</span></span><br><span class="line">databases 16</span><br></pre></td></tr></table></figure><p><strong>使用方式</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换到指定数据库</span></span><br><span class="line">SELECT 0   <span class="comment"># 切换到0号库</span></span><br><span class="line">SELECT 8   <span class="comment"># 切换到8号库</span></span><br></pre></td></tr></table></figure><h3 id="4-5-SECURITY（安全配置）"><a href="#4-5-SECURITY（安全配置）" class="headerlink" title="4.5 SECURITY（安全配置）"></a>4.5 SECURITY（安全配置）</h3><h4 id="密码设置"><a href="#密码设置" class="headerlink" title="密码设置"></a>密码设置</h4><p><strong>临时设置</strong>（重启后失效）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在Redis命令行中设置</span></span><br><span class="line">127.0.0.1:6379&gt; CONFIG SET requirepass <span class="string">&quot;your_password&quot;</span></span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看密码</span></span><br><span class="line">127.0.0.1:6379&gt; CONFIG GET requirepass</span><br><span class="line">1) <span class="string">&quot;requirepass&quot;</span></span><br><span class="line">2) <span class="string">&quot;your_password&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用密码登录</span></span><br><span class="line">127.0.0.1:6379&gt; AUTH your_password</span><br><span class="line">OK</span><br></pre></td></tr></table></figure><p><strong>永久设置</strong>（配置文件中）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># redis.conf</span></span><br><span class="line">requirepass your_strong_password_here</span><br></pre></td></tr></table></figure><p><strong>客户端连接使用密码</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方式1：启动时指定</span></span><br><span class="line">redis-cli -a your_password</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式2：连接后认证</span></span><br><span class="line">redis-cli</span><br><span class="line">127.0.0.1:6379&gt; AUTH your_password</span><br><span class="line">OK</span><br></pre></td></tr></table></figure><blockquote><p><strong>安全建议</strong>：</p><ul><li>使用复杂密码（字母+数字+特殊字符）</li><li>定期更换密码</li><li>结合bind和protected-mode使用</li></ul></blockquote><h3 id="4-6-LIMITS（限制配置）"><a href="#4-6-LIMITS（限制配置）" class="headerlink" title="4.6 LIMITS（限制配置）"></a>4.6 LIMITS（限制配置）</h3><h4 id="常用限制配置项"><a href="#常用限制配置项" class="headerlink" title="常用限制配置项"></a>常用限制配置项</h4><table><thead><tr><th>配置项</th><th>说明</th><th>默认值</th><th>建议值</th></tr></thead><tbody><tr><td><code>maxclients</code></td><td>最大客户端连接数</td><td>10000</td><td>根据实际调整</td></tr><tr><td><code>maxmemory</code></td><td>最大内存使用量</td><td>0（无限制）</td><td><strong>必须设置</strong></td></tr><tr><td><code>maxmemory-policy</code></td><td>内存淘汰策略</td><td>noeviction</td><td>根据场景选择</td></tr><tr><td><code>maxmemory-samples</code></td><td>LRU采样数量</td><td>5</td><td>3-7</td></tr></tbody></table><h4 id="详细说明-2"><a href="#详细说明-2" class="headerlink" title="详细说明"></a>详细说明</h4><h5 id="maxclients（最大连接数）"><a href="#maxclients（最大连接数）" class="headerlink" title="maxclients（最大连接数）"></a>maxclients（最大连接数）</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 最多允许10000个客户端同时连接</span></span><br><span class="line">maxclients 10000</span><br></pre></td></tr></table></figure><p><strong>超出限制的表现</strong>：</p><ul><li>拒绝新的连接请求</li><li>返回错误：<code>&quot;max number of clients reached&quot;</code></li></ul><h5 id="maxmemory（最大内存）"><a href="#maxmemory（最大内存）" class="headerlink" title="maxmemory（最大内存）"></a>maxmemory（最大内存）</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不限制（危险！）</span></span><br><span class="line">maxmemory 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 限制为1GB</span></span><br><span class="line">maxmemory 1gb</span><br><span class="line"></span><br><span class="line"><span class="comment"># 限制为512MB</span></span><br><span class="line">maxmemory 512mb</span><br></pre></td></tr></table></figure><blockquote><p><strong>重要提示</strong>：</p><ul><li><strong>生产环境必须设置</strong>，否则可能导致内存占满、服务器宕机</li><li>建议设置为物理内存的 <strong>70-80%</strong></li><li>如果是主从架构，需要预留内存给同步缓冲区</li></ul></blockquote><p><strong>内存达到上限后的行为</strong>：</p><ul><li>根据 <code>maxmemory-policy</code> 策略移除数据</li><li>如果无法移除或设置了 <code>noeviction</code>，写操作（如SET、LPUSH）会返回错误</li><li>读操作（如GET）仍然正常响应</li></ul><h5 id="maxmemory-policy（内存淘汰策略）"><a href="#maxmemory-policy（内存淘汰策略）" class="headerlink" title="maxmemory-policy（内存淘汰策略）"></a>maxmemory-policy（内存淘汰策略）</h5><p>当内存达到上限时，Redis如何处理新的写入请求？</p><p><strong>8种淘汰策略</strong>：</p><table><thead><tr><th>策略</th><th>说明</th><th>适用场景</th></tr></thead><tbody><tr><td><code>volatile-lru</code></td><td>对<strong>设置了过期时间</strong>的key使用LRU算法淘汰</td><td>部分key需要持久化</td></tr><tr><td><code>allkeys-lru</code></td><td>对<strong>所有key</strong>使用LRU算法淘汰</td><td><strong>通用缓存</strong>（推荐）</td></tr><tr><td><code>volatile-lfu</code></td><td>对<strong>设置了过期时间</strong>的key使用LFU算法淘汰</td><td>Redis 4.0+</td></tr><tr><td><code>allkeys-lfu</code></td><td>对<strong>所有key</strong>使用LFU算法淘汰</td><td>Redis 4.0+</td></tr><tr><td><code>volatile-random</code></td><td>对<strong>设置了过期时间</strong>的key随机淘汰</td><td>测试环境</td></tr><tr><td><code>allkeys-random</code></td><td>对<strong>所有key</strong>随机淘汰</td><td>不推荐</td></tr><tr><td><code>volatile-ttl</code></td><td>淘汰<strong>TTL最小</strong>的key（即将过期）</td><td>基于过期时间</td></tr><tr><td><code>noeviction</code></td><td><strong>不淘汰</strong>，写操作返回错误</td><td>严格的数据持久化</td></tr></tbody></table><p><strong>配置示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 推荐：对所有key使用LRU算法</span></span><br><span class="line">maxmemory-policy allkeys-lru</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只对带过期时间的key使用LRU</span></span><br><span class="line">maxmemory-policy volatile-lru</span><br><span class="line"></span><br><span class="line"><span class="comment"># 不淘汰，写满返回错误</span></span><br><span class="line">maxmemory-policy noeviction</span><br></pre></td></tr></table></figure><p><strong>淘汰策略选择建议</strong>：</p><ul><li><strong>场景1：纯缓存场景</strong> → <code>allkeys-lru</code></li><li><strong>场景2：部分数据需要持久化</strong> → <code>volatile-lru</code></li><li><strong>场景3：不允许数据丢失</strong> → <code>noeviction</code></li></ul><p><strong>LRU vs LFU</strong>：</p><ul><li><strong>LRU（Least Recently Used）</strong>：最近最少使用，淘汰最久未访问的</li><li><strong>LFU（Least Frequently Used）</strong>：最不经常使用，淘汰访问频率最低的</li></ul><h5 id="maxmemory-samples（LRU采样数量）"><a href="#maxmemory-samples（LRU采样数量）" class="headerlink" title="maxmemory-samples（LRU采样数量）"></a>maxmemory-samples（LRU采样数量）</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认检查5个key</span></span><br><span class="line">maxmemory-samples 5</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提高精确度</span></span><br><span class="line">maxmemory-samples 7</span><br><span class="line"></span><br><span class="line"><span class="comment"># 降低性能消耗</span></span><br><span class="line">maxmemory-samples 3</span><br></pre></td></tr></table></figure><p><strong>说明</strong>：</p><ul><li>LRU和TTL算法都是<strong>估算值</strong>，不是精确算法</li><li>Redis会随机抽取指定数量的key，从中选择最适合淘汰的</li><li>采样数量越大，结果越精确，但性能消耗越大</li><li>推荐值：<strong>3-7</strong></li></ul><p><strong>性能对比</strong>：</p><table><thead><tr><th>采样数量</th><th>精确度</th><th>性能消耗</th><th>适用场景</th></tr></thead><tbody><tr><td>3</td><td>低</td><td>低</td><td>高并发场景</td></tr><tr><td>5</td><td>中</td><td>中</td><td>通用场景（默认）</td></tr><tr><td>7-10</td><td>高</td><td>高</td><td>对精确度要求高的场景</td></tr></tbody></table><h3 id="配置示例（生产环境推荐）"><a href="#配置示例（生产环境推荐）" class="headerlink" title="配置示例（生产环境推荐）"></a>配置示例（生产环境推荐）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ========== 网络配置 ==========</span></span><br><span class="line"><span class="built_in">bind</span> 192.168.1.100 192.168.1.200    <span class="comment"># 绑定Redis服务器和应用服务器IP</span></span><br><span class="line">protected-mode <span class="built_in">yes</span>                   <span class="comment"># 开启保护模式</span></span><br><span class="line">port 6379</span><br><span class="line">tcp-backlog 2048</span><br><span class="line"><span class="built_in">timeout</span> 300</span><br><span class="line">tcp-keepalive 60</span><br><span class="line"></span><br><span class="line"><span class="comment"># ========== 通用配置 ==========</span></span><br><span class="line">daemonize <span class="built_in">yes</span></span><br><span class="line">pidfile /var/run/redis_6379.pid</span><br><span class="line">loglevel notice</span><br><span class="line">logfile /var/log/redis/redis.log</span><br><span class="line">databases 16</span><br><span class="line"></span><br><span class="line"><span class="comment"># ========== 安全配置 ==========</span></span><br><span class="line">requirepass your_strong_password_2024</span><br><span class="line"></span><br><span class="line"><span class="comment"># ========== 限制配置 ==========</span></span><br><span class="line">maxclients 10000</span><br><span class="line">maxmemory 2gb</span><br><span class="line">maxmemory-policy allkeys-lru</span><br><span class="line">maxmemory-samples 5</span><br></pre></td></tr></table></figure><hr><h2 id="5-Redis发布订阅（Pub-Sub）"><a href="#5-Redis发布订阅（Pub-Sub）" class="headerlink" title="5. Redis发布订阅（Pub&#x2F;Sub）"></a>5. Redis发布订阅（Pub&#x2F;Sub）</h2><h3 id="5-1-什么是发布订阅"><a href="#5-1-什么是发布订阅" class="headerlink" title="5.1 什么是发布订阅"></a>5.1 什么是发布订阅</h3><p>Redis发布订阅（Pub&#x2F;Sub）是一种<strong>消息通信模式</strong>。</p><p><strong>核心概念</strong>：</p><ul><li><strong>发送者（Publisher）</strong>：发布消息</li><li><strong>订阅者（Subscriber）</strong>：接收消息</li><li><strong>频道（Channel）</strong>：消息传递的管道</li></ul><p><strong>特点</strong>：</p><ul><li>一个客户端可以订阅<strong>任意数量</strong>的频道</li><li>支持<strong>一对多</strong>的消息广播</li><li>消息<strong>不持久化</strong>，订阅前的消息无法接收</li></ul><h3 id="5-2-发布订阅模式"><a href="#5-2-发布订阅模式" class="headerlink" title="5.2 发布订阅模式"></a>5.2 发布订阅模式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    发布者                       订阅者</span><br><span class="line">┌─────────┐                 ┌─────────┐</span><br><span class="line">│Publisher│                 │Subscriber│</span><br><span class="line">└────┬────┘                 └────▲────┘</span><br><span class="line">     │                           │</span><br><span class="line">     │ PUBLISH channel1 hello    │ SUBSCRIBE channel1</span><br><span class="line">     │                           │</span><br><span class="line">     └─────────►channel1◄────────┘</span><br><span class="line">               频道</span><br></pre></td></tr></table></figure><h3 id="5-3-常用命令"><a href="#5-3-常用命令" class="headerlink" title="5.3 常用命令"></a>5.3 常用命令</h3><h4 id="订阅命令"><a href="#订阅命令" class="headerlink" title="订阅命令"></a>订阅命令</h4><table><thead><tr><th>命令</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td><code>SUBSCRIBE channel [channel ...]</code></td><td>订阅一个或多个频道</td><td><code>SUBSCRIBE channel1</code></td></tr><tr><td><code>PSUBSCRIBE pattern [pattern ...]</code></td><td>订阅符合模式的频道</td><td><code>PSUBSCRIBE news.*</code></td></tr><tr><td><code>UNSUBSCRIBE [channel ...]</code></td><td>取消订阅频道</td><td><code>UNSUBSCRIBE channel1</code></td></tr><tr><td><code>PUNSUBSCRIBE [pattern ...]</code></td><td>取消订阅模式</td><td><code>PUNSUBSCRIBE news.*</code></td></tr></tbody></table><h4 id="发布命令"><a href="#发布命令" class="headerlink" title="发布命令"></a>发布命令</h4><table><thead><tr><th>命令</th><th>说明</th><th>示例</th><th>返回值</th></tr></thead><tbody><tr><td><code>PUBLISH channel message</code></td><td>向频道发送消息</td><td><code>PUBLISH channel1 &quot;hello&quot;</code></td><td>接收消息的订阅者数量</td></tr></tbody></table><h4 id="查询命令"><a href="#查询命令" class="headerlink" title="查询命令"></a>查询命令</h4><table><thead><tr><th>命令</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td><code>PUBSUB CHANNELS [pattern]</code></td><td>查看活跃的频道</td><td><code>PUBSUB CHANNELS</code></td></tr><tr><td><code>PUBSUB NUMSUB [channel ...]</code></td><td>查看频道订阅者数量</td><td><code>PUBSUB NUMSUB channel1</code></td></tr><tr><td><code>PUBSUB NUMPAT</code></td><td>查看模式订阅数量</td><td><code>PUBSUB NUMPAT</code></td></tr></tbody></table><h3 id="5-4-使用示例"><a href="#5-4-使用示例" class="headerlink" title="5.4 使用示例"></a>5.4 使用示例</h3><h4 id="基础示例：单频道通信"><a href="#基础示例：单频道通信" class="headerlink" title="基础示例：单频道通信"></a>基础示例：单频道通信</h4><p><strong>步骤1：客户端1 - 订阅频道</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 终端1：订阅channel1</span></span><br><span class="line">127.0.0.1:6379&gt; SUBSCRIBE channel1</span><br><span class="line">Reading messages... (press Ctrl-C to quit)</span><br><span class="line">1) <span class="string">&quot;subscribe&quot;</span></span><br><span class="line">2) <span class="string">&quot;channel1&quot;</span></span><br><span class="line">3) (<span class="built_in">integer</span>) 1</span><br></pre></td></tr></table></figure><p><strong>步骤2：客户端2 - 发布消息</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 终端2：向channel1发布消息</span></span><br><span class="line">127.0.0.1:6379&gt; PUBLISH channel1 <span class="string">&quot;hello&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 1    <span class="comment"># 返回1表示有1个订阅者收到消息</span></span><br></pre></td></tr></table></figure><p><strong>步骤3：客户端1 - 接收消息</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 终端1：收到消息</span></span><br><span class="line">1) <span class="string">&quot;message&quot;</span></span><br><span class="line">2) <span class="string">&quot;channel1&quot;</span></span><br><span class="line">3) <span class="string">&quot;hello&quot;</span></span><br></pre></td></tr></table></figure><h4 id="进阶示例：多频道订阅"><a href="#进阶示例：多频道订阅" class="headerlink" title="进阶示例：多频道订阅"></a>进阶示例：多频道订阅</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 订阅多个频道</span></span><br><span class="line">127.0.0.1:6379&gt; SUBSCRIBE channel1 channel2 channel3</span><br><span class="line">Reading messages...</span><br><span class="line">1) <span class="string">&quot;subscribe&quot;</span></span><br><span class="line">2) <span class="string">&quot;channel1&quot;</span></span><br><span class="line">3) (<span class="built_in">integer</span>) 1</span><br><span class="line">1) <span class="string">&quot;subscribe&quot;</span></span><br><span class="line">2) <span class="string">&quot;channel2&quot;</span></span><br><span class="line">3) (<span class="built_in">integer</span>) 2</span><br><span class="line">1) <span class="string">&quot;subscribe&quot;</span></span><br><span class="line">2) <span class="string">&quot;channel3&quot;</span></span><br><span class="line">3) (<span class="built_in">integer</span>) 3</span><br></pre></td></tr></table></figure><h4 id="模式匹配示例"><a href="#模式匹配示例" class="headerlink" title="模式匹配示例"></a>模式匹配示例</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 订阅所有以news开头的频道</span></span><br><span class="line">127.0.0.1:6379&gt; PSUBSCRIBE news.*</span><br><span class="line">Reading messages...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在另一个客户端发布消息</span></span><br><span class="line">127.0.0.1:6379&gt; PUBLISH news.sports <span class="string">&quot;NBA Finals&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; PUBLISH news.tech <span class="string">&quot;AI Breakthrough&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 订阅者会收到所有匹配的消息</span></span><br><span class="line">1) <span class="string">&quot;pmessage&quot;</span></span><br><span class="line">2) <span class="string">&quot;news.*&quot;</span></span><br><span class="line">3) <span class="string">&quot;news.sports&quot;</span></span><br><span class="line">4) <span class="string">&quot;NBA Finals&quot;</span></span><br><span class="line"></span><br><span class="line">1) <span class="string">&quot;pmessage&quot;</span></span><br><span class="line">2) <span class="string">&quot;news.*&quot;</span></span><br><span class="line">3) <span class="string">&quot;news.tech&quot;</span></span><br><span class="line">4) <span class="string">&quot;AI Breakthrough&quot;</span></span><br></pre></td></tr></table></figure><h3 id="5-5-应用场景"><a href="#5-5-应用场景" class="headerlink" title="5.5 应用场景"></a>5.5 应用场景</h3><h4 id="1-实时消息系统"><a href="#1-实时消息系统" class="headerlink" title="1. 实时消息系统"></a>1. 实时消息系统</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 聊天室场景</span></span><br><span class="line"><span class="comment"># 用户加入聊天室</span></span><br><span class="line">SUBSCRIBE chatroom:1001</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用户发送消息</span></span><br><span class="line">PUBLISH chatroom:1001 <span class="string">&quot;张三: 大家好！&quot;</span></span><br><span class="line">PUBLISH chatroom:1001 <span class="string">&quot;李四: 你好！&quot;</span></span><br></pre></td></tr></table></figure><h4 id="2-实时通知"><a href="#2-实时通知" class="headerlink" title="2. 实时通知"></a>2. 实时通知</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 订单状态通知</span></span><br><span class="line"><span class="comment"># 用户订阅自己的订单通知</span></span><br><span class="line">SUBSCRIBE order:user123</span><br><span class="line"></span><br><span class="line"><span class="comment"># 系统发送订单状态变更</span></span><br><span class="line">PUBLISH order:user123 <span class="string">&quot;您的订单已发货&quot;</span></span><br><span class="line">PUBLISH order:user123 <span class="string">&quot;您的订单已签收&quot;</span></span><br></pre></td></tr></table></figure><h4 id="3-日志监控"><a href="#3-日志监控" class="headerlink" title="3. 日志监控"></a>3. 日志监控</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 订阅所有错误日志</span></span><br><span class="line">PSUBSCRIBE log.error.*</span><br><span class="line"></span><br><span class="line"><span class="comment"># 不同服务发布错误日志</span></span><br><span class="line">PUBLISH log.error.api <span class="string">&quot;API服务异常&quot;</span></span><br><span class="line">PUBLISH log.error.db <span class="string">&quot;数据库连接失败&quot;</span></span><br></pre></td></tr></table></figure><h3 id="5-6-注意事项"><a href="#5-6-注意事项" class="headerlink" title="5.6 注意事项"></a>5.6 注意事项</h3><h4 id="重要特性"><a href="#重要特性" class="headerlink" title="重要特性"></a>重要特性</h4><blockquote><p><strong>⚠️ 消息不持久化</strong>：</p><ul><li>发布的消息<strong>不会被保存</strong></li><li>订阅者<strong>只能接收订阅后发布的消息</strong></li><li>如果订阅者不在线，消息会<strong>丢失</strong></li></ul></blockquote><p><strong>示例说明</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 先发布消息</span></span><br><span class="line">PUBLISH channel1 <span class="string">&quot;第一条消息&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 后订阅频道</span></span><br><span class="line">SUBSCRIBE channel1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 结果：无法收到&quot;第一条消息&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 再次发布消息</span></span><br><span class="line">PUBLISH channel1 <span class="string">&quot;第二条消息&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 结果：可以收到&quot;第二条消息&quot;</span></span><br></pre></td></tr></table></figure><h4 id="使用建议"><a href="#使用建议" class="headerlink" title="使用建议"></a>使用建议</h4><p><strong>优点</strong>：</p><ul><li>✅ 实时性强，延迟低</li><li>✅ 实现简单，使用方便</li><li>✅ 支持多播（一对多）</li></ul><p><strong>缺点</strong>：</p><ul><li>❌ 消息不持久化，可能丢失</li><li>❌ 订阅者必须在线才能接收</li><li>❌ 没有消息确认机制</li></ul><p><strong>适用场景</strong>：</p><ul><li>✅ 实时聊天、弹幕</li><li>✅ 实时通知、推送</li><li>✅ 实时监控、日志</li></ul><p><strong>不适用场景</strong>：</p><ul><li>❌ 需要消息持久化</li><li>❌ 需要消息确认</li><li>❌ 订阅者可能离线</li></ul><p><strong>替代方案</strong>：</p><ul><li>如果需要消息持久化和确认，建议使用：<ul><li><strong>Redis Stream</strong>（Redis 5.0+）</li><li><strong>RabbitMQ</strong>、<strong>Kafka</strong> 等专业消息队列</li></ul></li></ul><h3 id="5-7-对比其他消息机制"><a href="#5-7-对比其他消息机制" class="headerlink" title="5.7 对比其他消息机制"></a>5.7 对比其他消息机制</h3><table><thead><tr><th>特性</th><th>Pub&#x2F;Sub</th><th>Stream</th><th>List（LPUSH&#x2F;RPOP）</th></tr></thead><tbody><tr><td>消息持久化</td><td>❌ 否</td><td>✅ 是</td><td>✅ 是</td></tr><tr><td>消息确认</td><td>❌ 无</td><td>✅ 有</td><td>⚠️ 手动</td></tr><tr><td>多消费者</td><td>✅ 支持</td><td>✅ 支持</td><td>⚠️ 竞争消费</td></tr><tr><td>消息重播</td><td>❌ 不支持</td><td>✅ 支持</td><td>❌ 不支持</td></tr><tr><td>适用场景</td><td>实时通知</td><td>消息队列</td><td>简单队列</td></tr></tbody></table><h3 id="实战代码示例（Java）"><a href="#实战代码示例（Java）" class="headerlink" title="实战代码示例（Java）"></a>实战代码示例（Java）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPubSub;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 订阅者</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisSubscriber</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;localhost&quot;</span>, <span class="number">6379</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 创建订阅监听器</span></span><br><span class="line">        <span class="type">JedisPubSub</span> <span class="variable">listener</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JedisPubSub</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onMessage</span><span class="params">(String channel, String message)</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;收到消息 - 频道: &quot;</span> + channel + <span class="string">&quot;, 消息: &quot;</span> + message);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onSubscribe</span><span class="params">(String channel, <span class="type">int</span> subscribedChannels)</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;订阅频道: &quot;</span> + channel);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 订阅频道（阻塞）</span></span><br><span class="line">        jedis.subscribe(listener, <span class="string">&quot;channel1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 发布者</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisPublisher</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;localhost&quot;</span>, <span class="number">6379</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 发布消息</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">subscribers</span> <span class="operator">=</span> jedis.publish(<span class="string">&quot;channel1&quot;</span>, <span class="string">&quot;Hello Redis!&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;消息发送给 &quot;</span> + subscribers + <span class="string">&quot; 个订阅者&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        jedis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-Redis高级数据类型"><a href="#6-Redis高级数据类型" class="headerlink" title="6. Redis高级数据类型"></a>6. Redis高级数据类型</h2><h3 id="6-1-Bitmap（位图）"><a href="#6-1-Bitmap（位图）" class="headerlink" title="6.1 Bitmap（位图）"></a>6.1 Bitmap（位图）</h3><h4 id="什么是Bitmap"><a href="#什么是Bitmap" class="headerlink" title="什么是Bitmap"></a>什么是Bitmap</h4><p><strong>Bitmap（位图）</strong> 是Redis提供的一种特殊数据结构，用于高效地进行位操作。</p><p><strong>计算机基础知识</strong>：</p><ul><li>现代计算机用<strong>二进制（位）</strong> 作为信息的基础单位</li><li>1个字节（Byte）&#x3D; 8位（bit）</li><li>例如字符串 <code>&quot;abc&quot;</code> 由3个字节组成：<ul><li><code>&#39;a&#39;</code> → ASCII码 <code>97</code> → 二进制 <code>01100001</code></li><li><code>&#39;b&#39;</code> → ASCII码 <code>98</code> → 二进制 <code>01100010</code></li><li><code>&#39;c&#39;</code> → ASCII码 <code>99</code> → 二进制 <code>01100011</code></li></ul></li></ul><p><img src="/images/redis/bitmaps.png" alt="Bitmap二进制存储"></p><p><strong>Bitmap的本质</strong>：</p><ol><li><p><strong>Bitmap本身不是一种独立的数据类型</strong></p><ul><li>实际上它就是String类型（key-value）</li><li>但可以对字符串的<strong>位</strong>进行操作</li></ul></li><li><p><strong>Bitmap提供了独立的命令集</strong></p><ul><li>可以把Bitmap想象成一个<strong>以位为单位的数组</strong></li><li>数组的每个单元只能存储 <code>0</code> 或 <code>1</code></li><li>数组的下标在Bitmap中叫做<strong>偏移量（offset）</strong></li></ul></li></ol><p><strong>Bitmap结构示意图</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">偏移量:  0  1  2  3  4  5  6  7  8  9  10 11 12 13 14 15</span><br><span class="line">位值:   [0][1][0][0][1][1][0][0][1][0][0][1][0][0][1][1]</span><br></pre></td></tr></table></figure><p><img src="/images/redis/bitmaps2.png" alt="Bitmap结构"></p><p><strong>优势</strong>：合理使用位操作可以<strong>有效提高内存使用率和开发效率</strong>。</p><h4 id="Bitmap常用命令"><a href="#Bitmap常用命令" class="headerlink" title="Bitmap常用命令"></a>Bitmap常用命令</h4><h5 id="1-SETBIT-设置位值"><a href="#1-SETBIT-设置位值" class="headerlink" title="1. SETBIT - 设置位值"></a>1. SETBIT - 设置位值</h5><p><strong>命令格式</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SETBIT key offset value</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>说明</th><th>取值</th></tr></thead><tbody><tr><td><code>key</code></td><td>键名</td><td>字符串</td></tr><tr><td><code>offset</code></td><td>偏移量（从0开始）</td><td>非负整数</td></tr><tr><td><code>value</code></td><td>位值</td><td>0 或 1</td></tr></tbody></table><p><strong>返回值</strong>：原始位的值（0或1）</p><p><strong>应用场景：用户访问统计</strong></p><p>每个独立用户是否访问过网站存放在Bitmap中：</p><ul><li>访问的用户记为 <code>1</code></li><li>未访问的用户记为 <code>0</code></li><li>用偏移量作为用户的ID</li></ul><p><strong>示例</strong>：</p><p>假设现在有20个用户，userid为 <code>1, 6, 11, 15, 19</code> 的用户访问了网站：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># unique:users:20201106 代表2020-11-06这天的独立访问用户</span></span><br><span class="line">127.0.0.1:6379&gt; SETBIT unique:<span class="built_in">users</span>:20201106 1 1</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">127.0.0.1:6379&gt; SETBIT unique:<span class="built_in">users</span>:20201106 6 1</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">127.0.0.1:6379&gt; SETBIT unique:<span class="built_in">users</span>:20201106 11 1</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">127.0.0.1:6379&gt; SETBIT unique:<span class="built_in">users</span>:20201106 15 1</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">127.0.0.1:6379&gt; SETBIT unique:<span class="built_in">users</span>:20201106 19 1</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br></pre></td></tr></table></figure><p><strong>Bitmap状态如下</strong>：</p><p><img src="/images/redis/bitmaps%E5%AE%9E%E4%BE%8B.png" alt="Bitmap用户访问示例"></p><p><strong>⚠️ 注意事项</strong>：</p><ol><li><p><strong>用户ID优化</strong>：</p><ul><li>很多应用的用户ID以指定数字开头（例如10000）</li><li>直接使用用户ID作为偏移量会造成空间浪费</li><li><strong>推荐做法</strong>：每次做SETBIT时将用户ID减去起始数字</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 假设用户ID从10000开始</span></span><br><span class="line">SETBIT unique:<span class="built_in">users</span>:20201106 $((<span class="number">10001</span> - <span class="number">10000</span>)) 1  <span class="comment"># 用户10001</span></span><br><span class="line">SETBIT unique:<span class="built_in">users</span>:20201106 $((<span class="number">10086</span> - <span class="number">10000</span>)) 1  <span class="comment"># 用户10086</span></span><br></pre></td></tr></table></figure></li><li><p><strong>初始化性能</strong>：</p><ul><li>在第一次初始化Bitmap时，如果偏移量非常大（如千万级）</li><li>整个初始化过程执行会比较慢</li><li>可能会造成Redis的<strong>阻塞</strong></li><li>建议分批初始化或使用管道（Pipeline）</li></ul></li></ol><h5 id="2-GETBIT-获取位值"><a href="#2-GETBIT-获取位值" class="headerlink" title="2. GETBIT - 获取位值"></a>2. GETBIT - 获取位值</h5><p><strong>命令格式</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GETBIT key offset</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>说明</th><th>取值</th></tr></thead><tbody><tr><td><code>key</code></td><td>键名</td><td>字符串</td></tr><tr><td><code>offset</code></td><td>偏移量（从0开始）</td><td>非负整数</td></tr></tbody></table><p><strong>返回值</strong>：位值（0或1），如果offset超出范围则返回0</p><p><strong>示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询userid=1的用户是否访问过</span></span><br><span class="line">127.0.0.1:6379&gt; GETBIT unique:<span class="built_in">users</span>:20201106 1</span><br><span class="line">(<span class="built_in">integer</span>) 1    <span class="comment"># 返回1表示访问过</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询userid=8的用户是否访问过</span></span><br><span class="line">127.0.0.1:6379&gt; GETBIT unique:<span class="built_in">users</span>:20201106 8</span><br><span class="line">(<span class="built_in">integer</span>) 0    <span class="comment"># 返回0表示未访问</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询不存在的偏移量</span></span><br><span class="line">127.0.0.1:6379&gt; GETBIT unique:<span class="built_in">users</span>:20201106 100</span><br><span class="line">(<span class="built_in">integer</span>) 0    <span class="comment"># 超出范围也返回0</span></span><br></pre></td></tr></table></figure><h5 id="3-BITCOUNT-统计位值为1的数量"><a href="#3-BITCOUNT-统计位值为1的数量" class="headerlink" title="3. BITCOUNT - 统计位值为1的数量"></a>3. BITCOUNT - 统计位值为1的数量</h5><p><strong>命令格式</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BITCOUNT key [start end]</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>说明</th><th>取值</th><th>是否必需</th></tr></thead><tbody><tr><td><code>key</code></td><td>键名</td><td>字符串</td><td>必需</td></tr><tr><td><code>start</code></td><td>起始字节索引</td><td>整数（可为负数）</td><td>可选</td></tr><tr><td><code>end</code></td><td>结束字节索引</td><td>整数（可为负数）</td><td>可选</td></tr></tbody></table><p><strong>功能说明</strong>：</p><ul><li>统计字符串中位值为 <code>1</code> 的bit数量</li><li>不指定<code>start</code>和<code>end</code>时，统计整个字符串</li><li><code>start</code>和<code>end</code>是<strong>字节索引</strong>（不是位索引），从0开始</li><li>支持负数索引：<code>-1</code>表示最后一个字节，<code>-2</code>表示倒数第二个字节</li></ul><p><strong>返回值</strong>：位值为1的数量</p><p><strong>示例1：统计全部</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 计算2020-11-06这天的独立访问用户数量</span></span><br><span class="line">127.0.0.1:6379&gt; BITCOUNT unique:<span class="built_in">users</span>:20201106</span><br><span class="line">(<span class="built_in">integer</span>) 5    <span class="comment"># 有5个用户访问过（userid=1,6,11,15,19）</span></span><br></pre></td></tr></table></figure><p><strong>示例2：按字节范围统计</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 假设有一个key K1，内容为：</span></span><br><span class="line"><span class="comment"># K1 = [01000001 01000000 00000000 00100001]</span></span><br><span class="line"><span class="comment">#      [ 字节0 ][ 字节1 ][ 字节2 ][ 字节3 ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计字节1和字节2（即 01000000 00000000）</span></span><br><span class="line">127.0.0.1:6379&gt; BITCOUNT K1 1 2</span><br><span class="line">(<span class="built_in">integer</span>) 1    <span class="comment"># 只有1个bit为1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计字节1到字节3（即 01000000 00000000 00100001）</span></span><br><span class="line">127.0.0.1:6379&gt; BITCOUNT K1 1 3</span><br><span class="line">(<span class="built_in">integer</span>) 3    <span class="comment"># 有3个bit为1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计字节0到倒数第2个字节（即 01000001 01000000 00000000）</span></span><br><span class="line">127.0.0.1:6379&gt; BITCOUNT K1 0 -2</span><br><span class="line">(<span class="built_in">integer</span>) 3    <span class="comment"># 有3个bit为1</span></span><br></pre></td></tr></table></figure><p><strong>⚠️ 重要提醒</strong>：</p><ul><li><code>SETBIT</code> 操作的是<strong>bit位置</strong>（偏移量）</li><li><code>BITCOUNT</code> 的 <code>start/end</code> 参数是<strong>byte位置</strong>（字节索引）</li></ul><p><strong>实际应用示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 统计第1个字节到第3个字节之间的独立访问用户数</span></span><br><span class="line"><span class="comment"># 对应的用户id是 11, 15, 19</span></span><br><span class="line">127.0.0.1:6379&gt; BITCOUNT unique:<span class="built_in">users</span>:20201106 1 3</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br></pre></td></tr></table></figure><h5 id="4-BITOP-位运算"><a href="#4-BITOP-位运算" class="headerlink" title="4. BITOP - 位运算"></a>4. BITOP - 位运算</h5><p><strong>命令格式</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BITOP operation destkey key [key ...]</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>说明</th><th>取值</th></tr></thead><tbody><tr><td><code>operation</code></td><td>位运算操作</td><td>AND（交集）、OR（并集）、NOT（非）、XOR（异或）</td></tr><tr><td><code>destkey</code></td><td>结果保存的目标键</td><td>字符串</td></tr><tr><td><code>key</code></td><td>参与运算的键</td><td>一个或多个字符串</td></tr></tbody></table><p><strong>功能说明</strong>：对多个Bitmap进行位运算，并将结果保存到<code>destkey</code>中。</p><p><strong>返回值</strong>：保存到<code>destkey</code>的字符串长度</p><p><strong>支持的操作</strong>：</p><table><thead><tr><th>操作</th><th>说明</th><th>用途</th></tr></thead><tbody><tr><td><code>AND</code></td><td>交集</td><td>找出同时满足多个条件的元素</td></tr><tr><td><code>OR</code></td><td>并集</td><td>找出满足任意条件的元素</td></tr><tr><td><code>NOT</code></td><td>非</td><td>反转所有位（只能有一个源key）</td></tr><tr><td><code>XOR</code></td><td>异或</td><td>找出只满足其中一个条件的元素</td></tr></tbody></table><p><strong>应用场景示例</strong>：</p><p><strong>场景1：计算两天都访问过网站的用户（AND交集）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2020-11-04访问的用户：userid=1,2,5,9</span></span><br><span class="line">127.0.0.1:6379&gt; SETBIT unique:<span class="built_in">users</span>:20201104 1 1</span><br><span class="line">127.0.0.1:6379&gt; SETBIT unique:<span class="built_in">users</span>:20201104 2 1</span><br><span class="line">127.0.0.1:6379&gt; SETBIT unique:<span class="built_in">users</span>:20201104 5 1</span><br><span class="line">127.0.0.1:6379&gt; SETBIT unique:<span class="built_in">users</span>:20201104 9 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2020-11-03访问的用户：userid=0,1,4,9</span></span><br><span class="line">127.0.0.1:6379&gt; SETBIT unique:<span class="built_in">users</span>:20201103 0 1</span><br><span class="line">127.0.0.1:6379&gt; SETBIT unique:<span class="built_in">users</span>:20201103 1 1</span><br><span class="line">127.0.0.1:6379&gt; SETBIT unique:<span class="built_in">users</span>:20201103 4 1</span><br><span class="line">127.0.0.1:6379&gt; SETBIT unique:<span class="built_in">users</span>:20201103 9 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算两天都访问过的用户（交集）</span></span><br><span class="line">127.0.0.1:6379&gt; BITOP AND unique:<span class="built_in">users</span>:and:20201104_03 unique:<span class="built_in">users</span>:20201103 unique:<span class="built_in">users</span>:20201104</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看结果</span></span><br><span class="line">127.0.0.1:6379&gt; BITCOUNT unique:<span class="built_in">users</span>:and:20201104_03</span><br><span class="line">(<span class="built_in">integer</span>) 2    <span class="comment"># 用户1和9两天都访问过</span></span><br></pre></td></tr></table></figure><p><strong>场景2：计算任意一天访问过网站的用户（OR并集）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 计算至少访问过一天的用户（并集）- 可用于统计月活</span></span><br><span class="line">127.0.0.1:6379&gt; BITOP OR unique:<span class="built_in">users</span>:or:20201104_03 unique:<span class="built_in">users</span>:20201103 unique:<span class="built_in">users</span>:20201104</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看结果</span></span><br><span class="line">127.0.0.1:6379&gt; BITCOUNT unique:<span class="built_in">users</span>:or:20201104_03</span><br><span class="line">(<span class="built_in">integer</span>) 6    <span class="comment"># 用户0,1,2,4,5,9至少访问过一天</span></span><br></pre></td></tr></table></figure><p><img src="/images/redis/bitmapAnd%E7%A4%BA%E4%BE%8B.png" alt="Bitmap位运算示例"></p><p><strong>场景3：计算未访问过的用户（NOT）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 反转所有位，找出未访问的用户</span></span><br><span class="line">127.0.0.1:6379&gt; BITOP NOT unique:<span class="built_in">users</span>:not:20201104 unique:<span class="built_in">users</span>:20201104</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br></pre></td></tr></table></figure><h4 id="Bitmap与Set对比"><a href="#Bitmap与Set对比" class="headerlink" title="Bitmap与Set对比"></a>Bitmap与Set对比</h4><h5 id="场景1：大量活跃用户（Bitmap优势明显）"><a href="#场景1：大量活跃用户（Bitmap优势明显）" class="headerlink" title="场景1：大量活跃用户（Bitmap优势明显）"></a>场景1：大量活跃用户（Bitmap优势明显）</h5><p><strong>假设</strong>：</p><ul><li>网站总用户数：<strong>1亿</strong></li><li>每天独立访问用户：<strong>5千万</strong></li></ul><p><strong>存储对比表</strong>：</p><table><thead><tr><th>数据类型</th><th>每个userid占用空间</th><th>需要存储的用户量</th><th>全部内存量</th></tr></thead><tbody><tr><td><strong>Set集合</strong></td><td>64位（8字节）</td><td>50,000,000</td><td>64位 × 50,000,000 &#x3D; <strong>400MB</strong></td></tr><tr><td><strong>Bitmap</strong></td><td>1位</td><td>100,000,000</td><td>1位 × 100,000,000 &#x3D; <strong>12.5MB</strong></td></tr></tbody></table><p><strong>节省空间</strong>：400MB - 12.5MB &#x3D; <strong>387.5MB</strong>（节省96.88%）</p><p><strong>长期存储对比</strong>：</p><table><thead><tr><th>数据类型</th><th>一天</th><th>一个月（30天）</th><th>一年（365天）</th></tr></thead><tbody><tr><td><strong>Set集合</strong></td><td>400MB</td><td>12GB</td><td>144GB</td></tr><tr><td><strong>Bitmap</strong></td><td>12.5MB</td><td>375MB</td><td>4.5GB</td></tr></tbody></table><blockquote><p>✅ <strong>结论</strong>：在大量活跃用户场景下，Bitmap能节省<strong>大量内存空间</strong>，尤其是随着时间推移，优势非常明显。</p></blockquote><h5 id="场景2：少量活跃用户（Bitmap劣势明显）"><a href="#场景2：少量活跃用户（Bitmap劣势明显）" class="headerlink" title="场景2：少量活跃用户（Bitmap劣势明显）"></a>场景2：少量活跃用户（Bitmap劣势明显）</h5><p><strong>假设</strong>：</p><ul><li>网站总用户数：<strong>1亿</strong></li><li>每天独立访问用户：<strong>10万</strong>（大量僵尸用户）</li></ul><p><strong>存储对比表</strong>：</p><table><thead><tr><th>数据类型</th><th>每个userid占用空间</th><th>需要存储的用户量</th><th>全部内存量</th></tr></thead><tbody><tr><td><strong>Set集合</strong></td><td>64位（8字节）</td><td>100,000</td><td>64位 × 100,000 &#x3D; <strong>800KB</strong></td></tr><tr><td><strong>Bitmap</strong></td><td>1位</td><td>100,000,000</td><td>1位 × 100,000,000 &#x3D; <strong>12.5MB</strong></td></tr></tbody></table><p><strong>空间浪费</strong>：12.5MB - 800KB &#x3D; <strong>11.7MB</strong>（Bitmap多占用15.6倍空间）</p><blockquote><p>❌ <strong>结论</strong>：在少量活跃用户场景下，使用Bitmap<strong>不合适</strong>，因为大部分位都是0，造成空间浪费。</p></blockquote><h4 id="使用建议-1"><a href="#使用建议-1" class="headerlink" title="使用建议"></a>使用建议</h4><p><strong>✅ Bitmap适用场景</strong>：</p><ol><li><p><strong>大量用户，高活跃度</strong>（活跃率 &gt; 10%）</p><ul><li>用户签到统计</li><li>日活&#x2F;月活统计</li><li>在线用户统计</li></ul></li><li><p><strong>二值状态标记</strong></p><ul><li>是否完成任务（0&#x2F;1）</li><li>是否已读消息（0&#x2F;1）</li><li>权限控制（有&#x2F;无）</li></ul></li><li><p><strong>需要位运算</strong></p><ul><li>多条件交集&#x2F;并集查询</li><li>连续签到统计</li><li>用户画像标签</li></ul></li></ol><p><strong>❌ Bitmap不适用场景</strong>：</p><ol><li><p><strong>用户量大，活跃度低</strong>（活跃率 &lt; 1%）</p><ul><li>建议使用Set或Hash</li></ul></li><li><p><strong>需要存储多个状态</strong>（不只是0&#x2F;1）</p><ul><li>建议使用Hash或String</li></ul></li><li><p><strong>用户ID不连续或非数字</strong></p><ul><li>建议使用Hash映射</li></ul></li></ol><p><strong>性能对比总结</strong>：</p><table><thead><tr><th>对比维度</th><th>Set</th><th>Bitmap</th></tr></thead><tbody><tr><td>内存占用（高活跃）</td><td>大</td><td>小</td></tr><tr><td>内存占用（低活跃）</td><td>小</td><td>大</td></tr><tr><td>查询速度</td><td>O(1)</td><td>O(1)</td></tr><tr><td>统计速度</td><td>O(N)</td><td>O(N&#x2F;8)</td></tr><tr><td>集合运算</td><td>支持</td><td>支持（更快）</td></tr><tr><td>适用场景</td><td>少量活跃用户</td><td>大量活跃用户</td></tr></tbody></table><h4 id="实战代码示例（Java）-1"><a href="#实战代码示例（Java）-1" class="headerlink" title="实战代码示例（Java）"></a>实战代码示例（Java）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BitmapExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;localhost&quot;</span>, <span class="number">6379</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> <span class="string">&quot;unique:users:20201106&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 1. 记录用户访问</span></span><br><span class="line">        jedis.setbit(key, <span class="number">1</span>, <span class="literal">true</span>);</span><br><span class="line">        jedis.setbit(key, <span class="number">6</span>, <span class="literal">true</span>);</span><br><span class="line">        jedis.setbit(key, <span class="number">11</span>, <span class="literal">true</span>);</span><br><span class="line">        jedis.setbit(key, <span class="number">15</span>, <span class="literal">true</span>);</span><br><span class="line">        jedis.setbit(key, <span class="number">19</span>, <span class="literal">true</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2. 查询用户是否访问</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">visited</span> <span class="operator">=</span> jedis.getbit(key, <span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;用户1是否访问: &quot;</span> + visited);  <span class="comment">// true</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3. 统计访问用户数</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">count</span> <span class="operator">=</span> jedis.bitcount(key);</span><br><span class="line">        System.out.println(<span class="string">&quot;访问用户数: &quot;</span> + count);  <span class="comment">// 5</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 4. 多天访问交集（连续访问用户）</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">key1</span> <span class="operator">=</span> <span class="string">&quot;unique:users:20201104&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">key2</span> <span class="operator">=</span> <span class="string">&quot;unique:users:20201105&quot;</span>;</span><br><span class="line">        jedis.setbit(key1, <span class="number">1</span>, <span class="literal">true</span>);</span><br><span class="line">        jedis.setbit(key1, <span class="number">2</span>, <span class="literal">true</span>);</span><br><span class="line">        jedis.setbit(key2, <span class="number">1</span>, <span class="literal">true</span>);</span><br><span class="line">        jedis.setbit(key2, <span class="number">3</span>, <span class="literal">true</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="type">String</span> <span class="variable">destKey</span> <span class="operator">=</span> <span class="string">&quot;unique:users:continuous&quot;</span>;</span><br><span class="line">        jedis.bitop(BitOP.AND, destKey, key1, key2);</span><br><span class="line">        <span class="type">long</span> <span class="variable">continuousUsers</span> <span class="operator">=</span> jedis.bitcount(destKey);</span><br><span class="line">        System.out.println(<span class="string">&quot;连续访问用户数: &quot;</span> + continuousUsers);  <span class="comment">// 1</span></span><br><span class="line">        </span><br><span class="line">        jedis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-2-HyperLogLog（基数统计）"><a href="#6-2-HyperLogLog（基数统计）" class="headerlink" title="6.2 HyperLogLog（基数统计）"></a>6.2 HyperLogLog（基数统计）</h3><h4 id="什么是HyperLogLog"><a href="#什么是HyperLogLog" class="headerlink" title="什么是HyperLogLog"></a>什么是HyperLogLog</h4><p><strong>HyperLogLog（HLL）</strong> 是Redis提供的一种<strong>基数统计算法</strong>，用于解决大数据量下的去重计数问题。</p><h4 id="业务场景：统计需求的挑战"><a href="#业务场景：统计需求的挑战" class="headerlink" title="业务场景：统计需求的挑战"></a>业务场景：统计需求的挑战</h4><p>在日常开发中，我们经常遇到各种统计需求：</p><table><thead><tr><th>统计类型</th><th>说明</th><th>实现方式</th><th>难度</th></tr></thead><tbody><tr><td><strong>PV</strong>（PageView）</td><td>页面访问量（可重复计数）</td><td><code>INCR</code>、<code>INCRBY</code></td><td>⭐ 简单</td></tr><tr><td><strong>UV</strong>（UniqueVisitor）</td><td>独立访客数（需去重）</td><td>HyperLogLog &#x2F; Set</td><td>⭐⭐⭐ 复杂</td></tr><tr><td><strong>独立IP数</strong></td><td>不同IP访问数（需去重）</td><td>HyperLogLog &#x2F; Set</td><td>⭐⭐⭐ 复杂</td></tr><tr><td><strong>搜索记录数</strong></td><td>不同搜索关键词数（需去重）</td><td>HyperLogLog &#x2F; Set</td><td>⭐⭐⭐ 复杂</td></tr></tbody></table><p><strong>核心问题</strong>：这些需要<strong>去重和计数</strong>的问题称为<strong>基数问题（Cardinality Problem）</strong>。</p><h4 id="什么是基数？"><a href="#什么是基数？" class="headerlink" title="什么是基数？"></a>什么是基数？</h4><p><strong>基数（Cardinality）</strong> &#x3D; 集合中不重复元素的个数</p><p><strong>示例</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">原始数据集：&#123;1, 3, 5, 7, 5, 7, 8&#125;</span><br><span class="line">基数集合：  &#123;1, 3, 5, 7, 8&#125;</span><br><span class="line">基数：      5（不重复元素个数）</span><br></pre></td></tr></table></figure><p><strong>基数估计</strong>：在<strong>误差可接受</strong>的范围内，<strong>快速计算</strong>基数。</p><h4 id="传统解决方案的问题"><a href="#传统解决方案的问题" class="headerlink" title="传统解决方案的问题"></a>传统解决方案的问题</h4><h5 id="方案对比"><a href="#方案对比" class="headerlink" title="方案对比"></a>方案对比</h5><table><thead><tr><th>方案</th><th>实现方式</th><th>优点</th><th>缺点</th></tr></thead><tbody><tr><td><strong>MySQL</strong></td><td><code>SELECT COUNT(DISTINCT user_id)</code></td><td>结果精确</td><td>❌ 性能差<br>❌ 数据量大时慢</td></tr><tr><td><strong>Redis Set</strong></td><td><code>SADD</code> + <code>SCARD</code></td><td>结果精确<br>查询快</td><td>❌ 内存占用大<br>❌ 元素越多越占内存</td></tr><tr><td><strong>Redis Hash</strong></td><td><code>HSET</code> + <code>HLEN</code></td><td>结果精确<br>查询快</td><td>❌ 内存占用大</td></tr><tr><td><strong>Bitmap</strong></td><td><code>SETBIT</code> + <code>BITCOUNT</code></td><td>内存占用小</td><td>❌ 仅适用于数值ID<br>❌ 稀疏数据浪费空间</td></tr></tbody></table><p><strong>核心矛盾</strong>：</p><ul><li>✅ 精确统计 <strong>vs</strong> ❌ 内存占用过大</li><li>随着数据量增加，内存占用线性增长，对于超大数据集<strong>不切实际</strong></li></ul><p><strong>解决思路</strong>：能否<strong>降低一定精度</strong>来<strong>平衡存储空间</strong>？</p><h4 id="HyperLogLog的优势"><a href="#HyperLogLog的优势" class="headerlink" title="HyperLogLog的优势"></a>HyperLogLog的优势</h4><p>Redis推出了<strong>HyperLogLog算法</strong>，完美解决了这个问题。</p><p><strong>核心特性</strong>：</p><table><thead><tr><th>特性</th><th>说明</th></tr></thead><tbody><tr><td><strong>固定内存</strong></td><td>每个HLL键只需 <strong>12KB</strong> 内存</td></tr><tr><td><strong>海量数据</strong></td><td>可统计接近 <strong>2⁶⁴</strong>（约1800万亿）个不同元素</td></tr><tr><td><strong>误差率低</strong></td><td>标准误差率 <strong>0.81%</strong></td></tr><tr><td><strong>不存储元素</strong></td><td>只计算基数，不保存元素本身</td></tr></tbody></table><p><strong>对比优势</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">传统Set方案：</span><br><span class="line">- 1亿用户UV → 需要约 800MB 内存（每个元素8字节）</span><br><span class="line">- 元素越多，内存越大（线性增长）</span><br><span class="line"></span><br><span class="line">HyperLogLog方案：</span><br><span class="line">- 1亿用户UV → 只需 12KB 内存</span><br><span class="line">- 10亿用户UV → 还是 12KB 内存</span><br><span class="line">- 100亿用户UV → 依然 12KB 内存（固定不变）</span><br></pre></td></tr></table></figure><p><strong>权衡取舍</strong>：</p><table><thead><tr><th>对比项</th><th>Set</th><th>HyperLogLog</th></tr></thead><tbody><tr><td>内存占用</td><td>大（随数据量增长）</td><td>小（固定12KB）</td></tr><tr><td>统计结果</td><td>100%精确</td><td>约99.19%精确（0.81%误差）</td></tr><tr><td>返回元素</td><td>✅ 可以（SMEMBERS）</td><td>❌ 不能</td></tr><tr><td>适用场景</td><td>小数据集</td><td>大数据集</td></tr></tbody></table><blockquote><p><strong>⚠️ 重要限制</strong>：</p><ul><li>HyperLogLog <strong>只根据输入元素计算基数</strong></li><li><strong>不会存储输入元素本身</strong></li><li>不能像Set那样返回具体元素</li><li>只能回答”有多少个不同的元素”，不能回答”都是哪些元素”</li></ul></blockquote><h4 id="HyperLogLog常用命令"><a href="#HyperLogLog常用命令" class="headerlink" title="HyperLogLog常用命令"></a>HyperLogLog常用命令</h4><h5 id="1-PFADD-添加元素"><a href="#1-PFADD-添加元素" class="headerlink" title="1. PFADD - 添加元素"></a>1. PFADD - 添加元素</h5><p><strong>命令格式</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PFADD key element [element ...]</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>说明</th><th>类型</th></tr></thead><tbody><tr><td><code>key</code></td><td>HyperLogLog键名</td><td>字符串</td></tr><tr><td><code>element</code></td><td>要添加的元素</td><td>字符串（可多个）</td></tr></tbody></table><p><strong>返回值</strong>：</p><ul><li><code>1</code>：添加后基数估计值发生了变化</li><li><code>0</code>：添加后基数估计值没有变化（可能是重复元素）</li></ul><p><strong>功能说明</strong>：将所有元素添加到指定的HyperLogLog数据结构中。</p><p><strong>示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 统计2024-11-14的网站UV</span></span><br><span class="line">127.0.0.1:6379&gt; PFADD uv:20241114 <span class="string">&quot;user1&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 1    <span class="comment"># 基数变化，返回1</span></span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; PFADD uv:20241114 <span class="string">&quot;user2&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 1    <span class="comment"># 基数变化，返回1</span></span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; PFADD uv:20241114 <span class="string">&quot;user1&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 0    <span class="comment"># 重复元素，基数未变化，返回0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 批量添加</span></span><br><span class="line">127.0.0.1:6379&gt; PFADD uv:20241114 <span class="string">&quot;user3&quot;</span> <span class="string">&quot;user4&quot;</span> <span class="string">&quot;user5&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 1    <span class="comment"># 基数变化，返回1</span></span><br></pre></td></tr></table></figure><h5 id="2-PFCOUNT-计算基数"><a href="#2-PFCOUNT-计算基数" class="headerlink" title="2. PFCOUNT - 计算基数"></a>2. PFCOUNT - 计算基数</h5><p><strong>命令格式</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PFCOUNT key [key ...]</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>说明</th><th>类型</th></tr></thead><tbody><tr><td><code>key</code></td><td>HyperLogLog键名</td><td>字符串（可多个）</td></tr></tbody></table><p><strong>返回值</strong>：基数的估计值（整数）</p><p><strong>功能说明</strong>：</p><ul><li>单个key：返回该HLL的基数估计值</li><li>多个key：返回多个HLL的<strong>并集</strong>基数估计值</li></ul><p><strong>示例1：单个HLL统计</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询2024-11-14的UV</span></span><br><span class="line">127.0.0.1:6379&gt; PFCOUNT uv:20241114</span><br><span class="line">(<span class="built_in">integer</span>) 5    <span class="comment"># 有5个不同的访客</span></span><br></pre></td></tr></table></figure><p><strong>示例2：多个HLL合并统计</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 统计一周的UV（取并集）</span></span><br><span class="line">127.0.0.1:6379&gt; PFADD uv:20241111 <span class="string">&quot;user1&quot;</span> <span class="string">&quot;user2&quot;</span> <span class="string">&quot;user3&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; PFADD uv:20241112 <span class="string">&quot;user2&quot;</span> <span class="string">&quot;user3&quot;</span> <span class="string">&quot;user4&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; PFADD uv:20241113 <span class="string">&quot;user3&quot;</span> <span class="string">&quot;user4&quot;</span> <span class="string">&quot;user5&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算三天的总UV（自动去重）</span></span><br><span class="line">127.0.0.1:6379&gt; PFCOUNT uv:20241111 uv:20241112 uv:20241113</span><br><span class="line">(<span class="built_in">integer</span>) 5    <span class="comment"># user1, user2, user3, user4, user5</span></span><br></pre></td></tr></table></figure><h5 id="3-PFMERGE-合并HLL"><a href="#3-PFMERGE-合并HLL" class="headerlink" title="3. PFMERGE - 合并HLL"></a>3. PFMERGE - 合并HLL</h5><p><strong>命令格式</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PFMERGE destkey sourcekey [sourcekey ...]</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>说明</th><th>类型</th></tr></thead><tbody><tr><td><code>destkey</code></td><td>目标HLL键名（合并结果）</td><td>字符串</td></tr><tr><td><code>sourcekey</code></td><td>源HLL键名</td><td>字符串（可多个）</td></tr></tbody></table><p><strong>返回值</strong>：<code>OK</code></p><p><strong>功能说明</strong>：将一个或多个HLL合并后的结果存储在另一个HLL中。</p><p><strong>应用场景</strong>：</p><ul><li>每天的UV合并计算一周的UV</li><li>每天的活跃用户合并计算月活（MAU）</li><li>每小时的独立IP合并计算日独立IP</li></ul><p><strong>示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 每天记录UV</span></span><br><span class="line">127.0.0.1:6379&gt; PFADD uv:20241107 <span class="string">&quot;user1&quot;</span> <span class="string">&quot;user2&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; PFADD uv:20241108 <span class="string">&quot;user2&quot;</span> <span class="string">&quot;user3&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; PFADD uv:20241109 <span class="string">&quot;user3&quot;</span> <span class="string">&quot;user4&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; PFADD uv:20241110 <span class="string">&quot;user4&quot;</span> <span class="string">&quot;user5&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; PFADD uv:20241111 <span class="string">&quot;user5&quot;</span> <span class="string">&quot;user6&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; PFADD uv:20241112 <span class="string">&quot;user6&quot;</span> <span class="string">&quot;user7&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; PFADD uv:20241113 <span class="string">&quot;user7&quot;</span> <span class="string">&quot;user8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并计算一周的UV</span></span><br><span class="line">127.0.0.1:6379&gt; PFMERGE uv:week45 uv:20241107 uv:20241108 uv:20241109 uv:20241110 uv:20241111 uv:20241112 uv:20241113</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询一周的总UV</span></span><br><span class="line">127.0.0.1:6379&gt; PFCOUNT uv:week45</span><br><span class="line">(<span class="built_in">integer</span>) 8    <span class="comment"># 8个不同的用户访问过</span></span><br></pre></td></tr></table></figure><h4 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h4><h5 id="1-网站UV统计"><a href="#1-网站UV统计" class="headerlink" title="1. 网站UV统计"></a>1. 网站UV统计</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 每次用户访问页面时</span></span><br><span class="line">PFADD uv:20241114 <span class="string">&quot;user_id_123&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 实时查询今日UV</span></span><br><span class="line">PFCOUNT uv:20241114</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询本周UV</span></span><br><span class="line">PFCOUNT uv:20241108 uv:20241109 uv:20241110 uv:20241111 uv:20241112 uv:20241113 uv:20241114</span><br></pre></td></tr></table></figure><h5 id="2-独立IP统计"><a href="#2-独立IP统计" class="headerlink" title="2. 独立IP统计"></a>2. 独立IP统计</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 记录访问IP</span></span><br><span class="line">PFADD ip:20241114 <span class="string">&quot;192.168.1.1&quot;</span></span><br><span class="line">PFADD ip:20241114 <span class="string">&quot;192.168.1.2&quot;</span></span><br><span class="line">PFADD ip:20241114 <span class="string">&quot;192.168.1.1&quot;</span>  <span class="comment"># 重复IP自动去重</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询独立IP数</span></span><br><span class="line">PFCOUNT ip:20241114</span><br></pre></td></tr></table></figure><h5 id="3-搜索关键词统计"><a href="#3-搜索关键词统计" class="headerlink" title="3. 搜索关键词统计"></a>3. 搜索关键词统计</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 记录搜索关键词</span></span><br><span class="line">PFADD search:20241114 <span class="string">&quot;Redis教程&quot;</span></span><br><span class="line">PFADD search:20241114 <span class="string">&quot;Java面试&quot;</span></span><br><span class="line">PFADD search:20241114 <span class="string">&quot;Redis教程&quot;</span>  <span class="comment"># 重复关键词自动去重</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询不同搜索关键词数量</span></span><br><span class="line">PFCOUNT search:20241114</span><br></pre></td></tr></table></figure><h5 id="4-APP日活-月活统计"><a href="#4-APP日活-月活统计" class="headerlink" title="4. APP日活&#x2F;月活统计"></a>4. APP日活&#x2F;月活统计</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 每日活跃用户</span></span><br><span class="line">PFADD dau:20241114 <span class="string">&quot;user_1001&quot;</span> <span class="string">&quot;user_1002&quot;</span> <span class="string">&quot;user_1003&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算日活（DAU）</span></span><br><span class="line">PFCOUNT dau:20241114</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并计算月活（MAU）</span></span><br><span class="line">PFMERGE mau:202411 dau:20241101 dau:20241102 ... dau:20241130</span><br><span class="line">PFCOUNT mau:202411</span><br></pre></td></tr></table></figure><h4 id="HyperLogLog-vs-其他方案"><a href="#HyperLogLog-vs-其他方案" class="headerlink" title="HyperLogLog vs 其他方案"></a>HyperLogLog vs 其他方案</h4><h5 id="内存占用对比（1亿用户UV统计）"><a href="#内存占用对比（1亿用户UV统计）" class="headerlink" title="内存占用对比（1亿用户UV统计）"></a>内存占用对比（1亿用户UV统计）</h5><table><thead><tr><th>方案</th><th>内存占用</th><th>精确度</th><th>查询速度</th></tr></thead><tbody><tr><td><strong>MySQL</strong></td><td>约4GB（40亿字节）</td><td>100%</td><td>慢（秒级）</td></tr><tr><td><strong>Redis Set</strong></td><td>约800MB</td><td>100%</td><td>快（毫秒级）</td></tr><tr><td><strong>Redis Bitmap</strong></td><td>约12MB</td><td>100%</td><td>快（毫秒级）</td></tr><tr><td><strong>Redis HyperLogLog</strong></td><td><strong>12KB</strong></td><td>99.19%</td><td>快（毫秒级）</td></tr></tbody></table><p><strong>内存节省比例</strong>：</p><ul><li>vs Set：800MB &#x2F; 12KB &#x3D; <strong>66,666倍</strong></li><li>vs Bitmap：12MB &#x2F; 12KB &#x3D; <strong>1,000倍</strong></li></ul><h5 id="适用场景对比"><a href="#适用场景对比" class="headerlink" title="适用场景对比"></a>适用场景对比</h5><table><thead><tr><th>场景</th><th>推荐方案</th><th>理由</th></tr></thead><tbody><tr><td>数据量小（&lt; 1万）</td><td>Set</td><td>内存占用可接受，精确统计</td></tr><tr><td>需要返回具体元素</td><td>Set</td><td>HyperLogLog不存储元素</td></tr><tr><td>需要100%精确</td><td>Set &#x2F; Bitmap</td><td>HyperLogLog有0.81%误差</td></tr><tr><td>数据量大（&gt; 百万）</td><td><strong>HyperLogLog</strong></td><td>内存占用固定，性能优异</td></tr><tr><td>可接受小误差</td><td><strong>HyperLogLog</strong></td><td>性价比最高</td></tr><tr><td>UV&#x2F;DAU&#x2F;MAU统计</td><td><strong>HyperLogLog</strong></td><td>专为此场景设计</td></tr></tbody></table><h4 id="使用建议-2"><a href="#使用建议-2" class="headerlink" title="使用建议"></a>使用建议</h4><p><strong>✅ HyperLogLog适用场景</strong>：</p><ol><li><p><strong>大数据量去重统计</strong>（百万级以上）</p><ul><li>网站UV统计</li><li>APP日活&#x2F;月活（DAU&#x2F;MAU）</li><li>独立IP访问统计</li></ul></li><li><p><strong>可接受小误差</strong>（0.81%误差）</p><ul><li>99.19%的精确度已足够</li><li>如：1亿UV，误差约81万</li></ul></li><li><p><strong>不需要获取具体元素</strong></p><ul><li>只需要”有多少个”</li><li>不需要”都是哪些”</li></ul></li><li><p><strong>内存资源受限</strong></p><ul><li>固定12KB内存</li><li>不受数据量影响</li></ul></li></ol><p><strong>❌ HyperLogLog不适用场景</strong>：</p><ol><li><p><strong>需要100%精确</strong></p><ul><li>金融计算、交易统计</li><li>建议使用Set</li></ul></li><li><p><strong>需要返回具体元素</strong></p><ul><li>获取所有访问用户列表</li><li>建议使用Set</li></ul></li><li><p><strong>数据量很小</strong>（&lt; 1万）</p><ul><li>Set的内存占用可接受</li><li>不需要牺牲精确度</li></ul></li><li><p><strong>需要删除指定元素</strong></p><ul><li>HyperLogLog不支持删除</li><li>建议使用Set</li></ul></li></ol><h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h4><blockquote><p><strong>⚠️ 误差说明</strong>：</p><ul><li>标准误差率：<strong>0.81%</strong></li><li>准确率：<strong>99.19%</strong></li><li>示例：真实UV &#x3D; 1,000,000，HLL统计 &#x3D; 1,000,000 ± 8,100</li></ul></blockquote><blockquote><p><strong>⚠️ 元素不可取出</strong>：</p><ul><li>HyperLogLog只计算基数，不存储元素</li><li>无法使用类似<code>SMEMBERS</code>的命令获取所有元素</li><li>无法判断某个元素是否存在</li></ul></blockquote><blockquote><p><strong>⚠️ 内存固定但不可压缩</strong>：</p><ul><li>即使只有1个元素，也占用12KB</li><li>小数据量时不如Set节省空间</li></ul></blockquote><blockquote><p><strong>⚠️ 无法删除单个元素</strong>：</p><ul><li>只能删除整个HLL</li><li>不支持类似<code>SREM</code>的操作</li></ul></blockquote><h4 id="实战代码示例（Java）-2"><a href="#实战代码示例（Java）-2" class="headerlink" title="实战代码示例（Java）"></a>实战代码示例（Java）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HyperLogLogExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;localhost&quot;</span>, <span class="number">6379</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> <span class="string">&quot;uv:20241114&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 1. 模拟用户访问（添加元素）</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10000</span>; i++) &#123;</span><br><span class="line">            jedis.pfadd(key, <span class="string">&quot;user_&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 添加一些重复用户</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            jedis.pfadd(key, <span class="string">&quot;user_&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2. 统计UV（应该接近10000，有小误差）</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">uv</span> <span class="operator">=</span> jedis.pfcount(key);</span><br><span class="line">        System.out.println(<span class="string">&quot;今日UV: &quot;</span> + uv);  <span class="comment">// 约10000（误差±81）</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3. 多天UV统计</span></span><br><span class="line">        jedis.pfadd(<span class="string">&quot;uv:20241112&quot;</span>, <span class="string">&quot;user_1&quot;</span>, <span class="string">&quot;user_2&quot;</span>, <span class="string">&quot;user_3&quot;</span>);</span><br><span class="line">        jedis.pfadd(<span class="string">&quot;uv:20241113&quot;</span>, <span class="string">&quot;user_2&quot;</span>, <span class="string">&quot;user_3&quot;</span>, <span class="string">&quot;user_4&quot;</span>);</span><br><span class="line">        jedis.pfadd(<span class="string">&quot;uv:20241114&quot;</span>, <span class="string">&quot;user_3&quot;</span>, <span class="string">&quot;user_4&quot;</span>, <span class="string">&quot;user_5&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 计算三天的总UV（自动去重）</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">totalUv</span> <span class="operator">=</span> jedis.pfcount(<span class="string">&quot;uv:20241112&quot;</span>, <span class="string">&quot;uv:20241113&quot;</span>, <span class="string">&quot;uv:20241114&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;三天总UV: &quot;</span> + totalUv);  <span class="comment">// 5</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 4. 合并计算周UV</span></span><br><span class="line">        jedis.pfmerge(<span class="string">&quot;uv:week46&quot;</span>, <span class="string">&quot;uv:20241112&quot;</span>, <span class="string">&quot;uv:20241113&quot;</span>, <span class="string">&quot;uv:20241114&quot;</span>);</span><br><span class="line">        <span class="type">long</span> <span class="variable">weekUv</span> <span class="operator">=</span> jedis.pfcount(<span class="string">&quot;uv:week46&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;本周UV: &quot;</span> + weekUv);  <span class="comment">// 5</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 5. 计算月活（MAU）</span></span><br><span class="line">        <span class="comment">// 假设每天都有记录</span></span><br><span class="line">        String[] dailyKeys = <span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">30</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">day</span> <span class="operator">=</span> <span class="number">1</span>; day &lt;= <span class="number">30</span>; day++) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">dailyKey</span> <span class="operator">=</span> String.format(<span class="string">&quot;dau:202411%02d&quot;</span>, day);</span><br><span class="line">            dailyKeys[day - <span class="number">1</span>] = dailyKey;</span><br><span class="line">            <span class="comment">// 模拟每天100个活跃用户</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">uid</span> <span class="operator">=</span> <span class="number">1</span>; uid &lt;= <span class="number">100</span>; uid++) &#123;</span><br><span class="line">                jedis.pfadd(dailyKey, <span class="string">&quot;user_&quot;</span> + uid);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 合并计算MAU</span></span><br><span class="line">        jedis.pfmerge(<span class="string">&quot;mau:202411&quot;</span>, dailyKeys);</span><br><span class="line">        <span class="type">long</span> <span class="variable">mau</span> <span class="operator">=</span> jedis.pfcount(<span class="string">&quot;mau:202411&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;11月MAU: &quot;</span> + mau);  <span class="comment">// 约100</span></span><br><span class="line">        </span><br><span class="line">        jedis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="实战案例：大型网站UV统计系统"><a href="#实战案例：大型网站UV统计系统" class="headerlink" title="实战案例：大型网站UV统计系统"></a>实战案例：大型网站UV统计系统</h4><p><strong>需求</strong>：统计日UV、周UV、月UV，数据量：日均5000万UV</p><p><strong>方案对比</strong>：</p><table><thead><tr><th>方案</th><th>内存占用</th><th>成本（每月）</th><th>精确度</th></tr></thead><tbody><tr><td>Redis Set</td><td>400MB × 30天 &#x3D; 12GB</td><td>高</td><td>100%</td></tr><tr><td>HyperLogLog</td><td>12KB × 30天 &#x3D; 360KB</td><td>极低</td><td>99.19%</td></tr></tbody></table><p><strong>实现架构</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">用户访问</span><br><span class="line">    ↓</span><br><span class="line">Web服务器</span><br><span class="line">    ↓</span><br><span class="line">PFADD uv:20241114 user_id_123</span><br><span class="line">    ↓</span><br><span class="line">Redis HyperLogLog</span><br><span class="line">    ↓</span><br><span class="line">定时任务（每小时/每天）</span><br><span class="line">    ↓</span><br><span class="line">PFMERGE计算周UV、月UV</span><br><span class="line">    ↓</span><br><span class="line">数据可视化大屏</span><br></pre></td></tr></table></figure><p><strong>代码实现</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UV统计服务</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UVStatService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Jedis jedis;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 记录用户访问</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">recordVisit</span><span class="params">(String userId)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">today</span> <span class="operator">=</span> LocalDate.now().format(DateTimeFormatter.BASIC_ISO_DATE);</span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> <span class="string">&quot;uv:&quot;</span> + today;</span><br><span class="line">        jedis.pfadd(key, userId);</span><br><span class="line">        <span class="comment">// 设置过期时间（保留90天）</span></span><br><span class="line">        jedis.expire(key, <span class="number">90</span> * <span class="number">24</span> * <span class="number">3600</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取今日UV</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getTodayUV</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">today</span> <span class="operator">=</span> LocalDate.now().format(DateTimeFormatter.BASIC_ISO_DATE);</span><br><span class="line">        <span class="keyword">return</span> jedis.pfcount(<span class="string">&quot;uv:&quot;</span> + today);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取本周UV</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getWeekUV</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;String&gt; keys = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">date</span> <span class="operator">=</span> LocalDate.now().minusDays(i)</span><br><span class="line">                .format(DateTimeFormatter.BASIC_ISO_DATE);</span><br><span class="line">            keys.add(<span class="string">&quot;uv:&quot;</span> + date);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> jedis.pfcount(keys.toArray(<span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">0</span>]));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取本月UV</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getMonthUV</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">monthKey</span> <span class="operator">=</span> <span class="string">&quot;uv:month:&quot;</span> + LocalDate.now().format(DateTimeFormatter.ofPattern(<span class="string">&quot;yyyyMM&quot;</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 检查是否已计算</span></span><br><span class="line">        <span class="keyword">if</span> (!jedis.exists(monthKey)) &#123;</span><br><span class="line">            <span class="comment">// 合并本月所有天的数据</span></span><br><span class="line">            List&lt;String&gt; keys = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            <span class="type">LocalDate</span> <span class="variable">firstDay</span> <span class="operator">=</span> LocalDate.now().withDayOfMonth(<span class="number">1</span>);</span><br><span class="line">            <span class="type">LocalDate</span> <span class="variable">today</span> <span class="operator">=</span> LocalDate.now();</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span> (<span class="type">LocalDate</span> <span class="variable">date</span> <span class="operator">=</span> firstDay; !date.isAfter(today); date = date.plusDays(<span class="number">1</span>)) &#123;</span><br><span class="line">                keys.add(<span class="string">&quot;uv:&quot;</span> + date.format(DateTimeFormatter.BASIC_ISO_DATE));</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (!keys.isEmpty()) &#123;</span><br><span class="line">                jedis.pfmerge(monthKey, keys.toArray(<span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">0</span>]));</span><br><span class="line">                jedis.expire(monthKey, <span class="number">90</span> * <span class="number">24</span> * <span class="number">3600</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> jedis.pfcount(monthKey);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>性能测试结果</strong>：</p><table><thead><tr><th>指标</th><th>数值</th></tr></thead><tbody><tr><td>日均访问量</td><td>5000万</td></tr><tr><td>每日内存占用</td><td>12KB</td></tr><tr><td>每月内存占用</td><td>360KB</td></tr><tr><td>查询响应时间</td><td>&lt; 1ms</td></tr><tr><td>统计误差</td><td>&lt; 0.81%</td></tr><tr><td>成本节省</td><td>99.99%</td></tr></tbody></table><h3 id="6-3-GEO（地理位置）"><a href="#6-3-GEO（地理位置）" class="headerlink" title="6.3 GEO（地理位置）"></a>6.3 GEO（地理位置）</h3><h4 id="什么是GEO"><a href="#什么是GEO" class="headerlink" title="什么是GEO"></a>什么是GEO</h4><p><strong>GEO（Geographic）</strong> 是Redis 3.2版本新增的地理位置数据类型，用于存储和查询地理空间信息。</p><p><strong>核心概念</strong>：</p><ul><li>GEO &#x3D; <strong>Geographic</strong>（地理信息）的缩写</li><li>存储元素的<strong>二维坐标</strong>（经度longitude、纬度latitude）</li><li>在地图上表现为<strong>经纬度坐标</strong></li><li>基于<strong>有序集合（ZSet）</strong> 实现</li></ul><p><strong>功能特性</strong>：</p><ul><li>✅ 经纬度设置</li><li>✅ 坐标查询</li><li>✅ 范围查询（半径内元素）</li><li>✅ 距离计算</li><li>✅ 经纬度Hash（GeoHash编码）</li></ul><p><strong>底层实现</strong>：</p><ul><li>GEO本质上是<strong>ZSet（有序集合）</strong></li><li>使用<strong>GeoHash算法</strong>将经纬度编码为52位整数作为score</li><li>可以使用ZSet的命令操作GEO数据（如ZREM删除）</li></ul><h4 id="GEO坐标系统说明"><a href="#GEO坐标系统说明" class="headerlink" title="GEO坐标系统说明"></a>GEO坐标系统说明</h4><p><strong>地球坐标范围</strong>：</p><table><thead><tr><th>维度</th><th>最小值</th><th>最大值</th><th>说明</th></tr></thead><tbody><tr><td><strong>经度</strong>（Longitude）</td><td>-180°</td><td>+180°</td><td>东经为正，西经为负</td></tr><tr><td><strong>纬度</strong>（Latitude）</td><td>-85.05112878°</td><td>+85.05112878°</td><td>北纬为正，南纬为负</td></tr></tbody></table><p><strong>注意事项</strong>：</p><ul><li>⚠️ <strong>两极无法直接添加</strong>（纬度±85.05112878°以外）</li><li>⚠️ 坐标超出范围会返回错误</li><li>⚠️ 已添加的数据无法再次添加（会被忽略）</li></ul><p><strong>常见城市坐标参考</strong>：</p><table><thead><tr><th>城市</th><th>经度</th><th>纬度</th></tr></thead><tbody><tr><td>北京</td><td>116.38</td><td>39.90</td></tr><tr><td>上海</td><td>121.47</td><td>31.23</td></tr><tr><td>深圳</td><td>114.05</td><td>22.52</td></tr><tr><td>重庆</td><td>106.50</td><td>29.53</td></tr><tr><td>广州</td><td>113.26</td><td>23.13</td></tr></tbody></table><h4 id="GEO常用命令"><a href="#GEO常用命令" class="headerlink" title="GEO常用命令"></a>GEO常用命令</h4><h5 id="1-GEOADD-添加地理位置"><a href="#1-GEOADD-添加地理位置" class="headerlink" title="1. GEOADD - 添加地理位置"></a>1. GEOADD - 添加地理位置</h5><p><strong>命令格式</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GEOADD key longitude latitude member [longitude latitude member ...]</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>说明</th><th>类型</th><th>必需</th></tr></thead><tbody><tr><td><code>key</code></td><td>GEO集合键名</td><td>字符串</td><td>✅</td></tr><tr><td><code>longitude</code></td><td>经度</td><td>浮点数</td><td>✅</td></tr><tr><td><code>latitude</code></td><td>纬度</td><td>浮点数</td><td>✅</td></tr><tr><td><code>member</code></td><td>位置名称</td><td>字符串</td><td>✅</td></tr></tbody></table><p><strong>返回值</strong>：成功添加的位置数量（整数）</p><p><strong>示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加单个城市</span></span><br><span class="line">127.0.0.1:6379&gt; GEOADD china:city 121.47 31.23 shanghai</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 批量添加多个城市</span></span><br><span class="line">127.0.0.1:6379&gt; GEOADD china:city 106.50 29.53 chongqing 114.05 22.52 shenzhen 116.38 39.90 beijing</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加更多城市</span></span><br><span class="line">127.0.0.1:6379&gt; GEOADD china:city 113.26 23.13 guangzhou 120.16 30.29 hangzhou</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br></pre></td></tr></table></figure><p><strong>⚠️ 重要提示</strong>：</p><ol><li><p><strong>两极无法添加</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 尝试添加北极点（会失败）</span></span><br><span class="line">127.0.0.1:6379&gt; GEOADD locations 0 90 north_pole</span><br><span class="line">(error) ERR invalid longitude,latitude pair 0.000000,90.000000</span><br></pre></td></tr></table></figure></li><li><p><strong>坐标范围限制</strong>：</p><ul><li>经度：-180° ~ +180°</li><li>纬度：-85.05112878° ~ +85.05112878°</li></ul></li><li><p><strong>重复添加处理</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 首次添加</span></span><br><span class="line">127.0.0.1:6379&gt; GEOADD china:city 121.47 31.23 shanghai</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 再次添加相同城市（返回0，不会重复添加）</span></span><br><span class="line">127.0.0.1:6379&gt; GEOADD china:city 121.47 31.23 shanghai</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br></pre></td></tr></table></figure></li><li><p><strong>批量导入建议</strong>：</p><ul><li>对于大量城市数据（如全国数据）</li><li>建议下载城市数据文件</li><li>通过Java&#x2F;Python程序一次性批量导入</li><li>避免手动逐个添加</li></ul></li></ol><h5 id="2-GEOPOS-获取坐标"><a href="#2-GEOPOS-获取坐标" class="headerlink" title="2. GEOPOS - 获取坐标"></a>2. GEOPOS - 获取坐标</h5><p><strong>命令格式</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GEOPOS key member [member ...]</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>说明</th><th>类型</th><th>必需</th></tr></thead><tbody><tr><td><code>key</code></td><td>GEO集合键名</td><td>字符串</td><td>✅</td></tr><tr><td><code>member</code></td><td>位置名称</td><td>字符串</td><td>✅</td></tr></tbody></table><p><strong>返回值</strong>：经纬度数组，格式为 <code>[[经度, 纬度], [经度, 纬度], ...]</code></p><p><strong>示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询单个城市坐标</span></span><br><span class="line">127.0.0.1:6379&gt; GEOPOS china:city shanghai</span><br><span class="line">1) 1) <span class="string">&quot;121.47000163793563843&quot;</span></span><br><span class="line">   2) <span class="string">&quot;31.22999903975783553&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询多个城市坐标</span></span><br><span class="line">127.0.0.1:6379&gt; GEOPOS china:city beijing shanghai shenzhen</span><br><span class="line">1) 1) <span class="string">&quot;116.37999743223190308&quot;</span></span><br><span class="line">   2) <span class="string">&quot;39.90000009167092543&quot;</span></span><br><span class="line">2) 1) <span class="string">&quot;121.47000163793563843&quot;</span></span><br><span class="line">   2) <span class="string">&quot;31.22999903975783553&quot;</span></span><br><span class="line">3) 1) <span class="string">&quot;114.04999762773513794&quot;</span></span><br><span class="line">   2) <span class="string">&quot;22.51999957959539794&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询不存在的城市（返回nil）</span></span><br><span class="line">127.0.0.1:6379&gt; GEOPOS china:city nanjing</span><br><span class="line">1) (nil)</span><br></pre></td></tr></table></figure><p><strong>注意</strong>：</p><ul><li>返回的坐标可能与输入时有细微差异（精度损失）</li><li>不存在的member返回<code>(nil)</code></li></ul><h5 id="3-GEODIST-计算距离"><a href="#3-GEODIST-计算距离" class="headerlink" title="3. GEODIST - 计算距离"></a>3. GEODIST - 计算距离</h5><p><strong>命令格式</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GEODIST key member1 member2 [unit]</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>说明</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td><code>key</code></td><td>GEO集合键名</td><td>字符串</td><td>-</td></tr><tr><td><code>member1</code></td><td>第一个位置</td><td>字符串</td><td>-</td></tr><tr><td><code>member2</code></td><td>第二个位置</td><td>字符串</td><td>-</td></tr><tr><td><code>unit</code></td><td>距离单位</td><td>m&#x2F;km&#x2F;mi&#x2F;ft</td><td>m（米）</td></tr></tbody></table><p><strong>距离单位</strong>：</p><table><thead><tr><th>单位</th><th>说明</th><th>换算</th></tr></thead><tbody><tr><td><code>m</code></td><td>米（meter）</td><td>默认单位</td></tr><tr><td><code>km</code></td><td>千米&#x2F;公里（kilometer）</td><td>1km &#x3D; 1000m</td></tr><tr><td><code>mi</code></td><td>英里（mile）</td><td>1mi ≈ 1.609km</td></tr><tr><td><code>ft</code></td><td>英尺（foot）</td><td>1ft ≈ 0.3048m</td></tr></tbody></table><p><strong>返回值</strong>：两地之间的<strong>直线距离</strong>（浮点数），如果任一位置不存在则返回<code>(nil)</code></p><p><strong>示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 计算北京到上海的距离（默认米）</span></span><br><span class="line">127.0.0.1:6379&gt; GEODIST china:city beijing shanghai</span><br><span class="line"><span class="string">&quot;1067597.9668&quot;</span>    <span class="comment"># 约1068公里</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算北京到上海的距离（千米）</span></span><br><span class="line">127.0.0.1:6379&gt; GEODIST china:city beijing shanghai km</span><br><span class="line"><span class="string">&quot;1067.5980&quot;</span>       <span class="comment"># 1067.6公里</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算深圳到广州的距离（千米）</span></span><br><span class="line">127.0.0.1:6379&gt; GEODIST china:city shenzhen guangzhou km</span><br><span class="line"><span class="string">&quot;104.6034&quot;</span>        <span class="comment"># 约105公里</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算不存在的城市（返回nil）</span></span><br><span class="line">127.0.0.1:6379&gt; GEODIST china:city beijing nanjing</span><br><span class="line">(nil)</span><br></pre></td></tr></table></figure><p><strong>注意</strong>：</p><ul><li>计算的是<strong>直线距离</strong>（大圆距离），不是实际道路距离</li><li>结果精度较高，适合大多数应用场景</li></ul><h5 id="4-GEORADIUS-半径范围查询（按坐标）"><a href="#4-GEORADIUS-半径范围查询（按坐标）" class="headerlink" title="4. GEORADIUS - 半径范围查询（按坐标）"></a>4. GEORADIUS - 半径范围查询（按坐标）</h5><p><strong>命令格式</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GEORADIUS key longitude latitude radius unit [WITHCOORD] [WITHDIST] [WITHHASH] [COUNT count] [ASC|DESC]</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>说明</th><th>类型</th><th>必需</th></tr></thead><tbody><tr><td><code>key</code></td><td>GEO集合键名</td><td>字符串</td><td>✅</td></tr><tr><td><code>longitude</code></td><td>中心点经度</td><td>浮点数</td><td>✅</td></tr><tr><td><code>latitude</code></td><td>中心点纬度</td><td>浮点数</td><td>✅</td></tr><tr><td><code>radius</code></td><td>半径</td><td>数字</td><td>✅</td></tr><tr><td><code>unit</code></td><td>距离单位</td><td>m&#x2F;km&#x2F;mi&#x2F;ft</td><td>✅</td></tr></tbody></table><p><strong>可选参数</strong>：</p><table><thead><tr><th>可选参数</th><th>说明</th></tr></thead><tbody><tr><td><code>WITHCOORD</code></td><td>返回位置的经纬度</td></tr><tr><td><code>WITHDIST</code></td><td>返回位置与中心点的距离</td></tr><tr><td><code>WITHHASH</code></td><td>返回位置的GeoHash值</td></tr><tr><td><code>COUNT count</code></td><td>限制返回结果数量</td></tr><tr><td><code>ASC</code></td><td>按距离从近到远排序</td></tr><tr><td><code>DESC</code></td><td>按距离从远到近排序</td></tr></tbody></table><p><strong>返回值</strong>：符合条件的位置列表</p><p><strong>示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询以指定经纬度为中心，1000公里范围内的城市</span></span><br><span class="line">127.0.0.1:6379&gt; GEORADIUS china:city 110 30 1000 km</span><br><span class="line">1) <span class="string">&quot;chongqing&quot;</span></span><br><span class="line">2) <span class="string">&quot;shenzhen&quot;</span></span><br><span class="line">3) <span class="string">&quot;guangzhou&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询并返回距离（按距离升序）</span></span><br><span class="line">127.0.0.1:6379&gt; GEORADIUS china:city 110 30 1000 km WITHDIST ASC</span><br><span class="line">1) 1) <span class="string">&quot;chongqing&quot;</span></span><br><span class="line">   2) <span class="string">&quot;341.9374&quot;</span></span><br><span class="line">2) 1) <span class="string">&quot;guangzhou&quot;</span></span><br><span class="line">   2) <span class="string">&quot;810.0662&quot;</span></span><br><span class="line">3) 1) <span class="string">&quot;shenzhen&quot;</span></span><br><span class="line">   2) <span class="string">&quot;914.4949&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询并返回坐标和距离，限制3个结果</span></span><br><span class="line">127.0.0.1:6379&gt; GEORADIUS china:city 110 30 1500 km WITHCOORD WITHDIST COUNT 3 ASC</span><br><span class="line">1) 1) <span class="string">&quot;chongqing&quot;</span></span><br><span class="line">   2) <span class="string">&quot;341.9374&quot;</span></span><br><span class="line">   3) 1) <span class="string">&quot;106.49999767541885376&quot;</span></span><br><span class="line">      2) <span class="string">&quot;29.52999957900659211&quot;</span></span><br><span class="line">2) 1) <span class="string">&quot;guangzhou&quot;</span></span><br><span class="line">   2) <span class="string">&quot;810.0662&quot;</span></span><br><span class="line">   3) 1) <span class="string">&quot;113.25999975204467773&quot;</span></span><br><span class="line">      2) <span class="string">&quot;23.12999968251882199&quot;</span></span><br><span class="line">3) 1) <span class="string">&quot;shenzhen&quot;</span></span><br><span class="line">   2) <span class="string">&quot;914.4949&quot;</span></span><br><span class="line">   3) 1) <span class="string">&quot;114.04999762773513794&quot;</span></span><br><span class="line">      2) <span class="string">&quot;22.51999957959539794&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询并返回GeoHash</span></span><br><span class="line">127.0.0.1:6379&gt; GEORADIUS china:city 110 30 1000 km WITHHASH</span><br><span class="line">1) 1) <span class="string">&quot;chongqing&quot;</span></span><br><span class="line">   2) (<span class="built_in">integer</span>) 4026042091628149</span><br><span class="line">2) 1) <span class="string">&quot;guangzhou&quot;</span></span><br><span class="line">   2) (<span class="built_in">integer</span>) 4046433733682118</span><br><span class="line">3) 1) <span class="string">&quot;shenzhen&quot;</span></span><br><span class="line">   2) (<span class="built_in">integer</span>) 4046432193082709</span><br></pre></td></tr></table></figure><h5 id="5-GEORADIUSBYMEMBER-半径范围查询（按成员）"><a href="#5-GEORADIUSBYMEMBER-半径范围查询（按成员）" class="headerlink" title="5. GEORADIUSBYMEMBER - 半径范围查询（按成员）"></a>5. GEORADIUSBYMEMBER - 半径范围查询（按成员）</h5><p><strong>命令格式</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GEORADIUSBYMEMBER key member radius unit [WITHCOORD] [WITHDIST] [WITHHASH] [COUNT count] [ASC|DESC]</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>说明</th><th>类型</th><th>必需</th></tr></thead><tbody><tr><td><code>key</code></td><td>GEO集合键名</td><td>字符串</td><td>✅</td></tr><tr><td><code>member</code></td><td>中心位置名称</td><td>字符串</td><td>✅</td></tr><tr><td><code>radius</code></td><td>半径</td><td>数字</td><td>✅</td></tr><tr><td><code>unit</code></td><td>距离单位</td><td>m&#x2F;km&#x2F;mi&#x2F;ft</td><td>✅</td></tr></tbody></table><p><strong>功能说明</strong>：与<code>GEORADIUS</code>类似，但使用已存在的成员作为中心点，而不是指定经纬度。</p><p><strong>示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询以北京为中心，1500公里范围内的城市</span></span><br><span class="line">127.0.0.1:6379&gt; GEORADIUSBYMEMBER china:city beijing 1500 km</span><br><span class="line">1) <span class="string">&quot;beijing&quot;</span></span><br><span class="line">2) <span class="string">&quot;shanghai&quot;</span></span><br><span class="line">3) <span class="string">&quot;hangzhou&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询以上海为中心，500公里范围内的城市，返回距离</span></span><br><span class="line">127.0.0.1:6379&gt; GEORADIUSBYMEMBER china:city shanghai 500 km WITHDIST ASC</span><br><span class="line">1) 1) <span class="string">&quot;shanghai&quot;</span></span><br><span class="line">   2) <span class="string">&quot;0.0000&quot;</span></span><br><span class="line">2) 1) <span class="string">&quot;hangzhou&quot;</span></span><br><span class="line">   2) <span class="string">&quot;166.6359&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询以深圳为中心，200公里范围内的城市，返回坐标和距离</span></span><br><span class="line">127.0.0.1:6379&gt; GEORADIUSBYMEMBER china:city shenzhen 200 km WITHCOORD WITHDIST</span><br><span class="line">1) 1) <span class="string">&quot;shenzhen&quot;</span></span><br><span class="line">   2) <span class="string">&quot;0.0000&quot;</span></span><br><span class="line">   3) 1) <span class="string">&quot;114.04999762773513794&quot;</span></span><br><span class="line">      2) <span class="string">&quot;22.51999957959539794&quot;</span></span><br><span class="line">2) 1) <span class="string">&quot;guangzhou&quot;</span></span><br><span class="line">   2) <span class="string">&quot;104.6034&quot;</span></span><br><span class="line">   3) 1) <span class="string">&quot;113.25999975204467773&quot;</span></span><br><span class="line">      2) <span class="string">&quot;23.12999968251882199&quot;</span></span><br></pre></td></tr></table></figure><h5 id="6-GEOHASH-获取GeoHash值"><a href="#6-GEOHASH-获取GeoHash值" class="headerlink" title="6. GEOHASH - 获取GeoHash值"></a>6. GEOHASH - 获取GeoHash值</h5><p><strong>命令格式</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GEOHASH key member [member ...]</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>说明</th><th>类型</th><th>必需</th></tr></thead><tbody><tr><td><code>key</code></td><td>GEO集合键名</td><td>字符串</td><td>✅</td></tr><tr><td><code>member</code></td><td>位置名称</td><td>字符串</td><td>✅</td></tr></tbody></table><p><strong>返回值</strong>：GeoHash字符串（11位Base32编码）</p><p><strong>GeoHash说明</strong>：</p><ul><li>GeoHash是一种地理位置编码算法</li><li>将二维经纬度转换为一维字符串</li><li>字符串越长，精度越高</li><li>前缀相同的GeoHash表示位置接近</li></ul><p><strong>示例</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取单个城市的GeoHash</span></span><br><span class="line">127.0.0.1:6379&gt; GEOHASH china:city beijing</span><br><span class="line">1) <span class="string">&quot;wx4g0b7xrt0&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取多个城市的GeoHash</span></span><br><span class="line">127.0.0.1:6379&gt; GEOHASH china:city beijing shanghai shenzhen</span><br><span class="line">1) <span class="string">&quot;wx4g0b7xrt0&quot;</span></span><br><span class="line">2) <span class="string">&quot;wtw3sj5zbj0&quot;</span></span><br><span class="line">3) <span class="string">&quot;ws10578st80&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 分析GeoHash（前缀相同表示位置接近）</span></span><br><span class="line">127.0.0.1:6379&gt; GEOHASH china:city shenzhen guangzhou</span><br><span class="line">1) <span class="string">&quot;ws10578st80&quot;</span></span><br><span class="line">2) <span class="string">&quot;ws0e9cb3v60&quot;</span></span><br><span class="line"><span class="comment"># 深圳和广州的GeoHash都以&quot;ws&quot;开头，表示位置较近</span></span><br></pre></td></tr></table></figure><h4 id="应用场景-1"><a href="#应用场景-1" class="headerlink" title="应用场景"></a>应用场景</h4><h5 id="1-附近的人-店铺-设施"><a href="#1-附近的人-店铺-设施" class="headerlink" title="1. 附近的人&#x2F;店铺&#x2F;设施"></a>1. 附近的人&#x2F;店铺&#x2F;设施</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 场景：查找我附近1公里内的餐厅</span></span><br><span class="line"><span class="comment"># 假设我的位置：经度113.93，纬度22.54</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询附近的餐厅</span></span><br><span class="line">GEORADIUS restaurants 113.93 22.54 1 km WITHDIST ASC</span><br></pre></td></tr></table></figure><h5 id="2-外卖配送范围"><a href="#2-外卖配送范围" class="headerlink" title="2. 外卖配送范围"></a>2. 外卖配送范围</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 场景：查找某餐厅3公里配送范围内的用户</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加餐厅位置</span></span><br><span class="line">GEOADD restaurants 113.93 22.54 <span class="string">&quot;麦当劳·深圳店&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询配送范围内的用户</span></span><br><span class="line">GEORADIUSBYMEMBER restaurants <span class="string">&quot;麦当劳·深圳店&quot;</span> 3 km</span><br></pre></td></tr></table></figure><h5 id="3-打车距离计算"><a href="#3-打车距离计算" class="headerlink" title="3. 打车距离计算"></a>3. 打车距离计算</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 场景：计算乘客和司机之间的距离</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加位置</span></span><br><span class="line">GEOADD taxi:locations 113.93 22.54 passenger123</span><br><span class="line">GEOADD taxi:locations 113.95 22.56 driver456</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算距离</span></span><br><span class="line">GEODIST taxi:locations passenger123 driver456 km</span><br></pre></td></tr></table></figure><h5 id="4-共享单车分布"><a href="#4-共享单车分布" class="headerlink" title="4. 共享单车分布"></a>4. 共享单车分布</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 场景：查找附近500米内的共享单车</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加单车位置</span></span><br><span class="line">GEOADD bikes 113.93 22.54 bike001</span><br><span class="line">GEOADD bikes 113.94 22.55 bike002</span><br><span class="line">GEOADD bikes 113.92 22.53 bike003</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询附近的单车</span></span><br><span class="line">GEORADIUS bikes 113.93 22.54 0.5 km WITHDIST</span><br></pre></td></tr></table></figure><h5 id="5-物流配送优化"><a href="#5-物流配送优化" class="headerlink" title="5. 物流配送优化"></a>5. 物流配送优化</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 场景：查找距离配送中心最近的10个订单</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加订单位置</span></span><br><span class="line">GEOADD orders 113.93 22.54 order001</span><br><span class="line">GEOADD orders 113.95 22.56 order002</span><br><span class="line"><span class="comment"># ... 更多订单</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询最近的10个订单</span></span><br><span class="line">GEORADIUSBYMEMBER orders warehouse001 50 km COUNT 10 ASC</span><br></pre></td></tr></table></figure><h4 id="GEO底层原理"><a href="#GEO底层原理" class="headerlink" title="GEO底层原理"></a>GEO底层原理</h4><p><strong>数据结构</strong>：</p><ul><li>GEO底层使用<strong>ZSet（有序集合）</strong> 存储</li><li>使用<strong>GeoHash算法</strong>将经纬度编码为52位整数</li><li>整数作为ZSet的score，位置名称作为member</li></ul><p><strong>GeoHash编码过程</strong>：</p><ol><li><strong>交叉编码</strong>：将经度和纬度的二进制交叉组合</li><li><strong>Base32编码</strong>：将二进制转换为Base32字符串</li><li><strong>精度控制</strong>：字符串越长，精度越高</li></ol><p><strong>示例</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">北京坐标：(116.38, 39.90)</span><br><span class="line">↓ GeoHash编码</span><br><span class="line">wx4g0b7xrt0</span><br></pre></td></tr></table></figure><p><strong>相互操作</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># GEO数据可以用ZSet命令操作</span></span><br><span class="line"><span class="comment"># 查看所有城市（ZSET命令）</span></span><br><span class="line">127.0.0.1:6379&gt; ZRANGE china:city 0 -1</span><br><span class="line">1) <span class="string">&quot;chongqing&quot;</span></span><br><span class="line">2) <span class="string">&quot;shenzhen&quot;</span></span><br><span class="line">3) <span class="string">&quot;guangzhou&quot;</span></span><br><span class="line">4) <span class="string">&quot;shanghai&quot;</span></span><br><span class="line">5) <span class="string">&quot;hangzhou&quot;</span></span><br><span class="line">6) <span class="string">&quot;beijing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除城市（ZSET命令）</span></span><br><span class="line">127.0.0.1:6379&gt; ZREM china:city hangzhou</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看数据量</span></span><br><span class="line">127.0.0.1:6379&gt; ZCARD china:city</span><br><span class="line">(<span class="built_in">integer</span>) 5</span><br></pre></td></tr></table></figure><h4 id="注意事项-1"><a href="#注意事项-1" class="headerlink" title="注意事项"></a>注意事项</h4><blockquote><p><strong>⚠️ 坐标范围限制</strong>：</p><ul><li>经度：-180° ~ +180°</li><li>纬度：-85.05112878° ~ +85.05112878°</li><li>两极（±90°纬度）无法添加</li></ul></blockquote><blockquote><p><strong>⚠️ 精度损失</strong>：</p><ul><li>GeoHash算法会有精度损失</li><li>返回的坐标可能与输入略有差异</li><li>对于大多数应用场景，精度足够</li></ul></blockquote><blockquote><p><strong>⚠️ 距离计算</strong>：</p><ul><li>计算的是<strong>直线距离</strong>（大圆距离）</li><li>不是实际道路距离</li><li>实际路程通常比直线距离长20%-50%</li></ul></blockquote><blockquote><p><strong>⚠️ 性能考虑</strong>：</p><ul><li><code>GEORADIUS</code>命令时间复杂度：O(N+log(M))</li><li>N是半径内的元素数量，M是总元素数量</li><li>大范围查询或海量数据时可能较慢</li><li>建议使用<code>COUNT</code>限制返回数量</li></ul></blockquote><blockquote><p><strong>⚠️ Redis 6.2版本更新</strong>：</p><ul><li><code>GEORADIUS</code>和<code>GEORADIUSBYMEMBER</code>在Redis 6.2中标记为过时</li><li>推荐使用新命令：<ul><li><code>GEOSEARCH</code>：替代GEORADIUS&#x2F;GEORADIUSBYMEMBER</li><li><code>GEOSEARCHSTORE</code>：存储查询结果</li></ul></li></ul></blockquote><h4 id="实战代码示例（Java）-3"><a href="#实战代码示例（Java）-3" class="headerlink" title="实战代码示例（Java）"></a>实战代码示例（Java）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.GeoCoordinate;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.GeoRadiusResponse;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.GeoUnit;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.params.GeoRadiusParam;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GeoExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;localhost&quot;</span>, <span class="number">6379</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> <span class="string">&quot;china:city&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 1. 添加城市位置</span></span><br><span class="line">        Map&lt;String, GeoCoordinate&gt; cities = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        cities.put(<span class="string">&quot;beijing&quot;</span>, <span class="keyword">new</span> <span class="title class_">GeoCoordinate</span>(<span class="number">116.38</span>, <span class="number">39.90</span>));</span><br><span class="line">        cities.put(<span class="string">&quot;shanghai&quot;</span>, <span class="keyword">new</span> <span class="title class_">GeoCoordinate</span>(<span class="number">121.47</span>, <span class="number">31.23</span>));</span><br><span class="line">        cities.put(<span class="string">&quot;shenzhen&quot;</span>, <span class="keyword">new</span> <span class="title class_">GeoCoordinate</span>(<span class="number">114.05</span>, <span class="number">22.52</span>));</span><br><span class="line">        cities.put(<span class="string">&quot;guangzhou&quot;</span>, <span class="keyword">new</span> <span class="title class_">GeoCoordinate</span>(<span class="number">113.26</span>, <span class="number">23.13</span>));</span><br><span class="line">        cities.put(<span class="string">&quot;chongqing&quot;</span>, <span class="keyword">new</span> <span class="title class_">GeoCoordinate</span>(<span class="number">106.50</span>, <span class="number">29.53</span>));</span><br><span class="line">        </span><br><span class="line">        jedis.geoadd(key, cities);</span><br><span class="line">        System.out.println(<span class="string">&quot;城市添加完成&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2. 获取城市坐标</span></span><br><span class="line">        List&lt;GeoCoordinate&gt; coords = jedis.geopos(key, <span class="string">&quot;beijing&quot;</span>, <span class="string">&quot;shanghai&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;北京坐标: &quot;</span> + coords.get(<span class="number">0</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;上海坐标: &quot;</span> + coords.get(<span class="number">1</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3. 计算城市间距离</span></span><br><span class="line">        <span class="type">Double</span> <span class="variable">distance</span> <span class="operator">=</span> jedis.geodist(key, <span class="string">&quot;beijing&quot;</span>, <span class="string">&quot;shanghai&quot;</span>, GeoUnit.KM);</span><br><span class="line">        System.out.println(<span class="string">&quot;北京到上海距离: &quot;</span> + distance + <span class="string">&quot; km&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 4. 查询附近的城市（以指定坐标为中心）</span></span><br><span class="line">        <span class="type">GeoRadiusParam</span> <span class="variable">param</span> <span class="operator">=</span> GeoRadiusParam.geoRadiusParam()</span><br><span class="line">            .withCoord()        <span class="comment">// 返回坐标</span></span><br><span class="line">            .withDist()         <span class="comment">// 返回距离</span></span><br><span class="line">            .sortAscending()    <span class="comment">// 按距离升序</span></span><br><span class="line">            .count(<span class="number">3</span>);          <span class="comment">// 限制3个结果</span></span><br><span class="line">        </span><br><span class="line">        List&lt;GeoRadiusResponse&gt; results = jedis.georadius(</span><br><span class="line">            key, <span class="number">110</span>, <span class="number">30</span>, <span class="number">1000</span>, GeoUnit.KM, param</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;\n以(110, 30)为中心，1000km范围内的城市：&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (GeoRadiusResponse result : results) &#123;</span><br><span class="line">            System.out.println(String.format(</span><br><span class="line">                <span class="string">&quot;城市: %s, 距离: %.2f km, 坐标: (%.2f, %.2f)&quot;</span>,</span><br><span class="line">                result.getMemberByString(),</span><br><span class="line">                result.getDistance(),</span><br><span class="line">                result.getCoordinate().getLongitude(),</span><br><span class="line">                result.getCoordinate().getLatitude()</span><br><span class="line">            ));</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 5. 查询附近的城市（以已有城市为中心）</span></span><br><span class="line">        List&lt;GeoRadiusResponse&gt; nearbyShanghai = jedis.georadiusByMember(</span><br><span class="line">            key, <span class="string">&quot;shanghai&quot;</span>, <span class="number">500</span>, GeoUnit.KM, param</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;\n以上海为中心，500km范围内的城市：&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (GeoRadiusResponse result : nearbyShanghai) &#123;</span><br><span class="line">            System.out.println(String.format(</span><br><span class="line">                <span class="string">&quot;城市: %s, 距离: %.2f km&quot;</span>,</span><br><span class="line">                result.getMemberByString(),</span><br><span class="line">                result.getDistance()</span><br><span class="line">            ));</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 6. 获取GeoHash</span></span><br><span class="line">        List&lt;String&gt; geoHashes = jedis.geohash(key, <span class="string">&quot;beijing&quot;</span>, <span class="string">&quot;shanghai&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;\n北京GeoHash: &quot;</span> + geoHashes.get(<span class="number">0</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;上海GeoHash: &quot;</span> + geoHashes.get(<span class="number">1</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 7. 附近的人功能实现</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">locationKey</span> <span class="operator">=</span> <span class="string">&quot;user:locations&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 用户上报位置</span></span><br><span class="line">        jedis.geoadd(locationKey, <span class="number">113.93</span>, <span class="number">22.54</span>, <span class="string">&quot;user001&quot;</span>);</span><br><span class="line">        jedis.geoadd(locationKey, <span class="number">113.95</span>, <span class="number">22.55</span>, <span class="string">&quot;user002&quot;</span>);</span><br><span class="line">        jedis.geoadd(locationKey, <span class="number">113.92</span>, <span class="number">22.53</span>, <span class="string">&quot;user003&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 查找user001附近1公里内的人</span></span><br><span class="line">        List&lt;GeoRadiusResponse&gt; nearbyUsers = jedis.georadiusByMember(</span><br><span class="line">            locationKey, <span class="string">&quot;user001&quot;</span>, <span class="number">1</span>, GeoUnit.KM,</span><br><span class="line">            GeoRadiusParam.geoRadiusParam().withDist().sortAscending()</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;\nuser001附近1km内的用户：&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (GeoRadiusResponse user : nearbyUsers) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!user.getMemberByString().equals(<span class="string">&quot;user001&quot;</span>)) &#123;</span><br><span class="line">                System.out.println(String.format(</span><br><span class="line">                    <span class="string">&quot;用户: %s, 距离: %.2f km&quot;</span>,</span><br><span class="line">                    user.getMemberByString(),</span><br><span class="line">                    user.getDistance()</span><br><span class="line">                ));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        jedis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="实战案例：外卖配送系统"><a href="#实战案例：外卖配送系统" class="headerlink" title="实战案例：外卖配送系统"></a>实战案例：外卖配送系统</h4><p><strong>需求</strong>：实现外卖平台的配送范围查询和骑手分配</p><p><strong>系统设计</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">用户下单</span><br><span class="line">    ↓</span><br><span class="line">查询配送范围内的餐厅</span><br><span class="line">    ↓</span><br><span class="line">计算餐厅到用户的距离</span><br><span class="line">    ↓</span><br><span class="line">查找附近的骑手</span><br><span class="line">    ↓</span><br><span class="line">分配最近的骑手</span><br><span class="line">    ↓</span><br><span class="line">实时更新骑手位置</span><br></pre></td></tr></table></figure><p><strong>代码实现</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeliveryService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Jedis jedis;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RESTAURANT_KEY</span> <span class="operator">=</span> <span class="string">&quot;restaurants&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RIDER_KEY</span> <span class="operator">=</span> <span class="string">&quot;riders&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ORDER_KEY</span> <span class="operator">=</span> <span class="string">&quot;orders&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1. 添加餐厅位置</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addRestaurant</span><span class="params">(String restaurantId, <span class="type">double</span> longitude, <span class="type">double</span> latitude)</span> &#123;</span><br><span class="line">        jedis.geoadd(RESTAURANT_KEY, longitude, latitude, restaurantId);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2. 查找用户附近的餐厅（5公里内）</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;RestaurantInfo&gt; <span class="title function_">findNearbyRestaurants</span><span class="params">(<span class="type">double</span> userLng, <span class="type">double</span> userLat)</span> &#123;</span><br><span class="line">        List&lt;GeoRadiusResponse&gt; results = jedis.georadius(</span><br><span class="line">            RESTAURANT_KEY, userLng, userLat, <span class="number">5</span>, GeoUnit.KM,</span><br><span class="line">            GeoRadiusParam.geoRadiusParam()</span><br><span class="line">                .withCoord()</span><br><span class="line">                .withDist()</span><br><span class="line">                .sortAscending()</span><br><span class="line">                .count(<span class="number">20</span>)</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        List&lt;RestaurantInfo&gt; restaurants = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (GeoRadiusResponse result : results) &#123;</span><br><span class="line">            <span class="type">RestaurantInfo</span> <span class="variable">info</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RestaurantInfo</span>();</span><br><span class="line">            info.setId(result.getMemberByString());</span><br><span class="line">            info.setDistance(result.getDistance());</span><br><span class="line">            info.setLongitude(result.getCoordinate().getLongitude());</span><br><span class="line">            info.setLatitude(result.getCoordinate().getLatitude());</span><br><span class="line">            restaurants.add(info);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> restaurants;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3. 计算配送距离</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">calculateDeliveryDistance</span><span class="params">(String restaurantId, <span class="type">double</span> userLng, <span class="type">double</span> userLat)</span> &#123;</span><br><span class="line">        <span class="comment">// 先将用户位置临时添加</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">tempUserId</span> <span class="operator">=</span> <span class="string">&quot;temp_&quot;</span> + System.currentTimeMillis();</span><br><span class="line">        jedis.geoadd(RESTAURANT_KEY, userLng, userLat, tempUserId);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 计算距离</span></span><br><span class="line">        <span class="type">Double</span> <span class="variable">distance</span> <span class="operator">=</span> jedis.geodist(RESTAURANT_KEY, restaurantId, tempUserId, GeoUnit.KM);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 删除临时位置</span></span><br><span class="line">        jedis.zrem(RESTAURANT_KEY, tempUserId);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> distance != <span class="literal">null</span> ? distance : -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 4. 更新骑手位置</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateRiderLocation</span><span class="params">(String riderId, <span class="type">double</span> longitude, <span class="type">double</span> latitude)</span> &#123;</span><br><span class="line">        jedis.geoadd(RIDER_KEY, longitude, latitude, riderId);</span><br><span class="line">        <span class="comment">// 设置过期时间（5分钟未更新则认为离线）</span></span><br><span class="line">        jedis.expire(RIDER_KEY, <span class="number">300</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 5. 查找餐厅附近的骑手</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;RiderInfo&gt; <span class="title function_">findNearbyRiders</span><span class="params">(String restaurantId, <span class="type">double</span> maxDistance)</span> &#123;</span><br><span class="line">        List&lt;GeoRadiusResponse&gt; results = jedis.georadiusByMember(</span><br><span class="line">            RIDER_KEY, restaurantId, maxDistance, GeoUnit.KM,</span><br><span class="line">            GeoRadiusParam.geoRadiusParam()</span><br><span class="line">                .withCoord()</span><br><span class="line">                .withDist()</span><br><span class="line">                .sortAscending()</span><br><span class="line">                .count(<span class="number">10</span>)</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        List&lt;RiderInfo&gt; riders = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (GeoRadiusResponse result : results) &#123;</span><br><span class="line">            <span class="type">RiderInfo</span> <span class="variable">info</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RiderInfo</span>();</span><br><span class="line">            info.setId(result.getMemberByString());</span><br><span class="line">            info.setDistance(result.getDistance());</span><br><span class="line">            info.setLongitude(result.getCoordinate().getLongitude());</span><br><span class="line">            info.setLatitude(result.getCoordinate().getLatitude());</span><br><span class="line">            riders.add(info);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> riders;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 6. 分配订单给最近的骑手</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">assignOrderToNearestRider</span><span class="params">(String orderId, String restaurantId)</span> &#123;</span><br><span class="line">        List&lt;RiderInfo&gt; riders = findNearbyRiders(restaurantId, <span class="number">5.0</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (riders.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>; <span class="comment">// 没有可用骑手</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 选择最近的骑手</span></span><br><span class="line">        <span class="type">RiderInfo</span> <span class="variable">nearestRider</span> <span class="operator">=</span> riders.get(<span class="number">0</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 记录订单分配</span></span><br><span class="line">        jedis.hset(<span class="string">&quot;order:&quot;</span> + orderId, <span class="string">&quot;riderId&quot;</span>, nearestRider.getId());</span><br><span class="line">        jedis.hset(<span class="string">&quot;order:&quot;</span> + orderId, <span class="string">&quot;distance&quot;</span>, String.valueOf(nearestRider.getDistance()));</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> nearestRider.getId();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数据模型</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RestaurantInfo</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> distance;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> longitude;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> latitude;</span><br><span class="line">    <span class="comment">// getters and setters</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RiderInfo</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> distance;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> longitude;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> latitude;</span><br><span class="line">    <span class="comment">// getters and setters</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>使用示例</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeliverySystemDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">DeliveryService</span> <span class="variable">service</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DeliveryService</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 添加餐厅</span></span><br><span class="line">        service.addRestaurant(<span class="string">&quot;restaurant001&quot;</span>, <span class="number">113.93</span>, <span class="number">22.54</span>);</span><br><span class="line">        service.addRestaurant(<span class="string">&quot;restaurant002&quot;</span>, <span class="number">113.95</span>, <span class="number">22.56</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 用户下单，查找附近餐厅</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">userLng</span> <span class="operator">=</span> <span class="number">113.94</span>;</span><br><span class="line">        <span class="type">double</span> <span class="variable">userLat</span> <span class="operator">=</span> <span class="number">22.55</span>;</span><br><span class="line">        List&lt;RestaurantInfo&gt; restaurants = service.findNearbyRestaurants(userLng, userLat);</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;附近的餐厅：&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (RestaurantInfo restaurant : restaurants) &#123;</span><br><span class="line">            System.out.println(String.format(</span><br><span class="line">                <span class="string">&quot;餐厅ID: %s, 距离: %.2f km&quot;</span>,</span><br><span class="line">                restaurant.getId(),</span><br><span class="line">                restaurant.getDistance()</span><br><span class="line">            ));</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 骑手上线，上报位置</span></span><br><span class="line">        service.updateRiderLocation(<span class="string">&quot;rider001&quot;</span>, <span class="number">113.92</span>, <span class="number">22.53</span>);</span><br><span class="line">        service.updateRiderLocation(<span class="string">&quot;rider002&quot;</span>, <span class="number">113.96</span>, <span class="number">22.57</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 分配订单给最近的骑手</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">assignedRider</span> <span class="operator">=</span> service.assignOrderToNearestRider(<span class="string">&quot;order001&quot;</span>, <span class="string">&quot;restaurant001&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;订单已分配给骑手: &quot;</span> + assignedRider);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>性能优化建议</strong>：</p><ol><li><p><strong>限制查询范围</strong>：</p><ul><li>使用<code>COUNT</code>限制返回数量</li><li>合理设置查询半径（不要过大）</li></ul></li><li><p><strong>定期清理过期数据</strong>：</p><ul><li>离线用户&#x2F;骑手的位置</li><li>使用TTL自动过期</li></ul></li><li><p><strong>分片存储</strong>：</p><ul><li>按城市&#x2F;区域分片</li><li>避免单个GEO集合过大</li></ul></li><li><p><strong>缓存热点数据</strong>：</p><ul><li>热门餐厅&#x2F;地点</li><li>高频查询结果</li></ul></li></ol><h3 id="4-4-Stream（流）"><a href="#4-4-Stream（流）" class="headerlink" title="4.4 Stream（流）"></a>4.4 Stream（流）</h3><p>待补充…</p><hr><h2 id="5-Redis常用命令"><a href="#5-Redis常用命令" class="headerlink" title="5. Redis常用命令"></a>5. Redis常用命令</h2><h3 id="5-1-通用命令"><a href="#5-1-通用命令" class="headerlink" title="5.1 通用命令"></a>5.1 通用命令</h3><p>待补充…</p><h3 id="5-2-数据操作命令"><a href="#5-2-数据操作命令" class="headerlink" title="5.2 数据操作命令"></a>5.2 数据操作命令</h3><p>待补充…</p><h3 id="5-3-事务命令"><a href="#5-3-事务命令" class="headerlink" title="5.3 事务命令"></a>5.3 事务命令</h3><p>待补充…</p><h3 id="5-4-持久化命令"><a href="#5-4-持久化命令" class="headerlink" title="5.4 持久化命令"></a>5.4 持久化命令</h3><p>待补充…</p><hr><h2 id="6-Redis持久化"><a href="#6-Redis持久化" class="headerlink" title="6. Redis持久化"></a>6. Redis持久化</h2><h3 id="6-1-RDB持久化"><a href="#6-1-RDB持久化" class="headerlink" title="6.1 RDB持久化"></a>6.1 RDB持久化</h3><p>待补充…</p><h3 id="6-2-AOF持久化"><a href="#6-2-AOF持久化" class="headerlink" title="6.2 AOF持久化"></a>6.2 AOF持久化</h3><p>待补充…</p><h3 id="6-3-混合持久化"><a href="#6-3-混合持久化" class="headerlink" title="6.3 混合持久化"></a>6.3 混合持久化</h3><p>待补充…</p><h3 id="6-4-持久化策略选择"><a href="#6-4-持久化策略选择" class="headerlink" title="6.4 持久化策略选择"></a>6.4 持久化策略选择</h3><p>待补充…</p><hr><h2 id="7-Redis事务"><a href="#7-Redis事务" class="headerlink" title="7. Redis事务"></a>7. Redis事务</h2><h3 id="7-1-事务基础"><a href="#7-1-事务基础" class="headerlink" title="7.1 事务基础"></a>7.1 事务基础</h3><p>待补充…</p><h3 id="7-2-事务命令"><a href="#7-2-事务命令" class="headerlink" title="7.2 事务命令"></a>7.2 事务命令</h3><p>待补充…</p><h3 id="7-3-Watch机制"><a href="#7-3-Watch机制" class="headerlink" title="7.3 Watch机制"></a>7.3 Watch机制</h3><p>待补充…</p><h3 id="7-4-事务注意事项"><a href="#7-4-事务注意事项" class="headerlink" title="7.4 事务注意事项"></a>7.4 事务注意事项</h3><p>待补充…</p><hr><h2 id="8-Redis发布订阅"><a href="#8-Redis发布订阅" class="headerlink" title="8. Redis发布订阅"></a>8. Redis发布订阅</h2><h3 id="8-1-发布订阅模式"><a href="#8-1-发布订阅模式" class="headerlink" title="8.1 发布订阅模式"></a>8.1 发布订阅模式</h3><p>待补充…</p><h3 id="8-2-相关命令"><a href="#8-2-相关命令" class="headerlink" title="8.2 相关命令"></a>8.2 相关命令</h3><p>待补充…</p><h3 id="8-3-应用场景"><a href="#8-3-应用场景" class="headerlink" title="8.3 应用场景"></a>8.3 应用场景</h3><p>待补充…</p><hr><h2 id="9-Redis主从复制"><a href="#9-Redis主从复制" class="headerlink" title="9. Redis主从复制"></a>9. Redis主从复制</h2><h3 id="9-1-主从复制原理"><a href="#9-1-主从复制原理" class="headerlink" title="9.1 主从复制原理"></a>9.1 主从复制原理</h3><p>待补充…</p><h3 id="9-2-配置主从复制"><a href="#9-2-配置主从复制" class="headerlink" title="9.2 配置主从复制"></a>9.2 配置主从复制</h3><p>待补充…</p><h3 id="9-3-全量复制与增量复制"><a href="#9-3-全量复制与增量复制" class="headerlink" title="9.3 全量复制与增量复制"></a>9.3 全量复制与增量复制</h3><p>待补充…</p><h3 id="9-4-主从复制注意事项"><a href="#9-4-主从复制注意事项" class="headerlink" title="9.4 主从复制注意事项"></a>9.4 主从复制注意事项</h3><p>待补充…</p><hr><h2 id="10-Redis哨兵模式"><a href="#10-Redis哨兵模式" class="headerlink" title="10. Redis哨兵模式"></a>10. Redis哨兵模式</h2><h3 id="10-1-哨兵模式介绍"><a href="#10-1-哨兵模式介绍" class="headerlink" title="10.1 哨兵模式介绍"></a>10.1 哨兵模式介绍</h3><p>待补充…</p><h3 id="10-2-哨兵配置"><a href="#10-2-哨兵配置" class="headerlink" title="10.2 哨兵配置"></a>10.2 哨兵配置</h3><p>待补充…</p><h3 id="10-3-故障转移"><a href="#10-3-故障转移" class="headerlink" title="10.3 故障转移"></a>10.3 故障转移</h3><p>待补充…</p><h3 id="10-4-哨兵集群"><a href="#10-4-哨兵集群" class="headerlink" title="10.4 哨兵集群"></a>10.4 哨兵集群</h3><p>待补充…</p><hr><h2 id="11-Redis集群"><a href="#11-Redis集群" class="headerlink" title="11. Redis集群"></a>11. Redis集群</h2><h3 id="11-1-集群架构"><a href="#11-1-集群架构" class="headerlink" title="11.1 集群架构"></a>11.1 集群架构</h3><p>待补充…</p><h3 id="11-2-数据分片"><a href="#11-2-数据分片" class="headerlink" title="11.2 数据分片"></a>11.2 数据分片</h3><p>待补充…</p><h3 id="11-3-集群搭建"><a href="#11-3-集群搭建" class="headerlink" title="11.3 集群搭建"></a>11.3 集群搭建</h3><p>待补充…</p><h3 id="11-4-集群扩容与缩容"><a href="#11-4-集群扩容与缩容" class="headerlink" title="11.4 集群扩容与缩容"></a>11.4 集群扩容与缩容</h3><p>待补充…</p><hr><h2 id="12-Redis实战应用"><a href="#12-Redis实战应用" class="headerlink" title="12. Redis实战应用"></a>12. Redis实战应用</h2><h3 id="12-1-缓存设计"><a href="#12-1-缓存设计" class="headerlink" title="12.1 缓存设计"></a>12.1 缓存设计</h3><p>待补充…</p><h3 id="12-2-分布式锁"><a href="#12-2-分布式锁" class="headerlink" title="12.2 分布式锁"></a>12.2 分布式锁</h3><p>待补充…</p><h3 id="12-3-延时队列"><a href="#12-3-延时队列" class="headerlink" title="12.3 延时队列"></a>12.3 延时队列</h3><p>待补充…</p><h3 id="12-4-排行榜"><a href="#12-4-排行榜" class="headerlink" title="12.4 排行榜"></a>12.4 排行榜</h3><p>待补充…</p><h3 id="12-5-限流"><a href="#12-5-限流" class="headerlink" title="12.5 限流"></a>12.5 限流</h3><p>待补充…</p><hr><h2 id="13-Redis性能优化"><a href="#13-Redis性能优化" class="headerlink" title="13. Redis性能优化"></a>13. Redis性能优化</h2><h3 id="13-1-内存优化"><a href="#13-1-内存优化" class="headerlink" title="13.1 内存优化"></a>13.1 内存优化</h3><p>待补充…</p><h3 id="13-2-命令优化"><a href="#13-2-命令优化" class="headerlink" title="13.2 命令优化"></a>13.2 命令优化</h3><p>待补充…</p><h3 id="13-3-网络优化"><a href="#13-3-网络优化" class="headerlink" title="13.3 网络优化"></a>13.3 网络优化</h3><p>待补充…</p><h3 id="13-4-慢查询分析"><a href="#13-4-慢查询分析" class="headerlink" title="13.4 慢查询分析"></a>13.4 慢查询分析</h3><p>待补充…</p><hr><h2 id="14-Redis常见问题"><a href="#14-Redis常见问题" class="headerlink" title="14. Redis常见问题"></a>14. Redis常见问题</h2><h3 id="14-1-缓存穿透"><a href="#14-1-缓存穿透" class="headerlink" title="14.1 缓存穿透"></a>14.1 缓存穿透</h3><p>待补充…</p><h3 id="14-2-缓存击穿"><a href="#14-2-缓存击穿" class="headerlink" title="14.2 缓存击穿"></a>14.2 缓存击穿</h3><p>待补充…</p><h3 id="14-3-缓存雪崩"><a href="#14-3-缓存雪崩" class="headerlink" title="14.3 缓存雪崩"></a>14.3 缓存雪崩</h3><p>待补充…</p><h3 id="14-4-数据一致性"><a href="#14-4-数据一致性" class="headerlink" title="14.4 数据一致性"></a>14.4 数据一致性</h3><p>待补充…</p><hr><h2 id="15-Java整合Redis"><a href="#15-Java整合Redis" class="headerlink" title="15. Java整合Redis"></a>15. Java整合Redis</h2><h3 id="15-1-Jedis客户端"><a href="#15-1-Jedis客户端" class="headerlink" title="15.1 Jedis客户端"></a>15.1 Jedis客户端</h3><p>待补充…</p><h3 id="15-2-Lettuce客户端"><a href="#15-2-Lettuce客户端" class="headerlink" title="15.2 Lettuce客户端"></a>15.2 Lettuce客户端</h3><p>待补充…</p><h3 id="15-3-Spring-Data-Redis"><a href="#15-3-Spring-Data-Redis" class="headerlink" title="15.3 Spring Data Redis"></a>15.3 Spring Data Redis</h3><p>待补充…</p><h3 id="15-4-RedisTemplate使用"><a href="#15-4-RedisTemplate使用" class="headerlink" title="15.4 RedisTemplate使用"></a>15.4 RedisTemplate使用</h3><p>待补充…</p><hr><h2 id="16-学习资源推荐"><a href="#16-学习资源推荐" class="headerlink" title="16. 学习资源推荐"></a>16. 学习资源推荐</h2><h3 id="官方资源"><a href="#官方资源" class="headerlink" title="官方资源"></a>官方资源</h3><ul><li><a href="https://redis.io/documentation">Redis官方文档</a> - 最权威的学习资料</li><li><a href="http://www.redis.cn/">Redis中文网</a> - 中文社区</li><li><a href="http://doc.redisfans.com/">Redis命令参考</a> - 命令速查</li></ul><h3 id="学习工具"><a href="#学习工具" class="headerlink" title="学习工具"></a>学习工具</h3><ul><li><strong>RedisInsight</strong> - Redis官方可视化工具</li><li><strong>Another Redis Desktop Manager</strong> - 开源Redis客户端</li><li><strong>Redis在线测试</strong> - 在线体验Redis命令</li></ul><h3 id="实战项目"><a href="#实战项目" class="headerlink" title="实战项目"></a>实战项目</h3><ul><li>缓存系统设计</li><li>分布式锁实现</li><li>排行榜系统</li><li>秒杀系统</li></ul><hr><p><strong>最后更新</strong>: 2025-11-09<br><strong>作者</strong>: Suo<br><strong>标签</strong>: Redis, 中间件, 缓存, NoSQL, 分布式</p><blockquote><p>💡 <strong>提示</strong>：本文档将持续更新，欢迎收藏。后续将补充完整的实战案例和代码示例。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Java技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> 中间件 </tag>
            
            <tag> 缓存 </tag>
            
            <tag> NoSQL </tag>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>编程工具快捷键大全 - 效率提升必备指南</title>
      <link href="//programming-shortcuts-guide/"/>
      <url>//programming-shortcuts-guide/</url>
      
        <content type="html"><![CDATA[<h1 id="编程工具快捷键大全-效率提升必备指南-⌨️"><a href="#编程工具快捷键大全-效率提升必备指南-⌨️" class="headerlink" title="编程工具快捷键大全 - 效率提升必备指南 ⌨️"></a>编程工具快捷键大全 - 效率提升必备指南 ⌨️</h1><blockquote><p>工欲善其事，必先利其器。熟练掌握开发工具的快捷键，可以让你的编码效率提升数倍，减少鼠标操作，让双手始终保持在键盘上，享受行云流水般的编程体验。本指南收录了主流编程工具的常用快捷键，是每位开发者的效率提升必备手册！🚀</p></blockquote><blockquote><p>📝 <strong>更新说明</strong>：本文档持续更新中，目前已收录：<strong>IntelliJ IDEA</strong>。</p></blockquote><p><img src="/images/shortcuts/cover.png" alt="快捷键指南"></p><h2 id="📋-目录"><a href="#📋-目录" class="headerlink" title="📋 目录"></a>📋 目录</h2><h3 id="📌-已收录工具"><a href="#📌-已收录工具" class="headerlink" title="📌 已收录工具"></a>📌 已收录工具</h3><h4 id="IntelliJ-IDEA-快捷键-✅"><a href="#IntelliJ-IDEA-快捷键-✅" class="headerlink" title="IntelliJ IDEA 快捷键 ✅"></a>IntelliJ IDEA 快捷键 ✅</h4><ul><li><a href="#1-%E5%9F%BA%E7%A1%80%E7%BC%96%E8%BE%91">1. 基础编辑</a><ul><li><a href="#11-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C">1.1 基本操作</a></li><li><a href="#12-%E9%80%89%E6%8B%A9%E6%89%A9%E5%B1%95">1.2 选择扩展</a></li><li><a href="#13-%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91">1.3 文本编辑</a></li></ul></li><li><a href="#2-%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90">2. 代码生成</a></li><li><a href="#3-%E4%BB%A3%E7%A0%81%E5%AF%BC%E8%88%AA">3. 代码导航</a><ul><li><a href="#31-%E6%9F%A5%E6%89%BE%E5%92%8C%E6%90%9C%E7%B4%A2">3.1 查找和搜索</a></li><li><a href="#32-%E4%BB%A3%E7%A0%81%E8%B7%B3%E8%BD%AC">3.2 代码跳转</a></li><li><a href="#33-%E5%8E%86%E5%8F%B2%E5%AF%BC%E8%88%AA">3.3 历史导航</a></li></ul></li><li><a href="#4-%E9%87%8D%E6%9E%84%E6%93%8D%E4%BD%9C">4. 重构操作</a></li><li><a href="#5-%E7%AA%97%E5%8F%A3%E5%92%8C%E8%A7%86%E5%9B%BE">5. 窗口和视图</a><ul><li><a href="#51-%E7%AA%97%E5%8F%A3%E5%88%87%E6%8D%A2">5.1 窗口切换</a></li><li><a href="#52-%E4%BB%A3%E7%A0%81%E6%8A%98%E5%8F%A0">5.2 代码折叠</a></li><li><a href="#53-%E5%B7%A5%E5%85%B7%E7%AA%97%E5%8F%A3">5.3 工具窗口</a></li></ul></li><li><a href="#6-%E8%BF%90%E8%A1%8C%E8%B0%83%E8%AF%95">6. 运行调试</a><ul><li><a href="#61-%E8%BF%90%E8%A1%8C%E5%92%8C%E8%B0%83%E8%AF%95">6.1 运行和调试</a></li><li><a href="#62-%E6%96%AD%E7%82%B9%E8%B0%83%E8%AF%95">6.2 断点调试</a></li><li><a href="#63-%E6%B5%8B%E8%AF%95">6.3 测试</a></li></ul></li><li><a href="#7-%E5%BF%AB%E6%8D%B7%E9%94%AE%E8%AE%B0%E5%BF%86%E6%8A%80%E5%B7%A7">7. 快捷键记忆技巧</a></li><li><a href="#8-%E6%80%BB%E7%BB%93%E4%B8%8E%E5%BB%BA%E8%AE%AE">8. 总结与建议</a></li></ul><h3 id="🚧-计划收录"><a href="#🚧-计划收录" class="headerlink" title="🚧 计划收录"></a>🚧 计划收录</h3><ul><li><strong>Sublime Text 快捷键</strong> - 敬请期待</li><li><strong>Chrome DevTools 快捷键</strong> - 敬请期待</li><li><strong>Git 工具快捷键</strong> - 敬请期待</li><li><strong>终端&#x2F;命令行快捷键</strong> - 敬请期待</li></ul><hr><h2 id="IntelliJ-IDEA-快捷键-💼"><a href="#IntelliJ-IDEA-快捷键-💼" class="headerlink" title="IntelliJ IDEA 快捷键 💼"></a>IntelliJ IDEA 快捷键 💼</h2><blockquote><p>IntelliJ IDEA 是Java开发者的首选IDE，它拥有强大且完善的快捷键体系。熟练掌握这些快捷键，可以让你的Java开发效率提升数倍。</p></blockquote><h3 id="1-基础编辑-📝"><a href="#1-基础编辑-📝" class="headerlink" title="1. 基础编辑 📝"></a>1. 基础编辑 📝</h3><h4 id="1-1-基本操作"><a href="#1-1-基本操作" class="headerlink" title="1.1 基本操作"></a>1.1 基本操作</h4><table><thead><tr><th>功能</th><th>Windows&#x2F;Linux</th><th>Mac</th><th>说明</th></tr></thead><tbody><tr><td><strong>复制当前行</strong></td><td><code>Ctrl + D</code></td><td><code>Cmd + D</code></td><td>复制当前行到下一行</td></tr><tr><td><strong>删除当前行</strong></td><td><code>Ctrl + Y</code></td><td><code>Cmd + Delete</code></td><td>删除当前行</td></tr><tr><td><strong>移动行（上）</strong></td><td><code>Ctrl + Shift + ↑</code></td><td><code>Cmd + Shift + ↑</code></td><td>上移当前行</td></tr><tr><td><strong>移动行（下）</strong></td><td><code>Ctrl + Shift + ↓</code></td><td><code>Cmd + Shift + ↓</code></td><td>下移当前行</td></tr><tr><td><strong>代码格式化</strong></td><td><code>Ctrl + Alt + L</code></td><td><code>Cmd + Option + L</code></td><td>格式化代码</td></tr><tr><td><strong>优化导入</strong></td><td><code>Ctrl + Alt + O</code></td><td><code>Ctrl + Option + O</code></td><td>优化import语句</td></tr><tr><td><strong>注释&#x2F;取消注释</strong></td><td><code>Ctrl + /</code></td><td><code>Cmd + /</code></td><td>行注释</td></tr><tr><td><strong>块注释</strong></td><td><code>Ctrl + Shift + /</code></td><td><code>Cmd + Option + /</code></td><td>块注释</td></tr></tbody></table><h4 id="1-2-选择扩展"><a href="#1-2-选择扩展" class="headerlink" title="1.2 选择扩展"></a>1.2 选择扩展</h4><table><thead><tr><th>功能</th><th>Windows&#x2F;Linux</th><th>Mac</th><th>说明</th></tr></thead><tbody><tr><td><strong>扩展选择</strong></td><td><code>Ctrl + W</code></td><td><code>Option + ↑</code></td><td>按语法扩展选择范围</td></tr><tr><td><strong>缩小选择</strong></td><td><code>Ctrl + Shift + W</code></td><td><code>Option + ↓</code></td><td>缩小选择范围</td></tr><tr><td><strong>选中所有出现</strong></td><td><code>Ctrl + Alt + Shift + J</code></td><td><code>Cmd + Ctrl + G</code></td><td>选中所有相同内容并批量编辑</td></tr><tr><td><strong>列选择模式</strong></td><td><code>Alt + Shift + Insert</code></td><td><code>Cmd + Shift + 8</code></td><td>切换列选择模式</td></tr><tr><td><strong>多光标编辑</strong></td><td><code>Alt + 鼠标左键拖动</code></td><td><code>Option + 鼠标左键拖动</code></td><td>创建多个光标进行批量编辑</td></tr></tbody></table><h4 id="1-3-文本编辑"><a href="#1-3-文本编辑" class="headerlink" title="1.3 文本编辑"></a>1.3 文本编辑</h4><table><thead><tr><th>功能</th><th>Windows&#x2F;Linux</th><th>Mac</th><th>说明</th></tr></thead><tbody><tr><td><strong>删除到词首</strong></td><td><code>Ctrl + BackSpace</code></td><td><code>Option + Delete</code></td><td>删除到单词开始</td></tr><tr><td><strong>删除到词尾</strong></td><td><code>Ctrl + Delete</code></td><td><code>Option + Fn + Delete</code></td><td>删除到单词结束</td></tr><tr><td><strong>大小写切换</strong></td><td><code>Ctrl + Shift + U</code></td><td><code>Cmd + Shift + U</code></td><td>切换选中文本的大小写</td></tr><tr><td><strong>补全语句</strong></td><td><code>Ctrl + Shift + Enter</code></td><td><code>Cmd + Shift + Enter</code></td><td>智能补全语句（自动添加分号、括号等）</td></tr><tr><td><strong>撤销</strong></td><td><code>Ctrl + Z</code></td><td><code>Cmd + Z</code></td><td>撤销上一步操作</td></tr><tr><td><strong>重做</strong></td><td><code>Ctrl + Shift + Z</code></td><td><code>Cmd + Shift + Z</code></td><td>重做（取消撤销）</td></tr></tbody></table><h3 id="2-代码生成-🔧"><a href="#2-代码生成-🔧" class="headerlink" title="2. 代码生成 🔧"></a>2. 代码生成 🔧</h3><table><thead><tr><th>功能</th><th>Windows&#x2F;Linux</th><th>Mac</th><th>说明</th></tr></thead><tbody><tr><td><strong>生成代码</strong></td><td><code>Alt + Insert</code></td><td><code>Cmd + N</code></td><td>生成getter&#x2F;setter等</td></tr><tr><td><strong>智能提示</strong></td><td><code>Ctrl + Space</code></td><td><code>Ctrl + Space</code></td><td>基本代码补全</td></tr><tr><td><strong>智能补全</strong></td><td><code>Ctrl + Shift + Space</code></td><td><code>Ctrl + Shift + Space</code></td><td>智能代码补全</td></tr><tr><td><strong>快速修复</strong></td><td><code>Alt + Enter</code></td><td><code>Option + Enter</code></td><td>显示快速修复建议</td></tr><tr><td><strong>覆写方法</strong></td><td><code>Ctrl + O</code></td><td><code>Cmd + O</code></td><td>覆写父类方法</td></tr><tr><td><strong>实现方法</strong></td><td><code>Ctrl + I</code></td><td><code>Cmd + I</code></td><td>实现接口方法</td></tr><tr><td><strong>环绕代码</strong></td><td><code>Ctrl + Alt + T</code></td><td><code>Cmd + Option + T</code></td><td>用if&#x2F;try等环绕代码</td></tr></tbody></table><h3 id="3-代码导航-🧭"><a href="#3-代码导航-🧭" class="headerlink" title="3. 代码导航 🧭"></a>3. 代码导航 🧭</h3><h4 id="3-1-查找和搜索"><a href="#3-1-查找和搜索" class="headerlink" title="3.1 查找和搜索"></a>3.1 查找和搜索</h4><table><thead><tr><th>功能</th><th>Windows&#x2F;Linux</th><th>Mac</th><th>说明</th></tr></thead><tbody><tr><td><strong>全局搜索</strong></td><td><code>Shift + Shift</code></td><td><code>Shift + Shift</code></td><td>Search Everywhere（全能搜索）</td></tr><tr><td><strong>跳转到类</strong></td><td><code>Ctrl + N</code></td><td><code>Cmd + O</code></td><td>快速查找类</td></tr><tr><td><strong>跳转到文件</strong></td><td><code>Ctrl + Shift + N</code></td><td><code>Cmd + Shift + O</code></td><td>快速查找文件</td></tr><tr><td><strong>跳转到符号</strong></td><td><code>Ctrl + Alt + Shift + N</code></td><td><code>Cmd + Option + O</code></td><td>查找方法或变量</td></tr><tr><td><strong>查找动作</strong></td><td><code>Ctrl + Shift + A</code></td><td><code>Cmd + Shift + A</code></td><td>查找并执行任何IDEA操作</td></tr><tr><td><strong>当前文件查找</strong></td><td><code>Ctrl + F</code></td><td><code>Cmd + F</code></td><td>在当前文件中查找</td></tr><tr><td><strong>当前文件替换</strong></td><td><code>Ctrl + R</code></td><td><code>Cmd + R</code></td><td>在当前文件中替换</td></tr><tr><td><strong>全局查找</strong></td><td><code>Ctrl + Shift + F</code></td><td><code>Cmd + Shift + F</code></td><td>在整个项目中查找</td></tr><tr><td><strong>全局替换</strong></td><td><code>Ctrl + Shift + R</code></td><td><code>Cmd + Shift + R</code></td><td>在整个项目中替换</td></tr></tbody></table><h4 id="3-2-代码跳转"><a href="#3-2-代码跳转" class="headerlink" title="3.2 代码跳转"></a>3.2 代码跳转</h4><table><thead><tr><th>功能</th><th>Windows&#x2F;Linux</th><th>Mac</th><th>说明</th></tr></thead><tbody><tr><td><strong>跳转到声明</strong></td><td><code>Ctrl + B</code> 或 <code>Ctrl + Click</code></td><td><code>Cmd + B</code></td><td>跳转到声明</td></tr><tr><td><strong>跳转到实现</strong></td><td><code>Ctrl + Alt + B</code></td><td><code>Cmd + Option + B</code></td><td>跳转到实现</td></tr><tr><td><strong>跳转到父类</strong></td><td><code>Ctrl + U</code></td><td><code>Cmd + U</code></td><td>跳转到父类或父方法</td></tr><tr><td><strong>查看类继承关系</strong></td><td><code>Ctrl + H</code></td><td><code>Cmd + H</code></td><td>查看类型层次结构</td></tr><tr><td><strong>查找用法</strong></td><td><code>Alt + F7</code></td><td><code>Option + F7</code></td><td>查找使用位置</td></tr><tr><td><strong>跳转到指定行</strong></td><td><code>Ctrl + G</code></td><td><code>Cmd + L</code></td><td>跳转到指定行号</td></tr><tr><td><strong>跳转到代码块开始</strong></td><td><code>Ctrl + [</code></td><td><code>Cmd + Option + [</code></td><td>移动到代码块开始</td></tr><tr><td><strong>跳转到代码块结束</strong></td><td><code>Ctrl + ]</code></td><td><code>Cmd + Option + ]</code></td><td>移动到代码块结束</td></tr><tr><td><strong>上一个方法</strong></td><td><code>Alt + ↑</code></td><td><code>Ctrl + ↑</code></td><td>跳转到上一个方法</td></tr><tr><td><strong>下一个方法</strong></td><td><code>Alt + ↓</code></td><td><code>Ctrl + ↓</code></td><td>跳转到下一个方法</td></tr><tr><td><strong>下一个错误</strong></td><td><code>F2</code></td><td><code>F2</code></td><td>跳转到下一个错误或警告</td></tr><tr><td><strong>上一个错误</strong></td><td><code>Shift + F2</code></td><td><code>Shift + F2</code></td><td>跳转到上一个错误</td></tr></tbody></table><h4 id="3-3-历史导航"><a href="#3-3-历史导航" class="headerlink" title="3.3 历史导航"></a>3.3 历史导航</h4><table><thead><tr><th>功能</th><th>Windows&#x2F;Linux</th><th>Mac</th><th>说明</th></tr></thead><tbody><tr><td><strong>最近的文件</strong></td><td><code>Ctrl + E</code></td><td><code>Cmd + E</code></td><td>显示最近打开的文件</td></tr><tr><td><strong>最近的位置</strong></td><td><code>Ctrl + Shift + E</code></td><td><code>Cmd + Shift + E</code></td><td>显示最近编辑位置</td></tr><tr><td><strong>后退</strong></td><td><code>Ctrl + Alt + ←</code></td><td><code>Cmd + [</code></td><td>返回上一个位置</td></tr><tr><td><strong>前进</strong></td><td><code>Ctrl + Alt + →</code></td><td><code>Cmd + ]</code></td><td>前进到下一个位置</td></tr><tr><td><strong>上次编辑位置</strong></td><td><code>Ctrl + Shift + BackSpace</code></td><td><code>Cmd + Shift + Delete</code></td><td>回到上次编辑的位置</td></tr></tbody></table><h3 id="4-重构操作-🔄"><a href="#4-重构操作-🔄" class="headerlink" title="4. 重构操作 🔄"></a>4. 重构操作 🔄</h3><table><thead><tr><th>功能</th><th>Windows&#x2F;Linux</th><th>Mac</th><th>说明</th></tr></thead><tbody><tr><td><strong>重构菜单</strong></td><td><code>Ctrl + Alt + Shift + T</code></td><td><code>Ctrl + T</code></td><td>打开重构菜单</td></tr><tr><td><strong>重命名</strong></td><td><code>Shift + F6</code></td><td><code>Shift + F6</code></td><td>重命名变量&#x2F;方法&#x2F;类</td></tr><tr><td><strong>提取变量</strong></td><td><code>Ctrl + Alt + V</code></td><td><code>Cmd + Option + V</code></td><td>提取为变量</td></tr><tr><td><strong>提取常量</strong></td><td><code>Ctrl + Alt + C</code></td><td><code>Cmd + Option + C</code></td><td>提取为常量</td></tr><tr><td><strong>提取方法</strong></td><td><code>Ctrl + Alt + M</code></td><td><code>Cmd + Option + M</code></td><td>提取为方法</td></tr><tr><td><strong>提取参数</strong></td><td><code>Ctrl + Alt + P</code></td><td><code>Cmd + Option + P</code></td><td>提取为参数</td></tr><tr><td><strong>内联</strong></td><td><code>Ctrl + Alt + N</code></td><td><code>Cmd + Option + N</code></td><td>内联变量&#x2F;方法</td></tr></tbody></table><h3 id="5-窗口和视图-🪟"><a href="#5-窗口和视图-🪟" class="headerlink" title="5. 窗口和视图 🪟"></a>5. 窗口和视图 🪟</h3><h4 id="5-1-窗口切换"><a href="#5-1-窗口切换" class="headerlink" title="5.1 窗口切换"></a>5.1 窗口切换</h4><table><thead><tr><th>功能</th><th>Windows&#x2F;Linux</th><th>Mac</th><th>说明</th></tr></thead><tbody><tr><td><strong>切换标签页</strong></td><td><code>Alt + ←</code> &#x2F; <code>Alt + →</code></td><td><code>Cmd + Shift + [</code> &#x2F; <code>]</code></td><td>切换左右标签页</td></tr><tr><td><strong>切换编辑器</strong></td><td><code>Ctrl + Tab</code></td><td><code>Ctrl + Tab</code></td><td>快速切换打开的文件</td></tr><tr><td><strong>关闭当前标签</strong></td><td><code>Ctrl + F4</code></td><td><code>Cmd + W</code></td><td>关闭当前文件</td></tr><tr><td><strong>项目窗口切换</strong></td><td><code>Ctrl + Alt + [</code> &#x2F; <code>]</code></td><td><code>Cmd + Option + [</code> &#x2F; <code>]</code></td><td>多项目窗口切换</td></tr><tr><td><strong>隐藏所有工具窗</strong></td><td><code>Ctrl + Shift + F12</code></td><td><code>Cmd + Shift + F12</code></td><td>最大化编辑器</td></tr></tbody></table><h4 id="5-2-代码折叠"><a href="#5-2-代码折叠" class="headerlink" title="5.2 代码折叠"></a>5.2 代码折叠</h4><table><thead><tr><th>功能</th><th>Windows&#x2F;Linux</th><th>Mac</th><th>说明</th></tr></thead><tbody><tr><td><strong>折叠代码块</strong></td><td><code>Ctrl + -</code></td><td><code>Cmd + -</code></td><td>折叠当前代码块</td></tr><tr><td><strong>展开代码块</strong></td><td><code>Ctrl + +</code></td><td><code>Cmd + +</code></td><td>展开当前代码块</td></tr><tr><td><strong>折叠所有</strong></td><td><code>Ctrl + Shift + -</code></td><td><code>Cmd + Shift + -</code></td><td>折叠所有代码块</td></tr><tr><td><strong>展开所有</strong></td><td><code>Ctrl + Shift + +</code></td><td><code>Cmd + Shift + +</code></td><td>展开所有代码块</td></tr></tbody></table><h4 id="5-3-工具窗口"><a href="#5-3-工具窗口" class="headerlink" title="5.3 工具窗口"></a>5.3 工具窗口</h4><table><thead><tr><th>功能</th><th>Windows&#x2F;Linux</th><th>Mac</th><th>说明</th></tr></thead><tbody><tr><td><strong>项目结构</strong></td><td><code>Alt + 1</code></td><td><code>Cmd + 1</code></td><td>显示&#x2F;隐藏项目窗口</td></tr><tr><td><strong>收藏夹</strong></td><td><code>Alt + 2</code></td><td><code>Cmd + 2</code></td><td>显示&#x2F;隐藏收藏夹</td></tr><tr><td><strong>运行</strong></td><td><code>Alt + 4</code></td><td><code>Cmd + 4</code></td><td>显示&#x2F;隐藏运行窗口</td></tr><tr><td><strong>调试</strong></td><td><code>Alt + 5</code></td><td><code>Cmd + 5</code></td><td>显示&#x2F;隐藏调试窗口</td></tr><tr><td><strong>终端</strong></td><td><code>Alt + F12</code></td><td><code>Option + F12</code></td><td>显示&#x2F;隐藏终端</td></tr><tr><td><strong>版本控制</strong></td><td><code>Alt + 9</code></td><td><code>Cmd + 9</code></td><td>显示&#x2F;隐藏版本控制窗口</td></tr></tbody></table><h3 id="6-运行调试-▶️"><a href="#6-运行调试-▶️" class="headerlink" title="6. 运行调试 ▶️"></a>6. 运行调试 ▶️</h3><h4 id="6-1-运行和调试"><a href="#6-1-运行和调试" class="headerlink" title="6.1 运行和调试"></a>6.1 运行和调试</h4><table><thead><tr><th>功能</th><th>Windows&#x2F;Linux</th><th>Mac</th><th>说明</th></tr></thead><tbody><tr><td><strong>运行</strong></td><td><code>Shift + F10</code></td><td><code>Ctrl + R</code></td><td>运行程序</td></tr><tr><td><strong>调试</strong></td><td><code>Shift + F9</code></td><td><code>Ctrl + D</code></td><td>调试程序</td></tr><tr><td><strong>停止</strong></td><td><code>Ctrl + F2</code></td><td><code>Cmd + F2</code></td><td>停止程序</td></tr><tr><td><strong>运行当前配置</strong></td><td><code>Ctrl + Shift + F10</code></td><td><code>Ctrl + Shift + R</code></td><td>运行光标所在的配置</td></tr></tbody></table><h4 id="6-2-断点调试"><a href="#6-2-断点调试" class="headerlink" title="6.2 断点调试"></a>6.2 断点调试</h4><table><thead><tr><th>功能</th><th>Windows&#x2F;Linux</th><th>Mac</th><th>说明</th></tr></thead><tbody><tr><td><strong>切换断点</strong></td><td><code>Ctrl + F8</code></td><td><code>Cmd + F8</code></td><td>添加&#x2F;移除断点</td></tr><tr><td><strong>查看断点</strong></td><td><code>Ctrl + Shift + F8</code></td><td><code>Cmd + Shift + F8</code></td><td>查看所有断点</td></tr><tr><td><strong>步过</strong></td><td><code>F8</code></td><td><code>F8</code></td><td>单步跳过</td></tr><tr><td><strong>步入</strong></td><td><code>F7</code></td><td><code>F7</code></td><td>单步进入</td></tr><tr><td><strong>步出</strong></td><td><code>Shift + F8</code></td><td><code>Shift + F8</code></td><td>单步跳出</td></tr><tr><td><strong>继续执行</strong></td><td><code>F9</code></td><td><code>Cmd + Option + R</code></td><td>继续执行到下一个断点</td></tr><tr><td><strong>计算表达式</strong></td><td><code>Alt + F8</code></td><td><code>Option + F8</code></td><td>计算表达式值</td></tr></tbody></table><h4 id="6-3-测试"><a href="#6-3-测试" class="headerlink" title="6.3 测试"></a>6.3 测试</h4><table><thead><tr><th>功能</th><th>Windows&#x2F;Linux</th><th>Mac</th><th>说明</th></tr></thead><tbody><tr><td><strong>跳转到测试</strong></td><td><code>Ctrl + Shift + T</code></td><td><code>Cmd + Shift + T</code></td><td>在测试类和源类之间跳转</td></tr><tr><td><strong>运行测试</strong></td><td><code>Ctrl + Shift + F10</code></td><td><code>Ctrl + Shift + R</code></td><td>运行当前测试方法&#x2F;类</td></tr></tbody></table><blockquote><p>💡 <strong>提示</strong>：IDEA的快捷键非常丰富，建议通过<code>Ctrl + Shift + A</code>（Mac: <code>Cmd + Shift + A</code>）搜索任何操作。</p></blockquote><hr><h3 id="7-快捷键记忆技巧-🧠"><a href="#7-快捷键记忆技巧-🧠" class="headerlink" title="7. 快捷键记忆技巧 🧠"></a>7. 快捷键记忆技巧 🧠</h3><h4 id="7-1-记忆方法"><a href="#7-1-记忆方法" class="headerlink" title="7.1 记忆方法"></a>7.1 记忆方法</h4><h4 id="分类记忆"><a href="#分类记忆" class="headerlink" title="分类记忆"></a>分类记忆</h4><p>将IDEA快捷键按功能分类：</p><ul><li><strong>编辑操作</strong>：Ctrl&#x2F;Cmd + D&#x2F;Y（复制&#x2F;删除行）</li><li><strong>代码生成</strong>：Alt&#x2F;Cmd + Insert&#x2F;N</li><li><strong>导航操作</strong>：Ctrl&#x2F;Cmd + N&#x2F;B&#x2F;E（跳转类&#x2F;声明&#x2F;最近文件）</li><li><strong>重构操作</strong>：Shift + F6（重命名），Ctrl&#x2F;Cmd + Alt + M&#x2F;V&#x2F;C（提取方法&#x2F;变量&#x2F;常量）</li></ul><h4 id="助记词联想"><a href="#助记词联想" class="headerlink" title="助记词联想"></a>助记词联想</h4><ul><li><code>Ctrl + N</code>：<strong>N</strong>avigate to class（跳转到类）</li><li><code>Ctrl + B</code>：<strong>B</strong>rowse declaration（浏览声明）</li><li><code>Shift + F6</code>：<strong>F6</strong> → <strong>R</strong>ename（重命名）</li><li><code>Alt + Insert</code>：<strong>Insert</strong> code（插入代码）</li><li><code>Ctrl + Alt + L</code>：<strong>L</strong>ayout code（格式化代码）</li></ul><h4 id="逐步学习"><a href="#逐步学习" class="headerlink" title="逐步学习"></a>逐步学习</h4><ol><li><strong>第一周</strong>：掌握基础编辑快捷键（复制&#x2F;删除行、代码格式化等）</li><li><strong>第二周</strong>：掌握代码导航快捷键（跳转到类&#x2F;文件&#x2F;声明）</li><li><strong>第三周</strong>：学习代码生成和快速修复</li><li><strong>第四周</strong>：掌握重构操作和调试快捷键</li></ol><h4 id="7-2-练习建议"><a href="#7-2-练习建议" class="headerlink" title="7.2 练习建议"></a>7.2 练习建议</h4><h5 id="刻意练习"><a href="#刻意练习" class="headerlink" title="刻意练习"></a>刻意练习</h5><ol><li><strong>强制使用</strong>：禁用鼠标一天，只使用键盘</li><li><strong>每日目标</strong>：每天学习3-5个新快捷键</li><li><strong>实战应用</strong>：在实际Java项目中主动使用快捷键</li><li><strong>定期复习</strong>：每周回顾已学习的快捷键</li></ol><h5 id="工具辅助"><a href="#工具辅助" class="headerlink" title="工具辅助"></a>工具辅助</h5><ul><li><strong>Key Promoter X插件</strong>：<ul><li>IDEA内置插件，会在使用鼠标时提示对应的快捷键</li><li>安装：Settings → Plugins → 搜索 “Key Promoter X”</li></ul></li><li><strong>快捷键速查表</strong>：打印出来贴在显示器旁边</li><li><strong>在线资源</strong>：<ul><li><a href="https://www.jetbrains.com/help/idea/mastering-keyboard-shortcuts.html">JetBrains官方快捷键文档</a></li><li><a href="https://www.shortcutfoo.com/">Shortcut Foo</a> - IntelliJ IDEA专项训练</li></ul></li></ul><h4 id="7-3-自定义快捷键"><a href="#7-3-自定义快捷键" class="headerlink" title="7.3 自定义快捷键"></a>7.3 自定义快捷键</h4><h5 id="IDEA-自定义"><a href="#IDEA-自定义" class="headerlink" title="IDEA 自定义"></a>IDEA 自定义</h5><ol><li>打开设置：<code>Ctrl + Alt + S</code> (Mac: <code>Cmd + ,</code>)</li><li>导航到 <code>Keymap</code></li><li>右键点击要修改的操作</li><li>选择 <code>Add Keyboard Shortcut</code></li><li>输入新的快捷键</li></ol><h5 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h5><ul><li>✅ 保持Keymap的一致性（推荐使用默认的IntelliJ IDEA keymap）</li><li>✅ 不要覆盖常用的系统级快捷键</li><li>✅ 使用未被占用的组合键</li><li>✅ 记录自定义的快捷键</li><li>❌ 避免过于复杂的组合键</li><li>❌ 不要修改太多默认快捷键</li></ul><blockquote><p>💡 <strong>提示</strong>：可以通过 <code>Help → Keyboard Shortcuts PDF</code> 获取官方快捷键速查表</p></blockquote><hr><h3 id="8-总结与建议-🎯"><a href="#8-总结与建议-🎯" class="headerlink" title="8. 总结与建议 🎯"></a>8. 总结与建议 🎯</h3><h4 id="学习路径建议"><a href="#学习路径建议" class="headerlink" title="学习路径建议"></a>学习路径建议</h4><p><strong>初级阶段</strong>（1-2周）</p><ul><li>掌握基础编辑操作（<code>Ctrl+D</code> 复制行、<code>Ctrl+Y</code> 删除行、<code>Ctrl+/</code> 注释）</li><li>学习代码导航（<code>Ctrl+N</code> 跳转到类、<code>Ctrl+B</code> 跳转到声明）</li><li>熟悉代码格式化（<code>Ctrl+Alt+L</code>）和优化导入（<code>Ctrl+Alt+O</code>）</li></ul><p><strong>中级阶段</strong>（3-4周）</p><ul><li>掌握代码生成（<code>Alt+Insert</code> 生成代码、<code>Alt+Enter</code> 快速修复）</li><li>学习高级导航（<code>Ctrl+E</code> 最近文件、<code>Ctrl+Shift+E</code> 最近位置）</li><li>熟悉调试快捷键（<code>F8</code> 步过、<code>F7</code> 步入、<code>F9</code> 继续）</li><li>掌握查找和替换（<code>Ctrl+F</code> 查找、<code>Ctrl+Shift+F</code> 全局查找）</li></ul><p><strong>高级阶段</strong>（1-2个月）</p><ul><li>精通重构操作（<code>Shift+F6</code> 重命名、<code>Ctrl+Alt+M</code> 提取方法）</li><li>掌握多光标编辑和选择扩展（<code>Ctrl+W</code> 扩展选择）</li><li>学习Live Templates和Postfix Completion</li><li>形成肌肉记忆，实现无鼠标开发</li></ul><h4 id="效率提升建议"><a href="#效率提升建议" class="headerlink" title="效率提升建议"></a>效率提升建议</h4><ol><li><strong>安装Key Promoter X</strong>：自动提示快捷键，帮助养成习惯</li><li><strong>循序渐进</strong>：每天学习3-5个新快捷键，不要贪多</li><li><strong>实战应用</strong>：在真实Java项目中使用，尤其是重构时</li><li><strong>定期回顾</strong>：每周回顾一次，巩固记忆</li><li><strong>分享交流</strong>：与团队分享快捷键技巧，互相学习</li><li><strong>禁用鼠标训练</strong>：每周选一天只用键盘，强化记忆</li></ol><h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h4><blockquote><p>⚠️ <strong>重要提示</strong>：</p><ul><li>Mac和Windows的快捷键有较大区别（Cmd vs Ctrl）</li><li>某些快捷键可能与系统或输入法冲突（特别是中文输入法）</li><li>IDEA不同版本可能快捷键略有差异</li><li>自定义快捷键时要避免覆盖常用的默认快捷键</li><li>推荐使用默认的IntelliJ IDEA Classic keymap</li></ul></blockquote><h4 id="推荐资源"><a href="#推荐资源" class="headerlink" title="推荐资源"></a>推荐资源</h4><p><strong>官方资源</strong></p><ul><li><a href="https://www.jetbrains.com/help/idea/mastering-keyboard-shortcuts.html">IntelliJ IDEA Keymap Reference</a> - 官方文档</li><li><a href="https://www.jetbrains.com/academy/">JetBrains Academy</a> - 官方学习平台</li><li>Help → Keyboard Shortcuts PDF - 内置快捷键速查表</li></ul><p><strong>学习工具</strong></p><ul><li><strong>Key Promoter X</strong> - IDEA内置插件，自动提示快捷键</li><li><a href="https://www.shortcutfoo.com/">Shortcut Foo</a> - IntelliJ IDEA专项训练</li><li><a href="https://www.youtube.com/c/intellijidea">JetBrains官方视频教程</a> - YouTube频道</li></ul><p><strong>实用技巧</strong></p><ul><li>使用 <code>Ctrl+Shift+A</code> (Find Action) 搜索任何操作</li><li>使用 <code>Double Shift</code> (Search Everywhere) 全局搜索</li><li>启用 Presentation Assistant 插件在屏幕上显示快捷键</li></ul><hr><p><strong>最后更新</strong>: 2025-11-10<br><strong>作者</strong>: Suo<br><strong>版本</strong>: v1.1<br><strong>标签</strong>: 快捷键, 开发工具, IntelliJ IDEA, IDE, 效率提升</p><blockquote><p>💡 <strong>提示</strong>：本文档将持续更新，欢迎收藏。后续将添加VS Code、Chrome DevTools、Git工具等更多内容。</p><p>📝 <strong>v1.1 更新内容</strong>：</p><ul><li>新增选择扩展相关快捷键（<code>Ctrl+W</code>扩展选择等）</li><li>新增文本编辑快捷键（大小写切换、删除到词首&#x2F;词尾等）</li><li>完善查找和搜索分类（全局搜索、当前文件查找等）</li><li>新增窗口和视图管理快捷键</li><li>新增工具窗口快捷键（项目、终端、版本控制等）</li><li>补充测试相关快捷键</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> 开发工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
            <tag> 快捷键 </tag>
            
            <tag> 效率提升 </tag>
            
            <tag> IDE </tag>
            
            <tag> 编辑器 </tag>
            
            <tag> IntelliJ IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux基础命令 - 从入门到精通</title>
      <link href="//linux-basic-commands/"/>
      <url>//linux-basic-commands/</url>
      
        <content type="html"><![CDATA[<h1 id="Linux基础命令-从入门到精通-🐧"><a href="#Linux基础命令-从入门到精通-🐧" class="headerlink" title="Linux基础命令 - 从入门到精通 🐧"></a>Linux基础命令 - 从入门到精通 🐧</h1><blockquote><p>Linux是一个强大的操作系统，掌握Linux命令是每个开发者的必备技能。本教程将带你从零开始，系统学习Linux的基础命令，包括目录操作、文件管理、查找命令、vi编辑器、用户权限管理以及系统监控和压缩解压等实用操作。💻</p></blockquote><h2 id="📋-目录"><a href="#📋-目录" class="headerlink" title="📋 目录"></a>📋 目录</h2><ul><li><a href="#1-linux%E7%9A%84%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84">1. Linux的目录结构</a></li><li><a href="#2-linux%E5%91%BD%E4%BB%A4%E5%85%A5%E9%97%A8">2. Linux命令入门</a></li><li><a href="#3-%E7%9B%AE%E5%BD%95%E5%88%87%E6%8D%A2%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4">3. 目录切换相关命令</a></li><li><a href="#4-%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84%E5%92%8C%E7%89%B9%E6%AE%8A%E8%B7%AF%E5%BE%84%E7%AC%A6">4. 相对路径、绝对路径和特殊路径符</a></li><li><a href="#5-%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95%E5%91%BD%E4%BB%A4">5. 创建目录命令</a></li><li><a href="#6-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4part1">6. 文件操作命令Part1</a></li><li><a href="#7-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4part2">7. 文件操作命令Part2</a></li><li><a href="#8-%E6%9F%A5%E6%89%BE%E5%91%BD%E4%BB%A4">8. 查找命令</a></li><li><a href="#9-grepwc%E5%92%8C%E7%AE%A1%E9%81%93%E7%AC%A6">9. grep、wc和管道符</a></li><li><a href="#10-echotail%E5%92%8C%E9%87%8D%E5%AE%9A%E5%90%91%E7%AC%A6">10. echo、tail和重定向符</a></li><li><a href="#11-vi%E7%BC%96%E8%BE%91%E5%99%A8">11. vi编辑器</a></li><li><a href="#12-linux%E7%94%A8%E6%88%B7%E5%92%8C%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86">12. Linux用户和权限管理</a></li><li><a href="#13-linux%E5%AE%9E%E7%94%A8%E6%93%8D%E4%BD%9C">13. Linux实用操作</a></li></ul><h2 id="1-Linux的目录结构-📁"><a href="#1-Linux的目录结构-📁" class="headerlink" title="1. Linux的目录结构 📁"></a>1. Linux的目录结构 📁</h2><h3 id="1-1-目录结构概述"><a href="#1-1-目录结构概述" class="headerlink" title="1.1 目录结构概述"></a>1.1 目录结构概述</h3><p>Linux的目录结构是一个树型结构：</p><ul><li><strong>Windows系统</strong>：可以拥有多个盘符，如C盘、D盘、E盘</li><li><strong>Linux系统</strong>：没有盘符概念，只有一个根目录 <code>/</code>，所有文件都在它下面</li></ul><p><img src="/images/linux/img.png" alt="Linux目录结构"></p><p><img src="/images/linux/img_1.png" alt="Linux目录层次"></p><p><img src="/images/linux/img_2.png" alt="Linux目录详解"></p><h2 id="2-Linux命令入门-🎯"><a href="#2-Linux命令入门-🎯" class="headerlink" title="2. Linux命令入门 🎯"></a>2. Linux命令入门 🎯</h2><h3 id="2-1-Linux命令基础格式"><a href="#2-1-Linux命令基础格式" class="headerlink" title="2.1 Linux命令基础格式"></a>2.1 Linux命令基础格式</h3><p>无论是什么命令，用于什么用途，在Linux中，命令都有其通用的格式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> [-options] [parameter]</span><br></pre></td></tr></table></figure><p><strong>格式说明：</strong></p><ul><li><code>command</code>：命令本身</li><li><code>-options</code>：[可选，非必填] 命令的一些选项，可以通过选项控制命令的行为细节</li><li><code>parameter</code>：[可选，非必填] 命令的参数，多数用于命令的指向目标等</li></ul><blockquote><p>💡 <strong>提示</strong>：语法中的 <code>[]</code> 表示可选的意思</p></blockquote><h3 id="2-2-ls命令-📋"><a href="#2-2-ls命令-📋" class="headerlink" title="2.2 ls命令 📋"></a>2.2 ls命令 📋</h3><p>ls命令的作用是列出目录下的内容，语法细节如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> [-a -l -h] [Linux路径]</span><br></pre></td></tr></table></figure><p><strong>选项说明：</strong></p><ul><li><code>-a</code>：显示全部文件（包括隐藏文件）</li><li><code>-l</code>：以列表形式显示详细信息</li><li><code>-h</code>：以易读方式显示文件大小（需配合 -l 使用）</li></ul><p><strong>参数说明：</strong></p><ul><li><code>Linux路径</code>：可选参数，指定要查看的目录路径</li></ul><p>当不使用选项和参数，直接使用ls命令本体，表示：以平铺形式，列出当前工作目录下的内容</p><p><img src="/images/linux/img_5.png" alt="ls命令示例"></p><h3 id="2-3-HOME目录概念-🏠"><a href="#2-3-HOME目录概念-🏠" class="headerlink" title="2.3 HOME目录概念 🏠"></a>2.3 HOME目录概念 🏠</h3><p><strong>当前工作目录</strong>：Linux系统的命令行终端在启动时，默认会加载当前登录用户的HOME目录作为当前工作目录。</p><p><strong>HOME目录</strong>：每个Linux操作用户在Linux系统的个人账户目录，路径在：<code>/home/用户名</code></p><p>例如，图中的Linux用户是<code>suoliang</code>，其HOME目录是：<code>/home/suoliang</code></p><p>Windows系统和Linux系统，均设有用户的HOME目录：</p><p><img src="/images/linux/img_6.png" alt="Windows HOME目录"></p><p><img src="/images/linux/img_7.png" alt="Linux HOME目录"></p><h3 id="2-4-ls命令的参数使用"><a href="#2-4-ls命令的参数使用" class="headerlink" title="2.4 ls命令的参数使用"></a>2.4 ls命令的参数使用</h3><p><strong>不使用参数</strong>：列出当前工作目录的内容（即用户的HOME目录）</p><p><strong>使用参数</strong>：列出指定路径的内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 列出根目录的内容</span></span><br><span class="line"><span class="built_in">ls</span> /</span><br></pre></td></tr></table></figure><p>通过 <code>ls /</code> 列出了根目录的内容，我们可以在图形界面中对照查看：</p><p><img src="/images/linux/img_9.png" alt="命令行查看"></p><p><img src="/images/linux/img_10.png" alt="图形界面对照"></p><h3 id="2-5-ls命令的选项详解"><a href="#2-5-ls命令的选项详解" class="headerlink" title="2.5 ls命令的选项详解"></a>2.5 ls命令的选项详解</h3><h4 id="a-选项：显示全部文件"><a href="#a-选项：显示全部文件" class="headerlink" title="-a 选项：显示全部文件"></a>-a 选项：显示全部文件</h4><p><code>-a</code> 选项表示 <code>all</code> 的意思，即列出全部文件（包含隐藏的文件&#x2F;文件夹）</p><p>可以看到，<code>ls -a</code> 对比 <code>ls</code> 列出的内容更多了。图中以 <code>.</code> 开头的，表示是Linux系统的隐藏文件&#x2F;文件夹（只要以<code>.</code>开头，就能自动隐藏），只有通过 <code>-a</code> 选项，才能看到这些隐藏的文件&#x2F;文件夹。</p><h4 id="l-选项：列表形式显示"><a href="#l-选项：列表形式显示" class="headerlink" title="-l 选项：列表形式显示"></a>-l 选项：列表形式显示</h4><p><code>-l</code> 选项表示：以列表（竖向排列）的形式展示内容，并展示更多信息。<code>-l</code> 选项其实和图形化中，文件夹以列表形式排列是一个意思。</p><h4 id="选项组合使用"><a href="#选项组合使用" class="headerlink" title="选项组合使用"></a>选项组合使用</h4><p>语法中的选项是可以组合使用的，比如 <code>-a</code> 和 <code>-l</code> 可以组合应用：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以下三种写法效果相同</span></span><br><span class="line"><span class="built_in">ls</span> -l -a</span><br><span class="line"><span class="built_in">ls</span> -la</span><br><span class="line"><span class="built_in">ls</span> -al</span><br></pre></td></tr></table></figure><h4 id="h-选项：人性化显示文件大小"><a href="#h-选项：人性化显示文件大小" class="headerlink" title="-h 选项：人性化显示文件大小"></a>-h 选项：人性化显示文件大小</h4><p><code>-h</code> 表示以易于阅读的形式，列出文件大小，如 K、M、G</p><blockquote><p>⚠️ <strong>注意</strong>：<code>-h</code> 选项必须要搭配 <code>-l</code> 一起使用</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以人性化方式显示文件大小</span></span><br><span class="line"><span class="built_in">ls</span> -lh</span><br></pre></td></tr></table></figure><h2 id="3-目录切换相关命令-🔀"><a href="#3-目录切换相关命令-🔀" class="headerlink" title="3. 目录切换相关命令 🔀"></a>3. 目录切换相关命令 🔀</h2><h3 id="3-1-cd命令-Change-Directory"><a href="#3-1-cd命令-Change-Directory" class="headerlink" title="3.1 cd命令 - Change Directory"></a>3.1 cd命令 - Change Directory</h3><p>当Linux终端（命令行）打开的时候，会默认以用户的HOME目录作为当前的工作目录。我们可以通过 <code>cd</code> 命令，更改当前所在的工作目录。</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> [Linux路径]</span><br></pre></td></tr></table></figure><p><strong>使用说明：</strong></p><ul><li><code>cd</code> 命令无需选项，只有参数，表示要切换到哪个目录下</li><li><code>cd</code> 命令直接执行，不写参数，表示回到用户的HOME目录</li></ul><h3 id="3-2-pwd命令-Print-Work-Directory"><a href="#3-2-pwd命令-Print-Work-Directory" class="headerlink" title="3.2 pwd命令 - Print Work Directory"></a>3.2 pwd命令 - Print Work Directory</h3><p>通过 <code>ls</code> 来验证当前的工作目录，其实是不恰当的。我们可以通过 <code>pwd</code> 命令，来查看当前所在的工作目录。</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">pwd</span></span><br></pre></td></tr></table></figure><p><strong>使用说明：</strong></p><ul><li><code>pwd</code> 命令无选项，无参数，直接输入 <code>pwd</code> 即可</li></ul><h2 id="4-相对路径、绝对路径和特殊路径符-📂"><a href="#4-相对路径、绝对路径和特殊路径符-📂" class="headerlink" title="4. 相对路径、绝对路径和特殊路径符 📂"></a>4. 相对路径、绝对路径和特殊路径符 📂</h2><h3 id="4-1-相对路径和绝对路径"><a href="#4-1-相对路径和绝对路径" class="headerlink" title="4.1 相对路径和绝对路径"></a>4.1 相对路径和绝对路径</h3><p>如图，通过 <code>pwd</code> 得知当前所在是HOME目录：<code>/home/suoliang</code></p><p>现在想要通过 <code>cd</code> 命令，切换工作目录到 <code>Desktop</code> 文件夹中去，<code>cd</code> 命令的参数（Linux路径）如何写呢？</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 绝对路径写法</span></span><br><span class="line"><span class="built_in">cd</span> /home/suoliang/Desktop</span><br><span class="line"></span><br><span class="line"><span class="comment"># 相对路径写法</span></span><br><span class="line"><span class="built_in">cd</span> Desktop</span><br></pre></td></tr></table></figure><p>上述两种写法，都可以正确的切换目录到指定的Desktop中。</p><p><strong>路径类型说明：</strong></p><ul><li><strong>绝对路径</strong>：以根目录为起点，描述路径的一种写法，路径描述以 <code>/</code> 开头</li><li><strong>相对路径</strong>：以当前目录为起点，描述路径的一种写法，路径描述无需以 <code>/</code> 开头</li></ul><h3 id="4-2-特殊路径符"><a href="#4-2-特殊路径符" class="headerlink" title="4.2 特殊路径符"></a>4.2 特殊路径符</h3><table><thead><tr><th>符号</th><th>含义</th><th>示例</th></tr></thead><tbody><tr><td><code>.</code></td><td>当前目录</td><td><code>cd ./Desktop</code> 表示切换到当前目录下的Desktop目录内，和 <code>cd Desktop</code> 效果一致</td></tr><tr><td><code>..</code></td><td>上一级目录</td><td><code>cd ..</code> 即可切换到上一级目录，<code>cd ../..</code> 切换到上二级的目录</td></tr><tr><td><code>~</code></td><td>HOME目录</td><td><code>cd ~</code> 即可切换到HOME目录或 <code>cd ~/Desktop</code>，切换到HOME内的Desktop目录</td></tr></tbody></table><h2 id="5-创建目录命令-📁"><a href="#5-创建目录命令-📁" class="headerlink" title="5. 创建目录命令 📁"></a>5. 创建目录命令 📁</h2><h3 id="5-1-mkdir命令-Make-Directory"><a href="#5-1-mkdir命令-Make-Directory" class="headerlink" title="5.1 mkdir命令 - Make Directory"></a>5.1 mkdir命令 - Make Directory</h3><p>通过 <code>mkdir</code> 命令可以创建新的目录（文件夹）</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> [-p] Linux路径</span><br></pre></td></tr></table></figure><p><strong>参数说明：</strong></p><ul><li><code>Linux路径</code>：必填，表示要创建的文件夹的路径，相对路径或绝对路径均可</li><li><code>-p</code> 选项：可选，表示自动创建不存在的父目录，适用于创建连续多层级的目录</li></ul><h3 id="5-2-mkdir-p-选项使用"><a href="#5-2-mkdir-p-选项使用" class="headerlink" title="5.2 mkdir -p 选项使用"></a>5.2 mkdir -p 选项使用</h3><p>如果想要一次性创建多个层级的目录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不使用 -p 选项会报错</span></span><br><span class="line">[suoliang@chad ~]$ <span class="built_in">mkdir</span> <span class="built_in">test</span>/test</span><br><span class="line"><span class="built_in">mkdir</span>: cannot create directory <span class="string">&#x27;test/test&#x27;</span>: No such file or directory</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 -p 选项可以成功创建</span></span><br><span class="line">[suoliang@chad ~]$ <span class="built_in">mkdir</span> -p <span class="built_in">test</span>/test</span><br></pre></td></tr></table></figure><p>会报错，因为上级目录 <code>test</code> 并不存在，所以无法创建 <code>test/test</code> 目录。可以通过 <code>-p</code> 选项，将一整个链条都创建完成。</p><blockquote><p>⚠️ <strong>注意</strong>：创建文件夹需要修改权限，请确保操作均在HOME目录内，不要在HOME外操作。涉及到权限问题，HOME外无法成功（后续我们会讲解权限管控的知识）</p></blockquote><h2 id="6-文件操作命令Part1-📄"><a href="#6-文件操作命令Part1-📄" class="headerlink" title="6. 文件操作命令Part1 📄"></a>6. 文件操作命令Part1 📄</h2><h3 id="6-1-touch命令-创建文件"><a href="#6-1-touch命令-创建文件" class="headerlink" title="6.1 touch命令 - 创建文件"></a>6.1 touch命令 - 创建文件</h3><p>可以通过 <code>touch</code> 命令创建文件</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> Linux路径</span><br></pre></td></tr></table></figure><p><strong>使用说明：</strong></p><ul><li><code>touch</code> 命令无选项，参数必填</li><li>参数表示：要创建的文件路径，相对、绝对、特殊路径符均可以使用</li></ul><h3 id="6-2-cat命令-查看文件内容"><a href="#6-2-cat命令-查看文件内容" class="headerlink" title="6.2 cat命令 - 查看文件内容"></a>6.2 cat命令 - 查看文件内容</h3><p>有了文件后，我们可以通过 <code>cat</code> 命令查看文件的内容</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> Linux路径</span><br></pre></td></tr></table></figure><p><strong>使用说明：</strong></p><ul><li><code>cat</code> 同样没有选项，只有必填参数</li><li>参数表示：被查看的文件路径，相对、绝对、特殊路径符都可以使用</li></ul><h3 id="6-3-more命令-翻页查看文件内容"><a href="#6-3-more命令-翻页查看文件内容" class="headerlink" title="6.3 more命令 - 翻页查看文件内容"></a>6.3 more命令 - 翻页查看文件内容</h3><p><code>more</code> 命令同样可以查看文件内容，同 <code>cat</code> 不同的是：</p><ul><li><code>cat</code> 是直接将内容全部显示出来</li><li><code>more</code> 支持翻页，如果文件内容过多，可以一页页的展示</li></ul><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">more Linux路径</span><br></pre></td></tr></table></figure><p><strong>使用说明：</strong></p><ul><li>同样没有选项，只有必填参数</li><li>参数表示：被查看的文件路径，相对、绝对、特殊路径符都可以使用</li></ul><p><strong>操作示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看系统内置文件</span></span><br><span class="line">more /etc/services</span><br></pre></td></tr></table></figure><p><strong>查看操作：</strong></p><ul><li>通过 <code>空格</code> 翻页</li><li>通过 <code>q</code> 退出查看</li></ul><h2 id="7-文件操作命令Part2-🔧"><a href="#7-文件操作命令Part2-🔧" class="headerlink" title="7. 文件操作命令Part2 🔧"></a>7. 文件操作命令Part2 🔧</h2><h3 id="7-1-cp命令-复制文件-文件夹"><a href="#7-1-cp命令-复制文件-文件夹" class="headerlink" title="7.1 cp命令 - 复制文件&#x2F;文件夹"></a>7.1 cp命令 - 复制文件&#x2F;文件夹</h3><p><code>cp</code> 命令可以用于复制文件&#x2F;文件夹，来自英文单词：copy</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> [-r] 参数1 参数2</span><br></pre></td></tr></table></figure><p><strong>参数说明：</strong></p><ul><li><code>-r</code> 选项：可选，用于复制文件夹使用，表示递归</li><li><code>参数1</code>：Linux路径，表示被复制的文件或文件夹</li><li><code>参数2</code>：Linux路径，表示要复制去的地方</li></ul><blockquote><p>⚠️ <strong>注意</strong>：复制文件夹，必须使用 <code>-r</code> 选项，否则不会生效</p></blockquote><h3 id="7-2-mv命令-移动文件或文件夹"><a href="#7-2-mv命令-移动文件或文件夹" class="headerlink" title="7.2 mv命令 - 移动文件或文件夹"></a>7.2 mv命令 - 移动文件或文件夹</h3><p><code>mv</code> 命令可以用于移动文件&#x2F;文件夹，来自英文单词：move</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> 参数1 参数2</span><br></pre></td></tr></table></figure><p><strong>参数说明：</strong></p><ul><li><code>参数1</code>：Linux路径，表示被移动的文件或文件夹</li><li><code>参数2</code>：Linux路径，表示要移动去的地方</li></ul><blockquote><p>💡 <strong>提示</strong>：如果目标不存在，则进行改名，确保目标存在。目标不存在，则有改名的效果</p></blockquote><h3 id="7-3-rm命令-删除文件-文件夹"><a href="#7-3-rm命令-删除文件-文件夹" class="headerlink" title="7.3 rm命令 - 删除文件&#x2F;文件夹"></a>7.3 rm命令 - 删除文件&#x2F;文件夹</h3><p><code>rm</code> 命令可用于删除文件、文件夹，来自英文单词：remove</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> [-r -f] 参数1 参数2 ... 参数N</span><br></pre></td></tr></table></figure><p><strong>选项说明：</strong></p><ul><li><code>-r</code> 选项：用于删除文件夹（同cp命令一样）</li><li><code>-f</code> 选项：表示force，强制删除（不会弹出提示确认信息）</li></ul><p><strong>参数说明：</strong></p><ul><li><code>参数1、参数2、...、参数N</code>：表示要删除的文件或文件夹路径，按照空格隔开</li></ul><blockquote><p>⚠️ <strong>重要提示</strong>：</p><ul><li>普通用户删除内容不会弹出提示，只有root管理员用户删除内容会有提示</li><li>所以一般普通用户用不到 <code>-f</code> 选项</li><li>删除文件夹，必须使用 <code>-r</code> 选项才可以</li></ul></blockquote><h3 id="7-4-rm命令的通配符"><a href="#7-4-rm命令的通配符" class="headerlink" title="7.4 rm命令的通配符"></a>7.4 rm命令的通配符</h3><p><code>rm</code> 命令支持通配符 <code>*</code>，用来做模糊匹配</p><p><strong>通配符示例：</strong></p><ul><li><code>test*</code>：表示匹配任何以 <code>test</code> 开头的内容</li><li><code>*test</code>：表示匹配任何以 <code>test</code> 结尾的内容</li><li><code>*test*</code>：表示匹配任何包含 <code>test</code> 的内容</li></ul><h3 id="7-5-危险命令警告-⚠️"><a href="#7-5-危险命令警告-⚠️" class="headerlink" title="7.5 危险命令警告 ⚠️"></a>7.5 危险命令警告 ⚠️</h3><p><code>rm</code> 是一个危险的命令，特别是在处于root（超级管理员）用户的时候，请谨慎使用。</p><blockquote><p>🚨 <strong>严重警告</strong>：如下命令，请千万千万不要在root管理员用户下执行！</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf /</span><br><span class="line"><span class="built_in">rm</span> -rf /*</span><br></pre></td></tr></table></figure><p>效果等同于在Windows上执行C盘格式化。</p><blockquote><p>PS：你心里痒痒就在虚拟机试试吧，大不了恢复快照或者重新装个虚拟机哦 😈</p></blockquote><h2 id="8-查找命令-🔍"><a href="#8-查找命令-🔍" class="headerlink" title="8. 查找命令 🔍"></a>8. 查找命令 🔍</h2><h3 id="8-1-which命令-查找命令程序"><a href="#8-1-which命令-查找命令程序" class="headerlink" title="8.1 which命令 - 查找命令程序"></a>8.1 which命令 - 查找命令程序</h3><p>我们在前面学习的Linux命令，其实它们的本体就是一个个的二进制可执行程序，和Windows系统中的 <code>.exe</code> 文件是一个意思。</p><p>我们可以通过 <code>which</code> 命令，查看所使用的一系列命令的程序文件存放在哪里</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> 命令名称</span><br></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> <span class="built_in">cd</span></span><br><span class="line"><span class="built_in">which</span> <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">which</span> <span class="built_in">pwd</span></span><br></pre></td></tr></table></figure><h3 id="8-2-find命令-按文件名查找文件"><a href="#8-2-find命令-按文件名查找文件" class="headerlink" title="8.2 find命令 - 按文件名查找文件"></a>8.2 find命令 - 按文件名查找文件</h3><p>在图形化中，我们可以方便的通过系统提供的搜索功能，搜索指定的文件。同样，在Linux系统中，我们可以通过 <code>find</code> 命令去搜索指定的文件。</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find 起始路径 -name <span class="string">&quot;文件名&quot;</span></span><br></pre></td></tr></table></figure><p><strong>使用说明：</strong></p><p>为了确保后续演示，拥有最大的权限，可以在整个系统完成搜索，我们可以切换到root用户以获得管理员权限：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换到root用户</span></span><br><span class="line">su - root</span><br><span class="line"><span class="comment"># 输入密码</span></span><br></pre></td></tr></table></figure><p><strong>示例：查找文件名叫做test的文件</strong></p><p><img src="/images/linux/img_24.png" alt="find命令示例"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从根目录开始搜索名为test的文件</span></span><br><span class="line">find / -name <span class="string">&quot;test&quot;</span></span><br></pre></td></tr></table></figure><h3 id="8-3-find命令的通配符"><a href="#8-3-find命令的通配符" class="headerlink" title="8.3 find命令的通配符"></a>8.3 find命令的通配符</h3><p>被查找文件名，支持使用通配符 <code>*</code> 来做模糊查询：</p><p><strong>通配符含义：</strong></p><ul><li><code>test*</code>：表示匹配任何以 <code>test</code> 开头的内容</li><li><code>*test</code>：表示匹配任何以 <code>test</code> 结尾的内容</li><li><code>*test*</code>：表示匹配任何包含 <code>test</code> 的内容</li></ul><p>基于通配符的含义，可以结合 <code>find</code> 命令做文件的模糊查询。</p><h3 id="8-4-find命令-按文件大小查找"><a href="#8-4-find命令-按文件大小查找" class="headerlink" title="8.4 find命令 - 按文件大小查找"></a>8.4 find命令 - 按文件大小查找</h3><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find 起始路径 -size +|-n[kMG]</span><br></pre></td></tr></table></figure><p><strong>参数说明：</strong></p><ul><li><code>+</code>、<code>-</code> 表示大于和小于</li><li><code>n</code> 表示大小数字</li><li><code>kMG</code> 表示大小单位：<ul><li><code>k</code> (小写字母) 表示 KB</li><li><code>M</code> 表示 MB</li><li><code>G</code> 表示 GB</li></ul></li></ul><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查找小于10KB的文件</span></span><br><span class="line">find / -size -10k</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找大于100MB的文件</span></span><br><span class="line">find / -size +100M</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找大于1GB的文件</span></span><br><span class="line">find / -size +1G</span><br></pre></td></tr></table></figure><h2 id="9-grep、wc和管道符-🔧"><a href="#9-grep、wc和管道符-🔧" class="headerlink" title="9. grep、wc和管道符 🔧"></a>9. grep、wc和管道符 🔧</h2><h3 id="9-1-grep命令-过滤文件内容"><a href="#9-1-grep命令-过滤文件内容" class="headerlink" title="9.1 grep命令 - 过滤文件内容"></a>9.1 grep命令 - 过滤文件内容</h3><p>可以通过 <code>grep</code> 命令，从文件中通过关键字过滤文件行</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep [-n] 关键字 文件路径</span><br></pre></td></tr></table></figure><p><strong>参数说明：</strong></p><ul><li><code>-n</code> 选项：可选，表示在结果中显示匹配的行的行号</li><li><code>关键字</code>：必填，表示过滤的关键字，带有空格或其它特殊符号，建议使用 <code>&quot;&quot;</code> 将关键字包围起来</li><li><code>文件路径</code>：必填，表示要过滤内容的文件路径，可作为内容输入端口</li></ul><h3 id="9-2-wc命令-统计文件信息"><a href="#9-2-wc命令-统计文件信息" class="headerlink" title="9.2 wc命令 - 统计文件信息"></a>9.2 wc命令 - 统计文件信息</h3><p>可以通过 <code>wc</code> 命令统计文件的行数、单词数量等</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wc</span> [-c -m -l -w] 文件路径</span><br></pre></td></tr></table></figure><p><strong>选项说明：</strong></p><ul><li><code>-c</code>：统计 bytes 数量</li><li><code>-m</code>：统计字符数量</li><li><code>-l</code>：统计行数</li><li><code>-w</code>：统计单词数量</li></ul><p><strong>参数说明：</strong></p><ul><li><code>文件路径</code>：被统计的文件，可作为内容输入端口</li></ul><h3 id="9-3-管道符"><a href="#9-3-管道符" class="headerlink" title="9.3 管道符 |"></a>9.3 管道符 |</h3><p>学习了 <code>grep</code> 命令后，我们在来学习一个新的特殊符号，管道符：<code>|</code></p><p><strong>管道符的含义：</strong> 将管道符左边命令的结果，作为右边命令的输入</p><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建测试文件</span></span><br><span class="line">[root@chad ~]# vim test.text</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用管道符过滤</span></span><br><span class="line">[root@chad ~]# <span class="built_in">cat</span> test.text | grep chad</span><br><span class="line">chad</span><br></pre></td></tr></table></figure><p><code>cat test.text</code> 的输出结果（文件内容）作为右边 <code>grep</code> 命令的输入（被过滤文件）</p><h3 id="9-4-管道符的应用"><a href="#9-4-管道符的应用" class="headerlink" title="9.4 管道符的应用"></a>9.4 管道符的应用</h3><p>管道符的应用非常多：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 过滤ls的结果</span></span><br><span class="line"><span class="built_in">ls</span> | grep Desktop</span><br><span class="line"></span><br><span class="line"><span class="comment"># 过滤find结果，只找路径带有/usr/lib64的结果</span></span><br><span class="line">find / -name <span class="string">&quot;test&quot;</span> | grep <span class="string">&quot;/usr/lib64&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以嵌套使用</span></span><br><span class="line"><span class="built_in">cat</span> itheima.txt | grep itcast | grep itheima</span><br></pre></td></tr></table></figure><h2 id="10-echo、tail和重定向符-📤"><a href="#10-echo、tail和重定向符-📤" class="headerlink" title="10. echo、tail和重定向符 📤"></a>10. echo、tail和重定向符 📤</h2><h3 id="10-1-echo命令-输出内容"><a href="#10-1-echo命令-输出内容" class="headerlink" title="10.1 echo命令 - 输出内容"></a>10.1 echo命令 - 输出内容</h3><p>可以使用 <code>echo</code> 命令在命令行内输出指定内容</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> 输出的内容</span><br></pre></td></tr></table></figure><p><strong>使用说明：</strong></p><ul><li>无需选项，只有一个参数，表示要输出的内容</li><li>复杂内容可以用 <code>&quot;&quot;</code> 包围</li></ul><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在终端上显示：Hello Linux</span></span><br><span class="line">[root@chad ~]# <span class="built_in">echo</span> hello.java</span><br><span class="line">hello.java</span><br></pre></td></tr></table></figure><blockquote><p>💡 <strong>提示</strong>：带有空格或 <code>\</code> 等特殊符号，建议使用双引号包围。因为不包围的话，空格后很容易被识别为参数2</p></blockquote><h3 id="10-2-echo命令与反引号"><a href="#10-2-echo命令与反引号" class="headerlink" title="10.2 echo命令与反引号"></a>10.2 echo命令与反引号</h3><p>看一下如下命令：<code>echo pwd</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@chad ~]# <span class="built_in">echo</span> <span class="built_in">pwd</span></span><br><span class="line"><span class="built_in">pwd</span></span><br></pre></td></tr></table></figure><p>本意是想输出当前的工作路径，但是 <code>pwd</code> 被作为普通字符输出了。</p><p>我们可以通过将命令用反引号（通常也称之为飘号）<code>`</code> 将其包围，被 <code>`</code> 包围的内容，会被作为命令执行，而非普通字符：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@chad ~]# <span class="built_in">echo</span> `<span class="built_in">pwd</span>`</span><br><span class="line">/root</span><br></pre></td></tr></table></figure><h3 id="10-3-重定向符"><a href="#10-3-重定向符" class="headerlink" title="10.3 重定向符"></a>10.3 重定向符</h3><p>我们再来学习两个特殊符号，重定向符：<code>&gt;</code> 和 <code>&gt;&gt;</code></p><p><strong>符号说明：</strong></p><ul><li><code>&gt;</code>：将左侧命令的结果，覆盖写入到符号右侧指定的文件中</li><li><code>&gt;&gt;</code>：将左侧命令的结果，追加写入到符号右侧指定的文件中</li></ul><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 覆盖写入</span></span><br><span class="line">[root@chad ~]# <span class="built_in">echo</span> suolll &gt; test.text </span><br><span class="line"></span><br><span class="line"><span class="comment"># 追加写入</span></span><br><span class="line">[root@chad ~]# <span class="built_in">echo</span> suolll &gt;&gt; test.text</span><br></pre></td></tr></table></figure><h3 id="10-4-tail命令-查看文件尾部"><a href="#10-4-tail命令-查看文件尾部" class="headerlink" title="10.4 tail命令 - 查看文件尾部"></a>10.4 tail命令 - 查看文件尾部</h3><p>使用 <code>tail</code> 命令，可以查看文件尾部内容，跟踪文件的最新更改</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> [-f -num] Linux路径</span><br></pre></td></tr></table></figure><p><strong>参数说明：</strong></p><ul><li><code>Linux路径</code>：表示被跟踪的文件路径</li><li><code>-f</code> 选项：表示持续跟踪</li><li><code>-num</code> 选项：表示查看尾部多少行，不填默认10行</li></ul><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看文件的尾部10行</span></span><br><span class="line"><span class="built_in">tail</span> /var/log/vmware-network.log</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看文件的尾部3行</span></span><br><span class="line"><span class="built_in">tail</span> -3 /var/log/vmware-network.log</span><br></pre></td></tr></table></figure><h3 id="10-5-tail持续跟踪文件更改"><a href="#10-5-tail持续跟踪文件更改" class="headerlink" title="10.5 tail持续跟踪文件更改"></a>10.5 tail持续跟踪文件更改</h3><p>使用 <code>-f</code> 选项，可以持续跟踪文件更改：</p><p><strong>操作步骤：</strong></p><ol><li>在第一个标签中，执行：<code>touch test.txt</code>，创建一个test.txt文件</li><li>在第一个标签中，执行：<code>tail -f test.txt</code>，持续跟踪文件更改</li><li>在第二个标签中，多次执行：<code>echo &quot;内容&quot; &gt;&gt; test.txt</code>，向文件追加内容</li></ol><h2 id="11-vi编辑器-✏️"><a href="#11-vi编辑器-✏️" class="headerlink" title="11. vi编辑器 ✏️"></a>11. vi编辑器 ✏️</h2><h3 id="11-1-vi-vim编辑器介绍"><a href="#11-1-vi-vim编辑器介绍" class="headerlink" title="11.1 vi&#x2F;vim编辑器介绍"></a>11.1 vi&#x2F;vim编辑器介绍</h3><p><code>vi/vim</code> 是 visual interface 的简称，是Linux中最经典的文本编辑器</p><ul><li>同图形化界面中的文本编辑器一样，<code>vi</code> 是命令行下对文本文件进行编辑的绝佳选择</li><li><code>vim</code> 是 <code>vi</code> 的加强版本，兼容 <code>vi</code> 的所有指令</li><li><code>vim</code> 不仅能编辑文本，而且还具有 shell 程序编辑的功能</li><li>可以用不同颜色的字体来辨别语法的正确性，极大方便了程序的设计和编辑</li></ul><h3 id="11-2-vi-vim编辑器的三种工作模式"><a href="#11-2-vi-vim编辑器的三种工作模式" class="headerlink" title="11.2 vi&#x2F;vim编辑器的三种工作模式"></a>11.2 vi&#x2F;vim编辑器的三种工作模式</h3><p><img src="/images/linux/img_29.png" alt="vi编辑器工作模式"></p><h4 id="命令模式（Command-mode）"><a href="#命令模式（Command-mode）" class="headerlink" title="命令模式（Command mode）"></a>命令模式（Command mode）</h4><ul><li>命令模式下，所敲的按键编辑器都理解为命令，以命令驱动执行不同的功能</li><li>此模式下，不能自由进行文本编辑</li></ul><h4 id="输入模式（Insert-mode）"><a href="#输入模式（Insert-mode）" class="headerlink" title="输入模式（Insert mode）"></a>输入模式（Insert mode）</h4><ul><li>也就是所谓的编辑模式、插入模式</li><li>此模式下，可以对文件内容进行自由编辑</li></ul><h4 id="底线命令模式（Last-line-mode）"><a href="#底线命令模式（Last-line-mode）" class="headerlink" title="底线命令模式（Last line mode）"></a>底线命令模式（Last line mode）</h4><ul><li>以 <code>:</code> 开始，通常用于文件的保存、退出</li></ul><h3 id="11-3-使用vi-vim编辑器"><a href="#11-3-使用vi-vim编辑器" class="headerlink" title="11.3 使用vi&#x2F;vim编辑器"></a>11.3 使用vi&#x2F;vim编辑器</h3><p>如果需要通过 <code>vi/vim</code> 编辑器编辑文件，请通过如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim兼容全部的vi功能，后续全部使用vim命令</span></span><br><span class="line">vim 文件路径</span><br></pre></td></tr></table></figure><p><strong>使用说明：</strong></p><ul><li>如果文件路径表示的文件不存在，那么此命令会用于编辑新文件</li><li>如果文件路径表示的文件存在，那么此命令用于编辑已有文件</li></ul><h3 id="11-4-命令模式"><a href="#11-4-命令模式" class="headerlink" title="11.4 命令模式"></a>11.4 命令模式</h3><p>通过 <code>vi/vim</code> 命令编辑文件，会打开一个新的窗口，此时这个窗口就是：<strong>命令模式窗口</strong></p><p><img src="/images/linux/img_30.png" alt="命令模式"></p><p><strong>模式切换：</strong></p><ul><li>命令模式是vi编辑器的入口和出口</li><li>进入vi编辑器会进入命令模式</li><li>通过命令模式输入键盘指令，可以进入输入模式</li><li>输入模式需要退回到命令模式，然后通过命令可以进入底线命令模式</li></ul><h3 id="11-5-命令模式快捷键"><a href="#11-5-命令模式快捷键" class="headerlink" title="11.5 命令模式快捷键"></a>11.5 命令模式快捷键</h3><h4 id="常用移动命令"><a href="#常用移动命令" class="headerlink" title="常用移动命令"></a>常用移动命令</h4><table><thead><tr><th>命令</th><th>功能</th></tr></thead><tbody><tr><td><code>h</code></td><td>左移光标</td></tr><tr><td><code>j</code></td><td>下移光标</td></tr><tr><td><code>k</code></td><td>上移光标</td></tr><tr><td><code>l</code></td><td>右移光标</td></tr><tr><td><code>0</code> 或 <code>Home</code></td><td>移动到行首</td></tr><tr><td><code>$</code> 或 <code>End</code></td><td>移动到行尾</td></tr><tr><td><code>gg</code></td><td>移动到文件开头</td></tr><tr><td><code>G</code></td><td>移动到文件末尾</td></tr></tbody></table><h4 id="常用编辑命令"><a href="#常用编辑命令" class="headerlink" title="常用编辑命令"></a>常用编辑命令</h4><p><img src="/images/linux/img_34.png" alt="命令模式快捷键1"></p><p><img src="/images/linux/img_35.png" alt="命令模式快捷键2"></p><table><thead><tr><th>命令</th><th>功能</th></tr></thead><tbody><tr><td><code>i</code></td><td>在光标前插入</td></tr><tr><td><code>a</code></td><td>在光标后插入</td></tr><tr><td><code>o</code></td><td>在当前行下方插入新行</td></tr><tr><td><code>O</code></td><td>在当前行上方插入新行</td></tr><tr><td><code>dd</code></td><td>删除当前行</td></tr><tr><td><code>yy</code></td><td>复制当前行</td></tr><tr><td><code>p</code></td><td>粘贴</td></tr><tr><td><code>u</code></td><td>撤销</td></tr><tr><td><code>Ctrl + r</code></td><td>重做</td></tr></tbody></table><h3 id="11-6-底线命令模式"><a href="#11-6-底线命令模式" class="headerlink" title="11.6 底线命令模式"></a>11.6 底线命令模式</h3><p>编辑模式没有什么特殊的，进入编辑模式后，任何快捷键都没有作用，就是正常输入文本而已。</p><blockquote><p>💡 <strong>提示</strong>：唯一大家需要记住的，就是通过 <code>Esc</code>，可以退回到命令模式中即可</p></blockquote><p>在命令模式内，输入 <code>:</code>，即可进入底线命令模式，支持如下命令：</p><p><img src="/images/linux/img_36.png" alt="底线命令模式"></p><table><thead><tr><th>命令</th><th>功能</th></tr></thead><tbody><tr><td><code>:w</code></td><td>保存文件</td></tr><tr><td><code>:q</code></td><td>退出编辑器</td></tr><tr><td><code>:wq</code></td><td>保存并退出</td></tr><tr><td><code>:q!</code></td><td>强制退出，不保存</td></tr><tr><td><code>:set nu</code></td><td>显示行号</td></tr><tr><td><code>:set nonu</code></td><td>取消行号显示</td></tr><tr><td><code>:/关键字</code></td><td>搜索关键字</td></tr></tbody></table><h2 id="📝-补充说明"><a href="#📝-补充说明" class="headerlink" title="📝 补充说明"></a>📝 补充说明</h2><h3 id="关于命令选项"><a href="#关于命令选项" class="headerlink" title="关于命令选项"></a>关于命令选项</h3><p>我们学习的一系列Linux命令，它们所拥有的选项都是非常多的。</p><p>比如，简单的 <code>ls</code> 命令就有：<br><code>-a -A -b -c -C -d -D -f -F -g -G -h -H -i -I -k -l -L -m -n -N -o -p -q -Q -r -R -s -S -t -T -u -U -v -w -x -X -1</code> 等选项，可以发现选项是极其多的。</p><blockquote><p>💡 <strong>学习建议</strong>：不需要记住所有选项，只需要掌握常用的即可。需要时可以通过 <code>man 命令名</code> 或 <code>命令名 --help</code> 查看完整的选项列表。</p></blockquote><h2 id="12-Linux用户和权限管理-👥"><a href="#12-Linux用户和权限管理-👥" class="headerlink" title="12. Linux用户和权限管理 👥"></a>12. Linux用户和权限管理 👥</h2><h3 id="12-1-root用户（超级管理员）"><a href="#12-1-root用户（超级管理员）" class="headerlink" title="12.1 root用户（超级管理员）"></a>12.1 root用户（超级管理员）</h3><h4 id="什么是root用户"><a href="#什么是root用户" class="headerlink" title="什么是root用户"></a>什么是root用户</h4><p>无论是Windows、MacOS、Linux均采用多用户的管理模式进行权限管理。</p><p>在Linux系统中，拥有最大权限的账户名为：<strong>root（超级管理员）</strong></p><p><strong>用户权限对比：</strong></p><ul><li><strong>root用户</strong>：拥有最大的系统操作权限</li><li><strong>普通用户</strong>：在许多地方的权限是受限的</li></ul><p><img src="/images/linux/img_37.png" alt="root用户示意"></p><h4 id="普通用户与root用户权限对比"><a href="#普通用户与root用户权限对比" class="headerlink" title="普通用户与root用户权限对比"></a>普通用户与root用户权限对比</h4><p><strong>使用普通用户在根目录下创建文件夹：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="built_in">test</span>@chad /]$ <span class="built_in">mkdir</span> testMkDir</span><br><span class="line"><span class="built_in">mkdir</span>: cannot create directory <span class="string">&#x27;testMkDir&#x27;</span>: Permission denied</span><br></pre></td></tr></table></figure><p><img src="/images/linux/img_38.png" alt="普通用户权限受限"></p><p><strong>切换到root用户后，继续尝试：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="built_in">test</span>@chad /]$ su root</span><br><span class="line">[root@chad /]# <span class="built_in">mkdir</span> testMkDIr</span><br></pre></td></tr></table></figure><p><img src="/images/linux/img_39.png" alt="root用户权限"></p><blockquote><p>💡 <strong>权限说明</strong>：</p><ul><li>普通用户的权限，一般在其HOME目录内是不受限的</li><li>一旦出了HOME目录，大多数地方，普通用户仅有只读和执行权限，无修改权限</li></ul></blockquote><h3 id="12-2-su命令-用户切换"><a href="#12-2-su命令-用户切换" class="headerlink" title="12.2 su命令 - 用户切换"></a>12.2 su命令 - 用户切换</h3><p><code>su</code> 命令用于账户切换，来自英文单词：<strong>Switch User</strong></p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su [-] [用户名]</span><br></pre></td></tr></table></figure><p><strong>参数说明：</strong></p><ul><li><code>-</code> 符号：可选，表示是否在切换用户后加载环境变量，建议带上</li><li><code>用户名</code>：表示要切换的用户，可以省略，省略表示切换到root</li></ul><p><strong>退出当前用户：</strong></p><ul><li>使用 <code>exit</code> 命令退回上一个用户</li><li>使用快捷键 <code>Ctrl + D</code> 退回上一个用户</li></ul><p><strong>权限说明：</strong></p><ul><li>使用普通用户切换到其它用户需要输入密码</li><li>使用root用户切换到其它用户，无需密码</li></ul><blockquote><p>⚠️ <strong>重要提示</strong>：虽然可以通过su命令切换到root得到最大权限，但不建议长期使用root用户，避免带来系统损坏</p></blockquote><h3 id="12-3-sudo命令-临时授权"><a href="#12-3-sudo命令-临时授权" class="headerlink" title="12.3 sudo命令 - 临时授权"></a>12.3 sudo命令 - 临时授权</h3><p><code>sudo</code> 命令可以为普通命令授权，临时以root身份执行。</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> 其他命令</span><br></pre></td></tr></table></figure><p><strong>使用说明：</strong></p><ul><li>在命令之前加上 <code>sudo</code>，即可为这条命令临时赋予root授权</li><li>并非所有用户都有权使用sudo，需要为普通用户配置sudo认证</li></ul><h4 id="配置sudo认证"><a href="#配置sudo认证" class="headerlink" title="配置sudo认证"></a>配置sudo认证</h4><p><strong>配置步骤：</strong></p><ol><li>切换到root用户</li><li>执行 <code>visudo</code> 命令，会自动通过vi编辑器打开 <code>/etc/sudoers</code> 文件</li><li>在文件的最后添加配置</li></ol><p><img src="/images/linux/img_40.png" alt="配置sudo认证"></p><p><strong>配置示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">用户名 ALL=(ALL) NOPASSWD:ALL</span><br></pre></td></tr></table></figure><p>其中 <code>NOPASSWD:ALL</code> 表示使用sudo命令无需输入密码</p><ol start="4"><li>通过 <code>:wq</code> 保存退出</li><li>切换回普通用户</li></ol><p><img src="/images/linux/img_41.png" alt="sudo命令使用"></p><p>配置完成后，执行的命令均以root权限运行。</p><h3 id="12-4-用户和用户组概念"><a href="#12-4-用户和用户组概念" class="headerlink" title="12.4 用户和用户组概念"></a>12.4 用户和用户组概念</h3><h4 id="用户、用户组的关系"><a href="#用户、用户组的关系" class="headerlink" title="用户、用户组的关系"></a>用户、用户组的关系</h4><p>Linux系统中可以：</p><ul><li>配置多个用户</li><li>配置多个用户组</li><li>用户可以加入多个用户组中</li></ul><p><img src="/images/linux/img_42.png" alt="用户和用户组关系"></p><h4 id="权限管控级别"><a href="#权限管控级别" class="headerlink" title="权限管控级别"></a>权限管控级别</h4><p>Linux中关于权限的管控级别有2个级别：</p><ol><li><strong>针对用户的权限控制</strong></li><li><strong>针对用户组的权限控制</strong></li></ol><p>比如，针对某文件，可以控制用户的权限，也可以控制用户组的权限。</p><h3 id="12-5-用户组管理命令"><a href="#12-5-用户组管理命令" class="headerlink" title="12.5 用户组管理命令"></a>12.5 用户组管理命令</h3><blockquote><p>⚠️ <strong>注意</strong>：以下命令需要root用户执行</p></blockquote><h4 id="创建用户组"><a href="#创建用户组" class="headerlink" title="创建用户组"></a>创建用户组</h4><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd 用户组名</span><br></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个名为itcast的用户组</span></span><br><span class="line">groupadd itcast</span><br></pre></td></tr></table></figure><h4 id="删除用户组"><a href="#删除用户组" class="headerlink" title="删除用户组"></a>删除用户组</h4><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupdel 用户组名</span><br></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除itcast用户组</span></span><br><span class="line">groupdel itcast</span><br></pre></td></tr></table></figure><h3 id="12-6-用户管理命令"><a href="#12-6-用户管理命令" class="headerlink" title="12.6 用户管理命令"></a>12.6 用户管理命令</h3><blockquote><p>⚠️ <strong>注意</strong>：以下命令需要root用户执行</p></blockquote><h4 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h4><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd [-g -d] 用户名</span><br></pre></td></tr></table></figure><p><strong>选项说明：</strong></p><ul><li><code>-g</code>：指定用户的组<ul><li>不指定-g：会创建同名组并自动加入</li><li>指定-g：需要组已经存在</li><li>如已存在同名组，必须使用-g</li></ul></li><li><code>-d</code>：指定用户HOME路径<ul><li>不指定：HOME目录默认在 <code>/home/用户名</code></li></ul></li></ul><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建用户，自动创建同名用户组</span></span><br><span class="line">useradd testuser</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建用户并指定用户组</span></span><br><span class="line">useradd -g itcast testuser</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建用户并指定HOME目录</span></span><br><span class="line">useradd -d /home/myuser testuser</span><br></pre></td></tr></table></figure><h4 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h4><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel [-r] 用户名</span><br></pre></td></tr></table></figure><p><strong>选项说明：</strong></p><ul><li><code>-r</code>：删除用户的HOME目录</li><li>不使用-r：删除用户时，HOME目录保留</li></ul><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除用户但保留HOME目录</span></span><br><span class="line">userdel testuser</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除用户同时删除HOME目录</span></span><br><span class="line">userdel -r testuser</span><br></pre></td></tr></table></figure><h4 id="查看用户所属组"><a href="#查看用户所属组" class="headerlink" title="查看用户所属组"></a>查看用户所属组</h4><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">id</span> [用户名]</span><br></pre></td></tr></table></figure><p><strong>参数说明：</strong></p><ul><li><code>用户名</code>：被查看的用户，如果不提供则查看自身</li></ul><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前用户信息</span></span><br><span class="line"><span class="built_in">id</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看指定用户信息</span></span><br><span class="line"><span class="built_in">id</span> root</span><br></pre></td></tr></table></figure><h4 id="修改用户所属组"><a href="#修改用户所属组" class="headerlink" title="修改用户所属组"></a>修改用户所属组</h4><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -aG 用户组 用户名</span><br></pre></td></tr></table></figure><p>**功能说明：**将指定用户加入指定用户组</p><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将testuser用户加入itcast用户组</span></span><br><span class="line">usermod -aG itcast testuser</span><br></pre></td></tr></table></figure><h3 id="12-7-getent命令-查看用户和组信息"><a href="#12-7-getent命令-查看用户和组信息" class="headerlink" title="12.7 getent命令 - 查看用户和组信息"></a>12.7 getent命令 - 查看用户和组信息</h3><h4 id="查看系统用户"><a href="#查看系统用户" class="headerlink" title="查看系统用户"></a>查看系统用户</h4><p>使用 <code>getent</code> 命令，可以查看当前系统中有哪些用户</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getent passwd</span><br></pre></td></tr></table></figure><p><img src="/images/linux/img_43.png" alt="查看系统用户"></p><p><strong>信息格式说明（共7份信息）：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">用户名:密码(x):用户ID:组ID:描述信息:HOME目录:执行终端</span><br></pre></td></tr></table></figure><h4 id="查看系统用户组"><a href="#查看系统用户组" class="headerlink" title="查看系统用户组"></a>查看系统用户组</h4><p>同样可以使用 <code>getent</code> 命令查看当前系统中有哪些用户组</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getent group</span><br></pre></td></tr></table></figure><p><img src="/images/linux/img_44.png" alt="查看系统用户组"></p><p><strong>信息格式说明（共3份信息）：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">组名称:组认证(显示为x):组ID</span><br></pre></td></tr></table></figure><h3 id="12-8-查看权限控制信息"><a href="#12-8-查看权限控制信息" class="headerlink" title="12.8 查看权限控制信息"></a>12.8 查看权限控制信息</h3><h4 id="使用ls-l查看权限"><a href="#使用ls-l查看权限" class="headerlink" title="使用ls -l查看权限"></a>使用ls -l查看权限</h4><p>通过 <code>ls -l</code> 可以以列表形式查看内容，并显示权限细节</p><p><img src="/images/linux/img_45.png" alt="权限信息显示"></p><p><strong>信息说明：</strong></p><ul><li><strong>序号1</strong>：文件、文件夹的权限控制信息</li><li><strong>序号2</strong>：文件、文件夹所属用户</li><li><strong>序号3</strong>：文件、文件夹所属用户组</li></ul><h4 id="权限信息解析"><a href="#权限信息解析" class="headerlink" title="权限信息解析"></a>权限信息解析</h4><p>权限细节总共分为<strong>10个槽位</strong></p><p><img src="/images/linux/img_46.png" alt="权限信息解析"></p><p><strong>权限格式：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">d rwx r-x r-x</span><br><span class="line">↑  ↑   ↑   ↑</span><br><span class="line">│  │   │   └─ 其它用户权限</span><br><span class="line">│  │   └───── 所属用户组权限</span><br><span class="line">│  └───────── 所属用户权限</span><br><span class="line">└──────────── 文件类型</span><br></pre></td></tr></table></figure><p><strong>示例：drwxr-xr-x</strong></p><ul><li>首字母 <code>d</code> 表示这是一个文件夹（<code>-</code> 表示文件）</li><li>所属用户的权限是：<code>rwx</code>（可读、可写、可执行）</li><li>所属用户组的权限是：<code>r-x</code>（可读、不可写、可执行）</li><li>其它用户的权限是：<code>r-x</code>（可读、不可写、可执行）</li></ul><blockquote><p>💡 <strong>提示</strong>：<code>-</code> 表示无此权限</p></blockquote><h4 id="rwx权限详解"><a href="#rwx权限详解" class="headerlink" title="rwx权限详解"></a>rwx权限详解</h4><table><thead><tr><th>权限</th><th>针对文件</th><th>针对文件夹</th></tr></thead><tbody><tr><td><strong>r</strong>（读）</td><td>可以查看文件内容</td><td>可以查看文件夹内容（如ls命令）</td></tr><tr><td><strong>w</strong>（写）</td><td>可以修改此文件</td><td>可以在文件夹内创建、删除、改名等操作</td></tr><tr><td><strong>x</strong>（执行）</td><td>可以将文件作为程序执行</td><td>可以更改工作目录到此文件夹（cd进入）</td></tr></tbody></table><blockquote><p>⚠️ <strong>注意</strong>：当用户非文件所属用户和用户组成员时，使用最后三位权限（其它用户权限）</p></blockquote><h3 id="12-9-chmod命令-修改权限"><a href="#12-9-chmod命令-修改权限" class="headerlink" title="12.9 chmod命令 - 修改权限"></a>12.9 chmod命令 - 修改权限</h3><p><code>chmod</code> 命令可以修改文件、文件夹的权限信息。</p><blockquote><p>⚠️ <strong>权限要求</strong>：只有文件、文件夹的所属用户或root用户可以修改</p></blockquote><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> [-R] 权限信息 文件名</span><br></pre></td></tr></table></figure><p><strong>选项说明：</strong></p><ul><li><code>-R</code>：对文件夹内的全部内容应用同样的操作</li></ul><h4 id="字母表示法"><a href="#字母表示法" class="headerlink" title="字母表示法"></a>字母表示法</h4><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改文件权限为 rwxr-x--x</span></span><br><span class="line"><span class="built_in">chmod</span> u=rwx,g=rx,o=x hello.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改文件夹及其全部内容权限为 rwxr-x--x</span></span><br><span class="line"><span class="built_in">chmod</span> -R u=rwx,g=rx,o=x <span class="built_in">test</span></span><br></pre></td></tr></table></figure><p><strong>字母含义：</strong></p><ul><li><code>u</code> 表示 user（所属用户权限）</li><li><code>g</code> 表示 group（组权限）</li><li><code>o</code> 表示 other（其它用户权限）</li></ul><h4 id="数字表示法"><a href="#数字表示法" class="headerlink" title="数字表示法"></a>数字表示法</h4><p>权限可以用3位数字来代表：</p><ul><li>第一位数字表示用户权限</li><li>第二位表示用户组权限</li><li>第三位表示其它用户权限</li></ul><p><strong>权限数字对照表：</strong></p><table><thead><tr><th>数字</th><th>权限</th><th>说明</th></tr></thead><tbody><tr><td>0</td><td><code>---</code></td><td>无任何权限</td></tr><tr><td>1</td><td><code>--x</code></td><td>仅有执行权限</td></tr><tr><td>2</td><td><code>-w-</code></td><td>仅有写权限</td></tr><tr><td>3</td><td><code>-wx</code></td><td>有写和执行权限</td></tr><tr><td>4</td><td><code>r--</code></td><td>仅有读权限</td></tr><tr><td>5</td><td><code>r-x</code></td><td>有读和执行权限</td></tr><tr><td>6</td><td><code>rw-</code></td><td>有读和写权限</td></tr><tr><td>7</td><td><code>rwx</code></td><td>有全部权限</td></tr></tbody></table><p><strong>计算方式：</strong> r&#x3D;4, w&#x3D;2, x&#x3D;1</p><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将权限修改为 751 (rwxr-x--x)</span></span><br><span class="line"><span class="built_in">chmod</span> 751 hello.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将权限修改为 515 (r-x--xr-x)</span></span><br><span class="line"><span class="built_in">chmod</span> 515 hello.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将权限修改为 326 (-wx-w-rw-)</span></span><br><span class="line"><span class="built_in">chmod</span> 326 hello.txt</span><br></pre></td></tr></table></figure><blockquote><p>💡 <strong>权限751的含义</strong>：</p><ul><li>7 (rwx) &#x3D; 4+2+1：用户拥有读、写、执行权限</li><li>5 (r-x) &#x3D; 4+1：用户组拥有读、执行权限</li><li>1 (–x) &#x3D; 1：其它用户仅有执行权限</li></ul></blockquote><h3 id="12-10-chown命令-修改所属用户和用户组"><a href="#12-10-chown命令-修改所属用户和用户组" class="headerlink" title="12.10 chown命令 - 修改所属用户和用户组"></a>12.10 chown命令 - 修改所属用户和用户组</h3><p><code>chown</code> 命令可以修改文件、文件夹的所属用户和用户组</p><blockquote><p>⚠️ <strong>权限要求</strong>：普通用户无法修改所属为其它用户或组，此命令只适用于root用户执行</p></blockquote><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> [-R] [用户][:用户组] 文件名</span><br></pre></td></tr></table></figure><p><strong>选项说明：</strong></p><ul><li><code>-R</code>：同chmod，对文件夹内全部内容应用相同规则</li></ul><p><strong>参数说明：</strong></p><ul><li><code>用户</code>：修改所属用户</li><li><code>用户组</code>：修改所属用户组</li><li><code>:</code> 用于分隔用户和用户组</li></ul><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将hello.txt所属用户修改为root</span></span><br><span class="line"><span class="built_in">chown</span> root hello.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将hello.txt所属用户组修改为root</span></span><br><span class="line"><span class="built_in">chown</span> :root hello.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 同时修改所属用户和用户组</span></span><br><span class="line"><span class="built_in">chown</span> root:chad hello.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改文件夹及其全部内容的所属用户</span></span><br><span class="line"><span class="built_in">chown</span> -R root <span class="built_in">test</span></span><br></pre></td></tr></table></figure><h2 id="13-Linux实用操作-⚙️"><a href="#13-Linux实用操作-⚙️" class="headerlink" title="13. Linux实用操作 ⚙️"></a>13. Linux实用操作 ⚙️</h2><h3 id="13-1-各类实用小技巧（快捷键）-⌨️"><a href="#13-1-各类实用小技巧（快捷键）-⌨️" class="headerlink" title="13.1 各类实用小技巧（快捷键） ⌨️"></a>13.1 各类实用小技巧（快捷键） ⌨️</h3><p>掌握Linux命令行的快捷键可以大大提高工作效率。</p><h4 id="强制停止-Ctrl-C"><a href="#强制停止-Ctrl-C" class="headerlink" title="强制停止 - Ctrl + C"></a>强制停止 - Ctrl + C</h4><p>Linux某些程序的运行，如果想要强制停止它，可以使用快捷键 <code>Ctrl + C</code></p><p><strong>使用场景：</strong></p><ul><li>强制停止正在运行的程序</li><li>命令输入错误时，退出当前输入，重新输入</li></ul><h4 id="退出-登出-Ctrl-D"><a href="#退出-登出-Ctrl-D" class="headerlink" title="退出&#x2F;登出 - Ctrl + D"></a>退出&#x2F;登出 - Ctrl + D</h4><p>可以通过快捷键 <code>Ctrl + D</code>：</p><ul><li>退出账户的登录</li><li>退出某些特定程序的专属页面</li></ul><h4 id="历史命令搜索"><a href="#历史命令搜索" class="headerlink" title="历史命令搜索"></a>历史命令搜索</h4><p><strong>使用history命令：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">history</span></span><br></pre></td></tr></table></figure><p>查看历史输入过的命令</p><p><strong>快速执行历史命令：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!命令前缀</span><br></pre></td></tr></table></figure><p>自动执行上一次匹配前缀的命令</p><p><strong>交互式搜索 - Ctrl + R：</strong></p><p>通过快捷键 <code>Ctrl + R</code>，输入内容去匹配历史命令</p><p>搜索到内容后：</p><ul><li><strong>回车键</strong>：直接执行该命令</li><li><strong>左右方向键</strong>：获取此命令到命令行（不执行）</li></ul><h4 id="光标移动快捷键"><a href="#光标移动快捷键" class="headerlink" title="光标移动快捷键"></a>光标移动快捷键</h4><table><thead><tr><th>快捷键</th><th>功能</th></tr></thead><tbody><tr><td><code>Ctrl + A</code></td><td>跳到命令开头</td></tr><tr><td><code>Ctrl + E</code></td><td>跳到命令结尾</td></tr><tr><td><code>Ctrl + ←</code></td><td>向左跳一个单词</td></tr><tr><td><code>Ctrl + →</code></td><td>向右跳一个单词</td></tr></tbody></table><h4 id="清屏"><a href="#清屏" class="headerlink" title="清屏"></a>清屏</h4><p><strong>方式一：</strong> 快捷键 <code>Ctrl + L</code></p><p><strong>方式二：</strong> 使用clear命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br></pre></td></tr></table></figure><h4 id="快捷键总结"><a href="#快捷键总结" class="headerlink" title="快捷键总结"></a>快捷键总结</h4><table><thead><tr><th>序号</th><th>快捷键&#x2F;命令</th><th>功能说明</th></tr></thead><tbody><tr><td>1</td><td><code>Ctrl + C</code></td><td>强制停止程序</td></tr><tr><td>2</td><td><code>Ctrl + D</code></td><td>退出&#x2F;登出</td></tr><tr><td>3</td><td><code>history</code></td><td>查看历史命令</td></tr><tr><td>4</td><td><code>!命令前缀</code></td><td>自动匹配上一个命令</td></tr><tr><td>5</td><td><code>Ctrl + R</code></td><td>搜索历史命令</td></tr><tr><td>6</td><td><code>Ctrl + A</code> &#x2F; <code>Ctrl + E</code></td><td>光标移动到命令开始或结束</td></tr><tr><td>7</td><td><code>Ctrl + ←</code> &#x2F; <code>Ctrl + →</code></td><td>左右跳单词</td></tr><tr><td>8</td><td><code>Ctrl + L</code> 或 <code>clear</code></td><td>清屏</td></tr></tbody></table><h3 id="13-2-软件安装-📦"><a href="#13-2-软件安装-📦" class="headerlink" title="13.2 软件安装 📦"></a>13.2 软件安装 📦</h3><h4 id="Linux系统安装软件的方式"><a href="#Linux系统安装软件的方式" class="headerlink" title="Linux系统安装软件的方式"></a>Linux系统安装软件的方式</h4><p>操作系统安装软件有许多种方式，一般分为：</p><p><strong>1. 下载安装包自行安装</strong></p><ul><li>Windows系统：使用 <code>.exe</code>、<code>.msi</code> 文件等</li><li>MacOS系统：使用 <code>.dmg</code>、<code>.pkg</code> 文件等</li></ul><p><strong>2. 系统的应用商店内安装</strong></p><ul><li>Windows系统：Microsoft Store商店</li><li>MacOS系统：AppStore商店</li></ul><p>Linux系统同样支持这两种方式。我们首先学习使用Linux命令行内的”应用商店”：<strong>yum命令安装软件</strong></p><h4 id="yum命令详解"><a href="#yum命令详解" class="headerlink" title="yum命令详解"></a>yum命令详解</h4><p><strong>yum</strong>：RPM包软件管理器，用于自动化安装配置Linux软件，并可以自动解决依赖问题。</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum [-y] [<span class="built_in">command</span>] [package]</span><br></pre></td></tr></table></figure><p><strong>选项说明：</strong></p><ul><li><code>-y</code>：自动确认，无需手动确认安装或卸载过程</li></ul><p><strong>常用命令：</strong></p><ul><li><code>install</code>：安装软件</li><li><code>remove</code>：卸载软件</li><li><code>search</code>：搜索软件包</li></ul><blockquote><p>⚠️ <strong>注意事项</strong>：</p><ul><li>yum命令需要root权限，可以使用 <code>su</code> 切换到root，或使用 <code>sudo</code> 提权</li><li>yum命令需要联网</li></ul></blockquote><p><strong>使用示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装wget程序</span></span><br><span class="line">yum [-y] install wget</span><br><span class="line"></span><br><span class="line"><span class="comment"># 卸载wget程序</span></span><br><span class="line">yum [-y] remove wget</span><br><span class="line"></span><br><span class="line"><span class="comment"># 搜索wget安装包</span></span><br><span class="line">yum search wget</span><br></pre></td></tr></table></figure><h4 id="CentOS-7-配置阿里云镜像源"><a href="#CentOS-7-配置阿里云镜像源" class="headerlink" title="CentOS 7 配置阿里云镜像源"></a>CentOS 7 配置阿里云镜像源</h4><blockquote><p>💡 <strong>重要提示</strong>：CentOS 7 官方源已经彻底下线（自 2024 年 6 月起 EOL），<code>mirrorlist.centos.org</code> 现在根本不存在了。</p></blockquote><p>要让yum能正常工作，需要把源地址改成”归档源（vault）”或国内镜像。</p><p><strong>配置阿里云 CentOS 7 源：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载阿里云的CentOS 7源配置文件</span></span><br><span class="line"><span class="built_in">sudo</span> curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 清理yum缓存</span></span><br><span class="line"><span class="built_in">sudo</span> yum clean all</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成新的缓存</span></span><br><span class="line"><span class="built_in">sudo</span> yum makecache</span><br></pre></td></tr></table></figure><p><img src="/images/linux/img_47.png" alt="yum配置示例"></p><h3 id="13-3-systemctl命令-服务管理-🔧"><a href="#13-3-systemctl命令-服务管理-🔧" class="headerlink" title="13.3 systemctl命令 - 服务管理 🔧"></a>13.3 systemctl命令 - 服务管理 🔧</h3><h4 id="systemctl命令介绍"><a href="#systemctl命令介绍" class="headerlink" title="systemctl命令介绍"></a>systemctl命令介绍</h4><p>Linux系统很多软件（内置或第三方）均支持使用 <code>systemctl</code> 命令控制：<strong>启动、停止、开机自启</strong></p><p>能够被systemctl管理的软件，一般也称之为：<strong>服务（service）</strong></p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl [<span class="built_in">command</span>] [unit]</span><br></pre></td></tr></table></figure><p><strong>常用命令：</strong></p><ul><li><code>start</code>：启动服务</li><li><code>stop</code>：停止服务</li><li><code>restart</code>：重启服务</li><li><code>status</code>：查看服务状态</li><li><code>enable</code>：设置开机自启</li><li><code>disable</code>：关闭开机自启</li></ul><h4 id="系统内置服务"><a href="#系统内置服务" class="headerlink" title="系统内置服务"></a>系统内置服务</h4><p>系统内置的服务比较多，常见的有：</p><table><thead><tr><th>服务名</th><th>说明</th></tr></thead><tbody><tr><td><code>NetworkManager</code></td><td>主网络服务</td></tr><tr><td><code>network</code></td><td>副网络服务</td></tr><tr><td><code>firewalld</code></td><td>防火墙服务</td></tr><tr><td><code>sshd</code></td><td>SSH服务（FinalShell远程登录Linux使用的就是这个服务）</td></tr></tbody></table><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动SSH服务</span></span><br><span class="line">systemctl start sshd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止防火墙服务</span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看服务状态</span></span><br><span class="line">systemctl status sshd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置开机自启</span></span><br><span class="line">systemctl <span class="built_in">enable</span> sshd</span><br></pre></td></tr></table></figure><h4 id="第三方软件服务"><a href="#第三方软件服务" class="headerlink" title="第三方软件服务"></a>第三方软件服务</h4><p>除了内置的服务以外，部分第三方软件安装后也可以用systemctl进行控制。</p><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装ntp软件</span></span><br><span class="line">yum install -y ntp</span><br><span class="line"><span class="comment"># 可以通过ntpd服务名，配合systemctl进行控制</span></span><br><span class="line">systemctl start ntpd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装apache服务器软件</span></span><br><span class="line">yum install -y httpd</span><br><span class="line"><span class="comment"># 可以通过httpd服务名，配合systemctl进行控制</span></span><br><span class="line">systemctl start httpd</span><br></pre></td></tr></table></figure><blockquote><p>💡 <strong>提示</strong>：部分软件安装后没有自动集成到systemctl中，我们可以手动添加。</p></blockquote><h3 id="13-4-软连接-ln命令-🔗"><a href="#13-4-软连接-ln命令-🔗" class="headerlink" title="13.4 软连接 - ln命令 🔗"></a>13.4 软连接 - ln命令 🔗</h3><h4 id="创建软连接"><a href="#创建软连接" class="headerlink" title="创建软连接"></a>创建软连接</h4><p>在系统中创建软链接，可以将文件、文件夹链接到其它位置。</p><p>类似Windows系统中的 <strong>快捷方式</strong></p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s [源文件] [链接文件]</span><br></pre></td></tr></table></figure><p><strong>参数说明：</strong></p><ul><li><code>-s</code> 选项：创建软连接</li><li><code>源文件</code>：被链接的文件或文件夹</li><li><code>链接文件</code>：要链接去的目的地</li></ul><p><strong>使用示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将/etc/yum.conf链接到家目录</span></span><br><span class="line"><span class="built_in">ln</span> -s /etc/yum.conf ~/yum.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将/etc/yum目录链接到家目录</span></span><br><span class="line"><span class="built_in">ln</span> -s /etc/yum ~/yum</span><br></pre></td></tr></table></figure><h3 id="13-5-日期和时区-📅"><a href="#13-5-日期和时区-📅" class="headerlink" title="13.5 日期和时区 📅"></a>13.5 日期和时区 📅</h3><h4 id="date命令-查看日期时间"><a href="#date命令-查看日期时间" class="headerlink" title="date命令 - 查看日期时间"></a>date命令 - 查看日期时间</h4><p>通过 <code>date</code> 命令可以在命令行中查看系统的时间</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">date</span> [-d] [+format]</span><br></pre></td></tr></table></figure><p><strong>选项说明：</strong></p><ul><li><code>-d</code>：按照给定的字符串显示日期，一般用于日期计算</li></ul><h4 id="格式化字符串"><a href="#格式化字符串" class="headerlink" title="格式化字符串"></a>格式化字符串</h4><p>通过特定的字符串标记，来控制显示的日期格式：</p><table><thead><tr><th>格式符</th><th>含义</th></tr></thead><tbody><tr><td><code>%Y</code></td><td>年（4位）</td></tr><tr><td><code>%y</code></td><td>年份后两位数字 (00..99)</td></tr><tr><td><code>%m</code></td><td>月份 (01..12)</td></tr><tr><td><code>%d</code></td><td>日 (01..31)</td></tr><tr><td><code>%H</code></td><td>小时 (00..23)</td></tr><tr><td><code>%M</code></td><td>分钟 (00..59)</td></tr><tr><td><code>%S</code></td><td>秒 (00..60)</td></tr><tr><td><code>%s</code></td><td>自 1970-01-01 00:00:00 UTC 到现在的秒数</td></tr></tbody></table><p><strong>使用示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前日期时间</span></span><br><span class="line">[root@chad home]# <span class="built_in">date</span></span><br><span class="line">Sun Nov  9 09:07:45 PST 2025</span><br><span class="line"></span><br><span class="line"><span class="comment"># 格式化显示</span></span><br><span class="line"><span class="built_in">date</span> <span class="string">&quot;+%Y-%m-%d %H:%M:%S&quot;</span></span><br></pre></td></tr></table></figure><h4 id="日期计算"><a href="#日期计算" class="headerlink" title="日期计算"></a>日期计算</h4><p><code>-d</code> 选项可以按照给定的字符串显示日期，一般用于日期计算</p><p><strong>支持的时间标记：</strong></p><ul><li><code>year</code>：年</li><li><code>month</code>：月</li><li><code>day</code>：天</li><li><code>hour</code>：小时</li><li><code>minute</code>：分钟</li><li><code>second</code>：秒</li></ul><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示明天的日期</span></span><br><span class="line"><span class="built_in">date</span> -d <span class="string">&quot;+1 day&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示一周后的日期</span></span><br><span class="line"><span class="built_in">date</span> -d <span class="string">&quot;+7 day&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示一个月前的日期</span></span><br><span class="line"><span class="built_in">date</span> -d <span class="string">&quot;-1 month&quot;</span></span><br></pre></td></tr></table></figure><blockquote><p>💡 <strong>提示</strong>：<code>-d</code> 选项可以和格式化字符串配合一起使用</p></blockquote><h3 id="13-6-IP地址和主机名-🌐"><a href="#13-6-IP地址和主机名-🌐" class="headerlink" title="13.6 IP地址和主机名 🌐"></a>13.6 IP地址和主机名 🌐</h3><h4 id="IP地址详解"><a href="#IP地址详解" class="headerlink" title="IP地址详解"></a>IP地址详解</h4><p>每一台联网的电脑都会有一个地址，用于和其它计算机进行通讯。</p><p><strong>IP地址版本：</strong></p><ul><li><strong>IPv4版本</strong>：主流使用（本教程重点讲解）</li><li><strong>IPv6版本</strong>：较少使用（暂不涉及）</li></ul><p><strong>IPv4地址格式：</strong> <code>a.b.c.d</code></p><p>其中 a、b、c、d 表示 0~255 的数字，例如：<code>192.168.88.101</code></p><p><strong>查看本机IP地址：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig</span><br></pre></td></tr></table></figure><blockquote><p>💡 <strong>提示</strong>：如无法使用ifconfig命令，可以安装：<code>yum -y install net-tools</code></p></blockquote><p><img src="/images/linux/img_48.png" alt="查看IP地址"></p><h4 id="特殊IP地址"><a href="#特殊IP地址" class="headerlink" title="特殊IP地址"></a>特殊IP地址</h4><p>除了标准的IP地址以外，还有几个特殊的IP地址需要了解：</p><p><strong>1. 127.0.0.1（本地回环地址）</strong></p><p>这个IP地址用于指代本机</p><p><img src="/images/linux/img_49.png" alt="本地回环地址"></p><p><strong>2. 0.0.0.0（特殊IP地址）</strong></p><p>用途：</p><ul><li>可以用于指代本机</li><li>可以在端口绑定中用来确定绑定关系</li><li>在IP地址限制中，表示所有IP的意思（如放行规则设置为0.0.0.0，表示允许任意IP访问）</li></ul><h4 id="主机名"><a href="#主机名" class="headerlink" title="主机名"></a>主机名</h4><p>每一台电脑除了对外联络地址（IP地址）以外，也可以有一个名字，称之为<strong>主机名</strong></p><p>无论是Windows或Linux系统，都可以给系统设置主机名。</p><p><strong>查看主机名：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@chad home]# hostname</span><br><span class="line">chad</span><br></pre></td></tr></table></figure><p><strong>修改主机名：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostnamectl set-hostname 新主机名</span><br></pre></td></tr></table></figure><blockquote><p>⚠️ <strong>注意</strong>：修改主机名需要root权限，修改后重新登录FinalShell即可看到主机名已正确显示</p></blockquote><h4 id="域名解析"><a href="#域名解析" class="headerlink" title="域名解析"></a>域名解析</h4><p>IP地址实在是难以记忆，有没有什么办法可以通过主机名或替代的字符地址去代替数字化的IP地址呢？</p><p>实际上，我们一直都是通过字符化的地址去访问服务器，很少直接指定IP地址。</p><p><strong>示例：</strong> 在浏览器内打开 <code>www.baidu.com</code>，会打开百度的网址</p><p>其中，<code>www.baidu.com</code> 是百度的网址，我们称之为：<strong>域名</strong></p><h4 id="域名解析流程"><a href="#域名解析流程" class="headerlink" title="域名解析流程"></a>域名解析流程</h4><p>访问 <code>www.baidu.com</code> 的流程如下：</p><p><img src="/images/linux/img_50.png" alt="域名解析流程"></p><p><strong>解析步骤：</strong></p><ol><li>先查看本机的记录（私人地址本）<ul><li>Windows：<code>C:\Windows\System32\drivers\etc\hosts</code></li><li>Linux：<code>/etc/hosts</code></li></ul></li><li>再联网去DNS服务器询问（如 <code>114.114.114.114</code>、<code>8.8.8.8</code> 等）</li></ol><h4 id="虚拟机配置固定IP"><a href="#虚拟机配置固定IP" class="headerlink" title="虚拟机配置固定IP"></a>虚拟机配置固定IP</h4><p><strong>为什么需要固定IP？</strong></p><p>当前虚拟机的Linux操作系统，其IP地址是通过DHCP服务获取的。</p><p><strong>DHCP：</strong> 动态获取IP地址，即每次重启设备后都会获取一次，可能导致IP地址频繁变更</p><p><strong>原因1：</strong> 远程连接需要稳定的IP地址，如果IP地址经常变化就要频繁修改连接配置</p><p><strong>原因2：</strong> 配置了IP地址和主机名的映射后，如果IP频繁更改，需要频繁更新映射关系</p><h4 id="在VMware-Workstation中配置固定IP"><a href="#在VMware-Workstation中配置固定IP" class="headerlink" title="在VMware Workstation中配置固定IP"></a>在VMware Workstation中配置固定IP</h4><p>配置固定IP需要2个大步骤：</p><p><strong>步骤1：</strong> 在VMware Workstation（或Fusion）中配置IP地址网关和网段</p><p><img src="/images/linux/img_51.png" alt="VMware网络配置"></p><p><strong>步骤2：</strong> 在Linux系统中手动修改配置文件，固定IP</p><p>使用vim编辑 <code>/etc/sysconfig/network-scripts/ifcfg-ens33</code> 文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-ens33</span><br></pre></td></tr></table></figure><p>编辑完成后，重启网卡：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart network</span><br></pre></td></tr></table></figure><p>执行 <code>ifconfig</code> 即可看到IP地址已固定</p><p><img src="/images/linux/img_52.png" alt="固定IP配置"></p><blockquote><p>⚠️ <strong>重要</strong>：虚拟机设置中的网络适配器需要改成NAT模式</p></blockquote><p><img src="/images/linux/img_53.png" alt="NAT模式设置"></p><h3 id="13-7-网络传输-📡"><a href="#13-7-网络传输-📡" class="headerlink" title="13.7 网络传输 📡"></a>13.7 网络传输 📡</h3><h4 id="ping命令-网络连通性测试"><a href="#ping命令-网络连通性测试" class="headerlink" title="ping命令 - 网络连通性测试"></a>ping命令 - 网络连通性测试</h4><p><code>ping</code> 命令可以检查指定的网络服务器是否可联通</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping [-c num] [host]</span><br></pre></td></tr></table></figure><p><strong>选项说明：</strong></p><ul><li><code>-c</code>：检查的次数，不使用 <code>-c</code> 选项，将无限次数持续检查</li><li><code>host</code>：IP地址或主机名</li></ul><p><strong>使用示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查baidu.com是否联通（检查3次）</span></span><br><span class="line">[root@chad home]# ping -c 3 baidu.com</span><br><span class="line">PING baidu.com (220.181.7.203) 56(84) bytes of data.</span><br><span class="line">64 bytes from 220.181.7.203 (220.181.7.203): icmp_seq=1 ttl=128 <span class="keyword">time</span>=34.4 ms</span><br><span class="line">64 bytes from 220.181.7.203 (220.181.7.203): icmp_seq=2 ttl=128 <span class="keyword">time</span>=38.7 ms</span><br><span class="line">64 bytes from 220.181.7.203 (220.181.7.203): icmp_seq=3 ttl=128 <span class="keyword">time</span>=29.9 ms</span><br><span class="line">--- baidu.com ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, <span class="keyword">time</span> 3257ms</span><br><span class="line">rtt min/avg/max/mdev = 29.926/34.375/38.709/3.592 ms</span><br></pre></td></tr></table></figure><h4 id="wget命令-文件下载"><a href="#wget命令-文件下载" class="headerlink" title="wget命令 - 文件下载"></a>wget命令 - 文件下载</h4><p><code>wget</code> 是非交互式的文件下载器，可以在命令行内下载网络文件</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget [-b] [URL]</span><br></pre></td></tr></table></figure><p><strong>选项说明：</strong></p><ul><li><code>-b</code>：可选，后台下载，会将日志写入到当前工作目录的 <code>wget-log</code> 文件</li><li><code>URL</code>：下载链接</li></ul><blockquote><p>⚠️ <strong>注意</strong>：无论下载是否完成，都会生成要下载的文件，如果下载未完成，请及时清理未完成的不可用文件。</p></blockquote><h4 id="curl命令-HTTP请求"><a href="#curl命令-HTTP请求" class="headerlink" title="curl命令 - HTTP请求"></a>curl命令 - HTTP请求</h4><p><code>curl</code> 可以发送http网络请求，可用于：下载文件、获取信息等</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl [-O] [URL]</span><br></pre></td></tr></table></figure><p><strong>选项说明：</strong></p><ul><li><code>-O</code>：用于下载文件，当URL是下载链接时，可以使用此选项保存文件</li><li><code>URL</code>：要发起请求的网络地址</li></ul><p><strong>使用示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看IP信息</span></span><br><span class="line">curl cip.cc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 访问网站</span></span><br><span class="line">curl python.chad.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载文件</span></span><br><span class="line">curl -O http://archive.apache.org/dist/hadoop/common/hadoop-3.3.0/hadoop-3.3.0.tar.gz</span><br></pre></td></tr></table></figure><h3 id="13-8-端口管理-🔌"><a href="#13-8-端口管理-🔌" class="headerlink" title="13.8 端口管理 🔌"></a>13.8 端口管理 🔌</h3><h4 id="端口概念"><a href="#端口概念" class="headerlink" title="端口概念"></a>端口概念</h4><p>端口是设备与外界通讯交流的出入口。端口可以分为：<strong>物理端口</strong>和<strong>虚拟端口</strong>两类</p><p><strong>物理端口：</strong></p><ul><li>又可称之为接口</li><li>是可见的端口</li><li>例如：USB接口、RJ45网口、HDMI端口等</li></ul><p><img src="/images/linux/img_54.png" alt="物理端口"></p><p><strong>虚拟端口：</strong></p><ul><li>是指计算机内部的端口</li><li>是不可见的</li><li>用来操作系统和外部进行交互使用的</li></ul><p><img src="/images/linux/img_55.png" alt="虚拟端口"></p><h4 id="虚拟端口的作用"><a href="#虚拟端口的作用" class="headerlink" title="虚拟端口的作用"></a>虚拟端口的作用</h4><p>物理端口我们日常生活中经常见到，也能知晓它的作用。</p><p>但是虚拟端口，有什么用？为什么需要它呢？</p><p><img src="/images/linux/img_56.png" alt="单纯通过IP"></p><p>计算机程序之间的通讯，通过IP只能锁定计算机，但是无法锁定具体的程序。</p><p><img src="/images/linux/img_57.png" alt="通过端口锁定程序"></p><p><strong>端口的作用：</strong> 通过端口可以锁定计算机上具体的程序，确保程序之间进行沟通</p><blockquote><p>💡 <strong>类比</strong>：IP地址相当于小区地址，在小区内可以有许多住户（程序），而门牌号（端口）就是各个住户（程序）的联系地址</p></blockquote><h4 id="端口范围划分"><a href="#端口范围划分" class="headerlink" title="端口范围划分"></a>端口范围划分</h4><p>Linux系统是一个超大号小区，可以支持 <strong>65535</strong> 个端口，这6万多个端口分为3类进行使用：</p><table><thead><tr><th>端口范围</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>1~1023</td><td>公认端口</td><td>通常用于一些系统内置或知名程序的预留使用，如SSH服务的22端口，HTTPS服务的443端口。非特殊需要，不要占用这个范围的端口</td></tr><tr><td>1024~49151</td><td>注册端口</td><td>通常可以随意使用，用于松散的绑定一些程序&#x2F;服务</td></tr><tr><td>49152~65535</td><td>动态端口</td><td>通常不会固定绑定程序，而是当程序对外进行网络链接时，用于临时使用</td></tr></tbody></table><p><img src="/images/linux/img_58.png" alt="端口使用示意"></p><p><strong>端口使用示例：</strong></p><ul><li>计算机A的微信连接计算机B的微信</li><li>A使用的50001即<strong>动态端口</strong>，临时找一个端口作为出口</li><li>B的微信使用端口5678，即<strong>注册端口</strong>，长期绑定此端口等待别人连接</li></ul><blockquote><p>💡 <strong>提示</strong>：上述微信的端口仅为演示，具体微信的端口使用非图中示意</p></blockquote><h4 id="查看端口占用"><a href="#查看端口占用" class="headerlink" title="查看端口占用"></a>查看端口占用</h4><p><strong>使用nmap命令：</strong></p><p>首先安装nmap：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install nmap</span><br></pre></td></tr></table></figure><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap 被查看的IP地址</span><br></pre></td></tr></table></figure><p><img src="/images/linux/img_59.png" alt="nmap查看端口"></p><p>可以看到，本机（127.0.0.1）上有多个端口被程序占用。</p><p>其中 <strong>22端口</strong> 一般是SSH服务使用，即FinalShell远程连接Linux所使用的端口。</p><p><strong>使用netstat命令查看指定端口：</strong></p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -anp | grep 端口号</span><br></pre></td></tr></table></figure><p><img src="/images/linux/img_60.png" alt="netstat查看端口"></p><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@chad suoliang]# netstat -anp | grep 1111</span><br><span class="line">[root@chad suoliang]#</span><br></pre></td></tr></table></figure><p>可以看到，当前系统1111端口无人使用。</p><h3 id="13-9-进程管理-⚡"><a href="#13-9-进程管理-⚡" class="headerlink" title="13.9 进程管理 ⚡"></a>13.9 进程管理 ⚡</h3><h4 id="进程的概念"><a href="#进程的概念" class="headerlink" title="进程的概念"></a>进程的概念</h4><p>程序运行在操作系统中，是被操作系统所管理的。</p><p>为管理运行的程序，每一个程序在运行的时候，便被操作系统注册为系统中的一个：<strong>进程</strong></p><p>并会为每一个进程都分配一个独有的：<strong>进程ID（进程号）</strong></p><h4 id="ps命令-查看进程"><a href="#ps命令-查看进程" class="headerlink" title="ps命令 - 查看进程"></a>ps命令 - 查看进程</h4><p>可以通过 <code>ps</code> 命令查看Linux系统中的进程信息</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps [-e -f]</span><br></pre></td></tr></table></figure><p><strong>选项说明：</strong></p><ul><li><code>-e</code>：显示出全部的进程</li><li><code>-f</code>：以完全格式化的形式展示信息（展示全部信息）</li></ul><p><strong>常用组合：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef  <span class="comment"># 列出全部进程的全部信息</span></span><br></pre></td></tr></table></figure><p><img src="/images/linux/img_61.png" alt="ps命令输出"></p><h4 id="ps命令输出信息详解"><a href="#ps命令输出信息详解" class="headerlink" title="ps命令输出信息详解"></a>ps命令输出信息详解</h4><p>从左到右分别是：</p><table><thead><tr><th>字段</th><th>说明</th></tr></thead><tbody><tr><td>UID</td><td>进程所属的用户ID</td></tr><tr><td>PID</td><td>进程的进程号ID</td></tr><tr><td>PPID</td><td>进程的父ID（启动此进程的其它进程）</td></tr><tr><td>C</td><td>此进程的CPU占用率（百分比）</td></tr><tr><td>STIME</td><td>进程的启动时间</td></tr><tr><td>TTY</td><td>启动此进程的终端序号，如显示?，表示非终端启动</td></tr><tr><td>TIME</td><td>进程占用CPU的时间</td></tr><tr><td>CMD</td><td>进程对应的名称或启动路径或启动命令</td></tr></tbody></table><h4 id="查看指定进程"><a href="#查看指定进程" class="headerlink" title="查看指定进程"></a>查看指定进程</h4><p>在实际使用中，<code>ps -ef</code> 会列出大量进程信息，如何快速找到想要的进程？</p><p><strong>问题场景：</strong></p><ol><li>在FinalShell中，执行命令 <code>tail</code>，此命令会一直阻塞在那里</li><li>在FinalShell中，复制一个标签页，执行 <code>ps -ef</code> 找出tail这个程序的进程信息</li><li>列出的信息太多，无法准确找到怎么办？</li></ol><p><strong>解决方案：使用管道符配合grep进行过滤</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 过滤出包含tail关键字的进程</span></span><br><span class="line">ps -ef | grep <span class="built_in">tail</span></span><br></pre></td></tr></table></figure><p><img src="/images/linux/img_62.png" alt="grep过滤进程"></p><p><strong>其他过滤示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过进程号过滤</span></span><br><span class="line">ps -ef | grep 30001</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过用户名过滤</span></span><br><span class="line">ps -ef | grep root</span><br><span class="line"></span><br><span class="line"><span class="comment"># 过滤多个关键字</span></span><br><span class="line">ps -ef | grep <span class="built_in">tail</span> | grep root</span><br></pre></td></tr></table></figure><blockquote><p>💡 <strong>提示</strong>：过滤不仅仅可以过滤名称，进程号、用户ID等等，都可以被grep过滤</p></blockquote><h4 id="kill命令-关闭进程"><a href="#kill命令-关闭进程" class="headerlink" title="kill命令 - 关闭进程"></a>kill命令 - 关闭进程</h4><p>在Windows系统中，可以通过任务管理器选择进程后，点击结束进程从而关闭它。</p><p>同样，在Linux中，可以通过 <code>kill</code> 命令关闭进程。</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> [-9] [进程号]</span><br></pre></td></tr></table></figure><p><strong>选项说明：</strong></p><ul><li><code>-9</code>：表示强制关闭进程。不使用此选项会向进程发送信号要求其关闭，但是否关闭看进程自身的处理机制</li></ul><p><strong>使用示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先查找进程</span></span><br><span class="line">ps -ef | grep <span class="built_in">tail</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 假设找到进程号为12345</span></span><br><span class="line"><span class="comment"># 温和关闭进程</span></span><br><span class="line"><span class="built_in">kill</span> 12345</span><br><span class="line"></span><br><span class="line"><span class="comment"># 强制关闭进程</span></span><br><span class="line"><span class="built_in">kill</span> -9 12345</span><br></pre></td></tr></table></figure><blockquote><p>⚠️ <strong>注意</strong>：</p><ul><li>普通用户只能关闭自己的进程</li><li>root用户可以关闭任何进程</li><li><code>-9</code> 选项会强制结束进程，可能导致数据丢失，谨慎使用</li></ul></blockquote><h3 id="13-10-主机状态监控-📊"><a href="#13-10-主机状态监控-📊" class="headerlink" title="13.10 主机状态监控 📊"></a>13.10 主机状态监控 📊</h3><h4 id="top命令-查看系统状态"><a href="#top命令-查看系统状态" class="headerlink" title="top命令 - 查看系统状态"></a>top命令 - 查看系统状态</h4><p>可以通过 <code>top</code> 命令查看CPU、内存使用情况，类似Windows的任务管理器</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top</span><br></pre></td></tr></table></figure><p><strong>使用说明：</strong></p><ul><li>默认每5秒刷新一次</li><li>按 <code>q</code> 或 <code>Ctrl + C</code> 退出</li></ul><p><img src="/images/linux/img_63.png" alt="top命令界面"></p><h4 id="top命令头部信息详解"><a href="#top命令头部信息详解" class="headerlink" title="top命令头部信息详解"></a>top命令头部信息详解</h4><p><strong>第一行：</strong></p><ul><li><code>top</code>：命令名称</li><li><code>14:39:58</code>：当前系统时间</li><li><code>up 6 min</code>：系统运行时间</li><li><code>2 users</code>：2个用户登录</li><li><code>load average</code>：1、5、15分钟平均负载</li></ul><p><strong>第二行（Tasks）：</strong></p><ul><li><code>175 total</code>：175个进程</li><li><code>1 running</code>：1个进程正在运行</li><li><code>174 sleeping</code>：174个进程睡眠</li><li><code>0 stopped</code>：0个停止进程</li><li><code>0 zombie</code>：0个僵尸进程</li></ul><p><strong>第三行（CPU使用率）：</strong></p><table><thead><tr><th>指标</th><th>说明</th></tr></thead><tbody><tr><td><code>us</code></td><td>用户空间CPU使用率</td></tr><tr><td><code>sy</code></td><td>系统（内核）CPU使用率</td></tr><tr><td><code>ni</code></td><td>高优先级进程占用CPU时间百分比</td></tr><tr><td><code>id</code></td><td>空闲CPU率</td></tr><tr><td><code>wa</code></td><td>IO等待CPU占用率</td></tr><tr><td><code>hi</code></td><td>CPU硬件中断率</td></tr><tr><td><code>si</code></td><td>CPU软件中断率</td></tr><tr><td><code>st</code></td><td>虚拟化环境中强制等待占用CPU率</td></tr></tbody></table><p><strong>第四、五行（内存信息）：</strong></p><ul><li><strong>Kib Mem（物理内存）</strong>：total（总量）、free（空闲）、used（使用）、buff&#x2F;cache（缓冲&#x2F;缓存占用）</li><li><strong>KibSwap（虚拟内存&#x2F;交换空间）</strong>：total（总量）、free（空闲）、used（使用）、avail Mem（可用内存）</li></ul><h4 id="top命令进程列表详解"><a href="#top命令进程列表详解" class="headerlink" title="top命令进程列表详解"></a>top命令进程列表详解</h4><table><thead><tr><th>字段</th><th>说明</th></tr></thead><tbody><tr><td>PID</td><td>进程ID</td></tr><tr><td>USER</td><td>进程所属用户</td></tr><tr><td>PR</td><td>进程优先级，越小越高</td></tr><tr><td>NI</td><td>nice值，负值表示高优先级，正值表示低优先级</td></tr><tr><td>VIRT</td><td>进程使用虚拟内存，单位KB</td></tr><tr><td>RES</td><td>进程使用物理内存，单位KB</td></tr><tr><td>SHR</td><td>进程使用共享内存，单位KB</td></tr><tr><td>S</td><td>进程状态（S休眠，R运行，Z僵死，N负优先级，I空闲）</td></tr><tr><td>%CPU</td><td>进程占用CPU率</td></tr><tr><td>%MEM</td><td>进程占用内存率</td></tr><tr><td>TIME+</td><td>进程使用CPU时间总计，单位10毫秒</td></tr><tr><td>COMMAND</td><td>进程的命令或名称或程序文件路径</td></tr></tbody></table><h4 id="top命令选项"><a href="#top命令选项" class="headerlink" title="top命令选项"></a>top命令选项</h4><p><img src="/images/linux/img_64.png" alt="top命令选项"></p><p><strong>常用选项：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置刷新间隔为2秒</span></span><br><span class="line">top -d 2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定刷新次数</span></span><br><span class="line">top -n 3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 批处理模式（适合脚本）</span></span><br><span class="line">top -b</span><br><span class="line"></span><br><span class="line"><span class="comment"># 监控指定进程</span></span><br><span class="line">top -p 进程号</span><br></pre></td></tr></table></figure><h4 id="top交互式命令"><a href="#top交互式命令" class="headerlink" title="top交互式命令"></a>top交互式命令</h4><p>当top以交互式运行时，可以使用以下命令进行控制：</p><p><img src="/images/linux/img_65.png" alt="top交互式命令"></p><table><thead><tr><th>按键</th><th>功能</th></tr></thead><tbody><tr><td><code>h</code></td><td>显示帮助</td></tr><tr><td><code>P</code></td><td>按CPU使用率排序</td></tr><tr><td><code>M</code></td><td>按内存使用率排序</td></tr><tr><td><code>N</code></td><td>按PID排序</td></tr><tr><td><code>T</code></td><td>按运行时间排序</td></tr><tr><td><code>k</code></td><td>终止进程（需输入PID）</td></tr><tr><td><code>q</code></td><td>退出top</td></tr></tbody></table><h4 id="df命令-磁盘使用情况"><a href="#df命令-磁盘使用情况" class="headerlink" title="df命令 - 磁盘使用情况"></a>df命令 - 磁盘使用情况</h4><p>使用 <code>df</code> 命令，可以查看硬盘的使用情况</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">df</span> [-h]</span><br></pre></td></tr></table></figure><p><strong>选项说明：</strong></p><ul><li><code>-h</code>：以更加人性化的单位显示（K、M、G）</li></ul><p><img src="/images/linux/img_66.png" alt="df命令输出"></p><p><strong>输出信息说明：</strong></p><ul><li><code>Filesystem</code>：文件系统</li><li><code>Size</code>：总大小</li><li><code>Used</code>：已使用</li><li><code>Avail</code>：可用空间</li><li><code>Use%</code>：使用百分比</li><li><code>Mounted on</code>：挂载点</li></ul><h4 id="iostat命令-磁盘IO统计"><a href="#iostat命令-磁盘IO统计" class="headerlink" title="iostat命令 - 磁盘IO统计"></a>iostat命令 - 磁盘IO统计</h4><p>可以使用 <code>iostat</code> 查看CPU、磁盘的相关信息</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat [-x] [刷新间隔] [刷新次数]</span><br></pre></td></tr></table></figure><p><strong>选项说明：</strong></p><ul><li><code>-x</code>：显示更多详细信息</li></ul><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看一次</span></span><br><span class="line">iostat</span><br><span class="line"></span><br><span class="line"><span class="comment"># 每2秒刷新一次，共3次</span></span><br><span class="line">iostat 2 3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示详细信息</span></span><br><span class="line">iostat -x</span><br></pre></td></tr></table></figure><p><img src="/images/linux/img_67.png" alt="iostat命令输出"></p><p><strong>主要指标说明：</strong></p><ul><li><code>tps</code>：该设备每秒的传输次数（I&#x2F;O请求次数）</li><li><code>kB_read/s</code>：每秒从设备读取的数据量</li><li><code>kB_wrtn/s</code>：每秒向设备写入的数据量</li></ul><p><strong>iostat -x 详细指标：</strong></p><table><thead><tr><th>指标</th><th>说明</th></tr></thead><tbody><tr><td><code>rrqm/s</code></td><td>每秒合并的读请求数</td></tr><tr><td><code>wrqm/s</code></td><td>每秒合并的写请求数</td></tr><tr><td><code>r/s</code></td><td>每秒读请求数</td></tr><tr><td><code>w/s</code></td><td>每秒写请求数</td></tr><tr><td><code>rkB/s</code></td><td>每秒读取的KB数</td></tr><tr><td><code>wkB/s</code></td><td>每秒写入的KB数</td></tr><tr><td><code>avgrq-sz</code></td><td>平均请求扇区大小</td></tr><tr><td><code>avgqu-sz</code></td><td>平均请求队列长度</td></tr><tr><td><code>await</code></td><td>平均每次IO请求的处理时间（毫秒）</td></tr><tr><td><code>svctm</code></td><td>平均每次设备I&#x2F;O操作的服务时间（毫秒）</td></tr><tr><td><code>%util</code></td><td>磁盘利用率</td></tr></tbody></table><h4 id="sar命令-网络状态监控"><a href="#sar命令-网络状态监控" class="headerlink" title="sar命令 - 网络状态监控"></a>sar命令 - 网络状态监控</h4><p>可以使用 <code>sar</code> 命令查看网络的相关统计</p><blockquote><p>💡 <strong>提示</strong>：sar命令非常复杂，这里仅简单用于统计网络</p></blockquote><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sar -n DEV [刷新间隔] [查看次数]</span><br></pre></td></tr></table></figure><p><strong>选项说明：</strong></p><ul><li><code>-n</code>：查看网络</li><li><code>DEV</code>：表示查看网络接口</li><li>刷新间隔：不填就查看一次结束</li><li>查看次数：不填则无限次数</li></ul><p><img src="/images/linux/img_68.png" alt="sar命令输出"></p><p><strong>信息字段说明：</strong></p><table><thead><tr><th>字段</th><th>说明</th></tr></thead><tbody><tr><td><code>IFACE</code></td><td>本地网卡接口的名称</td></tr><tr><td><code>rxpck/s</code></td><td>每秒钟接收的数据包</td></tr><tr><td><code>txpck/s</code></td><td>每秒钟发送的数据包</td></tr><tr><td><code>rxkB/s</code></td><td>每秒钟接收的数据包大小，单位KB</td></tr><tr><td><code>txkB/s</code></td><td>每秒钟发送的数据包大小，单位KB</td></tr><tr><td><code>rxcmp/s</code></td><td>每秒钟接收的压缩数据包</td></tr><tr><td><code>txcmp/s</code></td><td>每秒钟发送的压缩包</td></tr><tr><td><code>rxmcst/s</code></td><td>每秒钟接收的多播数据包</td></tr></tbody></table><p><strong>使用示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看2次，每次间隔3秒</span></span><br><span class="line">sar -n DEV 3 2</span><br></pre></td></tr></table></figure><p>最终会汇总显示平均记录</p><h3 id="13-11-环境变量-🔧"><a href="#13-11-环境变量-🔧" class="headerlink" title="13.11 环境变量 🔧"></a>13.11 环境变量 🔧</h3><h4 id="环境变量概念"><a href="#环境变量概念" class="headerlink" title="环境变量概念"></a>环境变量概念</h4><p>在讲解 <code>which</code> 命令的时候，我们知道使用的一系列命令其实本质上就是一个个的可执行程序。</p><p>比如，<code>cd</code> 命令的本体就是：<code>/usr/bin/cd</code> 这个程序文件。</p><p><strong>问题：</strong> 为何无论当前工作目录在哪里，都能执行 <code>/usr/bin/cd</code> 这个程序呢？</p><p><strong>答案：</strong> 这就是环境变量的作用！</p><p><strong>环境变量定义：</strong> 环境变量是操作系统（Windows、Linux、Mac）在运行的时候，记录的一些关键性信息，用以辅助系统运行。</p><h4 id="查看环境变量"><a href="#查看环境变量" class="headerlink" title="查看环境变量"></a>查看环境变量</h4><p>在Linux系统中执行 <code>env</code> 命令即可查看当前系统中记录的环境变量</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">env</span></span><br></pre></td></tr></table></figure><p>环境变量是一种 <strong>KeyValue型结构</strong>，即名称和值</p><p><img src="/images/linux/img_69.png" alt="环境变量列表"></p><p><strong>常见环境变量：</strong></p><ul><li><code>HOME</code>：用户的HOME路径</li><li><code>USER</code>：当前的操作用户</li><li><code>PWD</code>：当前工作路径</li><li><code>PATH</code>：命令搜索路径</li><li><code>SHELL</code>：当前使用的Shell</li></ul><h4 id="PATH环境变量"><a href="#PATH环境变量" class="headerlink" title="PATH环境变量"></a>PATH环境变量</h4><p>在前面提出的问题中，我们说无论当前工作目录是什么，都能执行 <code>/usr/bin/cd</code> 这个程序，这个就是借助环境变量中 <strong>PATH</strong> 这个项目的值来做到的。</p><p><strong>PATH的作用：</strong> 记录了系统执行任何命令的搜索路径</p><p><strong>PATH的值示例</strong>（路径之间以 <code>:</code> 隔开）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/bin</span><br><span class="line">/usr/bin</span><br><span class="line">/usr/local/sbin</span><br><span class="line">/usr/sbin</span><br><span class="line">/home/chad/.local/bin</span><br><span class="line">/home/chad/bin</span><br></pre></td></tr></table></figure><p><strong>工作原理：</strong></p><p>当执行任何命令，都会按照顺序，从上述路径中搜索要执行的程序的本体。</p><p>比如执行 <code>cd</code> 命令，就从第二个目录 <code>/usr/bin</code> 中搜索到了 <code>cd</code> 命令，并执行。</p><p><strong>查看PATH：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@chad suoliang]# <span class="built_in">env</span> | grep PATH</span><br><span class="line">PATH=/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/suoliang/.local/bin:/home/suoliang/bin</span><br></pre></td></tr></table></figure><h4 id="符号-取变量值"><a href="#符号-取变量值" class="headerlink" title="$符号 - 取变量值"></a>$符号 - 取变量值</h4><p>在Linux系统中，<code>$</code> 符号被用于取”变量”的值。</p><p>环境变量记录的信息，除了给操作系统自己使用外，如果我们想要取用，也可以使用。</p><p><strong>语法：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$环境变量名</span><br></pre></td></tr></table></figure><p><strong>示例1：基本用法</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输出PATH环境变量的值</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p><strong>示例2：混合使用</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当和其它内容混合在一起时，使用&#123;&#125;来标注取的变量是谁</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;PATH&#125;</span>ABC</span><br></pre></td></tr></table></figure><p><strong>实际输出：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@chad suoliang]# <span class="built_in">echo</span> <span class="variable">$PATH</span></span><br><span class="line">/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/suoliang/.local/bin:/home/suoliang/bin</span><br></pre></td></tr></table></figure><h4 id="设置环境变量"><a href="#设置环境变量" class="headerlink" title="设置环境变量"></a>设置环境变量</h4><p>Linux环境变量可以用户自行设置，分为：</p><p><strong>1. 临时设置</strong></p><p>只在当前终端会话有效，关闭终端后失效</p><p><strong>语法：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> 变量名=变量值</span><br></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> MY_VAR=<span class="string">&quot;Hello World&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$MY_VAR</span></span><br></pre></td></tr></table></figure><p><strong>2. 永久生效</strong></p><p><strong>针对当前用户生效：</strong> 配置在 <code>~/.bashrc</code> 文件中</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑.bashrc文件</span></span><br><span class="line">vim ~/.bashrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加环境变量</span></span><br><span class="line"><span class="built_in">export</span> MY_VAR=<span class="string">&quot;Hello World&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使配置生效</span></span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure><p><strong>针对所有用户生效：</strong> 配置在 <code>/etc/profile</code> 文件中</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑profile文件（需要root权限）</span></span><br><span class="line"><span class="built_in">sudo</span> vim /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加环境变量</span></span><br><span class="line"><span class="built_in">export</span> MY_VAR=<span class="string">&quot;Hello World&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使配置生效</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><p><img src="/images/linux/img_70.png" alt="环境变量配置"></p><blockquote><p>💡 <strong>提示</strong>：使用 <code>source</code> 命令可以立刻生效，或重新登录FinalShell也会生效</p></blockquote><h4 id="自定义PATH环境变量"><a href="#自定义PATH环境变量" class="headerlink" title="自定义PATH环境变量"></a>自定义PATH环境变量</h4><p>环境变量PATH记录了系统执行命令的搜索路径。我们也可以自行添加路径到PATH中。</p><p><strong>实践场景：</strong></p><p>假设我们在当前HOME目录内创建了一个脚本，希望在任何目录下都能执行它。</p><p><strong>步骤1：创建测试脚本</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在HOME目录创建myenv文件夹</span></span><br><span class="line"><span class="built_in">mkdir</span> ~/myenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建脚本文件</span></span><br><span class="line">vim ~/myenv/mkhaha</span><br></pre></td></tr></table></figure><p><strong>步骤2：编写脚本内容</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;哈哈哈哈哈&quot;</span></span><br></pre></td></tr></table></figure><p><strong>步骤3：添加执行权限</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x ~/myenv/mkhaha</span><br></pre></td></tr></table></figure><p><strong>步骤4：测试（此时无法执行）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 随意切换工作目录</span></span><br><span class="line"><span class="built_in">cd</span> /tmp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 尝试执行（会失败）</span></span><br><span class="line">mkhaha</span><br><span class="line"><span class="comment"># 提示：command not found</span></span><br></pre></td></tr></table></figure><p><strong>步骤5：修改PATH</strong></p><p><strong>临时修改PATH：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/home/chad/myenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 再次执行mkhaha，无论在哪里都能执行了</span></span><br><span class="line">mkhaha</span><br></pre></td></tr></table></figure><p><strong>永久修改PATH：</strong></p><p>将以下内容添加到 <code>~/.bashrc</code> 或 <code>/etc/profile</code> 文件中：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/home/chad/myenv</span><br></pre></td></tr></table></figure><p>然后执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure><blockquote><p>💡 <strong>提示</strong>：<code>$PATH</code> 表示保留原有的PATH值，<code>:</code> 用于分隔多个路径</p></blockquote><h3 id="13-12-文件压缩和解压-📦"><a href="#13-12-文件压缩和解压-📦" class="headerlink" title="13.12 文件压缩和解压 📦"></a>13.12 文件压缩和解压 📦</h3><h4 id="压缩格式介绍"><a href="#压缩格式介绍" class="headerlink" title="压缩格式介绍"></a>压缩格式介绍</h4><p>市面上有非常多的压缩格式：</p><table><thead><tr><th>格式</th><th>适用系统</th><th>说明</th></tr></thead><tbody><tr><td><strong>zip</strong></td><td>Linux、Windows、MacOS</td><td>跨平台通用，最常用</td></tr><tr><td><strong>7zip</strong></td><td>Windows</td><td>Windows系统专用</td></tr><tr><td><strong>rar</strong></td><td>Windows</td><td>Windows系统常用</td></tr><tr><td><strong>tar</strong></td><td>Linux、MacOS</td><td>Linux系统归档格式</td></tr><tr><td><strong>gzip</strong></td><td>Linux、MacOS</td><td>Linux系统压缩格式</td></tr></tbody></table><p>在Windows系统中常用的软件如：WinRAR、Bandizip等软件，都支持各类常见的压缩格式。</p><p>本节重点学习在Linux系统中操作 <strong>tar、gzip、zip</strong> 这三种压缩格式。</p><h4 id="tar命令-压缩和解压"><a href="#tar命令-压缩和解压" class="headerlink" title="tar命令 - 压缩和解压"></a>tar命令 - 压缩和解压</h4><p>Linux和Mac系统常用有2种压缩格式：</p><table><thead><tr><th>格式</th><th>说明</th><th>特点</th></tr></thead><tbody><tr><td><code>.tar</code></td><td>tarball归档文件</td><td>简单的将文件组装到一个.tar文件内，没有压缩，仅仅是封装</td></tr><tr><td><code>.tar.gz</code> 或 <code>.tgz</code></td><td>gzip格式压缩文件</td><td>使用gzip压缩算法，可以极大减少文件体积</td></tr></tbody></table><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar [选项] 目标文件 源文件...</span><br></pre></td></tr></table></figure><p><strong>常用选项：</strong></p><table><thead><tr><th>选项</th><th>说明</th></tr></thead><tbody><tr><td><code>-c</code></td><td>创建压缩文件（Create）</td></tr><tr><td><code>-x</code></td><td>解压文件（eXtract）</td></tr><tr><td><code>-v</code></td><td>显示压缩&#x2F;解压过程（Verbose）</td></tr><tr><td><code>-f</code></td><td>指定文件名（File），必须在选项最后</td></tr><tr><td><code>-z</code></td><td>使用gzip压缩&#x2F;解压</td></tr><tr><td><code>-C</code></td><td>指定解压目录</td></tr></tbody></table><h4 id="tar压缩示例"><a href="#tar压缩示例" class="headerlink" title="tar压缩示例"></a>tar压缩示例</h4><p><strong>压缩为.tar文件：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将1.txt、2.txt、3.txt压缩到test.tar文件内</span></span><br><span class="line">tar -cvf test.tar 1.txt 2.txt 3.txt</span><br></pre></td></tr></table></figure><p><strong>压缩为.tar.gz文件：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用gzip模式压缩</span></span><br><span class="line">tar -zcvf test.tar.gz 1.txt 2.txt 3.txt</span><br></pre></td></tr></table></figure><blockquote><p>⚠️ <strong>注意</strong>：</p><ul><li><code>-z</code> 选项如果使用，一般处于选项位第一个</li><li><code>-f</code> 选项必须在选项位最后一个</li></ul></blockquote><h4 id="tar解压示例"><a href="#tar解压示例" class="headerlink" title="tar解压示例"></a>tar解压示例</h4><p><strong>解压.tar文件到当前目录：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf test.tar</span><br></pre></td></tr></table></figure><p><strong>解压到指定目录：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解压到/home/itheima目录</span></span><br><span class="line">tar -xvf test.tar -C /home/itheima</span><br></pre></td></tr></table></figure><p><strong>解压.tar.gz文件：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以gzip模式解压到指定目录</span></span><br><span class="line">tar -zxvf test.tar.gz -C /home/itheima</span><br></pre></td></tr></table></figure><blockquote><p>⚠️ <strong>注意</strong>：</p><ul><li><code>-f</code> 选项必须在选项组合体的最后一位</li><li><code>-z</code> 选项建议在开头位置</li><li><code>-C</code> 选项单独使用，和解压所需的其它参数分开</li></ul></blockquote><h4 id="tar命令常用组合"><a href="#tar命令常用组合" class="headerlink" title="tar命令常用组合"></a>tar命令常用组合</h4><table><thead><tr><th>命令</th><th>功能</th></tr></thead><tbody><tr><td><code>tar -cvf file.tar files</code></td><td>创建tar归档</td></tr><tr><td><code>tar -zcvf file.tar.gz files</code></td><td>创建gzip压缩包</td></tr><tr><td><code>tar -xvf file.tar</code></td><td>解压tar归档</td></tr><tr><td><code>tar -zxvf file.tar.gz</code></td><td>解压gzip压缩包</td></tr><tr><td><code>tar -zxvf file.tar.gz -C /path</code></td><td>解压到指定目录</td></tr></tbody></table><h4 id="zip命令-压缩文件"><a href="#zip命令-压缩文件" class="headerlink" title="zip命令 - 压缩文件"></a>zip命令 - 压缩文件</h4><p><code>zip</code> 命令可以压缩文件为zip格式，跨平台通用</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zip [-r] 压缩包名称 被压缩文件...</span><br></pre></td></tr></table></figure><p><strong>选项说明：</strong></p><ul><li><code>-r</code>：递归压缩文件夹，和rm、cp等命令的-r效果一致</li></ul><p><strong>压缩文件示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 压缩多个文件</span></span><br><span class="line">zip test.zip a.txt b.txt c.txt</span><br></pre></td></tr></table></figure><p><strong>压缩文件夹示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 压缩文件夹和文件（需要使用-r选项）</span></span><br><span class="line">zip -r test.zip <span class="built_in">test</span> itheima a.txt</span><br></pre></td></tr></table></figure><blockquote><p>💡 <strong>提示</strong>：压缩文件夹时，必须使用 <code>-r</code> 选项</p></blockquote><h4 id="unzip命令-解压文件"><a href="#unzip命令-解压文件" class="headerlink" title="unzip命令 - 解压文件"></a>unzip命令 - 解压文件</h4><p>使用 <code>unzip</code> 命令，可以方便的解压zip压缩包</p><p><strong>命令格式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip [-d 目标目录] 压缩包文件</span><br></pre></td></tr></table></figure><p><strong>选项说明：</strong></p><ul><li><code>-d</code>：指定要解压的目标目录，类似tar的-C选项</li></ul><p><strong>解压到当前目录：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip test.zip</span><br></pre></td></tr></table></figure><p><strong>解压到指定目录：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip test.zip -d /home/itheima</span><br></pre></td></tr></table></figure><p><strong>其他常用选项：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看压缩包内容（不解压）</span></span><br><span class="line">unzip -l test.zip</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压时覆盖已存在的文件（不提示）</span></span><br><span class="line">unzip -o test.zip</span><br></pre></td></tr></table></figure><h4 id="压缩解压命令对比"><a href="#压缩解压命令对比" class="headerlink" title="压缩解压命令对比"></a>压缩解压命令对比</h4><table><thead><tr><th>格式</th><th>压缩命令</th><th>解压命令</th></tr></thead><tbody><tr><td><code>.tar</code></td><td><code>tar -cvf file.tar files</code></td><td><code>tar -xvf file.tar</code></td></tr><tr><td><code>.tar.gz</code></td><td><code>tar -zcvf file.tar.gz files</code></td><td><code>tar -zxvf file.tar.gz</code></td></tr><tr><td><code>.zip</code></td><td><code>zip file.zip files</code></td><td><code>unzip file.zip</code></td></tr></tbody></table><blockquote><p>💡 <strong>建议</strong>：</p><ul><li>在Linux系统间传输，推荐使用 <code>.tar.gz</code> 格式（压缩率高）</li><li>跨平台传输（Linux&#x2F;Windows&#x2F;Mac），推荐使用 <code>.zip</code> 格式（兼容性好）</li></ul></blockquote><hr><p><strong>最后更新</strong>: 2025-11-09<br><strong>作者</strong>: Suo<br><strong>标签</strong>: Linux, 命令行, Shell, vi编辑器, 用户管理, 权限控制, 系统监控, 压缩解压, 开发工具</p>]]></content>
      
      
      <categories>
          
          <category> 开发工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
            <tag> Linux </tag>
            
            <tag> 命令行 </tag>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MCP使用教程 - 模型上下文协议从入门到精通</title>
      <link href="//mcp-tutorial/"/>
      <url>//mcp-tutorial/</url>
      
        <content type="html"><![CDATA[<h1 id="MCP使用教程-模型上下文协议从入门到精通-🚀"><a href="#MCP使用教程-模型上下文协议从入门到精通-🚀" class="headerlink" title="MCP使用教程 - 模型上下文协议从入门到精通 🚀"></a>MCP使用教程 - 模型上下文协议从入门到精通 🚀</h1><blockquote><p>2025年是智能体的元年，也注定是智能体集中爆发的一年！MCP（Model Context Protocol）作为连接AI与外部世界的桥梁，正在革命性地改变我们与AI交互的方式。本教程将带您深入了解MCP的核心概念、应用场景和实战技巧。🤖</p></blockquote><p><img src="/images/mcp/LLM%E4%B8%8EMCP.png" alt="MCP概览"></p><h2 id="📋-目录"><a href="#📋-目录" class="headerlink" title="📋 目录"></a>📋 目录</h2><ul><li><p><a href="#1-mcp%E7%AE%80%E4%BB%8B%E4%B8%8E%E6%A6%82%E8%BF%B0">1. MCP简介与概述</a></p><ul><li><a href="#11-%E4%BB%80%E4%B9%88%E6%98%AFmcp">1.1 什么是MCP</a></li><li><a href="#12-%E6%A0%B8%E5%BF%83%E4%BB%B7%E5%80%BC">1.2 核心价值</a></li><li><a href="#13-%E5%8F%91%E5%B1%95%E5%8E%86%E7%A8%8B">1.3 发展历程</a></li></ul></li><li><p><a href="#2-mcp%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">2. MCP应用场景</a></p><ul><li><a href="#21-%E7%A8%8B%E5%BA%8F%E5%91%98%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">2.1 程序员应用场景</a></li><li><a href="#22-%E5%A4%A7%E4%BC%97%E7%94%A8%E6%88%B7%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">2.2 大众用户应用场景</a></li><li><a href="#23-%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B%E5%B1%95%E7%A4%BA">2.3 实际案例展示</a></li></ul></li><li><p><a href="#3-mcp%E6%8A%80%E6%9C%AF%E5%8E%9F%E7%90%86">3. MCP技术原理</a></p><ul><li><a href="#31-%E9%80%9A%E4%BF%A1%E6%9C%BA%E5%88%B6">3.1 通信机制</a></li><li><a href="#32-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1">3.2 架构设计</a></li><li><a href="#33-%E5%8D%8F%E8%AE%AE%E8%A7%84%E8%8C%83">3.3 协议规范</a></li></ul></li><li><p><a href="#4-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%AE%89%E8%A3%85">4. 环境配置与安装</a></p><ul><li><a href="#41-%E6%9C%AC%E5%9C%B0%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87">4.1 本地环境准备</a></li><li><a href="#42-%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F%E9%80%89%E6%8B%A9">4.2 通信方式选择</a></li><li><a href="#43-%E5%B9%B3%E5%8F%B0%E6%94%AF%E6%8C%81%E6%83%85%E5%86%B5">4.3 平台支持情况</a></li></ul></li><li><p><a href="#5-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C">5. 实战案例：数据库操作</a></p><ul><li><a href="#51-%E9%A1%B9%E7%9B%AE%E5%87%86%E5%A4%87">5.1 项目准备</a></li><li><a href="#52-%E9%85%8D%E7%BD%AEmcp%E6%9C%8D%E5%8A%A1">5.2 配置MCP服务</a></li><li><a href="#53-%E5%8A%9F%E8%83%BD%E9%AA%8C%E8%AF%81">5.3 功能验证</a></li></ul></li><li><p><a href="#6-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8Bexa-mcp-server">6. 实战案例：Exa MCP Server</a></p><ul><li><a href="#61-exa-mcp-server%E7%AE%80%E4%BB%8B">6.1 Exa MCP Server简介</a></li><li><a href="#62-cursor%E8%BF%9C%E7%A8%8B%E9%85%8D%E7%BD%AE">6.2 Cursor远程配置</a></li><li><a href="#63-%E5%8A%9F%E8%83%BD%E9%AA%8C%E8%AF%81">6.3 功能验证</a></li></ul></li><li><p><a href="#7-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8Bmcp%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E5%99%A8">7. 实战案例：MCP文件系统服务器</a></p><ul><li><a href="#71-mcp%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%80%E4%BB%8B">7.1 MCP文件系统服务器简介</a></li><li><a href="#72-cursor%E9%85%8D%E7%BD%AE">7.2 Cursor配置</a></li><li><a href="#73-%E5%8A%9F%E8%83%BD%E9%AA%8C%E8%AF%81">7.3 功能验证</a></li></ul></li><li><p><a href="#8-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8Bmcp-git%E6%9C%8D%E5%8A%A1%E5%99%A8">8. 实战案例：MCP Git服务器</a></p><ul><li><a href="#81-mcp-git%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%80%E4%BB%8B">8.1 MCP Git服务器简介</a></li><li><a href="#82-cursor%E9%85%8D%E7%BD%AE">8.2 Cursor配置</a></li><li><a href="#83-%E5%8A%9F%E8%83%BD%E9%AA%8C%E8%AF%81">8.3 功能验证</a></li></ul></li><li><p><a href="#9-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B8%8E%E8%BF%9B%E9%98%B6%E6%8A%80%E5%B7%A7">9. 最佳实践与进阶技巧</a></p><ul><li><a href="#91-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96">9.1 性能优化</a></li><li><a href="#92-%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91">9.2 安全考虑</a></li><li><a href="#93-%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4">9.3 故障排除</a></li></ul></li></ul><h2 id="1-MCP简介与概述-🎯"><a href="#1-MCP简介与概述-🎯" class="headerlink" title="1. MCP简介与概述 🎯"></a>1. MCP简介与概述 🎯</h2><h3 id="1-1-什么是MCP"><a href="#1-1-什么是MCP" class="headerlink" title="1.1 什么是MCP"></a>1.1 什么是MCP</h3><p>MCP（Model Context Protocol，模型上下文协议）是由Anthropic在2024年11月底推出的一种开放标准。它旨在为大语言模型（LLM）提供统一的、标准化方式与外部数据源和工具之间进行通信。</p><p><img src="/images/mcp/MCP%E7%90%86%E8%A7%A3.png" alt="MCP理解"></p><p><strong>核心特点：</strong></p><ul><li>🔗 <strong>统一接口</strong>：提供标准化的连接方式</li><li>🚀 <strong>简化集成</strong>：大幅降低AI应用开发复杂度</li><li>🌐 <strong>开放标准</strong>：支持多种平台和服务</li><li>⚡ <strong>高效通信</strong>：优化的数据传输机制</li></ul><h3 id="1-2-核心价值"><a href="#1-2-核心价值" class="headerlink" title="1.2 核心价值"></a>1.2 核心价值</h3><h4 id="1-2-1-解决传统AI集成问题"><a href="#1-2-1-解决传统AI集成问题" class="headerlink" title="1.2.1 解决传统AI集成问题"></a>1.2.1 解决传统AI集成问题</h4><p><img src="/images/mcp/%E6%9C%89%E6%97%A0MCP%E5%AF%B9%E6%AF%94.png" alt="有无MCP对比"></p><p><strong>传统方式的问题：</strong></p><ul><li>架构碎片化，难以扩展</li><li>每个数据源需要独立连接</li><li>限制了AI获取必要上下文信息的能力</li><li>开发成本高，维护困难</li></ul><p><strong>MCP解决方案：</strong></p><ul><li>提供统一且可靠的数据访问方式</li><li>克服了以往集成方法的局限性</li><li>大幅简化开发流程</li><li>提高系统可维护性</li></ul><h4 id="1-2-2-技术优势"><a href="#1-2-2-技术优势" class="headerlink" title="1.2.2 技术优势"></a>1.2.2 技术优势</h4><p><img src="/images/mcp/MCP%E5%AF%B9%E6%AF%94.png" alt="MCP对比"></p><table><thead><tr><th><strong>对比维度</strong></th><th><strong>传统方式</strong></th><th><strong>MCP方式</strong></th></tr></thead><tbody><tr><td><strong>集成复杂度</strong></td><td>高（M×N问题）</td><td>低（统一协议）</td></tr><tr><td><strong>开发效率</strong></td><td>慢</td><td>快</td></tr><tr><td><strong>维护成本</strong></td><td>高</td><td>低</td></tr><tr><td><strong>扩展性</strong></td><td>差</td><td>优秀</td></tr><tr><td><strong>标准化</strong></td><td>无</td><td>有</td></tr></tbody></table><h3 id="1-3-发展历程"><a href="#1-3-发展历程" class="headerlink" title="1.3 发展历程"></a>1.3 发展历程</h3><p><strong>重要时间节点：</strong></p><ul><li><strong>2024年11月底</strong>：Anthropic推出MCP标准</li><li><strong>2025年2月</strong>：Cursor正式宣布支持MCP功能</li><li><strong>2025年3月27日</strong>：OpenAI智能体支持MCP</li></ul><blockquote><p>💡 <strong>感慨一句</strong>：没想到千帆过境的大模型之争，竟然被一个MCP标准协议统一了。</p></blockquote><h2 id="2-MCP应用场景-🌟"><a href="#2-MCP应用场景-🌟" class="headerlink" title="2. MCP应用场景 🌟"></a>2. MCP应用场景 🌟</h2><h3 id="2-1-程序员应用场景"><a href="#2-1-程序员应用场景" class="headerlink" title="2.1 程序员应用场景"></a>2.1 程序员应用场景</h3><h4 id="2-1-1-开发部署场景"><a href="#2-1-1-开发部署场景" class="headerlink" title="2.1.1 开发部署场景"></a>2.1.1 开发部署场景</h4><p><strong>智能CI&#x2F;CD流水线</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Java语言 + Spring AI / LangChain / LangChain4J + MCP ==&gt; AI智能落地项目</span><br></pre></td></tr></table></figure><p><strong>实际案例：</strong><br>开发者通过自然语言指令”部署新版本到测试环境”，触发MCP链式调用：</p><ul><li>GitLab API（代码合并）</li><li>Jenkins API（构建镜像）</li><li>Slack API（通知团队）</li></ul><h4 id="2-1-2-数据库操作场景"><a href="#2-1-2-数据库操作场景" class="headerlink" title="2.1.2 数据库操作场景"></a>2.1.2 数据库操作场景</h4><p><strong>智能SQL查询</strong></p><ul><li>开发者通过自然语言输入：”查询某集团部门上个季度销售额”</li><li>MCP自动转换为精准SQL语句并执行</li><li>结合大模型进行智能分析和回答</li></ul><h4 id="2-1-3-智能体开发场景"><a href="#2-1-3-智能体开发场景" class="headerlink" title="2.1.3 智能体开发场景"></a>2.1.3 智能体开发场景</h4><p><strong>Manus智能体案例</strong><br>Manus的每一次任务处理都需要调用：</p><ul><li>网页搜索</li><li>网页访问</li><li>网页信息获取</li><li>本地文件创建</li><li>代码解释器</li><li>等几十个外部工具</li></ul><p><strong>暴露的问题：</strong></p><ol><li>可供大模型调用的工具不足</li><li>调用工作量很大</li></ol><p><strong>MCP解决方案：</strong><br>借助MCP，只要支持了该协议，就能轻松将各种数据源和工具连接到LLM。</p><h3 id="2-2-大众用户应用场景"><a href="#2-2-大众用户应用场景" class="headerlink" title="2.2 大众用户应用场景"></a>2.2 大众用户应用场景</h3><h4 id="2-2-1-旅游规划场景"><a href="#2-2-1-旅游规划场景" class="headerlink" title="2.2.1 旅游规划场景"></a>2.2.1 旅游规划场景</h4><p><strong>智能行程规划</strong><br>当用户要旅行时，旅行规划助手通过MCP同时调用：</p><ul><li>天气API（获取目的地气象）</li><li>交通API（查询航班动态）</li><li>地图API（规划路线）</li></ul><p>AI自动生成带实时数据的行程方案。</p><h4 id="2-2-2-联网搜索场景"><a href="#2-2-2-联网搜索场景" class="headerlink" title="2.2.2 联网搜索场景"></a>2.2.2 联网搜索场景</h4><p><strong>问题分析：</strong><br><img src="/images/mcp/%E6%97%A0MCP%E6%83%85%E5%86%B5.png" alt="无MCP情况"></p><p><strong>传统方式的问题：</strong></p><ol><li>并非所有聊天机器人都支持联网功能</li><li>即使支持联网，也可能不包含你习惯使用的搜索引擎</li><li>用户只能等待开发者添加特定搜索引擎的支持</li></ol><p><strong>MCP解决方案：</strong><br><img src="/images/mcp/%E6%9C%89MCP%E6%83%85%E5%86%B5.png" alt="有MCP情况"></p><p>有了MCP后，只需简单配置，就能将所需服务接入当前使用的聊天机器人。</p><h4 id="2-2-3-业务查询场景"><a href="#2-2-3-业务查询场景" class="headerlink" title="2.2.3 业务查询场景"></a>2.2.3 业务查询场景</h4><p><strong>业绩查询案例</strong><br>用户询问”查询上季度营业额”，MCP自动组合调用：</p><ul><li>CRM系统API（获取客户数据）</li><li>财务系统API（调取报表）</li><li>邮件API（发送总结报告）</li></ul><h3 id="2-3-实际案例展示"><a href="#2-3-实际案例展示" class="headerlink" title="2.3 实际案例展示"></a>2.3 实际案例展示</h3><p><img src="/images/mcp/%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF.png" alt="应用场景"></p><p><strong>各行业应用场景：</strong></p><p><strong>电商场景：</strong></p><ul><li>智能推荐系统：商品推荐、用户行为分析、个性化推送</li><li>智能客服与订单管理：自动问答、订单信息捕捉、需求分析</li><li>库存预测与动态定价：库存监控、需求预测、价格策略优化</li></ul><p><strong>社交场景：</strong></p><ul><li>内容审核与情感分析：敏感词过滤、图片&#x2F;视频违规检测、用户情绪识别</li><li>社交关系推荐：好友推荐、社群匹配、兴趣聚类</li><li>聊天机器人：自动回复、上下文理解、多轮对话</li></ul><p><strong>物流场景：</strong></p><ul><li>智能仓储管理：库存分拣、路径规划、异常检测</li><li>配送路线优化：实时路径计算、交通预测、成本控制</li><li>需求预测与资源调度：运力分配、仓库选址、峰值预测</li></ul><p><strong>金融场景：</strong></p><ul><li>风险评估与信贷审批：信用评分、反欺诈、贷款决策</li><li>智能投顾与财富管理：资产配置、市场预测、个性化理财建议</li><li>交易监控与反洗钱：异常交易检测、合规审查、模式识别</li></ul><h2 id="3-MCP技术原理-🔧"><a href="#3-MCP技术原理-🔧" class="headerlink" title="3. MCP技术原理 🔧"></a>3. MCP技术原理 🔧</h2><h3 id="3-1-通信机制"><a href="#3-1-通信机制" class="headerlink" title="3.1 通信机制"></a>3.1 通信机制</h3><p>根据MCP的规范，当前支持两种通信机制（传输方式）：</p><h4 id="3-1-1-stdio（标准输入输出）"><a href="#3-1-1-stdio（标准输入输出）" class="headerlink" title="3.1.1 stdio（标准输入输出）"></a>3.1.1 stdio（标准输入输出）</h4><p><strong>适用场景：</strong></p><ul><li>主要用在本地服务上</li><li>操作本地软件或本地文件</li><li>如Blender等本地应用</li><li>MCP默认通信方式</li></ul><p><strong>优点：</strong></p><ul><li>适用于客户端和服务器在同一台机器上运行的场景</li><li>无需外部网络依赖，通信速度快</li><li>可靠性高，且易于调试</li></ul><p><strong>缺点：</strong></p><ul><li>配置比较复杂，需要提前安装命令行工具</li><li>单进程通信，无法并行处理多个客户端请求</li><li>进程资源开销较大，不适合在本地运行大量服务</li></ul><h4 id="3-1-2-SSE（Server-Sent-Events）"><a href="#3-1-2-SSE（Server-Sent-Events）" class="headerlink" title="3.1.2 SSE（Server-Sent Events）"></a>3.1.2 SSE（Server-Sent Events）</h4><p><strong>适用场景：</strong></p><ul><li>主要用在远程通信服务上</li><li>服务本身有在线API</li><li>如访问谷歌邮件、天气情况等</li></ul><p><strong>优点：</strong></p><ul><li>配置方式非常简单，基本上就一个链接就行</li><li>适用于客户端和服务器位于不同物理位置的场景</li><li>适用于实时数据更新、消息推送、轻量级监控和实时日志流等场景</li></ul><h3 id="3-2-架构设计"><a href="#3-2-架构设计" class="headerlink" title="3.2 架构设计"></a>3.2 架构设计</h3><p><img src="/images/mcp/MCP%E4%BD%9C%E4%B8%BA%E5%80%9F%E5%8F%A3.png" alt="MCP作为接口"></p><p><strong>架构特点：</strong></p><ul><li>标准化协议层</li><li>统一的数据交换格式</li><li>可扩展的服务接口</li><li>安全的数据传输机制</li></ul><h3 id="3-3-协议规范"><a href="#3-3-协议规范" class="headerlink" title="3.3 协议规范"></a>3.3 协议规范</h3><p><strong>官方文档：</strong> <a href="https://modelcontextprotocol.io/introduction">https://modelcontextprotocol.io/introduction</a></p><p><strong>核心规范：</strong></p><ul><li>标准化的消息格式</li><li>统一的错误处理机制</li><li>可扩展的元数据支持</li><li>安全认证和授权机制</li></ul><h2 id="4-环境配置与安装-⚙️"><a href="#4-环境配置与安装-⚙️" class="headerlink" title="4. 环境配置与安装 ⚙️"></a>4. 环境配置与安装 ⚙️</h2><h3 id="4-1-本地环境准备"><a href="#4-1-本地环境准备" class="headerlink" title="4.1 本地环境准备"></a>4.1 本地环境准备</h3><h4 id="4-1-1-Python环境（uvx）"><a href="#4-1-1-Python环境（uvx）" class="headerlink" title="4.1.1 Python环境（uvx）"></a>4.1.1 Python环境（uvx）</h4><p><strong>安装方式1：</strong> 若已配置Python环境</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install uv</span><br></pre></td></tr></table></figure><p><strong>安装方式2：</strong> Windows PowerShell安装</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell <span class="literal">-ExecutionPolicy</span> ByPass <span class="literal">-c</span> <span class="string">&quot;irm https://astral.sh/uv/install.ps1 | iex&quot;</span></span><br></pre></td></tr></table></figure><h4 id="4-1-2-TypeScript环境（npx）"><a href="#4-1-2-TypeScript环境（npx）" class="headerlink" title="4.1.2 TypeScript环境（npx）"></a>4.1.2 TypeScript环境（npx）</h4><p><strong>前置条件：</strong></p><ul><li>安装Node.js环境</li><li>确保npm可用</li></ul><p><strong>使用方式：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx -y @package-name</span><br></pre></td></tr></table></figure><h3 id="4-2-通信方式选择"><a href="#4-2-通信方式选择" class="headerlink" title="4.2 通信方式选择"></a>4.2 通信方式选择</h3><p><strong>选择建议：</strong></p><table><thead><tr><th><strong>场景</strong></th><th><strong>推荐方式</strong></th><th><strong>原因</strong></th></tr></thead><tbody><tr><td><strong>本地开发</strong></td><td>stdio</td><td>速度快，调试方便</td></tr><tr><td><strong>远程服务</strong></td><td>SSE</td><td>配置简单，支持分布式</td></tr><tr><td><strong>混合环境</strong></td><td>根据具体需求选择</td><td>灵活配置</td></tr></tbody></table><h3 id="4-3-平台支持情况"><a href="#4-3-平台支持情况" class="headerlink" title="4.3 平台支持情况"></a>4.3 平台支持情况</h3><p><img src="/images/mcp/%E6%94%AF%E6%8C%81MCP.png" alt="支持MCP"></p><p><strong>主要平台支持：</strong></p><p><strong>官方资源：</strong></p><ul><li>MCP官方资源：<a href="https://github.com/modelcontextprotocol/servers">https://github.com/modelcontextprotocol/servers</a></li><li>MCP热门资源：<a href="https://github.com/punkpeye/awesome-mcp-servers">https://github.com/punkpeye/awesome-mcp-servers</a></li></ul><p><strong>其他平台：</strong></p><ul><li>Glama：<a href="https://glama.ai/mcp/servers">https://glama.ai/mcp/servers</a></li><li>Smithery：<a href="https://smithery.ai/">https://smithery.ai</a></li><li>Cursor：<a href="https://cursor.directory/">https://cursor.directory</a></li><li>MCP.so：<a href="https://mcp.so/zh">https://mcp.so/zh</a></li><li>阿里云百炼：<a href="https://bailian.console.aliyun.com/?tab=mcp#/mcp-market">https://bailian.console.aliyun.com/?tab=mcp#/mcp-market</a></li></ul><h2 id="5-实战案例：数据库操作-🗄️"><a href="#5-实战案例：数据库操作-🗄️" class="headerlink" title="5. 实战案例：数据库操作 🗄️"></a>5. 实战案例：数据库操作 🗄️</h2><h3 id="5-1-项目准备"><a href="#5-1-项目准备" class="headerlink" title="5.1 项目准备"></a>5.1 项目准备</h3><h4 id="5-1-1-查找MCP服务"><a href="#5-1-1-查找MCP服务" class="headerlink" title="5.1.1 查找MCP服务"></a>5.1.1 查找MCP服务</h4><p><strong>步骤1：</strong> 访问Smithery平台</p><ul><li>网址：<a href="https://smithery.ai/server/@f4ww4z/mcp-mysql-server">https://smithery.ai/server/@f4ww4z/mcp-mysql-server</a></li><li>查找MySQL相关的MCP服务</li></ul><p><img src="/images/mcp/mysql_server.png" alt="MySQL服务"></p><h4 id="5-1-2-查看官方文档"><a href="#5-1-2-查看官方文档" class="headerlink" title="5.1.2 查看官方文档"></a>5.1.2 查看官方文档</h4><p><strong>步骤2：</strong> 查询GitHub官方文档<br><strong>GitHub仓库：</strong> <a href="https://github.com/f4ww4z/mcp-mysql-server">exa-labs&#x2F;exa-mcp-server</a><br><img src="/images/mcp/%E6%9F%A5%E8%AF%A2%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3.png" alt="查询官方文档"></p><p>了解如何设置和配置MySQL MCP服务。</p><h3 id="5-2-配置MCP服务"><a href="#5-2-配置MCP服务" class="headerlink" title="5.2 配置MCP服务"></a>5.2 配置MCP服务</h3><h4 id="5-2-1-安装MCP服务"><a href="#5-2-1-安装MCP服务" class="headerlink" title="5.2.1 安装MCP服务"></a>5.2.1 安装MCP服务</h4><p><strong>执行安装命令：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx -y @smithery/cli install @f4ww4z/mcp-mysql-server --client claude</span><br></pre></td></tr></table></figure><h4 id="5-2-2-配置数据库连接"><a href="#5-2-2-配置数据库连接" class="headerlink" title="5.2.2 配置数据库连接"></a>5.2.2 配置数据库连接</h4><p><strong>配置Cursor的MCP：</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;mysql&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;-y&quot;</span><span class="punctuation">,</span> <span class="string">&quot;@f4ww4z/mcp-mysql-server&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;MYSQL_HOST&quot;</span><span class="punctuation">:</span> <span class="string">&quot;your_host&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;MYSQL_USER&quot;</span><span class="punctuation">:</span> <span class="string">&quot;your_username&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;MYSQL_PASSWORD&quot;</span><span class="punctuation">:</span> <span class="string">&quot;your_password&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;MYSQL_DATABASE&quot;</span><span class="punctuation">:</span> <span class="string">&quot;your_database&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="5-3-功能验证"><a href="#5-3-功能验证" class="headerlink" title="5.3 功能验证"></a>5.3 功能验证</h3><h4 id="5-3-1-查询数据库表"><a href="#5-3-1-查询数据库表" class="headerlink" title="5.3.1 查询数据库表"></a>5.3.1 查询数据库表</h4><p><strong>测试命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请帮我查下目前数据库中有多少张表</span><br></pre></td></tr></table></figure><p><img src="/images/mcp/%E6%9F%A5%E8%A1%A8%E4%BF%A1%E6%81%AF1png.png" alt="查表信息1"></p><h4 id="5-3-2-插入数据记录"><a href="#5-3-2-插入数据记录" class="headerlink" title="5.3.2 插入数据记录"></a>5.3.2 插入数据记录</h4><p><strong>测试命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">base_data_address 这个表插入一条记录</span><br></pre></td></tr></table></figure><p><img src="/images/mcp/%E6%9F%A5%E8%A1%A8%E4%BF%A1%E6%81%AF2.png" alt="查表信息2"></p><h2 id="6-实战案例：Exa-MCP-Server-🔍"><a href="#6-实战案例：Exa-MCP-Server-🔍" class="headerlink" title="6. 实战案例：Exa MCP Server 🔍"></a>6. 实战案例：Exa MCP Server 🔍</h2><h3 id="6-1-Exa-MCP-Server简介"><a href="#6-1-Exa-MCP-Server简介" class="headerlink" title="6.1 Exa MCP Server简介"></a>6.1 Exa MCP Server简介</h3><p>Exa MCP Server是一个强大的MCP服务器，专门为AI助手提供网络搜索和网页爬取功能。它基于Exa AI的搜索能力，为开发者提供了丰富的工具集。</p><p><img src="/images/mcp/exa-mcp-server.png" alt="Exa MCP Server"></p><p><strong>核心特性：</strong></p><ul><li>🔍 <strong>智能网络搜索</strong>：实时网络搜索，优化结果和内容提取</li><li>💻 <strong>代码搜索</strong>：搜索GitHub仓库、文档页面、Stack Overflow等代码资源</li><li>🏢 <strong>公司研究</strong>：全面的公司研究工具，爬取公司网站获取详细信息</li><li>🔗 <strong>LinkedIn搜索</strong>：使用Exa AI搜索LinkedIn上的公司和人员</li><li>🧠 <strong>深度研究</strong>：智能AI研究员，进行复杂问题的深度研究</li></ul><p><strong>GitHub仓库：</strong> <a href="https://github.com/exa-labs/exa-mcp-server">exa-labs&#x2F;exa-mcp-server</a></p><h3 id="6-2-Cursor远程配置"><a href="#6-2-Cursor远程配置" class="headerlink" title="6.2 Cursor远程配置"></a>6.2 Cursor远程配置</h3><h4 id="6-2-1-无需API密钥（推荐）"><a href="#6-2-1-无需API密钥（推荐）" class="headerlink" title="6.2.1 无需API密钥（推荐）"></a>6.2.1 无需API密钥（推荐）</h4><p><strong>最简单的方式：</strong> 直接使用远程MCP服务，无需注册或获取API密钥</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;exa&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mcp.exa.ai/mcp&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;headers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;Remove-Me&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Disable web_search_exa tool if you&#x27;re just coding. To 100% call exa-code, say &#x27;use exa-code&#x27;.&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>配置说明：</strong></p><ul><li><code>type: &quot;http&quot;</code>：使用HTTP通信方式</li><li><code>url</code>：远程MCP服务地址，无需API密钥</li><li><code>headers</code>：可选头部信息，用于禁用特定工具</li></ul><h4 id="6-2-2-使用API密钥（可选）"><a href="#6-2-2-使用API密钥（可选）" class="headerlink" title="6.2.2 使用API密钥（可选）"></a>6.2.2 使用API密钥（可选）</h4><p><strong>如果您需要更高的使用限制或更多功能，可以获取API密钥：</strong></p><p><strong>步骤1：</strong> 访问Exa AI控制台</p><ul><li>网址：<a href="https://dashboard.exa.ai/api-keys">https://dashboard.exa.ai/api-keys</a></li><li>注册账号并获取API密钥</li></ul><p><strong>步骤2：</strong> 在配置中添加API密钥</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;exa&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mcp.exa.ai/mcp?exaApiKey=YOUR_API_KEY&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;headers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;Remove-Me&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Disable web_search_exa tool if you&#x27;re just coding. To 100% call exa-code, say &#x27;use exa-code&#x27;.&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="6-2-3-指定工具配置"><a href="#6-2-3-指定工具配置" class="headerlink" title="6.2.3 指定工具配置"></a>6.2.3 指定工具配置</h4><p>如果您只想启用特定工具，可以在URL中添加<code>enabledTools</code>参数：</p><p><strong>无需API密钥：</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;exa&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mcp.exa.ai/mcp?enabledTools=%5B%22get_code_context_exa%22%2C%22web_search_exa%22%5D&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>使用API密钥：</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;exa&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mcp.exa.ai/mcp?exaApiKey=YOUR_API_KEY&amp;enabledTools=%5B%22get_code_context_exa%22%2C%22web_search_exa%22%5D&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>可用工具列表：</strong></p><ul><li><code>get_code_context_exa</code>：代码搜索</li><li><code>web_search_exa</code>：网络搜索</li><li><code>company_research</code>：公司研究</li><li><code>crawling</code>：网页爬取</li><li><code>linkedin_search</code>：LinkedIn搜索</li><li><code>deep_researcher_start</code>：深度研究开始</li><li><code>deep_researcher_check</code>：深度研究检查</li></ul><h4 id="6-2-4-使用区别说明"><a href="#6-2-4-使用区别说明" class="headerlink" title="6.2.4 使用区别说明"></a>6.2.4 使用区别说明</h4><blockquote><p>⚠️ <strong>重要说明</strong>：Exa官方文档中未明确说明使用API密钥和不使用API密钥的具体区别。以下信息基于官方提供的配置方式。</p></blockquote><p><strong>两种配置方式：</strong></p><p><strong>无需API密钥：</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;exa&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mcp.exa.ai/mcp&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>使用API密钥：</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;exa&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mcp.exa.ai/mcp?exaApiKey=YOUR_API_KEY&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>建议使用策略：</strong></p><ol><li><strong>先试用免费方式</strong>：直接使用 <code>https://mcp.exa.ai/mcp</code> 进行测试</li><li><strong>根据实际体验决定</strong>：如果使用过程中遇到限制或问题，再考虑获取API密钥</li><li><strong>获取API密钥</strong>：访问 <a href="https://dashboard.exa.ai/api-keys">https://dashboard.exa.ai/api-keys</a> 注册获取</li></ol><blockquote><p>💡 <strong>提示</strong>：由于官方文档未明确说明具体区别，建议用户先尝试无需API密钥的方式，根据实际使用体验来决定是否需要获取API密钥。</p></blockquote><h3 id="6-3-功能验证"><a href="#6-3-功能验证" class="headerlink" title="6.3 功能验证"></a>6.3 功能验证</h3><h4 id="6-3-1-网络搜索功能"><a href="#6-3-1-网络搜索功能" class="headerlink" title="6.3.1 网络搜索功能"></a>6.3.1 网络搜索功能</h4><p><strong>测试命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请帮我搜索最新的React 18新特性</span><br></pre></td></tr></table></figure><p><strong>预期结果：</strong></p><ul><li>获取最新的React 18相关信息</li><li>包含官方文档链接和社区讨论</li><li>提供详细的技术特性说明</li></ul><h4 id="6-3-2-代码搜索功能"><a href="#6-3-2-代码搜索功能" class="headerlink" title="6.3.2 代码搜索功能"></a>6.3.2 代码搜索功能</h4><p><strong>测试命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use exa-code 搜索如何在Python中使用Exa搜索API</span><br></pre></td></tr></table></figure><p><strong>预期结果：</strong></p><ul><li>找到相关的代码示例</li><li>提供完整的API使用教程</li><li>包含最佳实践和注意事项</li></ul><h4 id="6-3-3-公司研究功能"><a href="#6-3-3-公司研究功能" class="headerlink" title="6.3.3 公司研究功能"></a>6.3.3 公司研究功能</h4><p><strong>测试命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请研究一下OpenAI公司的基本信息</span><br></pre></td></tr></table></figure><p><strong>预期结果：</strong></p><ul><li>获取公司官网信息</li><li>包含公司简介、产品服务</li><li>提供联系方式和最新动态</li></ul><h4 id="6-3-4-深度研究功能"><a href="#6-3-4-深度研究功能" class="headerlink" title="6.3.4 深度研究功能"></a>6.3.4 深度研究功能</h4><p><strong>测试命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">开始深度研究：人工智能在医疗领域的应用现状和未来趋势</span><br></pre></td></tr></table></figure><p><strong>预期结果：</strong></p><ul><li>启动智能研究任务</li><li>自动搜索多个相关资源</li><li>生成综合研究报告</li></ul><p><strong>检查研究进度：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">检查深度研究任务的完成情况</span><br></pre></td></tr></table></figure><h2 id="7-实战案例：MCP文件系统服务器-📁"><a href="#7-实战案例：MCP文件系统服务器-📁" class="headerlink" title="7. 实战案例：MCP文件系统服务器 📁"></a>7. 实战案例：MCP文件系统服务器 📁</h2><h3 id="7-1-MCP文件系统服务器简介"><a href="#7-1-MCP文件系统服务器简介" class="headerlink" title="7.1 MCP文件系统服务器简介"></a>7.1 MCP文件系统服务器简介</h3><p>MCP文件系统服务器是一个强大的MCP服务器，专门为AI助手提供本地文件系统操作功能。它允许AI直接读写、管理本地文件和文件夹，极大提升了AI助手在文件管理方面的能力。</p><p><img src="/images/mcp/filesystem-server.png" alt="MCP文件系统服务器"></p><p><strong>核心特性：</strong></p><ul><li>📖 <strong>文件读取</strong>：读取任意文件的内容</li><li>✏️ <strong>文件写入</strong>：创建和编辑文件</li><li>📁 <strong>目录管理</strong>：列出、创建、管理目录</li><li>🔍 <strong>文件搜索</strong>：根据模式搜索文件</li><li>📊 <strong>文件信息</strong>：获取文件详细信息和统计</li><li>🖼️ <strong>图片处理</strong>：读取和处理图片文件</li><li>🔄 <strong>文件操作</strong>：移动、重命名、删除文件</li></ul><p><strong>GitHub仓库：</strong> <a href="https://github.com/modelcontextprotocol/servers/tree/main/src/filesystem">modelcontextprotocol&#x2F;servers&#x2F;filesystem</a></p><h3 id="7-2-Cursor配置"><a href="#7-2-Cursor配置" class="headerlink" title="7.2 Cursor配置"></a>7.2 Cursor配置</h3><h4 id="7-2-1-基础配置"><a href="#7-2-1-基础配置" class="headerlink" title="7.2.1 基础配置"></a>7.2.1 基础配置</h4><p>在Cursor的MCP配置中添加文件系统服务器：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;filesystem&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;-y&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;@modelcontextprotocol/server-filesystem&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;D:\\&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>配置说明：</strong></p><ul><li><code>command: &quot;npx&quot;</code>：使用npx运行MCP服务器</li><li><code>&quot;-y&quot;</code>：自动确认安装，无需手动确认</li><li><code>&quot;@modelcontextprotocol/server-filesystem&quot;</code>：MCP文件系统服务器包名</li><li><code>&quot;D:\\&quot;</code>：指定允许访问的目录路径</li></ul><h4 id="7-2-2-安全配置建议"><a href="#7-2-2-安全配置建议" class="headerlink" title="7.2.2 安全配置建议"></a>7.2.2 安全配置建议</h4><p><strong>访问整个D盘：</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;filesystem&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;-y&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;@modelcontextprotocol/server-filesystem&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;D:\\&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>限制访问特定目录：</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;filesystem&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;-y&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;@modelcontextprotocol/server-filesystem&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;D:\\Projects&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>多目录访问：</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;filesystem&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;-y&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;@modelcontextprotocol/server-filesystem&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;D:\\Projects&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;D:\\Documents&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;D:\\Downloads&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="7-3-功能验证"><a href="#7-3-功能验证" class="headerlink" title="7.3 功能验证"></a>7.3 功能验证</h3><h4 id="7-3-1-目录浏览功能"><a href="#7-3-1-目录浏览功能" class="headerlink" title="7.3.1 目录浏览功能"></a>7.3.1 目录浏览功能</h4><p><strong>测试命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请帮我列出D盘根目录的所有文件夹</span><br></pre></td></tr></table></figure><p><strong>预期结果：</strong></p><ul><li>显示D盘根目录下的所有文件夹</li><li>包含文件夹名称、大小、修改时间等信息</li><li>提供详细的目录结构</li></ul><h4 id="7-3-2-文件读取功能"><a href="#7-3-2-文件读取功能" class="headerlink" title="7.3.2 文件读取功能"></a>7.3.2 文件读取功能</h4><p><strong>测试命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请帮我读取D:\某个文件.txt的内容</span><br></pre></td></tr></table></figure><p><strong>预期结果：</strong></p><ul><li>成功读取指定文件的内容</li><li>显示文件的完整文本内容</li><li>提供文件的基本信息</li></ul><h4 id="7-3-3-文件搜索功能"><a href="#7-3-3-文件搜索功能" class="headerlink" title="7.3.3 文件搜索功能"></a>7.3.3 文件搜索功能</h4><p><strong>测试命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请帮我搜索D盘中所有包含&quot;config&quot;的文件</span><br></pre></td></tr></table></figure><p><strong>预期结果：</strong></p><ul><li>找到所有包含”config”关键词的文件</li><li>显示文件路径和匹配内容</li><li>提供搜索结果统计</li></ul><h4 id="7-3-4-文件创建功能"><a href="#7-3-4-文件创建功能" class="headerlink" title="7.3.4 文件创建功能"></a>7.3.4 文件创建功能</h4><p><strong>测试命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请帮我在D:\test目录下创建一个名为&quot;example.txt&quot;的文件，内容为&quot;Hello World&quot;</span><br></pre></td></tr></table></figure><p><strong>预期结果：</strong></p><ul><li>成功创建指定文件</li><li>文件内容正确写入</li><li>确认文件创建成功</li></ul><h4 id="7-3-5-目录管理功能"><a href="#7-3-5-目录管理功能" class="headerlink" title="7.3.5 目录管理功能"></a>7.3.5 目录管理功能</h4><p><strong>测试命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请帮我在D盘创建一个名为&quot;AI_Projects&quot;的新文件夹</span><br></pre></td></tr></table></figure><p><strong>预期结果：</strong></p><ul><li>成功创建新目录</li><li>确认目录创建成功</li><li>可以继续在该目录下操作</li></ul><h4 id="7-3-6-文件信息获取"><a href="#7-3-6-文件信息获取" class="headerlink" title="7.3.6 文件信息获取"></a>7.3.6 文件信息获取</h4><p><strong>测试命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请帮我获取D:\某个文件夹的大小和文件数量统计</span><br></pre></td></tr></table></figure><p><strong>预期结果：</strong></p><ul><li>显示文件夹的总大小</li><li>统计文件数量</li><li>提供详细的存储信息</li></ul><h3 id="7-4-实际应用场景"><a href="#7-4-实际应用场景" class="headerlink" title="7.4 实际应用场景"></a>7.4 实际应用场景</h3><h4 id="7-4-1-代码项目管理"><a href="#7-4-1-代码项目管理" class="headerlink" title="7.4.1 代码项目管理"></a>7.4.1 代码项目管理</h4><p><strong>项目文件整理：</strong></p><ul><li>自动整理项目文件结构</li><li>批量重命名文件</li><li>搜索和替换代码内容</li><li>生成项目文档</li></ul><p><strong>代码分析：</strong></p><ul><li>统计代码行数</li><li>分析文件依赖关系</li><li>查找重复代码</li><li>生成代码报告</li></ul><h4 id="7-4-2-文档管理"><a href="#7-4-2-文档管理" class="headerlink" title="7.4.2 文档管理"></a>7.4.2 文档管理</h4><p><strong>文档处理：</strong></p><ul><li>批量处理markdown文件</li><li>自动生成目录结构</li><li>文档格式转换</li><li>内容批量替换</li></ul><p><strong>文件组织：</strong></p><ul><li>按类型分类文件</li><li>创建标准目录结构</li><li>批量移动文件</li><li>清理重复文件</li></ul><h4 id="7-4-3-数据处理"><a href="#7-4-3-数据处理" class="headerlink" title="7.4.3 数据处理"></a>7.4.3 数据处理</h4><p><strong>数据文件操作：</strong></p><ul><li>读取CSV、JSON等数据文件</li><li>批量处理数据文件</li><li>数据格式转换</li><li>生成数据报告</li></ul><p><strong>文件备份：</strong></p><ul><li>自动备份重要文件</li><li>创建文件快照</li><li>同步文件到不同位置</li><li>清理临时文件</li></ul><h3 id="7-5-高级使用技巧"><a href="#7-5-高级使用技巧" class="headerlink" title="7.5 高级使用技巧"></a>7.5 高级使用技巧</h3><h4 id="7-5-1-批量操作"><a href="#7-5-1-批量操作" class="headerlink" title="7.5.1 批量操作"></a>7.5.1 批量操作</h4><p><strong>批量文件处理：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">请帮我批量重命名D:\photos目录下所有.jpg文件，添加&quot;2024_&quot;前缀</span><br><span class="line">请帮我统计D:\code目录下所有.py文件的总行数</span><br><span class="line">请帮我查找D:\documents目录下所有包含&quot;重要&quot;的文档</span><br></pre></td></tr></table></figure><h4 id="7-5-2-智能文件管理"><a href="#7-5-2-智能文件管理" class="headerlink" title="7.5.2 智能文件管理"></a>7.5.2 智能文件管理</h4><p><strong>自动分类：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">请帮我将D:\downloads目录下的文件按类型分类到不同文件夹</span><br><span class="line">请帮我清理D:\temp目录下超过30天的临时文件</span><br><span class="line">请帮我整理D:\photos目录下的照片，按日期创建子文件夹</span><br></pre></td></tr></table></figure><h4 id="7-5-3-项目自动化"><a href="#7-5-3-项目自动化" class="headerlink" title="7.5.3 项目自动化"></a>7.5.3 项目自动化</h4><p><strong>项目初始化：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">请帮我创建一个新的React项目目录结构</span><br><span class="line">请帮我生成项目的README.md文件</span><br><span class="line">请帮我设置项目的.gitignore文件</span><br></pre></td></tr></table></figure><h3 id="7-6-安全注意事项"><a href="#7-6-安全注意事项" class="headerlink" title="7.6 安全注意事项"></a>7.6 安全注意事项</h3><h4 id="7-6-1-权限管理"><a href="#7-6-1-权限管理" class="headerlink" title="7.6.1 权限管理"></a>7.6.1 权限管理</h4><p><strong>重要提醒：</strong></p><ul><li>确保Cursor有足够的文件系统权限</li><li>避免访问系统敏感目录</li><li>定期检查AI对文件的操作记录</li><li>重要文件操作前先备份</li></ul><h4 id="7-6-2-最佳实践"><a href="#7-6-2-最佳实践" class="headerlink" title="7.6.2 最佳实践"></a>7.6.2 最佳实践</h4><p><strong>安全建议：</strong></p><ul><li>从特定项目目录开始，逐步扩大访问范围</li><li>使用相对路径而非绝对路径</li><li>定期清理AI创建的文件</li><li>设置文件操作日志记录</li></ul><h2 id="8-实战案例：MCP-Git服务器-🌿"><a href="#8-实战案例：MCP-Git服务器-🌿" class="headerlink" title="8. 实战案例：MCP Git服务器 🌿"></a>8. 实战案例：MCP Git服务器 🌿</h2><h3 id="8-1-MCP-Git服务器简介"><a href="#8-1-MCP-Git服务器简介" class="headerlink" title="8.1 MCP Git服务器简介"></a>8.1 MCP Git服务器简介</h3><p>MCP Git服务器是一个强大的MCP服务器，专门为AI助手提供Git版本控制操作功能。它允许AI直接与Git仓库交互，执行各种版本控制操作，极大提升了开发者在Git管理方面的效率。</p><p><img src="/images/mcp/git-server.png" alt="MCP Git服务器"></p><p><strong>核心特性：</strong></p><ul><li>📝 <strong>提交管理</strong>：创建、查看、修改、撤销提交</li><li>🌿 <strong>分支管理</strong>：创建、切换、合并、删除分支</li><li>📊 <strong>状态查看</strong>：查看仓库状态、差异、历史记录</li><li>🔄 <strong>远程操作</strong>：推送、拉取、同步远程仓库</li><li>🏷️ <strong>标签管理</strong>：创建、删除、管理版本标签</li><li>📋 <strong>日志分析</strong>：查看提交历史、文件变更记录</li><li>🔍 <strong>差异对比</strong>：比较不同版本间的差异</li></ul><p><strong>GitHub仓库：</strong> <a href="https://github.com/modelcontextprotocol/servers/tree/main/src/git">modelcontextprotocol&#x2F;servers&#x2F;git</a></p><h3 id="8-2-Cursor配置"><a href="#8-2-Cursor配置" class="headerlink" title="8.2 Cursor配置"></a>8.2 Cursor配置</h3><h4 id="8-2-1-基础配置"><a href="#8-2-1-基础配置" class="headerlink" title="8.2.1 基础配置"></a>8.2.1 基础配置</h4><p>在Cursor的MCP配置中添加Git服务器：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;git&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uvx&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;mcp-server-git&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>配置说明：</strong></p><ul><li><code>command: &quot;uvx&quot;</code>：使用uvx运行MCP服务器（Python包运行工具）</li><li><code>args: [&quot;mcp-server-git&quot;]</code>：指定要运行的MCP Git服务器包</li></ul><h4 id="8-2-2-前置条件"><a href="#8-2-2-前置条件" class="headerlink" title="8.2.2 前置条件"></a>8.2.2 前置条件</h4><p><strong>安装uvx（如果系统没有）：</strong></p><p><strong>Windows PowerShell：</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell <span class="literal">-ExecutionPolicy</span> ByPass <span class="literal">-c</span> <span class="string">&quot;irm https://astral.sh/uv/install.ps1 | iex&quot;</span></span><br></pre></td></tr></table></figure><p><strong>或者使用pip安装：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install uv</span><br></pre></td></tr></table></figure><p><strong>验证安装：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uvx --version</span><br></pre></td></tr></table></figure><h4 id="8-2-3-备选配置方案"><a href="#8-2-3-备选配置方案" class="headerlink" title="8.2.3 备选配置方案"></a>8.2.3 备选配置方案</h4><p><strong>Docker安装方式：</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;git&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;docker&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;run&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;--rm&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;-i&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;--mount&quot;</span><span class="punctuation">,</span> <span class="string">&quot;type=bind,src=$&#123;workspaceFolder&#125;,dst=/workspace&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;mcp/git&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>如果uvx不可用，可以使用npx：</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;git&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;-y&quot;</span><span class="punctuation">,</span> <span class="string">&quot;@modelcontextprotocol/server-git&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="8-3-功能验证"><a href="#8-3-功能验证" class="headerlink" title="8.3 功能验证"></a>8.3 功能验证</h3><h4 id="8-3-1-仓库状态查看"><a href="#8-3-1-仓库状态查看" class="headerlink" title="8.3.1 仓库状态查看"></a>8.3.1 仓库状态查看</h4><p><strong>测试命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请帮我查看当前Git仓库的状态</span><br></pre></td></tr></table></figure><p><strong>预期结果：</strong></p><ul><li>显示当前分支信息</li><li>列出已修改、已暂存、未跟踪的文件</li><li>提供仓库状态概览</li></ul><h4 id="8-3-2-分支管理功能"><a href="#8-3-2-分支管理功能" class="headerlink" title="8.3.2 分支管理功能"></a>8.3.2 分支管理功能</h4><p><strong>测试命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请帮我列出所有分支</span><br></pre></td></tr></table></figure><p><strong>预期结果：</strong></p><ul><li>显示本地和远程分支列表</li><li>标识当前所在分支</li><li>提供分支详细信息</li></ul><h4 id="8-3-3-提交历史查看"><a href="#8-3-3-提交历史查看" class="headerlink" title="8.3.3 提交历史查看"></a>8.3.3 提交历史查看</h4><p><strong>测试命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请帮我查看最近的提交历史</span><br></pre></td></tr></table></figure><p><strong>预期结果：</strong></p><ul><li>显示最近的提交记录</li><li>包含提交哈希、作者、时间、提交信息</li><li>提供提交的详细变更信息</li></ul><h4 id="8-3-4-文件差异对比"><a href="#8-3-4-文件差异对比" class="headerlink" title="8.3.4 文件差异对比"></a>8.3.4 文件差异对比</h4><p><strong>测试命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请帮我查看当前工作区与上次提交的差异</span><br></pre></td></tr></table></figure><p><strong>预期结果：</strong></p><ul><li>显示文件的具体变更内容</li><li>标识新增、删除、修改的行</li><li>提供详细的差异对比</li></ul><h4 id="8-3-5-提交操作"><a href="#8-3-5-提交操作" class="headerlink" title="8.3.5 提交操作"></a>8.3.5 提交操作</h4><p><strong>测试命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请帮我提交所有更改，提交信息为&quot;添加新功能&quot;</span><br></pre></td></tr></table></figure><p><strong>预期结果：</strong></p><ul><li>成功暂存所有更改</li><li>创建新的提交记录</li><li>确认提交成功</li></ul><h4 id="8-3-6-分支创建和切换"><a href="#8-3-6-分支创建和切换" class="headerlink" title="8.3.6 分支创建和切换"></a>8.3.6 分支创建和切换</h4><p><strong>测试命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请帮我创建一个名为&quot;feature-new&quot;的新分支并切换到该分支</span><br></pre></td></tr></table></figure><p><strong>预期结果：</strong></p><ul><li>成功创建新分支</li><li>切换到新分支</li><li>确认分支操作成功</li></ul><h3 id="8-4-实际应用场景"><a href="#8-4-实际应用场景" class="headerlink" title="8.4 实际应用场景"></a>8.4 实际应用场景</h3><h4 id="8-4-1-代码开发流程"><a href="#8-4-1-代码开发流程" class="headerlink" title="8.4.1 代码开发流程"></a>8.4.1 代码开发流程</h4><p><strong>日常开发操作：</strong></p><ul><li>自动生成规范的提交信息</li><li>智能分支命名建议</li><li>代码变更影响分析</li><li>自动解决简单冲突</li></ul><p><strong>代码审查：</strong></p><ul><li>生成变更摘要报告</li><li>分析代码质量指标</li><li>检查代码规范合规性</li><li>提供改进建议</li></ul><h4 id="8-4-2-版本管理"><a href="#8-4-2-版本管理" class="headerlink" title="8.4.2 版本管理"></a>8.4.2 版本管理</h4><p><strong>发布管理：</strong></p><ul><li>自动创建版本标签</li><li>生成发布说明</li><li>管理发布分支</li><li>版本回滚操作</li></ul><p><strong>分支策略：</strong></p><ul><li>智能合并策略建议</li><li>分支保护规则设置</li><li>代码审查流程管理</li><li>发布流程自动化</li></ul><h4 id="8-4-3-团队协作"><a href="#8-4-3-团队协作" class="headerlink" title="8.4.3 团队协作"></a>8.4.3 团队协作</h4><p><strong>协作流程：</strong></p><ul><li>同步团队代码变更</li><li>管理Pull Request</li><li>代码审查流程优化</li><li>冲突解决建议</li></ul><p><strong>项目管理：</strong></p><ul><li>项目进度跟踪</li><li>代码贡献统计</li><li>团队协作分析</li><li>项目健康度监控</li></ul><h3 id="8-5-高级使用技巧"><a href="#8-5-高级使用技巧" class="headerlink" title="8.5 高级使用技巧"></a>8.5 高级使用技巧</h3><h4 id="8-5-1-智能提交"><a href="#8-5-1-智能提交" class="headerlink" title="8.5.1 智能提交"></a>8.5.1 智能提交</h4><p><strong>自动提交信息生成：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">请帮我分析代码变更并生成合适的提交信息</span><br><span class="line">请帮我将多个小提交合并为一个有意义的提交</span><br><span class="line">请帮我修改最后一次提交的信息</span><br></pre></td></tr></table></figure><h4 id="8-5-2-分支管理"><a href="#8-5-2-分支管理" class="headerlink" title="8.5.2 分支管理"></a>8.5.2 分支管理</h4><p><strong>智能分支操作：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">请帮我创建一个基于main分支的新功能分支</span><br><span class="line">请帮我将feature分支合并到main分支</span><br><span class="line">请帮我清理已合并的本地分支</span><br><span class="line">请帮我同步远程分支信息</span><br></pre></td></tr></table></figure><h4 id="8-5-3-历史分析"><a href="#8-5-3-历史分析" class="headerlink" title="8.5.3 历史分析"></a>8.5.3 历史分析</h4><p><strong>代码历史分析：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">请帮我分析某个文件的修改历史</span><br><span class="line">请帮我找出引入bug的提交</span><br><span class="line">请帮我统计代码贡献情况</span><br><span class="line">请帮我生成项目变更报告</span><br></pre></td></tr></table></figure><h3 id="8-6-安全注意事项"><a href="#8-6-安全注意事项" class="headerlink" title="8.6 安全注意事项"></a>8.6 安全注意事项</h3><h4 id="8-6-1-操作安全"><a href="#8-6-1-操作安全" class="headerlink" title="8.6.1 操作安全"></a>8.6.1 操作安全</h4><p><strong>重要提醒：</strong></p><ul><li>谨慎使用强制推送操作</li><li>重要操作前先备份仓库</li><li>避免在共享分支上直接操作</li><li>定期检查Git操作日志</li></ul><h4 id="8-6-2-最佳实践"><a href="#8-6-2-最佳实践" class="headerlink" title="8.6.2 最佳实践"></a>8.6.2 最佳实践</h4><p><strong>安全建议：</strong></p><ul><li>使用描述性的提交信息</li><li>保持分支命名规范</li><li>定期同步远程仓库</li><li>设置合适的Git钩子</li></ul><p><strong>权限管理：</strong></p><ul><li>确保有足够的仓库权限</li><li>避免在敏感仓库中使用</li><li>定期检查访问权限</li><li>使用SSH密钥认证</li></ul><h3 id="8-7-故障排除"><a href="#8-7-故障排除" class="headerlink" title="8.7 故障排除"></a>8.7 故障排除</h3><h4 id="8-7-1-常见问题"><a href="#8-7-1-常见问题" class="headerlink" title="8.7.1 常见问题"></a>8.7.1 常见问题</h4><p><strong>配置问题：</strong></p><ul><li>uvx命令不可用：安装uv或使用npx备选方案</li><li>权限不足：检查Git仓库访问权限</li><li>网络问题：确保可以访问包仓库</li><li>路径错误：验证Git仓库路径</li></ul><h4 id="8-7-2-调试技巧"><a href="#8-7-2-调试技巧" class="headerlink" title="8.7.2 调试技巧"></a>8.7.2 调试技巧</h4><p><strong>问题排查：</strong></p><ul><li>检查Cursor的MCP服务器状态</li><li>验证Git和Python环境</li><li>测试基本的Git命令</li><li>查看MCP服务器日志</li></ul><p><strong>性能优化：</strong></p><ul><li>避免在大型仓库中频繁操作</li><li>使用合适的Git配置</li><li>定期清理Git对象</li><li>优化仓库大小</li></ul><h2 id="9-最佳实践与进阶技巧-🚀"><a href="#9-最佳实践与进阶技巧-🚀" class="headerlink" title="9. 最佳实践与进阶技巧 🚀"></a>9. 最佳实践与进阶技巧 🚀</h2><h3 id="9-1-性能优化"><a href="#9-1-性能优化" class="headerlink" title="9.1 性能优化"></a>9.1 性能优化</h3><h4 id="9-1-1-连接池管理"><a href="#9-1-1-连接池管理" class="headerlink" title="9.1.1 连接池管理"></a>9.1.1 连接池管理</h4><ul><li>合理配置连接池大小</li><li>及时释放不用的连接</li><li>监控连接使用情况</li></ul><h4 id="9-1-2-缓存策略"><a href="#9-1-2-缓存策略" class="headerlink" title="9.1.2 缓存策略"></a>9.1.2 缓存策略</h4><ul><li>对频繁访问的数据进行缓存</li><li>设置合理的缓存过期时间</li><li>使用分布式缓存提高性能</li></ul><h4 id="9-1-3-异步处理"><a href="#9-1-3-异步处理" class="headerlink" title="9.1.3 异步处理"></a>9.1.3 异步处理</h4><ul><li>使用异步方式处理耗时操作</li><li>避免阻塞主线程</li><li>合理设置超时时间</li></ul><h3 id="9-2-安全考虑"><a href="#9-2-安全考虑" class="headerlink" title="9.2 安全考虑"></a>9.2 安全考虑</h3><h4 id="9-2-1-数据安全"><a href="#9-2-1-数据安全" class="headerlink" title="9.2.1 数据安全"></a>9.2.1 数据安全</h4><ul><li>敏感信息加密存储</li><li>使用HTTPS传输</li><li>定期更新API密钥</li></ul><h4 id="9-2-2-访问控制"><a href="#9-2-2-访问控制" class="headerlink" title="9.2.2 访问控制"></a>9.2.2 访问控制</h4><ul><li>实施严格的权限管理</li><li>使用OAuth等标准认证</li><li>记录所有访问日志</li></ul><h4 id="9-2-3-输入验证"><a href="#9-2-3-输入验证" class="headerlink" title="9.2.3 输入验证"></a>9.2.3 输入验证</h4><ul><li>验证所有输入参数</li><li>防止SQL注入等攻击</li><li>限制输入长度和格式</li></ul><h3 id="9-3-故障排除"><a href="#9-3-故障排除" class="headerlink" title="9.3 故障排除"></a>9.3 故障排除</h3><h4 id="9-3-1-常见问题"><a href="#9-3-1-常见问题" class="headerlink" title="9.3.1 常见问题"></a>9.3.1 常见问题</h4><ul><li>连接超时：检查网络和服务器状态</li><li>认证失败：验证API密钥和权限</li><li>数据格式错误：检查数据结构和类型</li></ul><h4 id="9-3-2-调试技巧"><a href="#9-3-2-调试技巧" class="headerlink" title="9.3.2 调试技巧"></a>9.3.2 调试技巧</h4><ul><li>启用详细日志记录</li><li>使用测试环境验证</li><li>分步骤排查问题</li></ul><h4 id="9-3-3-监控告警"><a href="#9-3-3-监控告警" class="headerlink" title="9.3.3 监控告警"></a>9.3.3 监控告警</h4><ul><li>设置关键指标监控</li><li>配置异常告警机制</li><li>定期检查系统健康状态</li></ul><h2 id="📚-延伸阅读"><a href="#📚-延伸阅读" class="headerlink" title="📚 延伸阅读"></a>📚 延伸阅读</h2><ul><li><a href="/cursor-tutorial/">Cursor使用教程</a> - 学习AI编程助手的使用</li><li><a href="/git%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/">Git操作指南</a> - 掌握版本控制基础</li><li><a href="/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/">函数式编程</a> - 提升代码质量和可维护性</li></ul><h2 id="💡-学习建议"><a href="#💡-学习建议" class="headerlink" title="💡 学习建议"></a>💡 学习建议</h2><ol><li><p><strong>循序渐进</strong></p><ul><li>先理解MCP的基本概念</li><li>再学习通信机制和协议规范</li><li>最后进行实战项目练习</li></ul></li><li><p><strong>实践为主</strong></p><ul><li>多动手配置和测试</li><li>从简单的本地服务开始</li><li>逐步尝试复杂的远程服务</li></ul></li><li><p><strong>关注更新</strong></p><ul><li>定期查看官方文档更新</li><li>关注新平台的支持情况</li><li>参与社区讨论和分享</li></ul></li><li><p><strong>安全第一</strong></p><ul><li>始终考虑安全性</li><li>使用最佳实践</li><li>定期进行安全审计</li></ul></li></ol><h2 id="🔗-相关资源"><a href="#🔗-相关资源" class="headerlink" title="🔗 相关资源"></a>🔗 相关资源</h2><ol><li><p><strong>官方资源</strong></p><ul><li><a href="https://modelcontextprotocol.io/">MCP官方网站</a></li><li><a href="https://github.com/modelcontextprotocol">GitHub仓库</a></li><li><a href="https://modelcontextprotocol.io/docs">官方文档</a></li></ul></li><li><p><strong>社区资源</strong></p><ul><li><a href="https://discord.gg/modelcontextprotocol">Discord社区</a></li><li><a href="https://www.reddit.com/r/MCP/">Reddit论坛</a></li><li><a href="https://stackoverflow.com/questions/tagged/mcp">Stack Overflow</a></li></ul></li><li><p><strong>中文资源</strong></p><ul><li><a href="https://juejin.cn/tag/MCP">掘金专栏</a></li><li><a href="https://www.zhihu.com/topic/mcp">知乎话题</a></li><li><a href="https://search.bilibili.com/all?keyword=mcp%20ai">B站教程</a></li></ul></li></ol><h2 id="📝-更新记录"><a href="#📝-更新记录" class="headerlink" title="📝 更新记录"></a>📝 更新记录</h2><ul><li>2025-10-04: 初始版本发布</li></ul>]]></content>
      
      
      <categories>
          
          <category> AI工具教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> AI编程 </tag>
            
            <tag> MCP </tag>
            
            <tag> 智能体 </tag>
            
            <tag> 协议 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cursor使用教程 - AI编程助手从入门到精通</title>
      <link href="//cursor-tutorial/"/>
      <url>//cursor-tutorial/</url>
      
        <content type="html"><![CDATA[<h1 id="Cursor使用教程-AI编程助手从入门到精通-🚀"><a href="#Cursor使用教程-AI编程助手从入门到精通-🚀" class="headerlink" title="Cursor使用教程 - AI编程助手从入门到精通 🚀"></a>Cursor使用教程 - AI编程助手从入门到精通 🚀</h1><blockquote><p>简单工作不想做？复杂工作不会做？出现错误不会解决？后端程序员不会写前端？前端程序员不会写后端？可爱的大学生要写期末作业？Cursor来帮你！本教程将带您从零开始，全面掌握这款革命性的AI编程助手。📚</p></blockquote><p><img src="/images/cursor/1749179465178.png" alt="Cursor概览"></p><h2 id="📋-目录"><a href="#📋-目录" class="headerlink" title="📋 目录"></a>📋 目录</h2><ul><li><p><a href="#1-cursor%E7%AE%80%E4%BB%8B%E4%B8%8E%E6%A6%82%E8%BF%B0">1. Cursor简介与概述</a></p><ul><li><a href="#11-%E4%BB%80%E4%B9%88%E6%98%AFcursor">1.1 什么是Cursor</a></li><li><a href="#12-%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E7%89%B9%E7%82%B9">1.2 核心功能特点</a></li><li><a href="#13-%E5%AF%B9%E6%AF%94%E5%85%B6%E4%BB%96%E5%B7%A5%E5%85%B7">1.3 对比其他工具</a></li></ul></li><li><p><a href="#2-%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE">2. 安装与配置</a></p><ul><li><a href="#21-%E5%AE%89%E8%A3%85%E5%92%8C%E7%99%BB%E5%BD%95-%F0%9F%92%BF">2.1 安装和登录 💿</a></li><li><a href="#22-%E6%97%A0%E9%99%90%E7%BB%AD%E6%9D%AF%E6%8A%80%E5%B7%A7-%E2%99%BE%EF%B8%8F">2.2 无限续杯技巧 ♾️</a></li><li><a href="#23-%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E-%E2%9A%99%EF%B8%8F">2.3 基础配置说明 ⚙️</a></li><li><a href="#24-vs-code%E9%85%8D%E7%BD%AE%E8%BF%81%E7%A7%BB-%F0%9F%94%84">2.4 VS Code配置迁移 🔄</a></li><li><a href="#25-java%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE-%E2%98%95">2.5 Java环境配置 ☕</a></li></ul></li><li><p><a href="#3-%E4%B8%89%E5%A4%A7%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD">3. 三大核心功能</a></p><ul><li><a href="#31-tab%E9%94%AE%E6%99%BA%E8%83%BD%E8%A1%A5%E5%85%A8-%E2%8C%A8%EF%B8%8F">3.1 Tab键智能补全 ⌨️</a></li><li><a href="#32-chat%E5%AF%B9%E8%AF%9D%E6%A8%A1%E5%BC%8F-%F0%9F%92%AC">3.2 Chat对话模式 💬</a></li><li><a href="#33-ctrlk%E5%86%85%E8%81%94%E7%BC%96%E8%BE%91-%E2%9C%8F%EF%B8%8F">3.3 Ctrl+K内联编辑 ✏️</a></li></ul></li><li><p><a href="#4-%E7%B2%BE%E5%87%86%E4%B8%8A%E4%B8%8B%E6%96%87%E6%8C%87%E5%AE%9A">4. 精准上下文指定</a></p><ul><li><a href="#41-%E4%BB%A3%E7%A0%81%E5%BA%93%E7%B4%A2%E5%BC%95-%F0%9F%93%9A">4.1 代码库索引 📚</a></li><li><a href="#42-rules%E8%A7%84%E5%88%99%E9%85%8D%E7%BD%AE-%F0%9F%93%8B">4.2 Rules规则配置 📋</a></li><li><a href="#43-%E7%AC%A6%E5%8F%B7%E4%BD%BF%E7%94%A8-%F0%9F%94%8D">4.3 @符号使用 🔍</a></li></ul></li><li><p><a href="#5-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8Bchrome%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91">5. 实战案例：Chrome插件开发</a></p><ul><li><a href="#51-%E6%8F%92%E4%BB%B6%E8%AE%BE%E8%AE%A1-%F0%9F%8E%A8">5.1 插件设计 🎨</a></li><li><a href="#52-%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0-%E2%9A%A1">5.2 功能实现 ⚡</a></li><li><a href="#53-%E8%B0%83%E8%AF%95%E4%B8%8E%E5%8F%91%E5%B8%83-%F0%9F%9A%80">5.3 调试与发布 🚀</a></li></ul></li></ul><h2 id="1-Cursor简介与概述-🎯"><a href="#1-Cursor简介与概述-🎯" class="headerlink" title="1. Cursor简介与概述 🎯"></a>1. Cursor简介与概述 🎯</h2><h3 id="1-1-什么是Cursor"><a href="#1-1-什么是Cursor" class="headerlink" title="1.1 什么是Cursor"></a>1.1 什么是Cursor</h3><p>Cursor 是一款功能强大的 AI 优先代码编辑器，可增强我们的开发工作流程。主要提供三个核心方向，这些功能可以无缝地协同工作，从而提高工作效率：</p><ul><li>🤖 <strong>深度集成AI模型</strong>：不是简单地接入模型，而是让AI充当了编译器的核心交互方式。支持代码块对话、项目级对话、模型自由选择。</li><li>💬 <strong>强上下文理解</strong>：可以自动识别项目文件、代码块、错误信息等等，提供更直观准确的AI修改能力。</li><li>📚 <strong>对话式开发体验</strong>：仅需用自然语言沟通，Cursor就会根据指令完成布置的任务，使用者可以轻松扮演产品经理，让Cursor理解你的命令自行工作。</li></ul><h3 id="1-2-核心功能特点"><a href="#1-2-核心功能特点" class="headerlink" title="1.2 核心功能特点"></a>1.2 核心功能特点</h3><ol><li><p><strong>智能代码补全（Tab）</strong></p><ul><li>单行&#x2F;多行代码智能补全</li><li>代码重构和优化建议</li><li>多行协同优化能力</li><li>智能光标位置预测</li></ul></li><li><p><strong>AI对话助手（Chat）</strong></p><ul><li>Agent代理模式：自主探索和修改代码</li><li>Ask问答模式：获取解释和建议</li><li>Manual手动模式：精准编辑控制</li><li>支持多种上下文引用</li></ul></li><li><p><strong>内联编辑（Ctrl+K）</strong></p><ul><li>快速代码生成和修改</li><li>自然语言描述转代码</li><li>终端命令智能生成</li><li>实时编辑预览</li></ul></li></ol><h3 id="1-3-对比其他工具"><a href="#1-3-对比其他工具" class="headerlink" title="1.3 对比其他工具"></a>1.3 对比其他工具</h3><p><strong>对比VS Code</strong></p><ul><li>基于Visual Studio Code打造而成的AI编程工具</li><li>界面和基础操作与VS Code高度相似，无缝衔接</li><li>增加了强大的AI功能，提升开发效率</li></ul><p><strong>对比JetBrains IDEA</strong></p><ul><li>提供AI驱动的现代编码体验</li><li>可以取代JetBrains IDE的大部分功能</li><li>更轻量级，启动更快，资源占用更少</li></ul><p><strong>对比其他AI工具</strong></p><ul><li>原生集成，无需额外配置</li><li>支持多种编程语言和框架</li><li>强大的上下文管理能力</li><li>灵活的规则配置系统</li></ul><h2 id="2-安装与配置-⚙️"><a href="#2-安装与配置-⚙️" class="headerlink" title="2. 安装与配置 ⚙️"></a>2. 安装与配置 ⚙️</h2><h3 id="2-1-安装和登录-💿"><a href="#2-1-安装和登录-💿" class="headerlink" title="2.1 安装和登录 💿"></a>2.1 安装和登录 💿</h3><h4 id="2-1-1-安装步骤"><a href="#2-1-1-安装步骤" class="headerlink" title="2.1.1 安装步骤"></a>2.1.1 安装步骤</h4><ol><li><strong>下载安装包</strong><ul><li>访问 <a href="https://cursor.com/">cursor.com</a> 并点击 “下载” 按钮</li><li>选择对应操作系统版本：</li></ul></li></ol><ul><li>Windows: cursor-setup.exe</li><li>macOS: cursor.dmg</li><li>Linux: cursor.AppImage</li></ul><ol start="2"><li><strong>安装过程</strong><ul><li>运行安装程序并等待安装完成</li><li>通过桌面快捷方式或从应用菜单启动Cursor</li></ul></li></ol><h4 id="2-1-2-登录账号"><a href="#2-1-2-登录账号" class="headerlink" title="2.1.2 登录账号"></a>2.1.2 登录账号</h4><ol><li><p><strong>账号注册</strong></p><ul><li>点击 “注册” 或 “登录” 按钮</li><li>可以选择使用邮件，或者注册Google或GitHub账号</li><li>新用户将获得14天免费试用期</li></ul></li><li><p><strong>账号验证</strong></p><ul><li>验证邮箱地址</li><li>完成初始设置向导</li><li>开始使用Cursor</li></ul></li></ol><h3 id="2-2-基础配置说明-⚙️"><a href="#2-2-基础配置说明-⚙️" class="headerlink" title="2.2 基础配置说明 ⚙️"></a>2.2 基础配置说明 ⚙️</h3><h4 id="2-2-1-配置入口对比"><a href="#2-2-1-配置入口对比" class="headerlink" title="2.2.1 配置入口对比"></a>2.2.1 配置入口对比</h4><table><thead><tr><th><strong>对比项</strong></th><th><strong>Cursor Settings</strong></th><th><strong>Editor Settings</strong></th></tr></thead><tbody><tr><td><strong>功能定位</strong></td><td>管理 AI 相关功能和 Cursor 特有设置</td><td>调整编辑器基础行为和外观</td></tr><tr><td><strong>继承性</strong></td><td>与 VS Code 差异较大（Cursor 独有功能）</td><td>大部分继承自 VS Code（如主题设置）</td></tr><tr><td><strong>影响范围</strong></td><td>影响 AI 代码生成、分析、对话的效果</td><td>影响代码编辑体验（如排版、颜色）</td></tr><tr><td><strong>典型配置示例</strong></td><td>调整 AI 模型参数、代码库索引路径</td><td>修改字体、启用自动保存、更改主题</td></tr></tbody></table><h4 id="2-2-2-Cursor-AI相关设置"><a href="#2-2-2-Cursor-AI相关设置" class="headerlink" title="2.2.2 Cursor AI相关设置"></a>2.2.2 Cursor AI相关设置</h4><p>通过齿轮图标或 <code>Cmd/Ctrl + Shift + J</code> 开启Cursor设置，可进行以下配置：</p><ol><li><p><strong>General（常规）</strong></p><ul><li>账户相关设置和配置同步</li><li>VS Code配置导入</li><li>隐私配置管理</li></ul></li><li><p><strong>Features（功能）</strong></p><ul><li>AI代码补全开关</li><li>对话模式（Ask、Edit、Agent）设置</li><li>功能参数微调</li></ul></li><li><p><strong>Models（模型）</strong></p><ul><li>AI模型选择（Claude 3.5 Sonnet）</li><li>API Key配置</li><li>模型参数调整</li></ul></li><li><p><strong>Rules（规则）</strong></p><ul><li>代码检查规则</li><li>代码格式规范</li><li>操作规则设置</li></ul></li><li><p><strong>Indexing（索引)</strong></p><ul><li>代码库索引路径</li><li>排除规则设置</li><li>索引优化配置</li></ul></li></ol><h4 id="2-2-3-编辑器基础设置"><a href="#2-2-3-编辑器基础设置" class="headerlink" title="2.2.3 编辑器基础设置"></a>2.2.3 编辑器基础设置</h4><ol><li><p><strong>访问设置</strong></p><ul><li>通过命令面板：<code>Cmd/Ctrl + Shift + P</code></li><li>输入：”Preferences: Open Settings (UI)”</li><li>或直接使用快捷键：<code>Cmd/Ctrl + ,</code></li></ul></li><li><p><strong>常用设置项</strong><br><img src="/images/cursor/1748935489544.png" alt="编辑器设置"></p><ul><li>主题和外观</li><li>字体和颜色</li><li>编辑器行为</li><li>文件处理</li></ul></li><li><p><strong>设置作用域</strong></p><ul><li><strong>User（用户）</strong>：全局性设置，适用于所有工作空间</li><li><strong>Workspace（工作空间）</strong>：仅对当前项目生效</li></ul></li></ol><h3 id="2-3-VS-Code配置迁移-🔄"><a href="#2-3-VS-Code配置迁移-🔄" class="headerlink" title="2.3 VS Code配置迁移 🔄"></a>2.3 VS Code配置迁移 🔄</h3><h4 id="2-3-1-一键导入配置"><a href="#2-3-1-一键导入配置" class="headerlink" title="2.3.1 一键导入配置"></a>2.3.1 一键导入配置</h4><ol><li><p><strong>导入步骤</strong></p><ul><li>打开Cursor设置（<code>Cmd/Ctrl + Shift + J</code>）</li><li>导航到：常规 &gt; 帐户</li><li>点击”VS Code Import”下的”导入”按钮<br><img src="/images/cursor/1748919880700.png" alt="VS Code导入"></li></ul></li><li><p><strong>导入内容</strong></p><ul><li>Extensions（扩展）</li><li>Themes（主题）</li><li>Settings（设置）</li><li>Keybindings（键绑定）</li></ul></li></ol><blockquote><p><strong>注意</strong>：并非所有VS Code扩展都与Cursor兼容。一些依赖VS Code特定API的插件可能导致导入失败。</p></blockquote><h4 id="2-3-2-手动配置迁移"><a href="#2-3-2-手动配置迁移" class="headerlink" title="2.3.2 手动配置迁移"></a>2.3.2 手动配置迁移</h4><ol><li><p><strong>导出VS Code配置</strong></p><ul><li>打开命令面板：<code>Cmd/Ctrl + Shift + P</code></li><li>搜索：”Preferences: Open Profiles (UI)”</li><li>选择要导出的配置文件</li><li>导出到本地或GitHub Gist</li></ul></li><li><p><strong>导入到Cursor</strong></p><ul><li>打开命令面板：<code>Cmd/Ctrl + Shift + P</code></li><li>搜索：”Preferences: Open Profiles (UI)”</li><li>选择”Import Profile”</li><li>选择本地文件或粘贴Gist URL</li></ul></li></ol><h3 id="2-4-Java环境配置-☕"><a href="#2-4-Java环境配置-☕" class="headerlink" title="2.4 Java环境配置 ☕"></a>2.4 Java环境配置 ☕</h3><h4 id="2-4-1-环境配置方式"><a href="#2-4-1-环境配置方式" class="headerlink" title="2.4.1 环境配置方式"></a>2.4.1 环境配置方式</h4><ol><li><p><strong>自动读取配置</strong></p><ul><li>系统环境变量中的<code>JAVA_HOME</code>和<code>MAVEN_HOME</code></li><li>自动识别并应用配置</li><li>用于代码编译和项目构建</li></ul></li><li><p><strong>手动配置</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;java.home&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C:/Program Files/Java/jdk-17&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;java.configuration.maven.userSettings&quot;</span><span class="punctuation">:</span> <span class="string">&quot;D:/maven/apache-maven-3.8.8-bin/apache-maven-3.8.8/conf/settings.xml&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="2-4-2-Java开发插件"><a href="#2-4-2-Java开发插件" class="headerlink" title="2.4.2 Java开发插件"></a>2.4.2 Java开发插件</h4><ol><li><p><strong>安装方式</strong><br><img src="/images/cursor/1748938160832.png" alt="Java插件"></p><ul><li>按<code>Ctrl + Shift + X</code>打开扩展面板</li><li>搜索并安装”Extension Pack for Java”</li></ul></li><li><p><strong>包含插件</strong></p><ul><li>Language Support for Java(TM) by Red Hat</li><li>Debugger for Java</li><li>Maven for Java</li><li>Test Runner for Java</li><li>Project Manager for Java</li><li>Gradle for Java</li></ul></li></ol><h2 id="3-三大核心功能-🚀"><a href="#3-三大核心功能-🚀" class="headerlink" title="3. 三大核心功能 🚀"></a>3. 三大核心功能 🚀</h2><h3 id="3-1-Tab键智能补全-⌨️"><a href="#3-1-Tab键智能补全-⌨️" class="headerlink" title="3.1 Tab键智能补全 ⌨️"></a>3.1 Tab键智能补全 ⌨️</h3><h4 id="3-1-1-功能概述"><a href="#3-1-1-功能概述" class="headerlink" title="3.1.1 功能概述"></a>3.1.1 功能概述</h4><p>Tab键在Cursor中具有强大的代码自动补全功能，基于选定模型，能根据代码上下文自动预测并生成代码补全建议和代码修复重构。</p><blockquote><p>提示：<code>Tab</code>键接受建议，<code>Esc</code>键拒绝建议。要逐字部分接受建议，请按<code>Ctrl/⌘ + →</code>。</p></blockquote><h4 id="3-1-2-主要功能"><a href="#3-1-2-主要功能" class="headerlink" title="3.1.2 主要功能"></a>3.1.2 主要功能</h4><ol><li><p><strong>单行&#x2F;多行代码补全</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//需求：写一个工具类计算数组平均值</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayUtils</span> &#123;</span><br><span class="line">    <span class="comment">// 按tab会完成补全</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>补全后：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayUtils</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] nums = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>&#125;;</span><br><span class="line">        System.out.println(average(nums));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">average</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> num : nums) &#123;</span><br><span class="line">            sum += num;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">double</span>) sum / nums.length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>智能代码重写</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用Stream重构</span></span><br><span class="line">List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">List&lt;Integer&gt; evenNumbers = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> num : numbers) &#123;</span><br><span class="line">    <span class="keyword">if</span> (num % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        evenNumbers.add(num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重构后：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; evenNumbers = numbers.stream()</span><br><span class="line">    .filter(num -&gt; num % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">    .collect(Collectors.toList());</span><br></pre></td></tr></table></figure></li><li><p><strong>多行协同优化</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> count; <span class="comment">// 普通变量</span></span><br><span class="line">String name; <span class="comment">// 姓名</span></span><br><span class="line"><span class="type">boolean</span> isValid; <span class="comment">// 是否有效</span></span><br><span class="line"><span class="type">double</span> price; <span class="comment">// 价格</span></span><br><span class="line"><span class="comment">//tab 会继续联想变量类型</span></span><br></pre></td></tr></table></figure></li><li><p><strong>光标位置预测</strong><br><img src="/images/cursor/1749222927512.png" alt="光标预测"></p></li></ol><h4 id="3-1-3-Tab相关配置"><a href="#3-1-3-Tab相关配置" class="headerlink" title="3.1.3 Tab相关配置"></a>3.1.3 Tab相关配置</h4><p>配置位置：<code>cursor settings &gt; features &gt; tab</code></p><ol><li><p><strong>基础功能开关</strong></p><ul><li>启用&#x2F;禁用Cursor Tab功能</li><li>控制是否在注释中提供建议</li><li>显示空白建议的控制</li></ul></li><li><p><strong>接受方式设置</strong></p><ul><li>完整接受：<code>Tab</code>键</li><li>部分接受：<code>Ctrl+→</code></li><li>拒绝建议：<code>Esc</code>键</li></ul></li><li><p><strong>特殊功能配置</strong></p><ul><li>TypeScript自动导入</li><li>Python自动导入（测试版）</li><li>空白建议显示控制</li></ul></li></ol><h3 id="3-2-Chat对话模式-💬"><a href="#3-2-Chat对话模式-💬" class="headerlink" title="3.2 Chat对话模式 💬"></a>3.2 Chat对话模式 💬</h3><h4 id="3-2-1-功能概述"><a href="#3-2-1-功能概述" class="headerlink" title="3.2.1 功能概述"></a>3.2.1 功能概述</h4><p>Chat是Cursor的AI助手，位于侧边栏中，可让您通过自然语言与代码库进行交互。您可以提出问题、请求代码编辑、获取终端命令建议等。</p><p><img src="/images/cursor/overview.mp4" alt="Chat概览"></p><p><strong>主要功能：</strong></p><ul><li>深入理解代码库并进行修改</li><li>帮助重构和优化代码</li><li>从零开始搭建项目</li><li>错误定位和修复</li></ul><h4 id="3-2-2-两种对话模式"><a href="#3-2-2-两种对话模式" class="headerlink" title="3.2.2 两种对话模式"></a>3.2.2 两种对话模式</h4><ol><li><p><strong>Agent代理模式（默认）</strong><br><img src="/images/cursor/agent.png" alt="Agent模式"></p><ul><li>自主探索和理解项目代码</li><li>可以直接进行代码修改</li><li>启用所有工具权限</li><li>识别完整项目结构</li></ul></li><li><p><strong>Ask问答模式</strong><br><img src="/images/cursor/ask.png" alt="Ask模式"></p><ul><li>“只读”模式，不修改代码</li><li>获取代码解释和建议</li><li>理解项目结构</li><li>适合学习和探索</li></ul></li></ol><h4 id="3-2-3-使用技巧"><a href="#3-2-3-使用技巧" class="headerlink" title="3.2.3 使用技巧"></a>3.2.3 使用技巧</h4><ol><li><p><strong>快速访问</strong></p><ul><li>使用<code>⌘+L</code>（Mac）或<code>Ctrl+L</code>（Windows&#x2F;Linux）</li><li>使用自然语言描述需求</li><li>提供清晰的上下文信息</li></ul></li><li><p><strong>代码编辑选项</strong></p><ul><li><p><strong>Review</strong>：查看差异<br><img src="/images/cursor/1749005624183.png" alt="差异查看"></p></li><li><p><strong>Apply</strong>：应用更改<br><img src="/images/cursor/1749005659532.png" alt="应用更改"></p></li><li><p><strong>Accept&#x2F;Reject</strong>：确认或放弃<br><img src="/images/cursor/1749005825535.png" alt="确认修改"></p></li></ul></li><li><p><strong>历史和检查点</strong></p><ul><li><p>查看历史记录<br><img src="/images/cursor/1749006388841.png" alt="历史记录"></p></li><li><p>创建新会话<br><img src="/images/cursor/1749006447983.png" alt="新会话"></p></li><li><p>恢复检查点<br><img src="/images/cursor/1749006156466.png" alt="检查点"></p></li></ul></li></ol><h4 id="3-2-4-配置说明"><a href="#3-2-4-配置说明" class="headerlink" title="3.2.4 配置说明"></a>3.2.4 配置说明</h4><ol><li><p><strong>基础设置</strong></p><ul><li>默认对话模式选择</li><li>文字大小调整</li><li>自动刷新和滚动</li></ul></li><li><p><strong>Agent模式设置</strong></p><ul><li>自动运行命令</li><li>文件保护机制</li><li>命令白名单&#x2F;黑名单</li></ul></li><li><p><strong>安全设置</strong></p><ul><li>文件删除保护</li><li>工作区外保护</li><li>点文件保护</li></ul></li></ol><h3 id="3-3-Ctrl-K内联编辑-✏️"><a href="#3-3-Ctrl-K内联编辑-✏️" class="headerlink" title="3.3 Ctrl+K内联编辑 ✏️"></a>3.3 Ctrl+K内联编辑 ✏️</h3><h4 id="3-3-1-功能概述"><a href="#3-3-1-功能概述" class="headerlink" title="3.3.1 功能概述"></a>3.3.1 功能概述</h4><p>内联编辑（Cmd&#x2F;Ctrl+K）允许直接在编辑器窗口中生成新代码或编辑现有代码，特别适合已知并需要精准修改文件内容的场景。</p><p><img src="/images/cursor/regular.png" alt="内联编辑"></p><h4 id="3-3-2-使用模式"><a href="#3-3-2-使用模式" class="headerlink" title="3.3.2 使用模式"></a>3.3.2 使用模式</h4><ol><li><p><strong>内联生成</strong></p><ul><li>无选中代码时按<code>Ctrl/Cmd K</code></li><li>在提示栏输入需求</li><li>AI直接生成相应代码</li></ul><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">生成一个带点击动画的按钮组件，用JavaScript实现，点击后控制台打印次数</span><br></pre></td></tr></table></figure><p><img src="/images/cursor/1749009173764.png" alt="生成效果"></p></li><li><p><strong>内联编辑</strong></p><ul><li>选中要修改的代码</li><li>按<code>Ctrl/Cmd K</code></li><li>在提示栏描述修改需求</li></ul><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">方法添加注释和每行代码添加注释说明</span><br></pre></td></tr></table></figure><p><img src="/images/cursor/1749009465994.png" alt="编辑前"><br><img src="/images/cursor/1749009494441.png" alt="编辑后"></p></li></ol><h4 id="3-3-3-终端命令生成"><a href="#3-3-3-终端命令生成" class="headerlink" title="3.3.3 终端命令生成"></a>3.3.3 终端命令生成</h4><p>在Cursor终端中使用<code>Cmd/Ctrl K</code>可以：</p><ul><li>通过自然语言生成命令</li><li>按<code>Esc</code>接受命令</li><li>使用<code>Ctrl/⌘ + Enter</code>直接运行</li></ul><p><img src="/images/cursor/1749009824073.png" alt="终端命令"></p><h4 id="3-3-4-最佳实践"><a href="#3-3-4-最佳实践" class="headerlink" title="3.3.4 最佳实践"></a>3.3.4 最佳实践</h4><ol><li><p><strong>提示词技巧</strong></p><ul><li>提供明确的任务类型</li><li>包含具体的技术要求</li><li>说明代码风格偏好</li><li>指定性能或其他约束</li></ul></li><li><p><strong>使用场景</strong></p><ul><li>生成新的代码片段</li><li>重构现有代码</li><li>添加注释和文档</li><li>修复代码问题</li><li>优化代码性能</li></ul></li><li><p><strong>注意事项</strong></p><ul><li>检查生成代码的正确性</li><li>确保代码风格一致性</li><li>验证功能完整性</li><li>考虑性能影响</li></ul></li></ol><h2 id="4-精准上下文指定-🎯"><a href="#4-精准上下文指定-🎯" class="headerlink" title="4. 精准上下文指定 🎯"></a>4. 精准上下文指定 🎯</h2><h3 id="4-1-代码库索引-📚"><a href="#4-1-代码库索引-📚" class="headerlink" title="4.1 代码库索引 📚"></a>4.1 代码库索引 📚</h3><h4 id="4-1-1-概念和作用"><a href="#4-1-1-概念和作用" class="headerlink" title="4.1.1 概念和作用"></a>4.1.1 概念和作用</h4><p>代码库索引是Cursor理解项目的基础。每个Cursor实例在打开项目时都会初始化该工作区的索引，并在添加新文件时自动更新索引。</p><p>主要作用：</p><ul><li>快速”读懂”项目结构</li><li>定位相关代码</li><li>理解代码关系</li><li>生成更贴合项目的代码</li></ul><h4 id="4-1-2-索引配置"><a href="#4-1-2-索引配置" class="headerlink" title="4.1.2 索引配置"></a>4.1.2 索引配置</h4><p><img src="/images/cursor/codebase-indexing.png" alt="索引配置"></p><p>配置位置：<code>cursor settings &gt; indexing</code></p><p>使用示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">查看当前项目结构，并使用文字图形形式罗列出来！</span><br></pre></td></tr></table></figure><p><img src="/images/cursor/1749018096565.png" alt="索引效果"></p><h4 id="4-1-3-忽略文件配置"><a href="#4-1-3-忽略文件配置" class="headerlink" title="4.1.3 忽略文件配置"></a>4.1.3 忽略文件配置</h4><ol><li><p><strong>配置方式</strong></p><ul><li>创建<code>.cursorignore</code>文件</li><li>使用配置界面创建<br><img src="/images/cursor/1749020017720.png" alt="忽略配置"></li></ul></li><li><p><strong>配置示例</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Add directories or file patterns to ignore during indexing</span><br><span class="line">index.html</span><br><span class="line">style.css</span><br><span class="line">main.js</span><br></pre></td></tr></table></figure></li><li><p><strong>效果验证</strong><br><img src="/images/cursor/1749020220373.png" alt="忽略效果"></p></li></ol><h3 id="4-2-Rules规则配置-📋"><a href="#4-2-Rules规则配置-📋" class="headerlink" title="4.2 Rules规则配置 📋"></a>4.2 Rules规则配置 📋</h3><h4 id="4-2-1-规则介绍"><a href="#4-2-1-规则介绍" class="headerlink" title="4.2.1 规则介绍"></a>4.2.1 规则介绍</h4><p>Rules用于给Cursor AI功能添加规则和限制，确保生成的代码符合团队规范。</p><p><strong>主要作用：</strong></p><ul><li>约束代码风格</li><li>限定技术选型</li><li>指定核心参数</li></ul><p><strong>规则类型对比：</strong></p><table><thead><tr><th><strong>维度</strong></th><th><strong>项目规则（Project Rules）</strong></th><th><strong>用户规则（User Rules）</strong></th></tr></thead><tbody><tr><td><strong>作用范围</strong></td><td>仅对当前项目生效，团队成员共享相同规则</td><td>对所有项目生效，个人专属配置</td></tr><tr><td><strong>存储位置</strong></td><td>项目根目录下的 <code>.cursor/rules/随意.mdc</code> 文件</td><td>用户配置目录（如 <code>~/.cursor/rules</code>）</td></tr><tr><td><strong>同步方式</strong></td><td>随项目代码提交到版本库（如 Git），团队共享</td><td>仅本地生效，不随项目同步</td></tr><tr><td><strong>适用场景</strong></td><td>统一团队编码规范（如函数注释格式、依赖版本）</td><td>个人习惯（如快捷键、AI 响应风格）</td></tr></tbody></table><h4 id="4-2-2-规则配置示例"><a href="#4-2-2-规则配置示例" class="headerlink" title="4.2.2 规则配置示例"></a>4.2.2 规则配置示例</h4><ol><li><p><strong>创建规则文件</strong><br><img src="/images/cursor/1749025679441.png" alt="创建规则"></p></li><li><p><strong>编写规则内容</strong></p></li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">description: &quot;团队前端项目规范&quot;</span><br><span class="line"><span class="section">priority: 1000</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"></span><br><span class="line"><span class="section"># 代码风格</span></span><br><span class="line"><span class="bullet">1.</span> 函数必须包含 JSDoc 注释</span><br><span class="line"><span class="bullet">2.</span> 禁止使用 <span class="code">`var`</span>，统一用 <span class="code">`const`</span>/<span class="code">`let`</span></span><br><span class="line"><span class="bullet">3.</span> 函数命名必须添加 zwf<span class="emphasis">_前缀， 例如：zwf_</span>login</span><br><span class="line"></span><br><span class="line"><span class="section"># 依赖管理</span></span><br><span class="line"><span class="bullet">-</span> 优先使用项目内已有的工具函数</span><br><span class="line"><span class="bullet">-</span> 禁止引入低版本的 lodash（&lt;4.0.0）</span><br></pre></td></tr></table></figure><ol start="3"><li><strong>规则生效效果</strong><br><img src="/images/cursor/1749026002745.png" alt="规则效果"></li></ol><h4 id="4-2-3-RIPER-5-高级规则框架"><a href="#4-2-3-RIPER-5-高级规则框架" class="headerlink" title="4.2.3 RIPER-5 高级规则框架"></a>4.2.3 RIPER-5 高级规则框架</h4><p><strong>RIPER-5</strong> 是一套为高级AI助手设计的严格行为协议和工作流框架，特别适合在Cursor中使用。它通过强制性的、分阶段的流程来约束AI的行为，确保执行复杂编码任务时的每一步操作都安全、可控且符合预期。</p><p><strong>GitHub仓库：</strong> <a href="https://github.com/NeekChaw/RIPER-5">NeekChaw&#x2F;RIPER-5</a></p><p><strong>核心特点：</strong></p><ul><li>🎯 <strong>行为约束</strong>：通过严格的工作流约束AI行为</li><li>🔒 <strong>安全可控</strong>：确保AI操作的安全性和可预测性</li><li>📋 <strong>分阶段执行</strong>：将复杂任务分解为可管理的步骤</li><li>🛡️ <strong>错误预防</strong>：避免AI随意创建文件、忽视现有架构等问题</li></ul><p><strong>RIPER-5 规则配置示例：</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">description: &quot;RIPER-5 AI编码行为协议&quot;</span><br><span class="line"><span class="section">priority: 2000</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"></span><br><span class="line"><span class="section"># RIPER-5 行为协议</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 核心原则</span></span><br><span class="line"><span class="bullet">1.</span> 在执行任何编码任务前，必须先进行需求分析和架构设计</span><br><span class="line"><span class="bullet">2.</span> 严格遵循五阶段工作流：分析(Research) → 规划(Plan) → 实施(Implement) → 验证(Verify) → 优化(Optimize)</span><br><span class="line"><span class="bullet">3.</span> 禁止随意创建新文件，必须先检查现有代码结构</span><br><span class="line"><span class="bullet">4.</span> 所有代码修改必须包含详细的注释和文档</span><br><span class="line"></span><br><span class="line"><span class="section">## 工作流要求</span></span><br><span class="line"><span class="bullet">-</span> 分析阶段：深入理解需求和现有代码结构</span><br><span class="line"><span class="bullet">-</span> 规划阶段：制定详细的实施计划和技术方案</span><br><span class="line"><span class="bullet">-</span> 实施阶段：严格按照规划执行，避免偏离目标</span><br><span class="line"><span class="bullet">-</span> 验证阶段：全面测试和代码审查</span><br><span class="line"><span class="bullet">-</span> 优化阶段：性能优化和代码重构</span><br><span class="line"></span><br><span class="line"><span class="section">## 代码规范</span></span><br><span class="line"><span class="bullet">-</span> 所有函数必须包含JSDoc注释</span><br><span class="line"><span class="bullet">-</span> 变量命名必须具有描述性</span><br><span class="line"><span class="bullet">-</span> 代码结构必须清晰，避免过度嵌套</span><br><span class="line"><span class="bullet">-</span> 必须考虑错误处理和边界情况</span><br></pre></td></tr></table></figure><p><strong>Claude Code 专用提示词集合：</strong></p><p>RIPER-5仓库还包含多个针对特定场景的优化提示词：</p><table><thead><tr><th>模块</th><th>描述</th><th>适用场景</th></tr></thead><tbody><tr><td><strong>Kiro需求收集与规划</strong></td><td>三阶段工作流，将模糊想法转化为完整开发文档</td><td>项目规划和需求分析</td></tr><tr><td><strong>Linux之父帮你重构代码</strong></td><td>模拟Linus Torvalds的思维模式审查代码</td><td>代码审查和重构</td></tr><tr><td><strong>让Claude更靠谱的Workflow</strong></td><td>五步工作流约束AI行为</td><td>日常开发任务</td></tr><tr><td><strong>专业高效提交Git</strong></td><td>Commit-as-Prompt理念，结构化提交信息</td><td>Git版本管理</td></tr><tr><td><strong>超深度思考</strong></td><td>多代理协作工作流，模拟专家团队</td><td>复杂问题解决</td></tr></tbody></table><p><strong>使用建议：</strong></p><ol><li>将RIPER-5规则设置为项目规则，确保团队统一使用</li><li>根据具体任务选择合适的Claude Code提示词</li><li>定期更新和优化规则内容</li><li>结合团队实际情况调整规则细节</li></ol><h3 id="4-3-符号使用-🔍"><a href="#4-3-符号使用-🔍" class="headerlink" title="4.3 @符号使用 🔍"></a>4.3 @符号使用 🔍</h3><h4 id="4-3-1-符号类型"><a href="#4-3-1-符号类型" class="headerlink" title="4.3.1 符号类型"></a>4.3.1 符号类型</h4><p><img src="/images/cursor/@-symbols-basics.png" alt="符号基础"></p><p>支持的@符号：</p><ul><li>@Files - 引用特定文件</li><li>@Folders - 引用整个文件夹</li><li>@Code - 引用代码片段</li><li>@Docs - 访问文档</li><li>@Git - 访问git历史</li><li>@Web - 参考网络资源</li><li>@Lint Errors - 引用lint错误</li></ul><h4 id="4-3-2-使用示例"><a href="#4-3-2-使用示例" class="headerlink" title="4.3.2 使用示例"></a>4.3.2 使用示例</h4><ol><li><p><strong>@Files使用</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">帮我总结下 @main.js 中包含哪些方法？</span><br></pre></td></tr></table></figure><p><img src="/images/cursor/1749032749858.png" alt="Files使用"></p></li><li><p><strong>@Code使用</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">帮我逐行解释下 @zwf_register 代码的含义！</span><br></pre></td></tr></table></figure><p><img src="/images/cursor/1749033073362.png" alt="Code使用"></p></li><li><p><strong>@Docs使用</strong><br><img src="/images/cursor/@docs-add.png" alt="Docs配置"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">基于 @MyBatis-plus 查询下乐观锁插件如何使用</span><br></pre></td></tr></table></figure><p><img src="/images/cursor/1749088442648.png" alt="Docs使用"></p></li><li><p><strong>@Web使用</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@Web React 19 的最新性能优化</span><br></pre></td></tr></table></figure><p><img src="/images/cursor/1749089800111.png" alt="Web使用"></p></li></ol><h4 id="4-3-3-最佳实践"><a href="#4-3-3-最佳实践" class="headerlink" title="4.3.3 最佳实践"></a>4.3.3 最佳实践</h4><ol><li><p><strong>选择合适的符号</strong></p><ul><li>@Files：需要访问完整文件</li><li>@Code：引用特定代码片段</li><li>@Docs：查询官方文档</li><li>@Web：获取最新信息</li></ul></li><li><p><strong>提供准确上下文</strong></p><ul><li>指定正确的文件路径</li><li>选择相关的代码片段</li><li>引用适当的文档</li><li>使用精确的搜索词</li></ul></li><li><p><strong>组合使用技巧</strong></p><ul><li>多个符号配合使用</li><li>按需提供上下文</li><li>避免过度引用</li><li>保持提示简洁</li></ul></li></ol><h2 id="5-实战案例：Chrome插件开发-🚀"><a href="#5-实战案例：Chrome插件开发-🚀" class="headerlink" title="5. 实战案例：Chrome插件开发 🚀"></a>5. 实战案例：Chrome插件开发 🚀</h2><h3 id="5-1-插件设计-🎨"><a href="#5-1-插件设计-🎨" class="headerlink" title="5.1 插件设计 🎨"></a>5.1 插件设计 🎨</h3><h4 id="5-1-1-需求分析"><a href="#5-1-1-需求分析" class="headerlink" title="5.1.1 需求分析"></a>5.1.1 需求分析</h4><p><strong>功能需求：</strong></p><ol><li>解释选中的段落或关键词</li><li>翻译选中的段落或关键词（中英互译）</li><li>朗读选中的段落或关键字</li><li>润色和替换选中的文本文案</li></ol><p><strong>细节要求：</strong></p><ol><li>选中文本时显示悬浮插件</li><li>结果显示在悬浮窗口下方</li><li>翻译支持语言选择</li><li>润色结果可编辑和替换</li><li>使用Kimi API实现核心功能</li><li>使用Chrome内置API实现朗读</li></ol><h4 id="5-1-2-UI设计"><a href="#5-1-2-UI设计" class="headerlink" title="5.1.2 UI设计"></a>5.1.2 UI设计</h4><p><strong>基础悬浮菜单：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+------------------------+</span><br><span class="line">|     功能按钮组         |</span><br><span class="line">+------------------------+</span><br><span class="line">| [解释] [翻译] [朗读] [润色] |</span><br><span class="line">+------------------------+</span><br></pre></td></tr></table></figure><p><strong>功能展示区域：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+------------------------+</span><br><span class="line">|     功能按钮组         |</span><br><span class="line">+------------------------+</span><br><span class="line">| [解释] [翻译] [朗读] [润色] |</span><br><span class="line">+------------------------+</span><br><span class="line">|     结果展示区域        |</span><br><span class="line">|                        |</span><br><span class="line">|                        |</span><br><span class="line">+------------------------+</span><br></pre></td></tr></table></figure><h3 id="5-2-功能实现-⚡"><a href="#5-2-功能实现-⚡" class="headerlink" title="5.2 功能实现 ⚡"></a>5.2 功能实现 ⚡</h3><h4 id="5-2-1-项目初始化"><a href="#5-2-1-项目初始化" class="headerlink" title="5.2.1 项目初始化"></a>5.2.1 项目初始化</h4><ol><li><p><strong>创建项目结构</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">chrome-plugin/</span><br><span class="line">├── manifest.json</span><br><span class="line">├── popup/</span><br><span class="line">│   ├── popup.html</span><br><span class="line">│   ├── popup.css</span><br><span class="line">│   └── popup.js</span><br><span class="line">├── content/</span><br><span class="line">│   ├── content.css</span><br><span class="line">│   └── content.js</span><br><span class="line">├── background/</span><br><span class="line">│   └── background.js</span><br><span class="line">└── config.js</span><br></pre></td></tr></table></figure></li><li><p><strong>配置manifest.json</strong></p></li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;manifest_version&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;AI文本助手&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;一款强大的文本处理Chrome插件&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;permissions&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;activeTab&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;storage&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;tts&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;action&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;default_popup&quot;</span><span class="punctuation">:</span> <span class="string">&quot;popup/popup.html&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;content_scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;matches&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;&lt;all_urls&gt;&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;css&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;content/content.css&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;js&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;content/content.js&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;background&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;service_worker&quot;</span><span class="punctuation">:</span> <span class="string">&quot;background/background.js&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="5-2-2-核心功能实现"><a href="#5-2-2-核心功能实现" class="headerlink" title="5.2.2 核心功能实现"></a>5.2.2 核心功能实现</h4><ol><li><p><strong>Kimi API配置</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// config.js</span></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="attr">kimi</span>: &#123;</span><br><span class="line">        <span class="attr">apiUrl</span>: <span class="string">&#x27;https://api.moonshot.cn/v1&#x27;</span>,</span><br><span class="line">        <span class="attr">apiKey</span>: <span class="string">&#x27;YOUR_KIMI_API_KEY&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">defaults</span>: &#123;</span><br><span class="line">        <span class="attr">translationTarget</span>: <span class="string">&#x27;zh&#x27;</span>,</span><br><span class="line">        <span class="attr">speechLanguage</span>: <span class="string">&#x27;zh&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p><strong>文本选择监听</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// content.js</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseup&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> selectedText = <span class="variable language_">window</span>.<span class="title function_">getSelection</span>().<span class="title function_">toString</span>().<span class="title function_">trim</span>();</span><br><span class="line">    <span class="keyword">if</span> (selectedText) &#123;</span><br><span class="line">        <span class="title function_">showToolbar</span>(e.<span class="property">pageX</span>, e.<span class="property">pageY</span>, selectedText);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p><strong>功能实现示例</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文本解释</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">explainText</span>(<span class="params">text</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`<span class="subst">$&#123;config.kimi.apiUrl&#125;</span>/explain`</span>, &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">        <span class="attr">headers</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">`Bearer <span class="subst">$&#123;config.kimi.apiKey&#125;</span>`</span>,</span><br><span class="line">            <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; text &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="5-3-调试与发布-🚀"><a href="#5-3-调试与发布-🚀" class="headerlink" title="5.3 调试与发布 🚀"></a>5.3 调试与发布 🚀</h3><h4 id="5-3-1-本地调试"><a href="#5-3-1-本地调试" class="headerlink" title="5.3.1 本地调试"></a>5.3.1 本地调试</h4><ol><li><p><strong>加载插件</strong></p><ul><li>打开Chrome扩展程序页面</li><li>启用开发者模式</li><li>加载已解压的扩展程序</li><li>选择插件目录</li></ul></li><li><p><strong>调试技巧</strong></p><ul><li>使用Chrome DevTools</li><li>查看Console输出</li><li>测试各项功能</li><li>检查API响应</li></ul></li></ol><h4 id="5-3-2-问题修复"><a href="#5-3-2-问题修复" class="headerlink" title="5.3.2 问题修复"></a>5.3.2 问题修复</h4><ol><li><p><strong>图片资源问题</strong><br><img src="/images/cursor/1749113898720.png" alt="图片错误"></p><ul><li>添加必要的图标文件</li><li>确保路径正确</li></ul></li><li><p><strong>模块导入错误</strong><br><img src="/images/cursor/1749114738303.png" alt="导入错误"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修改为</span></span><br><span class="line"><span class="keyword">import</span> &#123; config &#125; <span class="keyword">from</span> <span class="string">&#x27;./config.js&#x27;</span>;</span><br><span class="line"><span class="comment">// 改为</span></span><br><span class="line"><span class="keyword">const</span> config = <span class="variable language_">window</span>.<span class="property">config</span>;</span><br></pre></td></tr></table></figure></li><li><p><strong>功能验证</strong><br><img src="/images/cursor/1749114867360.png" alt="功能测试"></p><ul><li>测试文本选择</li><li>验证API调用</li><li>检查UI显示</li><li>确认功能正常</li></ul></li></ol><h2 id="📚-延伸阅读"><a href="#📚-延伸阅读" class="headerlink" title="📚 延伸阅读"></a>📚 延伸阅读</h2><ul><li><a href="/git%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/">Git操作指南</a> - 学习版本控制基础</li><li><a href="/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/">函数式编程</a> - 提升代码质量和可维护性</li><li><a href="/20251002%E8%BF%91%E6%9C%9F%E8%A7%84%E5%88%92_%E6%96%B0/">近期规划</a> - 了解学习路线图</li></ul><h2 id="💡-学习建议"><a href="#💡-学习建议" class="headerlink" title="💡 学习建议"></a>💡 学习建议</h2><ol><li><p><strong>循序渐进</strong></p><ul><li>先掌握基础功能(Tab补全、Chat对话)</li><li>再学习高级特性(Rules、@符号)</li><li>最后尝试实战项目</li></ul></li><li><p><strong>实践为主</strong></p><ul><li>在日常开发中多使用</li><li>从简单任务开始</li><li>逐步挑战复杂项目</li></ul></li><li><p><strong>善用文档</strong></p><ul><li>经常查阅官方文档</li><li>关注版本更新</li><li>参与社区讨论</li></ul></li><li><p><strong>知识整合</strong></p><ul><li>结合版本控制(Git)</li><li>配合函数式编程思想</li><li>融入开发工作流</li></ul></li></ol><h2 id="🔗-相关资源"><a href="#🔗-相关资源" class="headerlink" title="🔗 相关资源"></a>🔗 相关资源</h2><ol><li><p><strong>官方资源</strong></p><ul><li><a href="https://cursor.sh/">Cursor官网</a></li><li><a href="https://cursor.sh/docs">Cursor文档</a></li><li><a href="https://github.com/getcursor/cursor">GitHub仓库</a></li></ul></li><li><p><strong>社区资源</strong></p><ul><li><a href="https://discord.gg/cursor">Discord社区</a></li><li><a href="https://www.reddit.com/r/cursor">Reddit论坛</a></li><li><a href="https://stackoverflow.com/questions/tagged/cursor-editor">Stack Overflow</a></li></ul></li><li><p><strong>中文资源</strong></p><ul><li><a href="https://juejin.cn/tag/Cursor">掘金专栏</a></li><li><a href="https://www.zhihu.com/topic/cursor">知乎话题</a></li><li><a href="https://search.bilibili.com/all?keyword=cursor%20ai">B站教程</a></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> AI工具教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> 开发工具 </tag>
            
            <tag> Cursor </tag>
            
            <tag> AI编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java函数式编程详解：从Lambda到Stream的完整指南</title>
      <link href="//java-functional-programming-guide/"/>
      <url>//java-functional-programming-guide/</url>
      
        <content type="html"><![CDATA[<h1 id="📚-参考资源"><a href="#📚-参考资源" class="headerlink" title="📚 参考资源"></a>📚 参考资源</h1><p>本文档在编写过程中参考了以下优质资源，感谢这些作者和平台的分享：</p><h2 id="🎥-视频教程"><a href="#🎥-视频教程" class="headerlink" title="🎥 视频教程"></a>🎥 视频教程</h2><ul><li><strong><a href="https://www.bilibili.com/video/BV1fz421C7tj/?spm_id_from=333.337.search-card.all.click&vd_source=2d617d5367ab8a8bf8a5ed469356eb71">Java函数式编程完整教程</a></strong> - B站优质Java函数式编程教程，系统讲解了Lambda表达式和Stream API的使用</li></ul><h2 id="📖-技术博客"><a href="#📖-技术博客" class="headerlink" title="📖 技术博客"></a>📖 技术博客</h2><ul><li><strong><a href="https://mofan212.github.io/posts/Java-Lambda-Expression-And-Functional-Programming/index.html">Java Lambda Expression And Functional Programming</a></strong> - 默烦的技术博客，深入分析了Lambda表达式的底层实现原理</li></ul><h2 id="📚-推荐阅读"><a href="#📚-推荐阅读" class="headerlink" title="📚 推荐阅读"></a>📚 推荐阅读</h2><h2 id="🔗-相关链接"><a href="#🔗-相关链接" class="headerlink" title="🔗 相关链接"></a>🔗 相关链接</h2><ul><li><a href="https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html">Oracle官方Lambda表达式教程</a></li><li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html">Oracle官方Stream API文档</a></li><li><a href="https://tech.meituan.com/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html">美团技术团队函数式编程系列</a></li></ul><hr><h1 id="🚀-函数式编程基础"><a href="#🚀-函数式编程基础" class="headerlink" title="🚀 函数式编程基础"></a>🚀 函数式编程基础</h1><h2 id="📖-什么是函数"><a href="#📖-什么是函数" class="headerlink" title="📖 什么是函数"></a>📖 什么是函数</h2><p>函数即规则。在数学上，函数是一种映射关系，将输入值映射到输出值。</p><h3 id="🔢-数学函数示例"><a href="#🔢-数学函数示例" class="headerlink" title="🔢 数学函数示例"></a>🔢 数学函数示例</h3><p>考虑函数 $f(x) &#x3D; x^2$：</p><table><thead><tr><th>INPUT</th><th>f(x) &#x3D; x²</th><th>OUTPUT</th></tr></thead><tbody><tr><td>1</td><td>1²</td><td>1</td></tr><tr><td>2</td><td>2²</td><td>4</td></tr><tr><td>3</td><td>3²</td><td>9</td></tr><tr><td>4</td><td>4²</td><td>16</td></tr><tr><td>5</td><td>5²</td><td>25</td></tr><tr><td>…</td><td>…</td><td>…</td></tr></tbody></table><h3 id="函数的核心特性"><a href="#函数的核心特性" class="headerlink" title="函数的核心特性"></a>函数的核心特性</h3><ol><li><strong>确定性</strong>：相同的输入总是产生相同的输出</li><li><strong>无副作用</strong>：函数执行不会改变外部状态</li><li><strong>不变性</strong>：函数的执行规则永远不变</li></ol><blockquote><p>💡 <strong>编程启示</strong>：在Java中，方法本质上也是函数，但绑定在对象之上。函数式编程强调不变性，这在多线程编程中意味着线程安全。</p></blockquote><h1 id="🎯-Lambda表达式与函数式接口"><a href="#🎯-Lambda表达式与函数式接口" class="headerlink" title="🎯 Lambda表达式与函数式接口"></a>🎯 Lambda表达式与函数式接口</h1><h2 id="📝-Lambda表达式基础"><a href="#📝-Lambda表达式基础" class="headerlink" title="📝 Lambda表达式基础"></a>📝 Lambda表达式基础</h2><p>在Java中，Lambda表达式是函数式编程的核心语法，它允许我们将函数作为参数传递。</p><h3 id="🔄-Lambda表达式的两种形式"><a href="#🔄-Lambda表达式的两种形式" class="headerlink" title="🔄 Lambda表达式的两种形式"></a>🔄 Lambda表达式的两种形式</h3><ol><li><strong>Lambda表达式</strong>：<code>(参数) -&gt; 表达式</code></li><li><strong>方法引用</strong>：<code>类名::方法名</code> 或 <code>对象::方法名</code></li></ol><h3 id="📋-Lambda表达式语法规则"><a href="#📋-Lambda表达式语法规则" class="headerlink" title="📋 Lambda表达式语法规则"></a>📋 Lambda表达式语法规则</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 单行表达式，可以省略大括号和return</span></span><br><span class="line">(<span class="type">int</span> a, <span class="type">int</span> b) -&gt; a + b</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 多行代码，必须使用大括号和return</span></span><br><span class="line">(<span class="type">int</span> a, <span class="type">int</span> b) -&gt; &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> a + b;</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 参数类型可以省略（类型推断）</span></span><br><span class="line">(a, b) -&gt; a + b</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 单个参数可以省略括号</span></span><br><span class="line">a -&gt; a * <span class="number">2</span></span><br></pre></td></tr></table></figure><h3 id="🔌-函数式接口"><a href="#🔌-函数式接口" class="headerlink" title="🔌 函数式接口"></a>🔌 函数式接口</h3><p>Lambda表达式的类型由<strong>函数式接口</strong>决定。函数式接口是只包含一个抽象方法的接口。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Calculator</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">calculate</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="💻-实际代码示例"><a href="#💻-实际代码示例" class="headerlink" title="💻 实际代码示例"></a>💻 实际代码示例</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LambdaExamples</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 自定义函数式接口</span></span><br><span class="line">    <span class="meta">@FunctionalInterface</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IntCalculator</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="title function_">calculate</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@FunctionalInterface</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DoubleCalculator</span> &#123;</span><br><span class="line">        <span class="type">double</span> <span class="title function_">calculate</span><span class="params">(<span class="type">double</span> a, <span class="type">double</span> b)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 明确指定参数类型</span></span><br><span class="line">        <span class="type">IntCalculator</span> <span class="variable">lambda1</span> <span class="operator">=</span> (<span class="type">int</span> a, <span class="type">int</span> b) -&gt; a + b;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 使用类型推断（推荐）</span></span><br><span class="line">        <span class="type">IntCalculator</span> <span class="variable">lambda2</span> <span class="operator">=</span> (a, b) -&gt; a + b;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 多行代码</span></span><br><span class="line">        <span class="type">IntCalculator</span> <span class="variable">lambda3</span> <span class="operator">=</span> (a, b) -&gt; &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> a + b;</span><br><span class="line">        <span class="keyword">return</span> c + <span class="number">1</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. 不同返回类型</span></span><br><span class="line">        <span class="type">DoubleCalculator</span> <span class="variable">lambda4</span> <span class="operator">=</span> (a, b) -&gt; a + b;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 测试</span></span><br><span class="line">        System.out.println(lambda1.calculate(<span class="number">5</span>, <span class="number">3</span>)); <span class="comment">// 输出: 8</span></span><br><span class="line">        System.out.println(lambda2.calculate(<span class="number">5</span>, <span class="number">3</span>)); <span class="comment">// 输出: 8</span></span><br><span class="line">        System.out.println(lambda3.calculate(<span class="number">5</span>, <span class="number">3</span>)); <span class="comment">// 输出: 9</span></span><br><span class="line">        System.out.println(lambda4.calculate(<span class="number">5.5</span>, <span class="number">3.2</span>)); <span class="comment">// 输出: 8.7</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="🔗-方法引用"><a href="#🔗-方法引用" class="headerlink" title="🔗 方法引用"></a>🔗 方法引用</h2><p>方法引用是Lambda表达式的简化写法，当Lambda表达式只是调用一个已存在的方法时，可以使用方法引用。</p><h3 id="📚-方法引用的四种类型"><a href="#📚-方法引用的四种类型" class="headerlink" title="📚 方法引用的四种类型"></a>📚 方法引用的四种类型</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MethodReferenceExamples</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 学生类</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">        <span class="keyword">private</span> String sex;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, String sex)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">            <span class="built_in">this</span>.age = age;</span><br><span class="line">            <span class="built_in">this</span>.sex = sex;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123; <span class="keyword">return</span> name; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123; <span class="keyword">return</span> age; &#125;</span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getSex</span><span class="params">()</span> &#123; <span class="keyword">return</span> sex; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 类名::静态方法</span></span><br><span class="line">        <span class="type">IntBinaryOperator</span> <span class="variable">max</span> <span class="operator">=</span> Math::max;</span><br><span class="line">        System.out.println(max.applyAsInt(<span class="number">5</span>, <span class="number">3</span>)); <span class="comment">// 输出: 5</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2. 类名::实例方法</span></span><br><span class="line">        Function&lt;Student, String&gt; getName = Student::getName;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">20</span>, <span class="string">&quot;男&quot;</span>);</span><br><span class="line">        System.out.println(getName.apply(student)); <span class="comment">// 输出: 张三</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3. 对象::实例方法</span></span><br><span class="line">        Consumer&lt;String&gt; printer = System.out::println;</span><br><span class="line">        printer.accept(<span class="string">&quot;Hello World&quot;</span>); <span class="comment">// 输出: Hello World</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 4. 类名::new (构造方法引用)</span></span><br><span class="line">        Supplier&lt;Student&gt; studentCreator = Student::<span class="keyword">new</span>;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">newStudent</span> <span class="operator">=</span> studentCreator.get();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="⚖️-方法引用与Lambda表达式对比"><a href="#⚖️-方法引用与Lambda表达式对比" class="headerlink" title="⚖️ 方法引用与Lambda表达式对比"></a>⚖️ 方法引用与Lambda表达式对比</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MethodReferenceComparison</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name)</span> &#123; <span class="built_in">this</span>.name = name; &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123; <span class="keyword">return</span> name; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123; <span class="built_in">this</span>.name = name; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 方法引用 vs Lambda表达式对比</span></span><br><span class="line">        <span class="comment">// 1. 静态方法引用</span></span><br><span class="line">        Supplier&lt;Double&gt; random1 = Math::random;           <span class="comment">// 方法引用</span></span><br><span class="line">        Supplier&lt;Double&gt; random2 = () -&gt; Math.random();  <span class="comment">// Lambda表达式</span></span><br><span class="line">        <span class="comment">// 2. 实例方法引用</span></span><br><span class="line">        Function&lt;Student, String&gt; getName1 = Student::getName;           <span class="comment">// 方法引用</span></span><br><span class="line">        Function&lt;Student, String&gt; getName2 = student -&gt; student.getName(); <span class="comment">// Lambda表达式</span></span><br><span class="line">        <span class="comment">// 3. 对象方法引用</span></span><br><span class="line">        Consumer&lt;String&gt; print1 = System.out::println;           <span class="comment">// 方法引用</span></span><br><span class="line">        Consumer&lt;String&gt; print2 = str -&gt; System.out.println(str); <span class="comment">// Lambda表达式</span></span><br><span class="line">        <span class="comment">// 4. 构造方法引用</span></span><br><span class="line">        Supplier&lt;Student&gt; create1 = Student::<span class="keyword">new</span>;           <span class="comment">// 方法引用</span></span><br><span class="line">        Supplier&lt;Student&gt; create2 = () -&gt; <span class="keyword">new</span> <span class="title class_">Student</span>();     <span class="comment">// Lambda表达式        </span></span><br><span class="line">        <span class="comment">// 测试</span></span><br><span class="line">        System.out.println(random1.get());</span><br><span class="line">        System.out.println(getName1.apply(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>)));</span><br><span class="line">        print1.accept(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">        System.out.println(create1.get());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>💡 <strong>选择建议</strong>：当Lambda表达式只是简单调用一个方法时，使用方法引用更简洁；当需要复杂逻辑时，使用Lambda表达式。</p></blockquote><h1 id="🛠️-Java内置函数式接口"><a href="#🛠️-Java内置函数式接口" class="headerlink" title="🛠️ Java内置函数式接口"></a>🛠️ Java内置函数式接口</h1><h2 id="🎨-自定义函数式接口"><a href="#🎨-自定义函数式接口" class="headerlink" title="🎨 自定义函数式接口"></a>🎨 自定义函数式接口</h2><p>在Java 8之前，我们需要自己定义函数式接口。现在虽然有了内置接口，但了解自定义接口有助于理解函数式编程的本质。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomFunctionalInterfaces</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 自定义函数式接口示例</span></span><br><span class="line">    <span class="meta">@FunctionalInterface</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IntPredicate</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span> a)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@FunctionalInterface</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IntCalculator</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="title function_">calculate</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@FunctionalInterface</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentExtractor</span>&lt;T&gt; &#123;</span><br><span class="line">        T <span class="title function_">getInfo</span><span class="params">(Student student)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@FunctionalInterface</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TriFunction</span>&lt;T, U, V, R&gt; &#123;</span><br><span class="line">        R <span class="title function_">apply</span><span class="params">(T t, U u, V v)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用示例</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">IntPredicate</span> <span class="variable">isEven</span> <span class="operator">=</span> a -&gt; (a &amp; <span class="number">1</span>) == <span class="number">0</span>;</span><br><span class="line">        <span class="type">IntCalculator</span> <span class="variable">add</span> <span class="operator">=</span> (a, b) -&gt; a + b;</span><br><span class="line">        StudentExtractor&lt;String&gt; getName = Student::getName;</span><br><span class="line">        TriFunction&lt;Integer, Integer, Integer, Integer&gt; addThree = (a, b, c) -&gt; a + b + c;</span><br><span class="line">        </span><br><span class="line">        System.out.println(isEven.test(<span class="number">4</span>));        <span class="comment">// true</span></span><br><span class="line">        System.out.println(add.calculate(<span class="number">3</span>, <span class="number">5</span>));   <span class="comment">// 8</span></span><br><span class="line">        System.out.println(addThree.apply(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)); <span class="comment">// 6</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="🏗️-Java内置函数式接口"><a href="#🏗️-Java内置函数式接口" class="headerlink" title="🏗️ Java内置函数式接口"></a>🏗️ Java内置函数式接口</h2><p>Java 8提供了丰富的内置函数式接口，我们不需要重复造轮子：</p><h3 id="⭐-核心函数式接口"><a href="#⭐-核心函数式接口" class="headerlink" title="⭐ 核心函数式接口"></a>⭐ 核心函数式接口</h3><table><thead><tr><th>接口</th><th>参数</th><th>返回值</th><th>用途</th><th>示例</th></tr></thead><tbody><tr><td><code>Function&lt;T,R&gt;</code></td><td>1个T</td><td>R</td><td>转换</td><td><code>Function&lt;String,Integer&gt; f = Integer::parseInt</code></td></tr><tr><td><code>BiFunction&lt;T,U,R&gt;</code></td><td>2个(T,U)</td><td>R</td><td>二元转换</td><td><code>BiFunction&lt;String,String,Integer&gt; f = (a,b) -&gt; a.length() + b.length()</code></td></tr><tr><td><code>Consumer&lt;T&gt;</code></td><td>1个T</td><td>void</td><td>消费</td><td><code>Consumer&lt;String&gt; c = System.out::println</code></td></tr><tr><td><code>BiConsumer&lt;T,U&gt;</code></td><td>2个(T,U)</td><td>void</td><td>二元消费</td><td><code>BiConsumer&lt;String,Integer&gt; c = (s,i) -&gt; System.out.println(s + i)</code></td></tr><tr><td><code>Predicate&lt;T&gt;</code></td><td>1个T</td><td>boolean</td><td>判断</td><td><code>Predicate&lt;String&gt; p = s -&gt; s.length() &gt; 5</code></td></tr><tr><td><code>BiPredicate&lt;T,U&gt;</code></td><td>2个(T,U)</td><td>boolean</td><td>二元判断</td><td><code>BiPredicate&lt;String,String&gt; p = (a,b) -&gt; a.equals(b)</code></td></tr><tr><td><code>Supplier&lt;T&gt;</code></td><td>无</td><td>T</td><td>提供</td><td><code>Supplier&lt;String&gt; s = () -&gt; &quot;Hello&quot;</code></td></tr></tbody></table><h3 id="🎯-特殊化接口"><a href="#🎯-特殊化接口" class="headerlink" title="🎯 特殊化接口"></a>🎯 特殊化接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BuiltInFunctionalInterfaces</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. Function系列 - 有参有返回值</span></span><br><span class="line">        Function&lt;String, Integer&gt; stringToInt = Integer::parseInt;</span><br><span class="line">        BiFunction&lt;String, String, Integer&gt; addLengths = (a, b) -&gt; a.length() + b.length();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2. Consumer系列 - 有参无返回值</span></span><br><span class="line">        Consumer&lt;String&gt; printer = System.out::println;</span><br><span class="line">        BiConsumer&lt;String, Integer&gt; printWithNumber = (s, i) -&gt; System.out.println(s + <span class="string">&quot;: &quot;</span> + i);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3. Predicate系列 - 有参返回boolean</span></span><br><span class="line">        Predicate&lt;Integer&gt; isEven = n -&gt; n % <span class="number">2</span> == <span class="number">0</span>;</span><br><span class="line">        BiPredicate&lt;String, String&gt; isEqual = String::equals;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 4. Supplier系列 - 无参有返回值</span></span><br><span class="line">        Supplier&lt;String&gt; greeting = () -&gt; <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">        Supplier&lt;LocalDateTime&gt; now = LocalDateTime::now;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 测试</span></span><br><span class="line">        System.out.println(stringToInt.apply(<span class="string">&quot;123&quot;</span>));     <span class="comment">// 123</span></span><br><span class="line">        System.out.println(addLengths.apply(<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;World&quot;</span>)); <span class="comment">// 10</span></span><br><span class="line">        printer.accept(<span class="string">&quot;Hello&quot;</span>);                          <span class="comment">// Hello</span></span><br><span class="line">        printWithNumber.accept(<span class="string">&quot;Count&quot;</span>, <span class="number">5</span>);              <span class="comment">// Count: 5</span></span><br><span class="line">        System.out.println(isEven.test(<span class="number">4</span>));               <span class="comment">// true</span></span><br><span class="line">        System.out.println(isEqual.test(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;hello&quot;</span>)); <span class="comment">// true</span></span><br><span class="line">        System.out.println(greeting.get());               <span class="comment">// Hello World</span></span><br><span class="line">        System.out.println(now.get());                   <span class="comment">// 当前时间</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="🚀-原始类型特化接口"><a href="#🚀-原始类型特化接口" class="headerlink" title="🚀 原始类型特化接口"></a>🚀 原始类型特化接口</h3><p>Java还提供了原始类型的特化接口，避免装箱拆箱。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// IntFunction, LongFunction, DoubleFunction</span></span><br><span class="line">IntFunction&lt;String&gt; intToString = String::valueOf;</span><br><span class="line"></span><br><span class="line"><span class="comment">// IntConsumer, LongConsumer, DoubleConsumer  </span></span><br><span class="line"><span class="type">IntConsumer</span> <span class="variable">intPrinter</span> <span class="operator">=</span> System.out::println;</span><br><span class="line"></span><br><span class="line"><span class="comment">// IntPredicate, LongPredicate, DoublePredicate</span></span><br><span class="line"><span class="type">IntPredicate</span> <span class="variable">isPositive</span> <span class="operator">=</span> n -&gt; n &gt; <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// IntSupplier, LongSupplier, DoubleSupplier</span></span><br><span class="line"><span class="type">IntSupplier</span> <span class="variable">randomInt</span> <span class="operator">=</span> () -&gt; <span class="keyword">new</span> <span class="title class_">Random</span>().nextInt(<span class="number">100</span>);</span><br></pre></td></tr></table></figure><h2 id="🎪-实际应用示例"><a href="#🎪-实际应用示例" class="headerlink" title="🎪 实际应用示例"></a>🎪 实际应用示例</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FunctionalInterfaceExamples</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">        <span class="keyword">private</span> String sex;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, String sex)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">            <span class="built_in">this</span>.age = age;</span><br><span class="line">            <span class="built_in">this</span>.sex = sex;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123; <span class="keyword">return</span> name; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123; <span class="keyword">return</span> age; &#125;</span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getSex</span><span class="params">()</span> &#123; <span class="keyword">return</span> sex; &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Student&#123;name=&#x27;&quot;</span> + name + <span class="string">&quot;&#x27;, age=&quot;</span> + age + <span class="string">&quot;, sex=&#x27;&quot;</span> + sex + <span class="string">&quot;&#x27;&#125;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. Predicate - 条件判断</span></span><br><span class="line">        Predicate&lt;Integer&gt; isEven = a -&gt; (a &amp; <span class="number">1</span>) == <span class="number">0</span>;</span><br><span class="line">        Predicate&lt;Integer&gt; isPrime = a -&gt; BigDecimal.valueOf(a).toBigInteger().isProbablePrime(<span class="number">100</span>);</span><br><span class="line">        Predicate&lt;Student&gt; isAdult = student -&gt; student.getAge() &gt; <span class="number">18</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2. Function - 数据转换</span></span><br><span class="line">        Function&lt;Student, String&gt; getName = Student::getName;</span><br><span class="line">        Function&lt;Student, Integer&gt; getAge = Student::getAge;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3. BiFunction - 二元操作</span></span><br><span class="line">        BiFunction&lt;Integer, Integer, Integer&gt; add = Integer::sum;</span><br><span class="line">        BiFunction&lt;Integer, Integer, Integer&gt; subtract = (a, b) -&gt; a - b;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 4. TriFunction - 三元操作（自定义）</span></span><br><span class="line">        TriFunction&lt;Integer, Integer, Integer, Integer&gt; addThree = (a, b, c) -&gt; a + b + c;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 5. Supplier - 数据提供</span></span><br><span class="line">        Supplier&lt;Student&gt; studentSupplier = () -&gt; <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">18</span>, <span class="string">&quot;男&quot;</span>);</span><br><span class="line">        Supplier&lt;List&lt;Student&gt;&gt; studentListSupplier = () -&gt; &#123;</span><br><span class="line">            List&lt;Student&gt; students = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            students.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">18</span>, <span class="string">&quot;男&quot;</span>));</span><br><span class="line">            students.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">20</span>, <span class="string">&quot;女&quot;</span>));</span><br><span class="line">            students.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;王五&quot;</span>, <span class="number">16</span>, <span class="string">&quot;男&quot;</span>));</span><br><span class="line">            <span class="keyword">return</span> students;</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 测试</span></span><br><span class="line">        System.out.println(<span class="string">&quot;偶数判断: &quot;</span> + isEven.test(<span class="number">4</span>));           <span class="comment">// true</span></span><br><span class="line">        System.out.println(<span class="string">&quot;素数判断: &quot;</span> + isPrime.test(<span class="number">17</span>));         <span class="comment">// true</span></span><br><span class="line">        System.out.println(<span class="string">&quot;加法运算: &quot;</span> + add.apply(<span class="number">3</span>, <span class="number">5</span>));         <span class="comment">// 8</span></span><br><span class="line">        System.out.println(<span class="string">&quot;减法运算: &quot;</span> + subtract.apply(<span class="number">10</span>, <span class="number">3</span>));   <span class="comment">// 7</span></span><br><span class="line">        System.out.println(<span class="string">&quot;三元加法: &quot;</span> + addThree.apply(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)); <span class="comment">// 6</span></span><br><span class="line">        </span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> studentSupplier.get();</span><br><span class="line">        System.out.println(<span class="string">&quot;学生信息: &quot;</span> + student);</span><br><span class="line">        System.out.println(<span class="string">&quot;学生姓名: &quot;</span> + getName.apply(student));</span><br><span class="line">        System.out.println(<span class="string">&quot;是否成年: &quot;</span> + isAdult.test(student));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 高阶函数示例</span></span><br><span class="line">        List&lt;Student&gt; students = studentListSupplier.get();</span><br><span class="line">        students.stream()</span><br><span class="line">                .filter(isAdult)</span><br><span class="line">                .map(getName)</span><br><span class="line">                .forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 高阶函数：接受函数作为参数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">testPredicate</span><span class="params">(Student student, Predicate&lt;Student&gt; predicate)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (predicate.test(student)) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;条件满足: &quot;</span> + student);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;条件不满足: &quot;</span> + student);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 🔍 方法引用详解</span><br><span class="line"></span><br><span class="line">方法引用是Lambda表达式的简化形式，当Lambda表达式只是调用一个已存在的方法时，可以使用方法引用。</span><br><span class="line">## 🎭 六种方法引用类型</span><br><span class="line"></span><br><span class="line">### 1️⃣ 类名::静态方法</span><br><span class="line">调用类的静态方法，参数类型和数量必须匹配。</span><br><span class="line">```java</span><br><span class="line">public class StaticMethodReference &#123;</span><br><span class="line">    </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // Math类的静态方法</span><br><span class="line">        Function&lt;Double, Double&gt; abs = Math::abs;</span><br><span class="line">        BiFunction&lt;Integer, Integer, Integer&gt; max = Math::max;</span><br><span class="line">        </span><br><span class="line">        // 自定义静态方法</span><br><span class="line">        Function&lt;String, String&gt; toUpperCase = StringUtils::toUpperCase;</span><br><span class="line">        </span><br><span class="line">        System.out.println(abs.apply(-5.5));        // 5.5</span><br><span class="line">        System.out.println(max.apply(10, 20));      // 20</span><br><span class="line">        System.out.println(toUpperCase.apply(&quot;hello&quot;)); // HELLO</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    static class StringUtils &#123;</span><br><span class="line">        public static String toUpperCase(String str) &#123;</span><br><span class="line">            return str.toUpperCase();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2️⃣-类名-实例方法"><a href="#2️⃣-类名-实例方法" class="headerlink" title="2️⃣ 类名::实例方法"></a>2️⃣ 类名::实例方法</h3><p>调用实例方法，第一个参数作为方法调用的对象。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InstanceMethodReference</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// String的实例方法</span></span><br><span class="line">        Function&lt;String, Integer&gt; getLength = String::length;</span><br><span class="line">        BiFunction&lt;String, String, String&gt; concat = String::concat;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 自定义类的实例方法</span></span><br><span class="line">        Function&lt;Student, String&gt; getName = Student::getName;</span><br><span class="line">        </span><br><span class="line">        System.out.println(getLength.apply(<span class="string">&quot;Hello&quot;</span>));           <span class="comment">// 5</span></span><br><span class="line">        System.out.println(concat.apply(<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;World&quot;</span>));     <span class="comment">// HelloWorld</span></span><br><span class="line">        System.out.println(getName.apply(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">20</span>, <span class="string">&quot;男&quot;</span>))); <span class="comment">// 张三</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3️⃣-对象-实例方法"><a href="#3️⃣-对象-实例方法" class="headerlink" title="3️⃣ 对象::实例方法"></a>3️⃣ 对象::实例方法</h3><p>调用特定对象的实例方法。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ObjectMethodReference</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// System.out的实例方法</span></span><br><span class="line">        Consumer&lt;String&gt; printer = System.out::println;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 自定义对象的实例方法</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        Consumer&lt;String&gt; append = sb::append;</span><br><span class="line">        </span><br><span class="line">        printer.accept(<span class="string">&quot;Hello World&quot;</span>);  <span class="comment">// Hello World</span></span><br><span class="line">        append.accept(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">        append.accept(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        append.accept(<span class="string">&quot;World&quot;</span>);</span><br><span class="line">        System.out.println(sb.toString()); <span class="comment">// Hello World</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4️⃣-类名-new-构造方法引用"><a href="#4️⃣-类名-new-构造方法引用" class="headerlink" title="4️⃣ 类名::new (构造方法引用)"></a>4️⃣ 类名::new (构造方法引用)</h3><p>调用构造方法创建对象。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConstructorReference</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = <span class="string">&quot;Unknown&quot;</span>;</span><br><span class="line">            <span class="built_in">this</span>.age = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">            <span class="built_in">this</span>.age = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">            <span class="built_in">this</span>.age = age;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Person&#123;name=&#x27;&quot;</span> + name + <span class="string">&quot;&#x27;, age=&quot;</span> + age + <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 无参构造方法</span></span><br><span class="line">        Supplier&lt;Person&gt; createDefault = Person::<span class="keyword">new</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 单参构造方法</span></span><br><span class="line">        Function&lt;String, Person&gt; createWithName = Person::<span class="keyword">new</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 双参构造方法</span></span><br><span class="line">        BiFunction&lt;String, Integer, Person&gt; createWithNameAndAge = Person::<span class="keyword">new</span>;</span><br><span class="line">        </span><br><span class="line">        System.out.println(createDefault.get());                           <span class="comment">// Person&#123;name=&#x27;Unknown&#x27;, age=0&#125;</span></span><br><span class="line">        System.out.println(createWithName.apply(<span class="string">&quot;张三&quot;</span>));                 <span class="comment">// Person&#123;name=&#x27;张三&#x27;, age=0&#125;</span></span><br><span class="line">        System.out.println(createWithNameAndAge.apply(<span class="string">&quot;李四&quot;</span>, <span class="number">25</span>));        <span class="comment">// Person&#123;name=&#x27;李四&#x27;, age=25&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5️⃣-this-实例方法"><a href="#5️⃣-this-实例方法" class="headerlink" title="5️⃣ this::实例方法"></a>5️⃣ this::实例方法</h3><p>在类内部引用当前对象的实例方法。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThisMethodReference</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">processStudents</span><span class="params">(List&lt;Student&gt; students)</span> &#123;</span><br><span class="line">        <span class="comment">// 使用this::isAdult作为过滤器</span></span><br><span class="line">        students.stream()</span><br><span class="line">                .filter(<span class="built_in">this</span>::isAdult)</span><br><span class="line">                .forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isAdult</span><span class="params">(Student student)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> student.getAge() &gt;= <span class="number">18</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ThisMethodReference</span> <span class="variable">processor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThisMethodReference</span>();</span><br><span class="line">        List&lt;Student&gt; students = Arrays.asList(</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">20</span>, <span class="string">&quot;男&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">16</span>, <span class="string">&quot;女&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;王五&quot;</span>, <span class="number">22</span>, <span class="string">&quot;男&quot;</span>)</span><br><span class="line">        );</span><br><span class="line">        processor.processStudents(students);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6️⃣-super-实例方法"><a href="#6️⃣-super-实例方法" class="headerlink" title="6️⃣ super::实例方法"></a>6️⃣ super::实例方法</h3><p>在子类中引用父类的实例方法。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SuperMethodReference</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">        <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">printInfo</span><span class="params">(String message)</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Parent: &quot;</span> + message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">printInfo</span><span class="params">(String message)</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Child: &quot;</span> + message);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">processData</span><span class="params">(List&lt;String&gt; data)</span> &#123;</span><br><span class="line">            <span class="comment">// 使用super::printInfo调用父类方法</span></span><br><span class="line">            data.forEach(<span class="built_in">super</span>::printInfo);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Child</span> <span class="variable">child</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Child</span>();</span><br><span class="line">        List&lt;String&gt; data = Arrays.asList(<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;World&quot;</span>, <span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        child.processData(data);</span><br><span class="line">        <span class="comment">// 输出:</span></span><br><span class="line">        <span class="comment">// Parent: Hello</span></span><br><span class="line">        <span class="comment">// Parent: World  </span></span><br><span class="line">        <span class="comment">// Parent: Java</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="📖-方法引用选择指南"><a href="#📖-方法引用选择指南" class="headerlink" title="📖 方法引用选择指南"></a>📖 方法引用选择指南</h2><table><thead><tr><th>场景</th><th>方法引用类型</th><th>示例</th></tr></thead><tbody><tr><td>调用静态方法</td><td><code>类名::静态方法</code></td><td><code>Math::max</code></td></tr><tr><td>调用实例方法</td><td><code>类名::实例方法</code></td><td><code>String::length</code></td></tr><tr><td>调用对象方法</td><td><code>对象::实例方法</code></td><td><code>System.out::println</code></td></tr><tr><td>创建对象</td><td><code>类名::new</code></td><td><code>ArrayList::new</code></td></tr><tr><td>类内部引用</td><td><code>this::方法</code></td><td><code>this::isValid</code></td></tr><tr><td>子类引用父类</td><td><code>super::方法</code></td><td><code>super::toString</code></td></tr></tbody></table><blockquote><p>💡 <strong>最佳实践</strong>：优先使用方法引用，它比Lambda表达式更简洁，意图更明确。</p></blockquote><h1 id="🔐-闭包与柯里化"><a href="#🔐-闭包与柯里化" class="headerlink" title="🔐 闭包与柯里化"></a>🔐 闭包与柯里化</h1><h2 id="🎪-闭包（Closure）"><a href="#🎪-闭包（Closure）" class="headerlink" title="🎪 闭包（Closure）"></a>🎪 闭包（Closure）</h2><p>闭包是指<strong>函数对象</strong>与<strong>外部变量</strong>绑定在一起形成的整体。在Java中，Lambda表达式可以捕获外部作用域的变量。</p><h3 id="🧩-闭包的基本概念"><a href="#🧩-闭包的基本概念" class="headerlink" title="🧩 闭包的基本概念"></a>🧩 闭包的基本概念</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClosureExample</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">10</span>; <span class="comment">// 外部变量</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Lambda表达式捕获了外部变量x，形成闭包</span></span><br><span class="line">        Function&lt;Integer, Integer&gt; addX = y -&gt; x + y;</span><br><span class="line">        </span><br><span class="line">        System.out.println(addX.apply(<span class="number">5</span>)); <span class="comment">// 输出: 15</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="⚠️-闭包的限制"><a href="#⚠️-闭包的限制" class="headerlink" title="⚠️ 闭包的限制"></a>⚠️ 闭包的限制</h3><p>Java中的闭包变量必须是<strong>final</strong>或<strong>effectively final</strong>的：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClosureLimitations</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 显式final</span></span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">        Function&lt;Integer, Integer&gt; addA = y -&gt; a + y;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2. effectively final（没有重新赋值）</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line">        Function&lt;Integer, Integer&gt; addB = y -&gt; b + y;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3. 错误示例：不是effectively final</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line">        <span class="comment">// c = 40; // 如果取消注释，下面的代码会编译错误，体现了闭包不可变性和无副作用!</span></span><br><span class="line">        <span class="comment">// Function&lt;Integer, Integer&gt; addC = y -&gt; c + y; // 编译错误</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="🎯-闭包的实际应用"><a href="#🎯-闭包的实际应用" class="headerlink" title="🎯 闭包的实际应用"></a>🎯 闭包的实际应用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClosureApplications</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 创建多个任务，每个任务有不同的编号</span></span><br><span class="line">        List&lt;Runnable&gt; tasks = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">taskId</span> <span class="operator">=</span> i + <span class="number">1</span>; <span class="comment">// 每次循环创建新的变量</span></span><br><span class="line">            <span class="type">Runnable</span> <span class="variable">task</span> <span class="operator">=</span> () -&gt; System.out.println(</span><br><span class="line">                Thread.currentThread().getName() + <span class="string">&quot;: 执行任务&quot;</span> + taskId</span><br><span class="line">            );</span><br><span class="line">            tasks.add(task);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 使用虚拟线程执行任务</span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newVirtualThreadPerTaskExecutor();</span><br><span class="line">        <span class="keyword">for</span> (Runnable task : tasks) &#123;</span><br><span class="line">            executor.submit(task);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        executor.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="🏗️-闭包与对象状态"><a href="#🏗️-闭包与对象状态" class="headerlink" title="🏗️ 闭包与对象状态"></a>🏗️ 闭包与对象状态</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClosureWithObjects</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Counter</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">increment</span><span class="params">()</span> &#123;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> count;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Counter</span> <span class="variable">counter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Counter</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Lambda表达式捕获了counter对象引用</span></span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">incrementTask</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">            counter.increment();</span><br><span class="line">            System.out.println(<span class="string">&quot;当前计数: &quot;</span> + counter.getCount());</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 执行多次</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">            incrementTask.run();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 输出:</span></span><br><span class="line">        <span class="comment">// 当前计数: 1</span></span><br><span class="line">        <span class="comment">// 当前计数: 2</span></span><br><span class="line">        <span class="comment">// 当前计数: 3</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="🍛-柯里化（Currying）"><a href="#🍛-柯里化（Currying）" class="headerlink" title="🍛 柯里化（Currying）"></a>🍛 柯里化（Currying）</h2><p>柯里化是将接受多个参数的函数转换为一系列只接受一个参数的函数的技术。</p><h3 id="🔧-柯里化的基本概念"><a href="#🔧-柯里化的基本概念" class="headerlink" title="🔧 柯里化的基本概念"></a>🔧 柯里化的基本概念</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CurryingExample</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 传统方式：接受两个参数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 柯里化方式：返回一个函数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Function&lt;Integer, Integer&gt; <span class="title function_">addCurried</span><span class="params">(<span class="type">int</span> a)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> b -&gt; a + b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 传统调用</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">result1</span> <span class="operator">=</span> add(<span class="number">3</span>, <span class="number">5</span>); <span class="comment">// 8</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 柯里化调用</span></span><br><span class="line">        Function&lt;Integer, Integer&gt; add3 = addCurried(<span class="number">3</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">result2</span> <span class="operator">=</span> add3.apply(<span class="number">5</span>); <span class="comment">// 8</span></span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;传统方式: &quot;</span> + result1);</span><br><span class="line">        System.out.println(<span class="string">&quot;柯里化方式: &quot;</span> + result2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="🚀-柯里化的高级应用"><a href="#🚀-柯里化的高级应用" class="headerlink" title="🚀 柯里化的高级应用"></a>🚀 柯里化的高级应用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdvancedCurrying</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 定义柯里化接口</span></span><br><span class="line">    <span class="meta">@FunctionalInterface</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CurriedFunction</span>&lt;T, U, R&gt; &#123;</span><br><span class="line">        Function&lt;U, R&gt; <span class="title function_">apply</span><span class="params">(T t)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 三元函数的柯里化</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> CurriedFunction&lt;Integer, Integer, Function&lt;Integer, Integer&gt;&gt; </span><br><span class="line">        <span class="title function_">addThreeCurried</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a -&gt; b -&gt; c -&gt; a + b + c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    含义：</span></span><br><span class="line"><span class="comment">    接受一个 Integer 参数 a</span></span><br><span class="line"><span class="comment">    返回一个 Function&lt;Integer, Function&lt;Integer, Integer&gt;&gt;</span></span><br><span class="line"><span class="comment">    这个返回的函数接受 Integer 参数 b</span></span><br><span class="line"><span class="comment">    再返回一个 Function&lt;Integer, Integer&gt;</span></span><br><span class="line"><span class="comment">    最后这个函数接受 Integer 参数 c</span></span><br><span class="line"><span class="comment">    返回最终的 Integer 结果</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建柯里化函数</span></span><br><span class="line">        CurriedFunction&lt;Integer, Integer, Function&lt;Integer, Integer&gt;&gt; curriedAdd = </span><br><span class="line">            addThreeCurried();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 分步应用参数</span></span><br><span class="line">        Function&lt;Integer, Function&lt;Integer, Integer&gt;&gt; add5 = curriedAdd.apply(<span class="number">5</span>);</span><br><span class="line">        Function&lt;Integer, Integer&gt; add5And3 = add5.apply(<span class="number">3</span>);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">result</span> <span class="operator">=</span> add5And3.apply(<span class="number">2</span>);</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;结果: &quot;</span> + result); <span class="comment">// 10</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 链式调用</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">result2</span> <span class="operator">=</span> curriedAdd.apply(<span class="number">1</span>).apply(<span class="number">2</span>).apply(<span class="number">3</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;链式结果: &quot;</span> + result2); <span class="comment">// 6</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="🎪-柯里化的实际应用场景"><a href="#🎪-柯里化的实际应用场景" class="headerlink" title="🎪 柯里化的实际应用场景"></a>🎪 柯里化的实际应用场景</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CurryingApplications</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 配置函数：先设置配置，再处理数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Function&lt;String, String&gt; <span class="title function_">createFormatter</span><span class="params">(String prefix, String suffix)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> data -&gt; prefix + data + suffix;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 验证函数：先设置规则，再验证数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Predicate&lt;String&gt; <span class="title function_">createValidator</span><span class="params">(<span class="type">int</span> minLength, <span class="type">int</span> maxLength)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> str -&gt; str.length() &gt;= minLength &amp;&amp; str.length() &lt;= maxLength;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建格式化器</span></span><br><span class="line">        Function&lt;String, String&gt; formatter = createFormatter(<span class="string">&quot;[&quot;</span>, <span class="string">&quot;]&quot;</span>);</span><br><span class="line">        System.out.println(formatter.apply(<span class="string">&quot;Hello&quot;</span>)); <span class="comment">// [Hello]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 创建验证器</span></span><br><span class="line">        Predicate&lt;String&gt; validator = createValidator(<span class="number">3</span>, <span class="number">10</span>);</span><br><span class="line">        System.out.println(validator.test(<span class="string">&quot;Hi&quot;</span>));     <span class="comment">// false</span></span><br><span class="line">        System.out.println(validator.test(<span class="string">&quot;Hello&quot;</span>));  <span class="comment">// true</span></span><br><span class="line">        System.out.println(validator.test(<span class="string">&quot;VeryLongString&quot;</span>)); <span class="comment">// false</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 在Stream中使用</span></span><br><span class="line">        List&lt;String&gt; words = Arrays.asList(<span class="string">&quot;Hi&quot;</span>, <span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;World&quot;</span>, <span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        words.stream()</span><br><span class="line">              .filter(validator)</span><br><span class="line">              .map(formatter)</span><br><span class="line">              .forEach(System.out::println);</span><br><span class="line">        <span class="comment">// 输出:</span></span><br><span class="line">        <span class="comment">// [Hello]</span></span><br><span class="line">        <span class="comment">// [World]</span></span><br><span class="line">        <span class="comment">// [Java]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="✨-闭包与柯里化的优势"><a href="#✨-闭包与柯里化的优势" class="headerlink" title="✨ 闭包与柯里化的优势"></a>✨ 闭包与柯里化的优势</h2><h3 id="1️⃣-部分应用（Partial-Application）"><a href="#1️⃣-部分应用（Partial-Application）" class="headerlink" title="1️⃣ 部分应用（Partial Application）"></a>1️⃣ 部分应用（Partial Application）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 先固定部分参数，后续再提供其他参数</span></span><br><span class="line">Function&lt;Integer, Integer&gt; add5 = addCurried(<span class="number">5</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> add5.apply(<span class="number">3</span>); <span class="comment">// 8</span></span><br></pre></td></tr></table></figure><h3 id="2️⃣-函数组合"><a href="#2️⃣-函数组合" class="headerlink" title="2️⃣ 函数组合"></a>2️⃣ 函数组合</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 便于创建可复用的函数</span></span><br><span class="line">Function&lt;Integer, Integer&gt; multiplyBy2 = x -&gt; x * <span class="number">2</span>;</span><br><span class="line">Function&lt;Integer, Integer&gt; add5AndMultiplyBy2 = addCurried(<span class="number">5</span>).andThen(multiplyBy2);</span><br></pre></td></tr></table></figure><h3 id="3️⃣-延迟计算"><a href="#3️⃣-延迟计算" class="headerlink" title="3️⃣ 延迟计算"></a>3️⃣ 延迟计算</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 可以在需要时才计算最终结果</span></span><br><span class="line">Supplier&lt;Integer&gt; lazyCalculation = () -&gt; addCurried(<span class="number">10</span>).apply(<span class="number">20</span>);</span><br><span class="line"><span class="type">Integer</span> <span class="variable">result</span> <span class="operator">=</span> lazyCalculation.get(); <span class="comment">// 30</span></span><br></pre></td></tr></table></figure><blockquote><p>💡 <strong>总结</strong>：闭包让函数可以携带外部状态，柯里化让函数可以分步执行，两者都是函数式编程的重要特性。</p></blockquote><h1 id="🌊-Stream-API详解"><a href="#🌊-Stream-API详解" class="headerlink" title="🌊 Stream API详解"></a>🌊 Stream API详解</h1><p>Stream API是Java 8引入的函数式编程核心，它提供了一种声明式的方式来处理数据集合。</p><blockquote><p>📋 <strong>Stream API速查表</strong>：为了方便查阅，我为您准备了一个详细的Stream API速查表，包含了所有常用操作的语法和说明：<a href="/stream.html" target="_blank">点击查看Stream API速查表</a></p></blockquote><h2 id="🌊-Stream基础概念"><a href="#🌊-Stream基础概念" class="headerlink" title="🌊 Stream基础概念"></a>🌊 Stream基础概念</h2><p>Stream是一个数据流，它支持顺序和并行聚合操作。Stream不是数据结构，而是对数据源的抽象。</p><h3 id="⚡-Stream的特性"><a href="#⚡-Stream的特性" class="headerlink" title="⚡ Stream的特性"></a>⚡ Stream的特性</h3><ol><li><strong>惰性求值</strong>：中间操作不会立即执行</li><li><strong>一次使用</strong>：Stream只能被消费一次</li><li><strong>函数式风格</strong>：支持链式调用</li><li><strong>并行处理</strong>：支持并行流</li></ol><h2 id="🎯-Stream操作分类"><a href="#🎯-Stream操作分类" class="headerlink" title="🎯 Stream操作分类"></a>🎯 Stream操作分类</h2><blockquote><p>💡 <strong>提示</strong>：如果您需要快速查阅Stream API的所有操作方法，可以参考我们的<a href="/stream.html" target="_blank">Stream API速查表</a>，它包含了完整的操作分类和语法说明。</p></blockquote><h3 id="1️⃣-创建Stream"><a href="#1️⃣-创建Stream" class="headerlink" title="1️⃣ 创建Stream"></a>1️⃣ 创建Stream</h3><h4 id="🏗️-基础创建方法"><a href="#🏗️-基础创建方法" class="headerlink" title="🏗️ 基础创建方法"></a>🏗️ 基础创建方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamCreation</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 从集合创建</span></span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;Java&quot;</span>, <span class="string">&quot;Python&quot;</span>, <span class="string">&quot;C++&quot;</span>, <span class="string">&quot;JavaScript&quot;</span>);</span><br><span class="line">        Stream&lt;String&gt; stream1 = list.stream();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2. 从数组创建</span></span><br><span class="line">        String[] array = &#123;<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;World&quot;</span>, <span class="string">&quot;Java&quot;</span>&#125;;</span><br><span class="line">        Stream&lt;String&gt; stream2 = Arrays.stream(array);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3. 直接创建</span></span><br><span class="line">        Stream&lt;String&gt; stream3 = Stream.of(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 4. 创建空流</span></span><br><span class="line">        Stream&lt;String&gt; emptyStream = Stream.empty();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 5. 创建无限流</span></span><br><span class="line">        Stream&lt;Integer&gt; infiniteStream = Stream.iterate(<span class="number">0</span>, n -&gt; n + <span class="number">2</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 6. 生成流</span></span><br><span class="line">        Stream&lt;Double&gt; randomStream = Stream.generate(Math::random);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 7. 并行流</span></span><br><span class="line">        Stream&lt;String&gt; parallelStream = list.parallelStream();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="🔢-数值流创建"><a href="#🔢-数值流创建" class="headerlink" title="🔢 数值流创建"></a>🔢 数值流创建</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NumericStreamCreation</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// IntStream - 整数流</span></span><br><span class="line">        <span class="type">IntStream</span> <span class="variable">intStream1</span> <span class="operator">=</span> IntStream.range(<span class="number">1</span>, <span class="number">5</span>);        <span class="comment">// 1,2,3,4 (不含5)</span></span><br><span class="line">        <span class="type">IntStream</span> <span class="variable">intStream2</span> <span class="operator">=</span> IntStream.rangeClosed(<span class="number">1</span>, <span class="number">5</span>);  <span class="comment">// 1,2,3,4,5 (含5)</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// LongStream - 长整型流</span></span><br><span class="line">        <span class="type">LongStream</span> <span class="variable">longStream</span> <span class="operator">=</span> LongStream.rangeClosed(<span class="number">1L</span>, <span class="number">1000000L</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// DoubleStream - 双精度流</span></span><br><span class="line">        <span class="type">DoubleStream</span> <span class="variable">doubleStream</span> <span class="operator">=</span> DoubleStream.of(<span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 从数组创建数值流</span></span><br><span class="line">        <span class="type">int</span>[] intArray = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">        <span class="type">IntStream</span> <span class="variable">fromArray</span> <span class="operator">=</span> Arrays.stream(intArray);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 从集合创建数值流</span></span><br><span class="line">        List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">        <span class="type">IntStream</span> <span class="variable">fromCollection</span> <span class="operator">=</span> numbers.stream().mapToInt(Integer::intValue);</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;IntStream range: &quot;</span> + Arrays.toString(intStream1.toArray()));</span><br><span class="line">        System.out.println(<span class="string">&quot;IntStream rangeClosed: &quot;</span> + Arrays.toString(intStream2.toArray()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="🔄-高级创建方法"><a href="#🔄-高级创建方法" class="headerlink" title="🔄 高级创建方法"></a>🔄 高级创建方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdvancedStreamCreation</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 迭代创建 - 生成斐波那契数列</span></span><br><span class="line">        Stream.iterate(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, t -&gt; <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;t[<span class="number">1</span>], t[<span class="number">0</span>] + t[<span class="number">1</span>]&#125;)</span><br><span class="line">              .limit(<span class="number">10</span>)</span><br><span class="line">              .map(t -&gt; t[<span class="number">0</span>])</span><br><span class="line">              .forEach(System.out::println);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2. 生成器创建 - 随机数流</span></span><br><span class="line">        Stream.generate(() -&gt; (<span class="type">int</span>)(Math.random() * <span class="number">100</span>))</span><br><span class="line">              .limit(<span class="number">5</span>)</span><br><span class="line">              .forEach(System.out::println);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3. 合并流</span></span><br><span class="line">        Stream&lt;String&gt; stream1 = Stream.of(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>);</span><br><span class="line">        Stream&lt;String&gt; stream2 = Stream.of(<span class="string">&quot;X&quot;</span>, <span class="string">&quot;Y&quot;</span>, <span class="string">&quot;Z&quot;</span>);</span><br><span class="line">        Stream&lt;String&gt; merged = Stream.concat(stream1, stream2);</span><br><span class="line">        merged.forEach(System.out::println); <span class="comment">// A B C X Y Z</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 4. 构建器模式</span></span><br><span class="line">        Stream&lt;String&gt; builtStream = Stream.&lt;String&gt;builder()</span><br><span class="line">                .add(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">                .add(<span class="string">&quot;World&quot;</span>)</span><br><span class="line">                .add(<span class="string">&quot;Java&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">        builtStream.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2️⃣-中间操作（Intermediate-Operations）"><a href="#2️⃣-中间操作（Intermediate-Operations）" class="headerlink" title="2️⃣ 中间操作（Intermediate Operations）"></a>2️⃣ 中间操作（Intermediate Operations）</h3><p>中间操作返回新的Stream，支持链式调用。</p><h4 id="🔍-过滤（Filter）"><a href="#🔍-过滤（Filter）" class="headerlink" title="🔍 过滤（Filter）"></a>🔍 过滤（Filter）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamFilter</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 过滤偶数</span></span><br><span class="line">        List&lt;Integer&gt; evenNumbers = numbers.stream()</span><br><span class="line">                .filter(n -&gt; n % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;偶数: &quot;</span> + evenNumbers); <span class="comment">// [2, 4, 6, 8, 10]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 过滤大于5的数</span></span><br><span class="line">        List&lt;Integer&gt; greaterThan5 = numbers.stream()</span><br><span class="line">                .filter(n -&gt; n &gt; <span class="number">5</span>)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;大于5的数: &quot;</span> + greaterThan5); <span class="comment">// [6, 7, 8, 9, 10]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 组合条件</span></span><br><span class="line">        List&lt;Integer&gt; result = numbers.stream()</span><br><span class="line">                .filter(n -&gt; n % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">                .filter(n -&gt; n &gt; <span class="number">5</span>)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;偶数且大于5: &quot;</span> + result); <span class="comment">// [6, 8, 10]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 使用Predicate组合</span></span><br><span class="line">        Predicate&lt;Integer&gt; isEven = n -&gt; n % <span class="number">2</span> == <span class="number">0</span>;</span><br><span class="line">        Predicate&lt;Integer&gt; isGreaterThan5 = n -&gt; n &gt; <span class="number">5</span>;</span><br><span class="line">        </span><br><span class="line">        List&lt;Integer&gt; combined = numbers.stream()</span><br><span class="line">                .filter(isEven.and(isGreaterThan5))</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;组合条件: &quot;</span> + combined); <span class="comment">// [6, 8, 10]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="✂️-截取操作"><a href="#✂️-截取操作" class="headerlink" title="✂️ 截取操作"></a>✂️ 截取操作</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamSlicing</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;String&gt; words = Arrays.asList(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>, <span class="string">&quot;date&quot;</span>, <span class="string">&quot;elderberry&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// skip - 跳过前n个元素</span></span><br><span class="line">        List&lt;String&gt; skipResult = words.stream()</span><br><span class="line">                .skip(<span class="number">2</span>)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        System.out.println(<span class="string">&quot;跳过前2个: &quot;</span> + skipResult); <span class="comment">// [cherry, date, elderberry]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// limit - 限制元素数量</span></span><br><span class="line">        List&lt;String&gt; limitResult = words.stream()</span><br><span class="line">                .limit(<span class="number">3</span>)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        System.out.println(<span class="string">&quot;限制3个: &quot;</span> + limitResult); <span class="comment">// [apple, banana, cherry]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// takeWhile - 取满足条件的元素（Java 9+）</span></span><br><span class="line">        List&lt;String&gt; takeWhileResult = words.stream()</span><br><span class="line">                .takeWhile(s -&gt; s.length() &lt; <span class="number">7</span>)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        System.out.println(<span class="string">&quot;长度小于7: &quot;</span> + takeWhileResult); <span class="comment">// [apple, banana, cherry, date]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// dropWhile - 丢弃满足条件的元素（Java 9+）</span></span><br><span class="line">        List&lt;String&gt; dropWhileResult = words.stream()</span><br><span class="line">                .dropWhile(s -&gt; s.length() &lt; <span class="number">7</span>)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        System.out.println(<span class="string">&quot;丢弃长度小于7的: &quot;</span> + dropWhileResult); <span class="comment">// [elderberry]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="🔄-去重与排序"><a href="#🔄-去重与排序" class="headerlink" title="🔄 去重与排序"></a>🔄 去重与排序</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamDistinctAndSort</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">3</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// distinct - 去重</span></span><br><span class="line">        List&lt;Integer&gt; distinct = numbers.stream()</span><br><span class="line">                .distinct()</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        System.out.println(<span class="string">&quot;去重: &quot;</span> + distinct); <span class="comment">// [3, 1, 4, 5, 9, 2, 6]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// sorted - 自然排序</span></span><br><span class="line">        List&lt;Integer&gt; sorted = numbers.stream()</span><br><span class="line">                .distinct()</span><br><span class="line">                .sorted()</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        System.out.println(<span class="string">&quot;排序: &quot;</span> + sorted); <span class="comment">// [1, 2, 3, 4, 5, 6, 9]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// sorted - 自定义排序</span></span><br><span class="line">        List&lt;String&gt; words = Arrays.asList(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>, <span class="string">&quot;date&quot;</span>);</span><br><span class="line">        List&lt;String&gt; customSorted = words.stream()</span><br><span class="line">                .sorted((a, b) -&gt; Integer.compare(a.length(), b.length()))</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        System.out.println(<span class="string">&quot;按长度排序: &quot;</span> + customSorted); <span class="comment">// [date, apple, banana, cherry]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// sorted - 方法引用</span></span><br><span class="line">        List&lt;String&gt; methodRefSorted = words.stream()</span><br><span class="line">                .sorted(Comparator.comparing(String::length))</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        System.out.println(<span class="string">&quot;方法引用排序: &quot;</span> + methodRefSorted); <span class="comment">// [date, apple, banana, cherry]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="🗺️-映射（Map）"><a href="#🗺️-映射（Map）" class="headerlink" title="🗺️ 映射（Map）"></a>🗺️ 映射（Map）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamMap</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;String&gt; words = Arrays.asList(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>, <span class="string">&quot;java&quot;</span>, <span class="string">&quot;stream&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 转换为大写</span></span><br><span class="line">        List&lt;String&gt; upperCase = words.stream()</span><br><span class="line">                .map(String::toUpperCase)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;大写: &quot;</span> + upperCase); <span class="comment">// [HELLO, WORLD, JAVA, STREAM]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 获取长度</span></span><br><span class="line">        List&lt;Integer&gt; lengths = words.stream()</span><br><span class="line">                .map(String::length)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;长度: &quot;</span> + lengths); <span class="comment">// [5, 5, 4, 6]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 复杂映射</span></span><br><span class="line">        List&lt;String&gt; result = words.stream()</span><br><span class="line">                .map(s -&gt; s.substring(<span class="number">0</span>, <span class="number">1</span>).toUpperCase() + s.substring(<span class="number">1</span>))</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;首字母大写: &quot;</span> + result); <span class="comment">// [Hello, World, Java, Stream]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="🔄-数值流映射"><a href="#🔄-数值流映射" class="headerlink" title="🔄 数值流映射"></a>🔄 数值流映射</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NumericStreamMapping</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;String&gt; numbers = Arrays.asList(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;5&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// mapToInt - 转换为IntStream</span></span><br><span class="line">        <span class="type">IntStream</span> <span class="variable">intStream</span> <span class="operator">=</span> numbers.stream()</span><br><span class="line">                .mapToInt(Integer::parseInt);</span><br><span class="line">        System.out.println(<span class="string">&quot;IntStream: &quot;</span> + Arrays.toString(intStream.toArray())); <span class="comment">// [1, 2, 3, 4, 5]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// mapToLong - 转换为LongStream</span></span><br><span class="line">        <span class="type">LongStream</span> <span class="variable">longStream</span> <span class="operator">=</span> numbers.stream()</span><br><span class="line">                .mapToLong(Long::parseLong);</span><br><span class="line">        System.out.println(<span class="string">&quot;LongStream: &quot;</span> + Arrays.toString(longStream.toArray())); <span class="comment">// [1, 2, 3, 4, 5]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// mapToDouble - 转换为DoubleStream</span></span><br><span class="line">        <span class="type">DoubleStream</span> <span class="variable">doubleStream</span> <span class="operator">=</span> numbers.stream()</span><br><span class="line">                .mapToDouble(Double::parseDouble);</span><br><span class="line">        System.out.println(<span class="string">&quot;DoubleStream: &quot;</span> + Arrays.toString(doubleStream.toArray())); <span class="comment">// [1.0, 2.0, 3.0, 4.0, 5.0]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 数值流操作</span></span><br><span class="line">        List&lt;String&gt; words = Arrays.asList(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">totalLength</span> <span class="operator">=</span> words.stream()</span><br><span class="line">                .mapToInt(String::length)</span><br><span class="line">                .sum();</span><br><span class="line">        System.out.println(<span class="string">&quot;总长度: &quot;</span> + totalLength); <span class="comment">// 17</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 平均值</span></span><br><span class="line">        <span class="type">OptionalDouble</span> <span class="variable">avgLength</span> <span class="operator">=</span> words.stream()</span><br><span class="line">                .mapToInt(String::length)</span><br><span class="line">                .average();</span><br><span class="line">        avgLength.ifPresent(avg -&gt; System.out.println(<span class="string">&quot;平均长度: &quot;</span> + avg)); <span class="comment">// 5.67</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="🔍-调试操作"><a href="#🔍-调试操作" class="headerlink" title="🔍 调试操作"></a>🔍 调试操作</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamDebugging</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// peek - 调试中间结果</span></span><br><span class="line">        List&lt;Integer&gt; result = numbers.stream()</span><br><span class="line">                .peek(n -&gt; System.out.println(<span class="string">&quot;原始: &quot;</span> + n))</span><br><span class="line">                .filter(n -&gt; n % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">                .peek(n -&gt; System.out.println(<span class="string">&quot;过滤后: &quot;</span> + n))</span><br><span class="line">                .map(n -&gt; n * <span class="number">2</span>)</span><br><span class="line">                .peek(n -&gt; System.out.println(<span class="string">&quot;映射后: &quot;</span> + n))</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;最终结果: &quot;</span> + result);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 输出：</span></span><br><span class="line">        <span class="comment">// 原始: 1</span></span><br><span class="line">        <span class="comment">// 原始: 2</span></span><br><span class="line">        <span class="comment">// 过滤后: 2</span></span><br><span class="line">        <span class="comment">// 映射后: 4</span></span><br><span class="line">        <span class="comment">// 原始: 3</span></span><br><span class="line">        <span class="comment">// 原始: 4</span></span><br><span class="line">        <span class="comment">// 过滤后: 4</span></span><br><span class="line">        <span class="comment">// 映射后: 8</span></span><br><span class="line">        <span class="comment">// 原始: 5</span></span><br><span class="line">        <span class="comment">// 最终结果: [4, 8]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="📦-扁平化（FlatMap）"><a href="#📦-扁平化（FlatMap）" class="headerlink" title="📦 扁平化（FlatMap）"></a>📦 扁平化（FlatMap）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamFlatMap</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;List&lt;String&gt;&gt; nestedList = Arrays.asList(</span><br><span class="line">                Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>),</span><br><span class="line">                Arrays.asList(<span class="string">&quot;d&quot;</span>, <span class="string">&quot;e&quot;</span>, <span class="string">&quot;f&quot;</span>),</span><br><span class="line">                Arrays.asList(<span class="string">&quot;g&quot;</span>, <span class="string">&quot;h&quot;</span>, <span class="string">&quot;i&quot;</span>)</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 扁平化</span></span><br><span class="line">        List&lt;String&gt; flattened = nestedList.stream()</span><br><span class="line">                .flatMap(List::stream)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;扁平化结果: &quot;</span> + flattened); <span class="comment">// [a, b, c, d, e, f, g, h, i]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 字符串分割示例</span></span><br><span class="line">        List&lt;String&gt; sentences = Arrays.asList(<span class="string">&quot;Hello World&quot;</span>, <span class="string">&quot;Java Stream&quot;</span>, <span class="string">&quot;Functional Programming&quot;</span>);</span><br><span class="line">        List&lt;String&gt; words = sentences.stream()</span><br><span class="line">                .flatMap(sentence -&gt; Arrays.stream(sentence.split(<span class="string">&quot; &quot;</span>)))</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;所有单词: &quot;</span> + words); <span class="comment">// [Hello, World, Java, Stream, Functional, Programming]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3️⃣-终结操作（Terminal-Operations）"><a href="#3️⃣-终结操作（Terminal-Operations）" class="headerlink" title="3️⃣ 终结操作（Terminal Operations）"></a>3️⃣ 终结操作（Terminal Operations）</h3><p>终结操作会触发Stream的执行，返回具体的结果。</p><h4 id="📥-收集（Collect）"><a href="#📥-收集（Collect）" class="headerlink" title="📥 收集（Collect）"></a>📥 收集（Collect）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamCollect</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;String&gt; words = Arrays.asList(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>, <span class="string">&quot;date&quot;</span>, <span class="string">&quot;elderberry&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 收集到List</span></span><br><span class="line">        List&lt;String&gt; longWords = words.stream()</span><br><span class="line">                .filter(s -&gt; s.length() &gt; <span class="number">5</span>)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 收集到Set</span></span><br><span class="line">        Set&lt;String&gt; uniqueWords = words.stream()</span><br><span class="line">                .collect(Collectors.toSet());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 收集到Map</span></span><br><span class="line">        Map&lt;String, Integer&gt; wordLengthMap = words.stream()</span><br><span class="line">                .collect(Collectors.toMap(</span><br><span class="line">                        Function.identity(),</span><br><span class="line">                        String::length</span><br><span class="line">                ));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 收集到字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">joined</span> <span class="operator">=</span> words.stream()</span><br><span class="line">                .collect(Collectors.joining(<span class="string">&quot;, &quot;</span>, <span class="string">&quot;[&quot;</span>, <span class="string">&quot;]&quot;</span>));</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;长单词: &quot;</span> + longWords);</span><br><span class="line">        System.out.println(<span class="string">&quot;唯一单词: &quot;</span> + uniqueWords);</span><br><span class="line">        System.out.println(<span class="string">&quot;单词长度映射: &quot;</span> + wordLengthMap);</span><br><span class="line">        System.out.println(<span class="string">&quot;连接字符串: &quot;</span> + joined);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="🔍-查找操作"><a href="#🔍-查找操作" class="headerlink" title="🔍 查找操作"></a>🔍 查找操作</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamSearch</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// findFirst - 查找第一个元素</span></span><br><span class="line">        Optional&lt;Integer&gt; first = numbers.stream()</span><br><span class="line">                .filter(n -&gt; n &gt; <span class="number">5</span>)</span><br><span class="line">                .findFirst();</span><br><span class="line">        System.out.println(<span class="string">&quot;第一个大于5的数: &quot;</span> + first.orElse(-<span class="number">1</span>)); <span class="comment">// 6</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// findAny - 查找任意一个元素（并行流中更有效）</span></span><br><span class="line">        Optional&lt;Integer&gt; any = numbers.stream()</span><br><span class="line">                .filter(n -&gt; n &gt; <span class="number">5</span>)</span><br><span class="line">                .findAny();</span><br><span class="line">        System.out.println(<span class="string">&quot;任意一个大于5的数: &quot;</span> + any.orElse(-<span class="number">1</span>)); <span class="comment">// 6</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 并行流中的findAny</span></span><br><span class="line">        Optional&lt;Integer&gt; parallelAny = numbers.parallelStream()</span><br><span class="line">                .filter(n -&gt; n &gt; <span class="number">5</span>)</span><br><span class="line">                .findAny();</span><br><span class="line">        System.out.println(<span class="string">&quot;并行流中任意一个: &quot;</span> + parallelAny.orElse(-<span class="number">1</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 空流的情况</span></span><br><span class="line">        Optional&lt;Integer&gt; empty = Stream.&lt;Integer&gt;empty()</span><br><span class="line">                .findFirst();</span><br><span class="line">        System.out.println(<span class="string">&quot;空流查找: &quot;</span> + empty.isPresent()); <span class="comment">// false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="✅-匹配操作"><a href="#✅-匹配操作" class="headerlink" title="✅ 匹配操作"></a>✅ 匹配操作</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamMatching</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// anyMatch - 是否有任意一个满足条件</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">hasEven</span> <span class="operator">=</span> numbers.stream()</span><br><span class="line">                .anyMatch(n -&gt; n % <span class="number">2</span> == <span class="number">0</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;是否有偶数: &quot;</span> + hasEven); <span class="comment">// true</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// allMatch - 是否所有元素都满足条件</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">allPositive</span> <span class="operator">=</span> numbers.stream()</span><br><span class="line">                .allMatch(n -&gt; n &gt; <span class="number">0</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;是否都为正数: &quot;</span> + allPositive); <span class="comment">// true</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// noneMatch - 是否没有元素满足条件</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">noneNegative</span> <span class="operator">=</span> numbers.stream()</span><br><span class="line">                .noneMatch(n -&gt; n &lt; <span class="number">0</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;是否没有负数: &quot;</span> + noneNegative); <span class="comment">// true</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 短路特性演示</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">shortCircuit</span> <span class="operator">=</span> Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">                .peek(n -&gt; System.out.println(<span class="string">&quot;检查: &quot;</span> + n))</span><br><span class="line">                .anyMatch(n -&gt; n &gt; <span class="number">3</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;短路结果: &quot;</span> + shortCircuit);</span><br><span class="line">        <span class="comment">// 输出：检查: 1, 检查: 2, 检查: 3, 检查: 4, 短路结果: true</span></span><br><span class="line">        <span class="comment">// 注意：不会检查5，因为4已经满足条件</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="🎯-聚合操作"><a href="#🎯-聚合操作" class="headerlink" title="🎯 聚合操作"></a>🎯 聚合操作</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamAggregation</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// count - 计数</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">count</span> <span class="operator">=</span> numbers.stream()</span><br><span class="line">                .filter(n -&gt; n % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">                .count();</span><br><span class="line">        System.out.println(<span class="string">&quot;偶数个数: &quot;</span> + count); <span class="comment">// 2</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// min - 最小值</span></span><br><span class="line">        Optional&lt;Integer&gt; min = numbers.stream()</span><br><span class="line">                .min(Integer::compareTo);</span><br><span class="line">        System.out.println(<span class="string">&quot;最小值: &quot;</span> + min.orElse(-<span class="number">1</span>)); <span class="comment">// 1</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// max - 最大值</span></span><br><span class="line">        Optional&lt;Integer&gt; max = numbers.stream()</span><br><span class="line">                .max(Integer::compareTo);</span><br><span class="line">        System.out.println(<span class="string">&quot;最大值: &quot;</span> + max.orElse(-<span class="number">1</span>)); <span class="comment">// 5</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 自定义比较器</span></span><br><span class="line">        List&lt;String&gt; words = Arrays.asList(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>);</span><br><span class="line">        Optional&lt;String&gt; shortest = words.stream()</span><br><span class="line">                .min(Comparator.comparing(String::length));</span><br><span class="line">        System.out.println(<span class="string">&quot;最短单词: &quot;</span> + shortest.orElse(<span class="string">&quot;&quot;</span>)); <span class="comment">// apple</span></span><br><span class="line">        </span><br><span class="line">        Optional&lt;String&gt; longest = words.stream()</span><br><span class="line">                .max(Comparator.comparing(String::length));</span><br><span class="line">        System.out.println(<span class="string">&quot;最长单词: &quot;</span> + longest.orElse(<span class="string">&quot;&quot;</span>)); <span class="comment">// banana</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="🔄-归约（Reduce）"><a href="#🔄-归约（Reduce）" class="headerlink" title="🔄 归约（Reduce）"></a>🔄 归约（Reduce）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamReduce</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 求和</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> numbers.stream()</span><br><span class="line">                .reduce(<span class="number">0</span>, Integer::sum);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 求最大值</span></span><br><span class="line">        Optional&lt;Integer&gt; max = numbers.stream()</span><br><span class="line">                .reduce(Integer::max);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 求最小值</span></span><br><span class="line">        Optional&lt;Integer&gt; min = numbers.stream()</span><br><span class="line">                .reduce(Integer::min);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 字符串连接</span></span><br><span class="line">        List&lt;String&gt; words = Arrays.asList(<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;World&quot;</span>, <span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> words.stream()</span><br><span class="line">                .reduce(<span class="string">&quot;&quot;</span>, (a, b) -&gt; a + <span class="string">&quot; &quot;</span> + b);</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;求和: &quot;</span> + sum);           <span class="comment">// 15</span></span><br><span class="line">        System.out.println(<span class="string">&quot;最大值: &quot;</span> + max.get());   <span class="comment">// 5</span></span><br><span class="line">        System.out.println(<span class="string">&quot;最小值: &quot;</span> + min.get());   <span class="comment">// 1</span></span><br><span class="line">        System.out.println(<span class="string">&quot;连接: &quot;</span> + result.trim()); <span class="comment">// Hello World Java</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="📦-高级收集器"><a href="#📦-高级收集器" class="headerlink" title="📦 高级收集器"></a>📦 高级收集器</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdvancedCollectors</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;String&gt; words = Arrays.asList(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>, <span class="string">&quot;date&quot;</span>, <span class="string">&quot;elderberry&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 分组收集</span></span><br><span class="line">        Map&lt;Integer, List&lt;String&gt;&gt; groupedByLength = words.stream()</span><br><span class="line">                .collect(Collectors.groupingBy(String::length));</span><br><span class="line">        System.out.println(<span class="string">&quot;按长度分组: &quot;</span> + groupedByLength);</span><br><span class="line">        <span class="comment">// &#123;5=[apple, cherry], 6=[banana], 4=[date], 10=[elderberry]&#125;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 分区收集</span></span><br><span class="line">        Map&lt;Boolean, List&lt;String&gt;&gt; partitioned = words.stream()</span><br><span class="line">                .collect(Collectors.partitioningBy(s -&gt; s.length() &gt; <span class="number">5</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;按长度分区: &quot;</span> + partitioned);</span><br><span class="line">        <span class="comment">// &#123;false=[apple, cherry, date], true=[banana, elderberry]&#125;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 统计收集</span></span><br><span class="line">        <span class="type">IntSummaryStatistics</span> <span class="variable">stats</span> <span class="operator">=</span> words.stream()</span><br><span class="line">                .collect(Collectors.summarizingInt(String::length));</span><br><span class="line">        System.out.println(<span class="string">&quot;长度统计: &quot;</span> + stats);</span><br><span class="line">        <span class="comment">// IntSummaryStatistics&#123;count=5, sum=31, min=4, average=6.200000, max=10&#125;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 连接收集</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">joined</span> <span class="operator">=</span> words.stream()</span><br><span class="line">                .collect(Collectors.joining(<span class="string">&quot;, &quot;</span>, <span class="string">&quot;[&quot;</span>, <span class="string">&quot;]&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;连接结果: &quot;</span> + joined);</span><br><span class="line">        <span class="comment">// [apple, banana, cherry, date, elderberry]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 映射收集</span></span><br><span class="line">        Map&lt;String, Integer&gt; wordToLength = words.stream()</span><br><span class="line">                .collect(Collectors.toMap(</span><br><span class="line">                        Function.identity(),</span><br><span class="line">                        String::length,</span><br><span class="line">                        (existing, replacement) -&gt; existing <span class="comment">// 处理重复键</span></span><br><span class="line">                ));</span><br><span class="line">        System.out.println(<span class="string">&quot;单词到长度映射: &quot;</span> + wordToLength);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="🔄-自定义收集器"><a href="#🔄-自定义收集器" class="headerlink" title="🔄 自定义收集器"></a>🔄 自定义收集器</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomCollector</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 自定义收集器：收集为自定义对象</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">StringStats</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> count;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> totalLength;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> String longest;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> String shortest;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">StringStats</span><span class="params">(<span class="type">int</span> count, <span class="type">int</span> totalLength, String longest, String shortest)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.count = count;</span><br><span class="line">            <span class="built_in">this</span>.totalLength = totalLength;</span><br><span class="line">            <span class="built_in">this</span>.longest = longest;</span><br><span class="line">            <span class="built_in">this</span>.shortest = shortest;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> String.format(<span class="string">&quot;StringStats&#123;count=%d, totalLength=%d, longest=&#x27;%s&#x27;, shortest=&#x27;%s&#x27;&#125;&quot;</span>, </span><br><span class="line">                    count, totalLength, longest, shortest);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;String&gt; words = Arrays.asList(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>, <span class="string">&quot;date&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 使用自定义收集器</span></span><br><span class="line">        <span class="type">StringStats</span> <span class="variable">stats</span> <span class="operator">=</span> words.stream()</span><br><span class="line">                .collect(Collector.of(</span><br><span class="line">                        () -&gt; <span class="keyword">new</span> <span class="title class_">StringStats</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>),</span><br><span class="line">                        (acc, word) -&gt; &#123;</span><br><span class="line">                            <span class="type">int</span> <span class="variable">newCount</span> <span class="operator">=</span> acc.count + <span class="number">1</span>;</span><br><span class="line">                            <span class="type">int</span> <span class="variable">newTotalLength</span> <span class="operator">=</span> acc.totalLength + word.length();</span><br><span class="line">                            <span class="type">String</span> <span class="variable">newLongest</span> <span class="operator">=</span> acc.longest.isEmpty() || word.length() &gt; acc.longest.length() ? word : acc.longest;</span><br><span class="line">                            <span class="type">String</span> <span class="variable">newShortest</span> <span class="operator">=</span> acc.shortest.isEmpty() || word.length() &lt; acc.shortest.length() ? word : acc.shortest;</span><br><span class="line">                            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">StringStats</span>(newCount, newTotalLength, newLongest, newShortest);</span><br><span class="line">                        &#125;,</span><br><span class="line">                        (acc1, acc2) -&gt; <span class="keyword">new</span> <span class="title class_">StringStats</span>(</span><br><span class="line">                                acc1.count + acc2.count,</span><br><span class="line">                                acc1.totalLength + acc2.totalLength,</span><br><span class="line">                                acc1.longest.length() &gt; acc2.longest.length() ? acc1.longest : acc2.longest,</span><br><span class="line">                                acc1.shortest.length() &lt; acc2.shortest.length() ? acc1.shortest : acc2.shortest</span><br><span class="line">                        )</span><br><span class="line">                ));</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;自定义统计: &quot;</span> + stats);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="🎓-Stream实际应用示例"><a href="#🎓-Stream实际应用示例" class="headerlink" title="🎓 Stream实际应用示例"></a>🎓 Stream实际应用示例</h2><h3 id="📊-学生成绩处理"><a href="#📊-学生成绩处理" class="headerlink" title="📊 学生成绩处理"></a>📊 学生成绩处理</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentGradeProcessor</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">        <span class="keyword">private</span> List&lt;Integer&gt; grades;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, List&lt;Integer&gt; grades)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">            <span class="built_in">this</span>.age = age;</span><br><span class="line">            <span class="built_in">this</span>.grades = grades;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123; <span class="keyword">return</span> name; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123; <span class="keyword">return</span> age; &#125;</span><br><span class="line">        <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">getGrades</span><span class="params">()</span> &#123; <span class="keyword">return</span> grades; &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getAverageGrade</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> grades.stream()</span><br><span class="line">                    .mapToInt(Integer::intValue)</span><br><span class="line">                    .average()</span><br><span class="line">                    .orElse(<span class="number">0.0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> String.format(<span class="string">&quot;Student&#123;name=&#x27;%s&#x27;, age=%d, avgGrade=%.2f&#125;&quot;</span>, </span><br><span class="line">                    name, age, getAverageGrade());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Student&gt; students = Arrays.asList(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">20</span>, Arrays.asList(<span class="number">85</span>, <span class="number">90</span>, <span class="number">78</span>, <span class="number">92</span>)),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">19</span>, Arrays.asList(<span class="number">76</span>, <span class="number">88</span>, <span class="number">82</span>, <span class="number">90</span>)),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;王五&quot;</span>, <span class="number">21</span>, Arrays.asList(<span class="number">92</span>, <span class="number">95</span>, <span class="number">88</span>, <span class="number">94</span>)),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;赵六&quot;</span>, <span class="number">20</span>, Arrays.asList(<span class="number">68</span>, <span class="number">75</span>, <span class="number">72</span>, <span class="number">80</span>)),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;钱七&quot;</span>, <span class="number">22</span>, Arrays.asList(<span class="number">88</span>, <span class="number">92</span>, <span class="number">85</span>, <span class="number">90</span>))</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 1. 找出平均分大于85的学生</span></span><br><span class="line">        List&lt;Student&gt; excellentStudents = students.stream()</span><br><span class="line">                .filter(s -&gt; s.getAverageGrade() &gt; <span class="number">85</span>)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;优秀学生:&quot;</span>);</span><br><span class="line">        excellentStudents.forEach(System.out::println);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2. 按年龄分组</span></span><br><span class="line">        Map&lt;Integer, List&lt;Student&gt;&gt; studentsByAge = students.stream()</span><br><span class="line">                .collect(Collectors.groupingBy(Student::getAge));</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;\n按年龄分组:&quot;</span>);</span><br><span class="line">        studentsByAge.forEach((age, studentList) -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;年龄 &quot;</span> + age + <span class="string">&quot;: &quot;</span> + studentList.size() + <span class="string">&quot; 人&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3. 计算每个年龄段的平均分</span></span><br><span class="line">        Map&lt;Integer, Double&gt; averageByAge = students.stream()</span><br><span class="line">                .collect(Collectors.groupingBy(</span><br><span class="line">                        Student::getAge,</span><br><span class="line">                        Collectors.averagingDouble(Student::getAverageGrade)</span><br><span class="line">                ));</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;\n各年龄段平均分:&quot;</span>);</span><br><span class="line">        averageByAge.forEach((age, avg) -&gt; </span><br><span class="line">                System.out.printf(<span class="string">&quot;年龄 %d: %.2f%n&quot;</span>, age, avg));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 4. 找出最高分的学生</span></span><br><span class="line">        Optional&lt;Student&gt; topStudent = students.stream()</span><br><span class="line">                .max(Comparator.comparing(Student::getAverageGrade));</span><br><span class="line">        </span><br><span class="line">        topStudent.ifPresent(s -&gt; System.out.println(<span class="string">&quot;\n最高分学生: &quot;</span> + s));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="⚡-Stream性能优化"><a href="#⚡-Stream性能优化" class="headerlink" title="⚡ Stream性能优化"></a>⚡ Stream性能优化</h2><blockquote><p>🔧 <strong>性能优化参考</strong>：更多Stream性能优化技巧和最佳实践，请参考<a href="/stream.html" target="_blank">Stream API速查表</a>中的性能优化部分。</p></blockquote><h3 id="1️⃣-使用原始类型流"><a href="#1️⃣-使用原始类型流" class="headerlink" title="1️⃣ 使用原始类型流"></a>1️⃣ 使用原始类型流</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamPerformance</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; numbers = IntStream.rangeClosed(<span class="number">1</span>, <span class="number">1000000</span>)</span><br><span class="line">                .boxed()</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 使用IntStream（推荐）</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">start1</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum1</span> <span class="operator">=</span> numbers.stream()</span><br><span class="line">                .mapToInt(Integer::intValue)</span><br><span class="line">                .sum();</span><br><span class="line">        <span class="type">long</span> <span class="variable">end1</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 使用Stream&lt;Integer&gt;（较慢）</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">start2</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum2</span> <span class="operator">=</span> numbers.stream()</span><br><span class="line">                .reduce(<span class="number">0</span>, Integer::sum);</span><br><span class="line">        <span class="type">long</span> <span class="variable">end2</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;IntStream耗时: &quot;</span> + (end1 - start1) + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Stream&lt;Integer&gt;耗时: &quot;</span> + (end2 - start2) + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2️⃣-并行流的使用"><a href="#2️⃣-并行流的使用" class="headerlink" title="2️⃣ 并行流的使用"></a>2️⃣ 并行流的使用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ParallelStreamExample</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; numbers = IntStream.rangeClosed(<span class="number">1</span>, <span class="number">10000000</span>)</span><br><span class="line">                .boxed()</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 串行流</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">start1</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="type">long</span> <span class="variable">count1</span> <span class="operator">=</span> numbers.stream()</span><br><span class="line">                .filter(n -&gt; n % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">                .count();</span><br><span class="line">        <span class="type">long</span> <span class="variable">end1</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 并行流</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">start2</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="type">long</span> <span class="variable">count2</span> <span class="operator">=</span> numbers.parallelStream()</span><br><span class="line">                .filter(n -&gt; n % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">                .count();</span><br><span class="line">        <span class="type">long</span> <span class="variable">end2</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;串行流结果: &quot;</span> + count1 + <span class="string">&quot;, 耗时: &quot;</span> + (end1 - start1) + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;并行流结果: &quot;</span> + count2 + <span class="string">&quot;, 耗时: &quot;</span> + (end2 - start2) + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>💡 <strong>Stream最佳实践</strong>：</p><ol><li>优先使用原始类型流（IntStream, LongStream, DoubleStream）</li><li>大数据量时考虑并行流</li><li>避免在Stream中进行复杂计算</li><li>合理使用中间操作，避免不必要的操作</li></ol></blockquote><h1 id="🎉-总结与最佳实践"><a href="#🎉-总结与最佳实践" class="headerlink" title="🎉 总结与最佳实践"></a>🎉 总结与最佳实践</h1><h2 id="🔄-函数式编程核心概念回顾"><a href="#🔄-函数式编程核心概念回顾" class="headerlink" title="🔄 函数式编程核心概念回顾"></a>🔄 函数式编程核心概念回顾</h2><p>通过本文的学习，我们深入了解了Java函数式编程的核心概念。</p><h3 id="1️⃣-函数式编程基础"><a href="#1️⃣-函数式编程基础" class="headerlink" title="1️⃣ 函数式编程基础"></a>1️⃣ 函数式编程基础</h3><ul><li><strong>函数即规则</strong>：确定性、无副作用、不变性</li><li><strong>Lambda表达式</strong>：简洁的函数表示法</li><li><strong>函数式接口</strong>：只包含一个抽象方法的接口</li></ul><h3 id="2️⃣-核心特性"><a href="#2️⃣-核心特性" class="headerlink" title="2️⃣ 核心特性"></a>2️⃣ 核心特性</h3><ul><li><strong>闭包</strong>：函数对象与外部变量的绑定</li><li><strong>柯里化</strong>：多参数函数的分步执行</li><li><strong>方法引用</strong>：Lambda表达式的简化形式</li><li><strong>Stream API</strong>：声明式数据处理</li></ul><h2 id="🚀-性能优化建议"><a href="#🚀-性能优化建议" class="headerlink" title="🚀 性能优化建议"></a>🚀 性能优化建议</h2><h3 id="1️⃣-选择合适的函数式接口"><a href="#1️⃣-选择合适的函数式接口" class="headerlink" title="1️⃣ 选择合适的函数式接口"></a>1️⃣ 选择合适的函数式接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 推荐：使用内置接口</span></span><br><span class="line">Predicate&lt;String&gt; isLong = s -&gt; s.length() &gt; <span class="number">5</span>;</span><br><span class="line">Function&lt;String, Integer&gt; getLength = String::length;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 避免：重复定义相似接口</span></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StringPredicate</span> &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">test</span><span class="params">(String s)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2️⃣-Stream性能优化"><a href="#2️⃣-Stream性能优化" class="headerlink" title="2️⃣ Stream性能优化"></a>2️⃣ Stream性能优化</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 推荐：使用原始类型流</span></span><br><span class="line">IntStream.rangeClosed(<span class="number">1</span>, <span class="number">1000000</span>)</span><br><span class="line">    .filter(n -&gt; n % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">    .sum();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 避免：不必要的装箱拆箱</span></span><br><span class="line">Stream&lt;Integer&gt; boxedStream = IntStream.rangeClosed(<span class="number">1</span>, <span class="number">1000000</span>)</span><br><span class="line">    .boxed()</span><br><span class="line">    .filter(n -&gt; n % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">    .mapToInt(Integer::intValue)</span><br><span class="line">    .sum();</span><br></pre></td></tr></table></figure><h3 id="3️⃣-并行流使用原则"><a href="#3️⃣-并行流使用原则" class="headerlink" title="3️⃣ 并行流使用原则"></a>3️⃣ 并行流使用原则</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 大数据量时使用并行流</span></span><br><span class="line">List&lt;Integer&gt; largeList = IntStream.rangeClosed(<span class="number">1</span>, <span class="number">10000000</span>)</span><br><span class="line">    .boxed()</span><br><span class="line">    .collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数据量小时使用串行流</span></span><br><span class="line">List&lt;Integer&gt; smallList = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br></pre></td></tr></table></figure><h2 id="🎯-实际应用场景"><a href="#🎯-实际应用场景" class="headerlink" title="🎯 实际应用场景"></a>🎯 实际应用场景</h2><h3 id="1️⃣-数据处理"><a href="#1️⃣-数据处理" class="headerlink" title="1️⃣ 数据处理"></a>1️⃣ 数据处理</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 学生成绩统计</span></span><br><span class="line">students.stream()</span><br><span class="line">    .filter(s -&gt; s.getAverageGrade() &gt; <span class="number">85</span>)</span><br><span class="line">    .collect(Collectors.groupingBy(Student::getAge))</span><br><span class="line">    .forEach((age, list) -&gt; System.out.println(<span class="string">&quot;年龄&quot;</span> + age + <span class="string">&quot;: &quot;</span> + list.size() + <span class="string">&quot;人&quot;</span>));</span><br></pre></td></tr></table></figure><h3 id="2️⃣-异步编程"><a href="#2️⃣-异步编程" class="headerlink" title="2️⃣ 异步编程"></a>2️⃣ 异步编程</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 异步任务处理</span></span><br><span class="line">CompletableFuture.supplyAsync(() -&gt; fetchData())</span><br><span class="line">    .thenApply(<span class="built_in">this</span>::processData)</span><br><span class="line">    .thenAccept(<span class="built_in">this</span>::saveResult)</span><br><span class="line">    .exceptionally(<span class="built_in">this</span>::handleError);</span><br></pre></td></tr></table></figure><h3 id="3️⃣-配置管理"><a href="#3️⃣-配置管理" class="headerlink" title="3️⃣ 配置管理"></a>3️⃣ 配置管理</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置验证</span></span><br><span class="line">Predicate&lt;String&gt; isValidConfig = config -&gt; </span><br><span class="line">    config != <span class="literal">null</span> &amp;&amp; !config.trim().isEmpty() &amp;&amp; config.length() &gt; <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">Optional&lt;String&gt; validConfig = Optional.ofNullable(inputConfig)</span><br><span class="line">    .filter(isValidConfig)</span><br><span class="line">    .map(String::trim);</span><br></pre></td></tr></table></figure><h2 id="⚠️-常见陷阱与避免方法"><a href="#⚠️-常见陷阱与避免方法" class="headerlink" title="⚠️ 常见陷阱与避免方法"></a>⚠️ 常见陷阱与避免方法</h2><h3 id="1️⃣-闭包变量修改"><a href="#1️⃣-闭包变量修改" class="headerlink" title="1️⃣ 闭包变量修改"></a>1️⃣ 闭包变量修改</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误：修改闭包变量</span></span><br><span class="line"><span class="type">int</span> <span class="variable">counter</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>).forEach(n -&gt; counter++); <span class="comment">// 编译错误</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 正确：使用原子类或数组</span></span><br><span class="line"><span class="type">AtomicInteger</span> <span class="variable">counter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">0</span>);</span><br><span class="line">Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>).forEach(n -&gt; counter.incrementAndGet());</span><br></pre></td></tr></table></figure><h3 id="2️⃣-Stream重复使用"><a href="#2️⃣-Stream重复使用" class="headerlink" title="2️⃣ Stream重复使用"></a>2️⃣ Stream重复使用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误：重复使用Stream</span></span><br><span class="line">Stream&lt;String&gt; stream = list.stream();</span><br><span class="line">stream.filter(s -&gt; s.length() &gt; <span class="number">3</span>);</span><br><span class="line">stream.map(String::toUpperCase); <span class="comment">// 运行时异常</span></span><br><span class="line"><span class="comment">// 正确：每次创建新的Stream</span></span><br><span class="line">list.stream().filter(s -&gt; s.length() &gt; <span class="number">3</span>);</span><br><span class="line">list.stream().map(String::toUpperCase);</span><br></pre></td></tr></table></figure><h3 id="3️⃣-过度使用函数式编程"><a href="#3️⃣-过度使用函数式编程" class="headerlink" title="3️⃣ 过度使用函数式编程"></a>3️⃣ 过度使用函数式编程</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误：过度复杂化</span></span><br><span class="line"><span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> list.stream()</span><br><span class="line">    .filter(s -&gt; s != <span class="literal">null</span>)</span><br><span class="line">    .filter(s -&gt; !s.isEmpty())</span><br><span class="line">    .map(s -&gt; s.trim())</span><br><span class="line">    .filter(s -&gt; s.length() &gt; <span class="number">0</span>)</span><br><span class="line">    .map(s -&gt; s.toUpperCase())</span><br><span class="line">    .collect(Collectors.joining(<span class="string">&quot;, &quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 正确：保持简洁</span></span><br><span class="line"><span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> list.stream()</span><br><span class="line">    .filter(Objects::nonNull)</span><br><span class="line">    .map(String::trim)</span><br><span class="line">    .filter(s -&gt; !s.isEmpty())</span><br><span class="line">    .map(String::toUpperCase)</span><br><span class="line">    .collect(Collectors.joining(<span class="string">&quot;, &quot;</span>));</span><br></pre></td></tr></table></figure><h2 id="📚-学习建议"><a href="#📚-学习建议" class="headerlink" title="📚 学习建议"></a>📚 学习建议</h2><ol><li><strong>循序渐进</strong>：从简单的Lambda表达式开始，逐步学习高级特性</li><li><strong>实践为主</strong>：多写代码，多练习，在实际项目中应用</li><li><strong>性能意识</strong>：了解性能影响，合理选择使用场景</li><li><strong>代码可读性</strong>：函数式编程应该提高代码可读性，而不是相反</li></ol><h2 id="🎊-结语"><a href="#🎊-结语" class="headerlink" title="🎊 结语"></a>🎊 结语</h2><p>Java函数式编程为我们提供了一种全新的编程范式，它强调不可变性、声明式编程和函数组合。通过合理使用Lambda表达式、Stream API等特性，我们可以写出更简洁、更易维护的代码。<br>记住，函数式编程不是银弹，它应该与传统面向对象编程相结合，在合适的场景下发挥其优势。掌握函数式编程的核心概念和最佳实践，将大大提升我们的编程能力和代码质量。</p><blockquote><p>📚 <strong>延伸阅读</strong>：</p><ul><li><a href="https://www.oreilly.com/library/view/java-8-in/9781449333071/">Java 8函数式编程</a></li><li><a href="https://www.oreilly.com/library/view/effective-java-3rd/9780134686097/">Effective Java 第三版</a></li><li><a href="https://www.oreilly.com/library/view/functional-thinking/9781449365519/">函数式编程思维</a></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> Java技术 </category>
          
          <category> 编程思想 </category>
          
          <category> Lambda </category>
          
          <category> Stream </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 函数式编程 </tag>
            
            <tag> Lambda </tag>
            
            <tag> Stream </tag>
            
            <tag> 编程范式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>typora学习</title>
      <link href="/2025/10/02/typora%E5%AD%A6%E4%B9%A0/"/>
      <url>/2025/10/02/typora%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>2025年10月学习规划</title>
      <link href="//october-learning-plan/"/>
      <url>//october-learning-plan/</url>
      
        <content type="html"><![CDATA[<h1 id="📅-2025年10月学习规划"><a href="#📅-2025年10月学习规划" class="headerlink" title="📅 2025年10月学习规划"></a>📅 2025年10月学习规划</h1><h2 id="🎯-学习目标"><a href="#🎯-学习目标" class="headerlink" title="🎯 学习目标"></a>🎯 学习目标</h2><p>国庆假期期间，为自己制定一些简单的学习目标，在放松的同时充实技术知识1。</p><hr><h2 id="📚-技术学习"><a href="#📚-技术学习" class="headerlink" title="📚 技术学习"></a>📚 技术学习</h2><h3 id="🔧-编程技能复习"><a href="#🔧-编程技能复习" class="headerlink" title="🔧 编程技能复习"></a>🔧 编程技能复习</h3><ul><li><input checked="" disabled="" type="checkbox"> <strong>函数式编程复习</strong> - 整理学习笔记到博客(相关lambda原理需要更新，具体的应用需要在今后的实践中补充)</li><li><input checked="" disabled="" type="checkbox"> <strong>Git操作实践</strong> - 系统梳理Git工作流程并整理博客</li><li><input disabled="" type="checkbox"> <strong>Linux系统学习</strong> - 掌握常用命令并整理学习笔记</li></ul><hr><h2 id="🚀-个人技能提升"><a href="#🚀-个人技能提升" class="headerlink" title="🚀 个人技能提升"></a>🚀 个人技能提升</h2><h3 id="🤖-AI工具学习"><a href="#🤖-AI工具学习" class="headerlink" title="🤖 AI工具学习"></a>🤖 AI工具学习</h3><ul><li><input checked="" disabled="" type="checkbox"> <strong>AI Cursor使用总结</strong> - 整理使用经验和最佳实践</li><li><input checked="" disabled="" type="checkbox"> <strong>MCP协议学习</strong> - 了解Model Context Protocol的基本概念和应用</li></ul>]]></content>
      
      
      <categories>
          
          <category> 规划 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习规划 </tag>
            
            <tag> 技术提升 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图片处理示例</title>
      <link href="//image-handling-example/"/>
      <url>//image-handling-example/</url>
      
        <content type="html"><![CDATA[<h1 id="Hexo博客图片处理最佳实践"><a href="#Hexo博客图片处理最佳实践" class="headerlink" title="Hexo博客图片处理最佳实践"></a>Hexo博客图片处理最佳实践</h1><h2 id="🎯-方案对比"><a href="#🎯-方案对比" class="headerlink" title="🎯 方案对比"></a>🎯 方案对比</h2><h3 id="方案1-使用source-images文件夹-推荐"><a href="#方案1-使用source-images文件夹-推荐" class="headerlink" title="方案1: 使用source&#x2F;images文件夹 (推荐)"></a>方案1: 使用source&#x2F;images文件夹 (推荐)</h3><p>这是最简单可靠的方法：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">技术架构图</span>](<span class="link">/images/tech-architecture.png</span>)</span><br></pre></td></tr></table></figure><p><strong>优点:</strong></p><ul><li>✅ 图片自动部署到GitHub</li><li>✅ 路径简单，不易出错</li><li>✅ 本地和线上路径一致</li></ul><h3 id="方案2-使用CDN加速"><a href="#方案2-使用CDN加速" class="headerlink" title="方案2: 使用CDN加速"></a>方案2: 使用CDN加速</h3><h4 id="jsDelivr-GitHub"><a href="#jsDelivr-GitHub" class="headerlink" title="jsDelivr + GitHub"></a>jsDelivr + GitHub</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">图片</span>](<span class="link">https://cdn.jsdelivr.net/gh/suoChina/suoChina.github.io@main/images/图片名.jpg</span>)</span><br></pre></td></tr></table></figure><h4 id="GitHub-Raw"><a href="#GitHub-Raw" class="headerlink" title="GitHub Raw"></a>GitHub Raw</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">图片</span>](<span class="link">https://raw.githubusercontent.com/suoChina/suoChina.github.io/main/images/图片名.jpg</span>)</span><br></pre></td></tr></table></figure><p><strong>优点:</strong></p><ul><li>✅ 加载速度快</li><li>✅ 减少GitHub仓库大小</li><li>✅ 支持图片压缩</li></ul><h3 id="方案3-文章资源文件夹"><a href="#方案3-文章资源文件夹" class="headerlink" title="方案3: 文章资源文件夹"></a>方案3: 文章资源文件夹</h3><p>创建与文章同名的文件夹：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">source/_posts/</span><br><span class="line">├── 图片处理示例.md</span><br><span class="line">└── 图片处理示例/</span><br><span class="line">    ├── example1.png</span><br><span class="line">    └── example2.jpg</span><br></pre></td></tr></table></figure><p>在markdown中使用：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">示例图片1</span>](<span class="link">图片处理示例/example1.png</span>)</span><br><span class="line">![<span class="string">示例图片2</span>](<span class="link">图片处理示例/example2.jpg</span>)</span><br></pre></td></tr></table></figure><h2 id="🛠️-实际操作步骤"><a href="#🛠️-实际操作步骤" class="headerlink" title="🛠️ 实际操作步骤"></a>🛠️ 实际操作步骤</h2><h3 id="1-创建图片文件夹"><a href="#1-创建图片文件夹" class="headerlink" title="1. 创建图片文件夹"></a>1. 创建图片文件夹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> <span class="built_in">source</span>/images</span><br></pre></td></tr></table></figure><h3 id="2-放置图片文件"><a href="#2-放置图片文件" class="headerlink" title="2. 放置图片文件"></a>2. 放置图片文件</h3><p>将图片文件放在 <code>source/images/</code> 目录下</p><h3 id="3-在文章中使用"><a href="#3-在文章中使用" class="headerlink" title="3. 在文章中使用"></a>3. 在文章中使用</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">图片描述</span>](<span class="link">/images/图片文件名.jpg</span>)</span><br></pre></td></tr></table></figure><h3 id="4-重新生成和部署"><a href="#4-重新生成和部署" class="headerlink" title="4. 重新生成和部署"></a>4. 重新生成和部署</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npx hexo clean</span><br><span class="line">npx hexo generate</span><br><span class="line">npx hexo deploy</span><br></pre></td></tr></table></figure><h2 id="📝-最佳实践建议"><a href="#📝-最佳实践建议" class="headerlink" title="📝 最佳实践建议"></a>📝 最佳实践建议</h2><h3 id="图片命名规范"><a href="#图片命名规范" class="headerlink" title="图片命名规范"></a>图片命名规范</h3><ul><li>使用英文和数字</li><li>避免特殊字符和中文</li><li>使用描述性名称</li></ul><h3 id="图片格式选择"><a href="#图片格式选择" class="headerlink" title="图片格式选择"></a>图片格式选择</h3><ul><li><strong>PNG</strong>: 适合图标、截图、透明背景</li><li><strong>JPG</strong>: 适合照片、复杂图片</li><li><strong>WebP</strong>: 现代格式，体积小，质量高</li><li><strong>SVG</strong>: 矢量图，适合图标和简单图形</li></ul><h3 id="图片SEO优化"><a href="#图片SEO优化" class="headerlink" title="图片SEO优化"></a>图片SEO优化</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">Vue.js组件生命周期图 - 详细展示了Vue组件的创建、更新和销毁过程</span>](<span class="link">/images/vue-lifecycle.png</span>)</span><br></pre></td></tr></table></figure><h2 id="🔍-常见问题排查"><a href="#🔍-常见问题排查" class="headerlink" title="🔍 常见问题排查"></a>🔍 常见问题排查</h2><h3 id="问题1-图片显示为链接"><a href="#问题1-图片显示为链接" class="headerlink" title="问题1: 图片显示为链接"></a>问题1: 图片显示为链接</h3><p><strong>原因</strong>: 图片路径错误或文件不存在<br><strong>解决</strong>: 检查文件路径和文件名</p><h3 id="问题2-本地显示正常，线上不显示"><a href="#问题2-本地显示正常，线上不显示" class="headerlink" title="问题2: 本地显示正常，线上不显示"></a>问题2: 本地显示正常，线上不显示</h3><p><strong>原因</strong>: 图片文件未部署到GitHub<br><strong>解决</strong>: 确保图片在source目录下</p><h3 id="问题3-图片加载慢"><a href="#问题3-图片加载慢" class="headerlink" title="问题3: 图片加载慢"></a>问题3: 图片加载慢</h3><p><strong>原因</strong>: 图片文件过大或网络问题<br><strong>解决</strong>: 压缩图片或使用CDN</p><h2 id="🎯-推荐实施步骤"><a href="#🎯-推荐实施步骤" class="headerlink" title="🎯 推荐实施步骤"></a>🎯 推荐实施步骤</h2><ol><li><strong>立即</strong>: 使用source&#x2F;images方案解决当前问题</li><li><strong>短期</strong>: 优化图片大小和格式</li><li><strong>长期</strong>: 考虑使用CDN加速</li><li><strong>持续</strong>: 建立图片管理规范</li></ol><hr><h2 id="💡-总结"><a href="#💡-总结" class="headerlink" title="💡 总结"></a>💡 总结</h2><p>选择合适的图片处理方案对于博客的加载速度和用户体验非常重要。建议从简单的source&#x2F;images方案开始，随着博客内容增加再考虑使用CDN加速。</p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
          <category> 博客优化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 图片处理 </tag>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2025/10/02/hello-world/"/>
      <url>/2025/10/02/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Git操作指南 - 从入门到精通</title>
      <link href="//git-operation-guide/"/>
      <url>//git-operation-guide/</url>
      
        <content type="html"><![CDATA[<h1 id="Git操作指南-从入门到精通-🚀"><a href="#Git操作指南-从入门到精通-🚀" class="headerlink" title="Git操作指南 - 从入门到精通 🚀"></a>Git操作指南 - 从入门到精通 🚀</h1><blockquote><p>本文基于 <a href="https://liaoxuefeng.com/books/git/introduction/index.html">廖雪峰Git教程</a> 和 <a href="https://mofan212.github.io/posts/Git/">Mofan的Git理论与使用</a> 整理，旨在提供一份实用且全面的Git操作指南。📚</p></blockquote><h2 id="📋-目录"><a href="#📋-目录" class="headerlink" title="📋 目录"></a>📋 目录</h2><ul><li><a href="#1-%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6">1. 版本控制</a></li><li><a href="#2-git%E7%9A%84%E5%8E%86%E5%8F%B2">2. Git的历史</a></li><li><a href="#3-git%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">3. Git环境配置</a></li><li><a href="#4-git%E5%9F%BA%E6%9C%AC%E7%90%86%E8%AE%BA">4. Git基本理论</a></li><li><a href="#5-git%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA">5. Git项目搭建</a></li><li><a href="#6-git%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C">6. Git文件操作</a></li><li><a href="#7-github%E7%9A%84%E4%BD%BF%E7%94%A8">7. GitHub的使用</a></li><li><a href="#8-idea%E4%B8%AD%E9%9B%86%E6%88%90git">8. IDEA中集成Git</a></li><li><a href="#9-git%E5%88%86%E6%94%AF">9. Git分支</a></li><li><a href="#10-%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C">10. 团队协作</a></li><li><a href="#11-%E5%85%B6%E4%BB%96%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4">11. 其他常用命令</a></li><li><a href="#12-%E5%85%B6%E4%BB%96%E6%93%8D%E4%BD%9C%E6%B5%81%E7%A8%8B">12. 其他操作流程</a></li><li><a href="#13-%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98">13. 遇到的问题</a></li><li><a href="#14-%E5%85%B6%E4%BB%96%E8%A1%A5%E5%85%85%E4%BF%A1%E6%81%AF">14. 其他补充信息</a></li><li><a href="#15-%E5%8F%AF%E8%83%BD%E6%9C%89%E7%94%A8%E7%9A%84%E5%B0%8F%E5%B7%A5%E5%85%B7">15. 可能有用的小工具</a></li></ul><h2 id="1-版本控制-📚"><a href="#1-版本控制-📚" class="headerlink" title="1. 版本控制 📚"></a>1. 版本控制 📚</h2><h3 id="1-1-版本控制含义-📖"><a href="#1-1-版本控制含义-📖" class="headerlink" title="1.1 版本控制含义 📖"></a>1.1 版本控制含义 📖</h3><p>版本控制（Revision Control）是一种在开发过程中对文件、目录或工程等内容的修改历史进行管理的软件工程技术，使用版本控制后可以通过查看历史修改记录，更方便地恢复到先前的版本。</p><p>版本控制可以：</p><ul><li>🌍 实现跨区域多人协同开发</li><li>📝 追踪和记载一个或者多个文件的历史记录</li><li>🗂️ 组织和保护你的源代码和文档</li><li>📊 统计工作量</li><li>⚡ 并行开发、提高开发效率</li><li>📈 跟踪记录整个软件的开发过程</li><li>🛡️ 减轻开发人员的负担，节省时间，同时降低人为错误</li></ul><p>简单来说就是 <strong>用于管理多人协同开发项目的技术</strong>。</p><h3 id="1-2-版本控制工具-🛠️"><a href="#1-2-版本控制工具-🛠️" class="headerlink" title="1.2 版本控制工具 🛠️"></a>1.2 版本控制工具 🛠️</h3><p>主流的版本控制软件有：</p><ul><li><strong>Git</strong> 🐙</li><li><strong>SVN</strong>（Subversion）📁</li><li><strong>CVS</strong>（Concurrent Versions System）</li><li><strong>VSS</strong>（Micorosoft Visual SourceSafe）</li><li><strong>TFS</strong>（Team Foundation Server）</li><li>Visual Studio Online</li></ul><p>使用最广泛的是 Git 与 SVN。</p><h3 id="1-3-版本控制分类-📋"><a href="#1-3-版本控制分类-📋" class="headerlink" title="1.3 版本控制分类 📋"></a>1.3 版本控制分类 📋</h3><h4 id="1-3-1-本地版本控制系统-💻"><a href="#1-3-1-本地版本控制系统-💻" class="headerlink" title="1.3.1 本地版本控制系统 💻"></a>1.3.1 本地版本控制系统 💻</h4><p>记录文件每次的更新，对每个版本做一个快照，或是记录补丁文件，适合个人用，如 RCS。它是在一台机器上，记录版本的不同变化，保证内容不会丢失。但在多人开发的情况下，每个人都在不同的系统和电脑上开发，没办法协同工作。</p><h4 id="1-3-2-集中版本控制系统-🏢"><a href="#1-3-2-集中版本控制系统-🏢" class="headerlink" title="1.3.2 集中版本控制系统 🏢"></a>1.3.2 集中版本控制系统 🏢</h4><p>所有的版本数据都保存在中央服务器上，协同开发者从服务器上同步更新或上传自己的修改，用户只有自己以前所同步的版本，如果不连网，用户就看不到历史版本，也无法切换版本验证，或在不同分支工作。所有数据都保存在单一的服务器上，当服务器损坏时，可能会丢失所有数据，代表产品有 SVN、CVS、VSS 等。</p><h4 id="1-3-3-分布式版本控制系统-🌐"><a href="#1-3-3-分布式版本控制系统-🌐" class="headerlink" title="1.3.3 分布式版本控制系统 🌐"></a>1.3.3 分布式版本控制系统 🌐</h4><p>需要一台服务器作为远程代码仓库，所有版本信息同步到每个用户的本地。用户可以本地离线提交，只需在联网时将修改推送到远程代码仓库即可。每个用户的电脑都是代码仓库，是远程代码仓库的镜像，用户修改和获取代码都是在自己的本地仓库中进行操作。</p><p>由于每个用户都保存了所有的版本数据，只要有一个用户的设备没有问题就可以恢复所有的数据，不会因为服务器损坏或者网络问题，出现不能工作的情况。</p><h3 id="1-4-Git-与-SVN-的区别-⚖️"><a href="#1-4-Git-与-SVN-的区别-⚖️" class="headerlink" title="1.4 Git 与 SVN 的区别 ⚖️"></a>1.4 Git 与 SVN 的区别 ⚖️</h3><table><thead><tr><th>特性</th><th>Git 🐙</th><th>SVN 📁</th></tr></thead><tbody><tr><td>架构</td><td>分布式 🌐</td><td>集中式 🏢</td></tr><tr><td>网络依赖</td><td>支持离线操作 📱</td><td>必须联网 🌐</td></tr><tr><td>分支操作</td><td>轻量级，成本低 ⚡</td><td>重量级，成本高 🐌</td></tr><tr><td>存储方式</td><td>元数据存储 💾</td><td>原始文件存储 📄</td></tr><tr><td>安全性</td><td>每个用户都有完整副本 🔒</td><td>依赖中央服务器 ⚠️</td></tr><tr><td>常用场景</td><td>维护代码 💻</td><td>维护文档 📄</td></tr></tbody></table><h2 id="2-Git的历史-📜"><a href="#2-Git的历史-📜" class="headerlink" title="2. Git的历史 📜"></a>2. Git的历史 📜</h2><p><strong>2002年</strong> 📅：Linux内核开源社区开始启用分布式版本控制系统BitKeeper来管理和维护代码。</p><p><strong>2005年</strong> 🎯：开发BitKeeper的BitMover公司结束与Linux内核开源社区的合作关系，并收回Linux内核开源社区的免费使用权。</p><p><strong>两周后</strong> ⚡：Linux的缔造者<strong>Linus Torvalds</strong>使用两周开发出自己的版本系统，也就是如今的Git！</p><p><img src="https://via.placeholder.com/200x200/4CAF50/FFFFFF?text=Linus+Torvalds" alt="Linus Torvalds"><br><em>Linux和Git之父李纳斯·托沃兹（Linus Benedic Torvalds）1969、芬兰</em></p><blockquote><p>🏆 <strong>成就</strong>: 一个改变整个软件开发世界的工具，竟然只用了两周时间开发！</p></blockquote><h2 id="3-Git环境配置-⚙️"><a href="#3-Git环境配置-⚙️" class="headerlink" title="3. Git环境配置 ⚙️"></a>3. Git环境配置 ⚙️</h2><h3 id="3-1-安装与卸载Git-💻"><a href="#3-1-安装与卸载Git-💻" class="headerlink" title="3.1 安装与卸载Git 💻"></a>3.1 安装与卸载Git 💻</h3><h4 id="Windows系统-🪟"><a href="#Windows系统-🪟" class="headerlink" title="Windows系统 🪟"></a>Windows系统 🪟</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载并安装Git for Windows</span></span><br><span class="line"><span class="comment"># https://git-scm.com/download/win</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证安装</span></span><br><span class="line">git --version</span><br><span class="line"></span><br><span class="line">$ git --version</span><br><span class="line">git version 2.47.0.windows.1</span><br></pre></td></tr></table></figure><blockquote><p>💡 <strong>推荐</strong>: 如果官网下载太慢，可以使用<a href="https://registry.npmmirror.com/binary.html?path=git-for-windows/">淘宝镜像</a>下载！</p></blockquote><h4 id="macOS系统-🍎"><a href="#macOS系统-🍎" class="headerlink" title="macOS系统 🍎"></a>macOS系统 🍎</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用Homebrew安装</span></span><br><span class="line">brew install git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或使用Xcode Command Line Tools</span></span><br><span class="line">xcode-select --install</span><br></pre></td></tr></table></figure><h4 id="Linux系统-🐧"><a href="#Linux系统-🐧" class="headerlink" title="Linux系统 🐧"></a>Linux系统 🐧</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Ubuntu/Debian</span></span><br><span class="line"><span class="built_in">sudo</span> apt-get install git</span><br><span class="line"></span><br><span class="line"><span class="comment"># CentOS/RHEL</span></span><br><span class="line"><span class="built_in">sudo</span> yum install git</span><br></pre></td></tr></table></figure><h3 id="3-2-Linux常用命令-🐧"><a href="#3-2-Linux常用命令-🐧" class="headerlink" title="3.2 Linux常用命令 🐧"></a>3.2 Linux常用命令 🐧</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 后续慢慢补充</span></span><br><span class="line"><span class="comment"># 目录操作</span></span><br><span class="line"><span class="built_in">pwd</span>                     <span class="comment"># 显示当前目录</span></span><br><span class="line"><span class="built_in">ls</span> -la                  <span class="comment"># 显示所有文件（包括隐藏文件）</span></span><br><span class="line"><span class="built_in">cd</span> /path/to/directory   <span class="comment"># 切换到指定目录</span></span><br><span class="line"><span class="built_in">mkdir</span> directory_name    <span class="comment"># 创建目录</span></span><br><span class="line"><span class="built_in">rm</span> -rf directory_name   <span class="comment"># 删除目录</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件操作</span></span><br><span class="line"><span class="built_in">touch</span> file_name         <span class="comment"># 创建文件</span></span><br><span class="line"><span class="built_in">cat</span> file_name          <span class="comment"># 查看文件内容</span></span><br><span class="line">vim file_name          <span class="comment"># 编辑文件</span></span><br><span class="line"><span class="built_in">rm</span> file_name           <span class="comment"># 删除文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 权限操作</span></span><br><span class="line"><span class="built_in">chmod</span> 755 file_name    <span class="comment"># 修改文件权限</span></span><br><span class="line"><span class="built_in">chown</span> user:group file  <span class="comment"># 修改文件所有者</span></span><br></pre></td></tr></table></figure><h3 id="3-3-Git的配置-🔧"><a href="#3-3-Git的配置-🔧" class="headerlink" title="3.3 Git的配置 🔧"></a>3.3 Git的配置 🔧</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置用户信息 👤</span></span><br><span class="line">git config --global user.name <span class="string">&quot;你的姓名&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;你的邮箱@example.com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置默认编辑器 ✏️</span></span><br><span class="line">git config --global core.editor <span class="string">&quot;code --wait&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看配置 📋</span></span><br><span class="line">git config --list</span><br><span class="line"></span><br><span class="line">$ git config --list</span><br><span class="line">diff.astextplain.textconv=astextplain</span><br><span class="line">filter.lfs.clean=git-lfs clean -- %f</span><br><span class="line">filter.lfs.smudge=git-lfs smudge -- %f</span><br><span class="line">filter.lfs.process=git-lfs filter-process</span><br><span class="line">filter.lfs.required=<span class="literal">true</span></span><br><span class="line">http.sslbackend=openssl</span><br><span class="line">http.sslcainfo=D:/Program Files/Git/mingw64/etc/ssl/certs/ca-bundle.crt</span><br><span class="line">core.autocrlf=<span class="literal">true</span></span><br><span class="line">core.fscache=<span class="literal">true</span></span><br><span class="line">core.symlinks=<span class="literal">false</span></span><br><span class="line">pull.rebase=<span class="literal">false</span></span><br><span class="line">credential.helper=manager</span><br><span class="line">credential.https://dev.azure.com.usehttppath=<span class="literal">true</span></span><br><span class="line">init.defaultbranch=master</span><br><span class="line">color.ui=<span class="literal">true</span></span><br><span class="line">user.name=chad.suo</span><br><span class="line">user.email=xxx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 还可以使用以下命令，查看不同级别的配置信息：</span></span><br><span class="line"><span class="comment"># 查看系统 config</span></span><br><span class="line">git config --system --list</span><br><span class="line">　　</span><br><span class="line"><span class="comment"># 查看当前用户（global）配置</span></span><br><span class="line">git config --global  --list</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>⚠️ <strong>注意</strong>: 安装时还可以修改默认编辑器，默认是Vim编辑器。比如将默认编辑器修改为NotePad3，找到NotePad3的exe文件并选择即可。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Git 相关的本地配置文件位置：</span><br><span class="line"></span><br><span class="line">​Git 安装目录 \etc\gitconfig：Git 安装目录下的 gitconfig --system 系统级配置文件</span><br><span class="line"></span><br><span class="line">​C:\Users\你的用户名\ .gitconfig：只适用于当前登录用户的配置 --global 全局配置文件</span><br></pre></td></tr></table></figure><h3 id="2-3-多账号配置（这里需要补充）"><a href="#2-3-多账号配置（这里需要补充）" class="headerlink" title="2.3 多账号配置（这里需要补充）"></a>2.3 多账号配置（这里需要补充）</h3><h4 id="SSH密钥方式"><a href="#SSH密钥方式" class="headerlink" title="SSH密钥方式"></a>SSH密钥方式</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h4 id="Personal-Access-Token方式"><a href="#Personal-Access-Token方式" class="headerlink" title="Personal Access Token方式"></a>Personal Access Token方式</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4-Git基本理论-🧠"><a href="#4-Git基本理论-🧠" class="headerlink" title="4. Git基本理论 🧠"></a>4. Git基本理论 🧠</h2><h3 id="4-1-Git的三个区域-🏗️"><a href="#4-1-Git的三个区域-🏗️" class="headerlink" title="4.1 Git的三个区域 🏗️"></a>4.1 Git的三个区域 🏗️</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">工作区 (Working Directory) 📁</span><br><span class="line">    ↓ git add</span><br><span class="line">暂存区 (Staging Area) 📦</span><br><span class="line">    ↓ git commit</span><br><span class="line">本地仓库 (Local Repository) 💾</span><br><span class="line">    ↓ git push</span><br><span class="line">远程仓库 (Remote Repository) ☁️</span><br></pre></td></tr></table></figure><blockquote><p>💡 <strong>小贴士</strong>: 理解这三个区域是掌握Git的关键！工作区是你编辑文件的地方，暂存区是准备提交的文件的临时存储，本地仓库是项目的完整历史记录。</p></blockquote><h3 id="4-2-Git对象模型-🔍"><a href="#4-2-Git对象模型-🔍" class="headerlink" title="4.2 Git对象模型 🔍"></a>4.2 Git对象模型 🔍</h3><p>Git使用四种主要对象类型：</p><ul><li><strong>Blob对象</strong> 📄：存储文件内容</li><li><strong>Tree对象</strong> 🌳：存储目录结构和文件名</li><li><strong>Commit对象</strong> 📝：存储提交信息</li><li><strong>Tag对象</strong> 🏷️：存储标签信息</li></ul><h3 id="4-3-Git的哈希机制-🔐"><a href="#4-3-Git的哈希机制-🔐" class="headerlink" title="4.3 Git的哈希机制 🔐"></a>4.3 Git的哈希机制 🔐</h3><p>Git使用SHA-1哈希算法为每个对象生成唯一的40位十六进制标识符，确保数据的完整性和唯一性。</p><h2 id="5-Git项目搭建-🚀"><a href="#5-Git项目搭建-🚀" class="headerlink" title="5. Git项目搭建 🚀"></a>5. Git项目搭建 🚀</h2><h3 id="5-1-仓库初始化-🏁"><a href="#5-1-仓库初始化-🏁" class="headerlink" title="5.1 仓库初始化 🏁"></a>5.1 仓库初始化 🏁</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 初始化本地仓库</span></span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line"><span class="comment"># 克隆远程仓库</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/用户名/仓库名.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 克隆指定分支</span></span><br><span class="line">git <span class="built_in">clone</span> -b 分支名 https://github.com/用户名/仓库名.git</span><br></pre></td></tr></table></figure><h2 id="6-Git文件操作-📁"><a href="#6-Git文件操作-📁" class="headerlink" title="6. Git文件操作 📁"></a>6. Git文件操作 📁</h2><h3 id="6-1-基本文件操作-📄"><a href="#6-1-基本文件操作-📄" class="headerlink" title="6.1 基本文件操作 📄"></a>6.1 基本文件操作 📄</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件的四种状态</span></span><br><span class="line">版本控制就是对文件的版本控制，要对文件进行修改、提交等操作，首先要知道文件当前是什么状态。</span><br><span class="line"></span><br><span class="line">1、Untracked：未跟踪，此文件在文件夹中，但没有加入到 Git 库，不参与版本控制。可以通过 git add 状态变为 Staged。</span><br><span class="line"></span><br><span class="line">2、Unmodify：文件已经入库，且未修改，即版本库中的文件快照内容与文件夹中完全一致。这种类型的文件有两种去处，如果它被修改，变为 Modified；如果使用 git <span class="built_in">rm</span> 移出版本库，则变为 Untracked。</span><br><span class="line"></span><br><span class="line">3、Modified：文件已修改， 仅仅是修改，并没有进行其他的操作。这个文件也有两个去处，通过 git add 变为暂存 Staged 状态；使用 git checkout 丢弃修改， 返回到 Unmodify 状态。git checkout 表示从库中取出文件，覆盖当前修改，即丢弃当前修改。</span><br><span class="line"></span><br><span class="line">4、Staged：暂存状态。通过 git commit 将修改提交到本地仓库， 文件变为 Unmodify 状态。执行 git reset HEAD filename 取消暂存， 变为 Modified 状态。</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看状态 👀</span></span><br><span class="line">git status</span><br><span class="line">git status [filename]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加文件到暂存区 ➕</span></span><br><span class="line">git add 文件名                    <span class="comment"># 添加单个文件</span></span><br><span class="line">git add .                        <span class="comment"># 添加所有文件</span></span><br><span class="line">git add *.js                     <span class="comment"># 添加所有js文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交到本地仓库 💾</span></span><br><span class="line">git commit -m <span class="string">&quot;提交信息&quot;</span></span><br><span class="line">git commit -am <span class="string">&quot;提交信息&quot;</span>         <span class="comment"># 添加并提交已跟踪的文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看提交历史 📜</span></span><br><span class="line">git <span class="built_in">log</span></span><br><span class="line">git <span class="built_in">log</span> --oneline               <span class="comment"># 简洁显示</span></span><br><span class="line">git <span class="built_in">log</span> --graph                 <span class="comment"># 图形化显示</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 忽略文件</span></span><br><span class="line">有时不想把某些文件纳入版本控制中，比如数据库文件，临时文件，设计文件等，要求忽略这些文件的修改。</span><br><span class="line"></span><br><span class="line">在根目录下建立 .gitignore 文件，将需要被忽略的文件名添加到此文件中。</span><br><span class="line"></span><br><span class="line">.gitignore 文件内容解析：</span><br><span class="line"></span><br><span class="line">1、以井号 <span class="comment"># 开始的行表示注释；</span></span><br><span class="line"></span><br><span class="line">2、可以使用 Linux 通配符。例如：星号 * 代表任意多个字符，问号 ? 代表一个字符，方括号 [] 代表可选字符范围，大括号 &#123;&#125; 代表可选的字符串等；</span><br><span class="line"></span><br><span class="line">3、如果名称的最前面有一个感叹号 !，表示例外规则，满足条件的文件不会被忽略；</span><br><span class="line"></span><br><span class="line">4、如果名称的最前面是一个路径分隔符 /，表示要忽略的文件在根目录下；</span><br><span class="line"></span><br><span class="line">5、如果名称的最后面是一个路径分隔符 /，表示要忽略的是此目录下的文件。</span><br><span class="line"></span><br><span class="line">*.txt        <span class="comment"># 忽略所有 .txt 结尾的文件</span></span><br><span class="line">!lib.txt     <span class="comment"># lib.txt 除外</span></span><br><span class="line">/temp        <span class="comment"># 忽略项目根目录下的 temp 文件</span></span><br><span class="line">build/       <span class="comment"># 忽略 build 目录下的所有文件</span></span><br><span class="line">doc/*.txt    <span class="comment"># 忽略 doc 目录下的所有 txt 文件，不包括子目录下</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># IDEA 中常用的 .gitignore 文件内容：</span></span><br><span class="line"><span class="comment"># Compiled class file</span></span><br><span class="line">*.class</span><br><span class="line"></span><br><span class="line"><span class="comment"># Log file</span></span><br><span class="line">*.<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># BlueJ files</span></span><br><span class="line">*.ctxt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Mobile Tools for Java (J2ME)</span></span><br><span class="line">.mtj.tmp/</span><br><span class="line"></span><br><span class="line"><span class="comment"># Package Files #</span></span><br><span class="line">*.jar</span><br><span class="line">*.war</span><br><span class="line">*.nar</span><br><span class="line">*.ear</span><br><span class="line">*.zip</span><br><span class="line">*.tar.gz</span><br><span class="line">*.rar</span><br><span class="line"></span><br><span class="line"><span class="comment"># virtual machine crash logs</span></span><br><span class="line">hs_err_pid*</span><br><span class="line">.classpath</span><br><span class="line">.project</span><br><span class="line">.settings</span><br><span class="line">target</span><br><span class="line">.idea</span><br><span class="line">*.iml</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="6-2-文件管理-📂"><a href="#6-2-文件管理-📂" class="headerlink" title="6.2 文件管理 📂"></a>6.2 文件管理 📂</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除文件</span></span><br><span class="line">git <span class="built_in">rm</span> 文件名                    <span class="comment"># 删除文件并添加到暂存区</span></span><br><span class="line">git <span class="built_in">rm</span> --cached 文件名           <span class="comment"># 只从暂存区删除，保留工作区文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重命名文件</span></span><br><span class="line">git <span class="built_in">mv</span> 旧文件名 新文件名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 忽略文件</span></span><br><span class="line"><span class="comment"># 创建.gitignore文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;node_modules/&quot;</span> &gt;&gt; .gitignore</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;*.log&quot;</span> &gt;&gt; .gitignore</span><br></pre></td></tr></table></figure><h3 id="6-3-撤销操作-↩️"><a href="#6-3-撤销操作-↩️" class="headerlink" title="6.3 撤销操作 ↩️"></a>6.3 撤销操作 ↩️</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 撤销工作区修改</span></span><br><span class="line">git checkout -- 文件名</span><br><span class="line">git restore 文件名               <span class="comment"># Git 2.23+新命令</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 撤销暂存区修改</span></span><br><span class="line">git reset HEAD 文件名</span><br><span class="line">git restore --staged 文件名      <span class="comment"># Git 2.23+新命令</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 撤销最近一次提交</span></span><br><span class="line">git reset --soft HEAD~1         <span class="comment"># 保留修改在暂存区</span></span><br><span class="line">git reset --mixed HEAD~1        <span class="comment"># 保留修改在工作区</span></span><br><span class="line">git reset --hard HEAD~1         <span class="comment"># 完全删除修改</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改最近一次提交</span></span><br><span class="line">git commit --amend -m <span class="string">&quot;新的提交信息&quot;</span></span><br></pre></td></tr></table></figure><h2 id="7-GitHub的使用-🌐"><a href="#7-GitHub的使用-🌐" class="headerlink" title="7. GitHub的使用 🌐"></a>7. GitHub的使用 🌐</h2><h3 id="7-1-GitHub基础操作-🚀"><a href="#7-1-GitHub基础操作-🚀" class="headerlink" title="7.1 GitHub基础操作 🚀"></a>7.1 GitHub基础操作 🚀</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建GitHub仓库</span></span><br><span class="line"><span class="comment"># 1. 在GitHub网站上创建新仓库</span></span><br><span class="line"><span class="comment"># 2. 克隆到本地</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/用户名/仓库名.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送代码到GitHub</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;Initial commit&quot;</span></span><br><span class="line">git push -u origin main</span><br></pre></td></tr></table></figure><h3 id="7-2-GitHub功能特性-✨"><a href="#7-2-GitHub功能特性-✨" class="headerlink" title="7.2 GitHub功能特性 ✨"></a>7.2 GitHub功能特性 ✨</h3><ul><li><strong>Issues</strong> 🐛：问题跟踪和讨论</li><li><strong>Pull Requests</strong> 🔄：代码审查和合并</li><li><strong>Actions</strong> ⚙️：CI&#x2F;CD自动化</li><li><strong>Pages</strong> 📄：静态网站托管</li><li><strong>Wiki</strong> 📚：项目文档</li><li><strong>Releases</strong> 🏷️：版本发布</li></ul><h3 id="7-3-GitHub协作流程-🤝"><a href="#7-3-GitHub协作流程-🤝" class="headerlink" title="7.3 GitHub协作流程 🤝"></a>7.3 GitHub协作流程 🤝</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. Fork仓库</span></span><br><span class="line"><span class="comment"># 2. 克隆Fork的仓库</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/你的用户名/仓库名.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 添加上游仓库</span></span><br><span class="line">git remote add upstream https://github.com/原作者/仓库名.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 创建功能分支</span></span><br><span class="line">git checkout -b feature/新功能</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 提交更改</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;feat: 添加新功能&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. 推送到Fork仓库</span></span><br><span class="line">git push origin feature/新功能</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7. 创建Pull Request</span></span><br></pre></td></tr></table></figure><h3 id="本机绑定-SSH-公钥"><a href="#本机绑定-SSH-公钥" class="headerlink" title="本机绑定 SSH 公钥"></a>本机绑定 SSH 公钥</h3><h2 id="8-IDEA中集成Git-💻"><a href="#8-IDEA中集成Git-💻" class="headerlink" title="8. IDEA中集成Git 💻"></a>8. IDEA中集成Git 💻</h2><h3 id="8-1-配置Git-🔧"><a href="#8-1-配置Git-🔧" class="headerlink" title="8.1 配置Git 🔧"></a>8.1 配置Git 🔧</h3><ol><li><strong>设置Git路径</strong>：File → Settings → Version Control → Git</li><li><strong>配置用户信息</strong>：File → Settings → Version Control → Git → User</li><li><strong>启用Git集成</strong>：VCS → Enable Version Control Integration</li></ol><h3 id="8-2-常用操作-🛠️"><a href="#8-2-常用操作-🛠️" class="headerlink" title="8.2 常用操作 🛠️"></a>8.2 常用操作 🛠️</h3><ul><li><strong>提交更改</strong>：Ctrl+K 或 VCS → Commit</li><li><strong>推送代码</strong>：Ctrl+Shift+K 或 VCS → Git → Push</li><li><strong>拉取代码</strong>：Ctrl+T 或 VCS → Git → Pull</li><li><strong>查看历史</strong>：VCS → Git → Show History</li><li><strong>分支管理</strong>：VCS → Git → Branches</li></ul><h2 id="9-Git分支-🌿"><a href="#9-Git分支-🌿" class="headerlink" title="9. Git分支 🌿"></a>9. Git分支 🌿</h2><h3 id="9-1-分支基础操作-🔀"><a href="#9-1-分支基础操作-🔀" class="headerlink" title="9.1 分支基础操作 🔀"></a>9.1 分支基础操作 🔀</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看分支</span></span><br><span class="line">git branch                      <span class="comment"># 查看本地分支</span></span><br><span class="line">git branch -r                   <span class="comment"># 查看远程分支</span></span><br><span class="line">git branch -a                   <span class="comment"># 查看所有分支</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建分支</span></span><br><span class="line">git branch 分支名</span><br><span class="line">git checkout -b 分支名           <span class="comment"># 创建并切换到新分支</span></span><br><span class="line">git switch -c 分支名            <span class="comment"># Git 2.23+新命令</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换分支</span></span><br><span class="line">git checkout 分支名</span><br><span class="line">git switch 分支名               <span class="comment"># Git 2.23+新命令</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除分支</span></span><br><span class="line">git branch -d 分支名            <span class="comment"># 删除已合并的分支</span></span><br><span class="line">git branch -D 分支名            <span class="comment"># 强制删除分支</span></span><br></pre></td></tr></table></figure><h3 id="9-2-分支合并-🔀"><a href="#9-2-分支合并-🔀" class="headerlink" title="9.2 分支合并 🔀"></a>9.2 分支合并 🔀</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 合并分支</span></span><br><span class="line">git merge 分支名                <span class="comment"># 快进合并</span></span><br><span class="line">git merge --no-ff 分支名        <span class="comment"># 非快进合并，保留分支历史</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 变基合并</span></span><br><span class="line">git rebase 目标分支</span><br><span class="line">git rebase -i HEAD~3           <span class="comment"># 交互式变基</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解决合并冲突</span></span><br><span class="line"><span class="comment"># 1. 编辑冲突文件</span></span><br><span class="line"><span class="comment"># 2. 添加解决后的文件</span></span><br><span class="line">git add 文件名</span><br><span class="line"><span class="comment"># 3. 完成合并</span></span><br><span class="line">git commit</span><br></pre></td></tr></table></figure><h3 id="9-3-分支策略-📋"><a href="#9-3-分支策略-📋" class="headerlink" title="9.3 分支策略 📋"></a>9.3 分支策略 📋</h3><h4 id="Git-Flow模型"><a href="#Git-Flow模型" class="headerlink" title="Git Flow模型"></a>Git Flow模型</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">main (生产环境)</span><br><span class="line">├── develop (开发环境)</span><br><span class="line">│   ├── feature/新功能1</span><br><span class="line">│   ├── feature/新功能2</span><br><span class="line">│   └── hotfix/紧急修复</span><br><span class="line">└── release/版本号</span><br></pre></td></tr></table></figure><h4 id="GitHub-Flow模型"><a href="#GitHub-Flow模型" class="headerlink" title="GitHub Flow模型"></a>GitHub Flow模型</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">main (主分支)</span><br><span class="line">├── feature/新功能1</span><br><span class="line">├── feature/新功能2</span><br><span class="line">└── hotfix/紧急修复</span><br></pre></td></tr></table></figure><h2 id="10-团队协作-👥"><a href="#10-团队协作-👥" class="headerlink" title="10. 团队协作 👥"></a>10. 团队协作 👥</h2><h3 id="10-1-团队内协作-🤝"><a href="#10-1-团队内协作-🤝" class="headerlink" title="10.1 团队内协作 🤝"></a>10.1 团队内协作 🤝</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看远程仓库</span></span><br><span class="line">git remote -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加远程仓库</span></span><br><span class="line">git remote add origin https://github.com/用户名/仓库名.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改远程仓库地址</span></span><br><span class="line">git remote set-url origin 新的仓库地址</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除远程仓库</span></span><br><span class="line">git remote remove origin</span><br></pre></td></tr></table></figure><h3 id="5-2-推送和拉取"><a href="#5-2-推送和拉取" class="headerlink" title="5.2 推送和拉取"></a>5.2 推送和拉取</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 推送到远程仓库</span></span><br><span class="line">git push origin 分支名</span><br><span class="line">git push -u origin 分支名       <span class="comment"># 设置上游分支</span></span><br><span class="line">git push --all                  <span class="comment"># 推送所有分支</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 从远程仓库拉取</span></span><br><span class="line">git pull origin 分支名</span><br><span class="line">git fetch origin                <span class="comment"># 只拉取不合并</span></span><br><span class="line">git merge origin/分支名         <span class="comment"># 手动合并</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 强制推送（谨慎使用）</span></span><br><span class="line">git push --force origin 分支名</span><br></pre></td></tr></table></figure><h3 id="5-3-标签管理"><a href="#5-3-标签管理" class="headerlink" title="5.3 标签管理"></a>5.3 标签管理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建标签</span></span><br><span class="line">git tag 标签名                  <span class="comment"># 轻量标签</span></span><br><span class="line">git tag -a 标签名 -m <span class="string">&quot;标签说明&quot;</span>  <span class="comment"># 附注标签</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看标签</span></span><br><span class="line">git tag</span><br><span class="line">git show 标签名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送标签</span></span><br><span class="line">git push origin 标签名</span><br><span class="line">git push origin --tags          <span class="comment"># 推送所有标签</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除标签</span></span><br><span class="line">git tag -d 标签名               <span class="comment"># 删除本地标签</span></span><br><span class="line">git push origin :refs/tags/标签名 <span class="comment"># 删除远程标签</span></span><br></pre></td></tr></table></figure><h2 id="11-其他常用命令-⚡"><a href="#11-其他常用命令-⚡" class="headerlink" title="11. 其他常用命令 ⚡"></a>11. 其他常用命令 ⚡</h2><h3 id="11-1-其他常用命令一览-📋"><a href="#11-1-其他常用命令一览-📋" class="headerlink" title="11.1 其他常用命令一览 📋"></a>11.1 其他常用命令一览 📋</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看提交历史</span></span><br><span class="line">git <span class="built_in">log</span> --oneline --graph --all    <span class="comment"># 图形化显示所有分支</span></span><br><span class="line">git <span class="built_in">log</span> --<span class="built_in">stat</span>                     <span class="comment"># 显示文件修改统计</span></span><br><span class="line">git <span class="built_in">log</span> --pretty=format:<span class="string">&quot;%h %s&quot;</span>    <span class="comment"># 自定义格式</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看文件差异</span></span><br><span class="line">git diff                           <span class="comment"># 工作区与暂存区差异</span></span><br><span class="line">git diff --cached                  <span class="comment"># 暂存区与仓库差异</span></span><br><span class="line">git diff HEAD                      <span class="comment"># 工作区与仓库差异</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看操作历史</span></span><br><span class="line">git reflog                         <span class="comment"># 查看所有操作记录</span></span><br><span class="line">git reflog --oneline               <span class="comment"># 简洁显示操作记录</span></span><br></pre></td></tr></table></figure><h3 id="11-2-log与reflog区别-🔍"><a href="#11-2-log与reflog区别-🔍" class="headerlink" title="11.2 log与reflog区别 🔍"></a>11.2 log与reflog区别 🔍</h3><table><thead><tr><th>命令</th><th>作用</th><th>范围</th></tr></thead><tbody><tr><td><code>git log</code></td><td>查看提交历史</td><td>当前分支的提交记录</td></tr><tr><td><code>git reflog</code></td><td>查看操作历史</td><td>所有操作记录（包括reset、rebase等）</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 命令作用</span></span><br><span class="line">git <span class="built_in">log</span> --oneline<span class="comment"># 查看变更列表信息</span></span><br><span class="line">git <span class="built_in">log</span> -n2 --oneline<span class="comment"># 查看最近 2 次变更信息</span></span><br><span class="line">git <span class="built_in">log</span><span class="comment"># 查看当前分支版本信息</span></span><br><span class="line">git <span class="built_in">log</span> --all<span class="comment"># 查看全部分支变更历史</span></span><br><span class="line">git <span class="built_in">log</span> --graph<span class="comment"># 以图谱的方式显示当前分支版本信息</span></span><br></pre></td></tr></table></figure><h3 id="11-3-git-stash-💾"><a href="#11-3-git-stash-💾" class="headerlink" title="11.3 git stash 💾"></a>11.3 git stash 💾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 暂存当前工作</span></span><br><span class="line">git stash                          <span class="comment"># 暂存所有修改</span></span><br><span class="line">git stash save <span class="string">&quot;暂存说明&quot;</span>           <span class="comment"># 带说明的暂存</span></span><br><span class="line">git stash -u                       <span class="comment"># 包括未跟踪文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看暂存列表</span></span><br><span class="line">git stash list                     <span class="comment"># 查看所有暂存</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复暂存</span></span><br><span class="line">git stash pop                      <span class="comment"># 恢复并删除最新暂存</span></span><br><span class="line">git stash apply                    <span class="comment"># 恢复但保留暂存</span></span><br><span class="line">git stash apply stash@&#123;0&#125;          <span class="comment"># 恢复指定暂存</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除暂存</span></span><br><span class="line">git stash drop stash@&#123;0&#125;           <span class="comment"># 删除指定暂存</span></span><br><span class="line">git stash clear                    <span class="comment"># 清空所有暂存</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 只保存部分内容到堆栈</span></span><br><span class="line">git stash 会将所有未提交的修改（工作区和暂存区）保存至堆栈中，那么如果只保存部分内容呢？</span><br><span class="line"></span><br><span class="line">1、将不想存储的文件保存至暂存区，比如 git add a.java, b.java；</span><br><span class="line"></span><br><span class="line">2、使用 git stash –keep-index 保存那些未被提交至暂存区的文件到堆栈；</span><br><span class="line"></span><br><span class="line">3、使用 git reset 将暂存处的文件移动到工作区。</span><br></pre></td></tr></table></figure><h3 id="11-4-cherry-pick-🍒"><a href="#11-4-cherry-pick-🍒" class="headerlink" title="11.4 cherry-pick 🍒"></a>11.4 cherry-pick 🍒</h3><blockquote><p>cherry-pick 是Git中一个非常实用的命令，用于将指定的提交应用到当前分支上，就像”挑选樱桃”一样，选择性地应用某些提交。</p></blockquote><h4 id="11-4-1-基本语法-📝"><a href="#11-4-1-基本语法-📝" class="headerlink" title="11.4.1 基本语法 📝"></a>11.4.1 基本语法 📝</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拣选单个提交</span></span><br><span class="line">git cherry-pick 提交哈希</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拣选多个提交（不连续）</span></span><br><span class="line">git cherry-pick 提交1 提交2 提交3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拣选提交范围（连续）</span></span><br><span class="line">git cherry-pick 提交1..提交2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拣选提交范围（不包含起始提交）</span></span><br><span class="line">git cherry-pick 提交1^..提交2</span><br></pre></td></tr></table></figure><h4 id="11-4-2-使用场景-🎯"><a href="#11-4-2-使用场景-🎯" class="headerlink" title="11.4.2 使用场景 🎯"></a>11.4.2 使用场景 🎯</h4><p><strong>场景1：修复bug到多个分支</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在main分支修复了一个bug</span></span><br><span class="line">git checkout main</span><br><span class="line">git commit -m <span class="string">&quot;fix: 修复登录bug&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 需要将这个修复应用到release分支</span></span><br><span class="line">git checkout release</span><br><span class="line">git cherry-pick main分支的提交哈希</span><br></pre></td></tr></table></figure><p><strong>场景2：从其他分支获取特定功能</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从feature分支获取某个特定提交</span></span><br><span class="line">git checkout main</span><br><span class="line">git cherry-pick feature分支的提交哈希</span><br></pre></td></tr></table></figure><p><strong>场景3：撤销错误的合并</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果某个合并有问题，可以cherry-pick其他提交来修复</span></span><br><span class="line">git cherry-pick 修复提交的哈希</span><br></pre></td></tr></table></figure><h4 id="11-4-3-详细示例-📚"><a href="#11-4-3-详细示例-📚" class="headerlink" title="11.4.3 详细示例 📚"></a>11.4.3 详细示例 📚</h4><p><strong>示例1：基本cherry-pick操作</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看提交历史</span></span><br><span class="line">git <span class="built_in">log</span> --oneline</span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line"><span class="comment"># a1b2c3d (HEAD -&gt; main) 添加新功能</span></span><br><span class="line"><span class="comment"># e4f5g6h 修复bug</span></span><br><span class="line"><span class="comment"># i7j8k9l 更新文档</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 拣选特定提交到当前分支</span></span><br><span class="line">git cherry-pick e4f5g6h</span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line"><span class="comment"># [main 1a2b3c4] 修复bug</span></span><br><span class="line"><span class="comment"># 1 file changed, 2 insertions(+), 1 deletion(-)</span></span><br></pre></td></tr></table></figure><p><strong>示例2：拣选多个提交</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拣选多个不连续的提交</span></span><br><span class="line">git cherry-pick e4f5g6h i7j8k9l</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拣选连续的提交范围</span></span><br><span class="line">git cherry-pick e4f5g6h..i7j8k9l</span><br></pre></td></tr></table></figure><p><strong>示例3：从其他分支拣选</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换到目标分支</span></span><br><span class="line">git checkout feature-branch</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从main分支拣选提交</span></span><br><span class="line">git cherry-pick main分支的提交哈希</span><br></pre></td></tr></table></figure><h4 id="11-4-4-常用选项-⚙️"><a href="#11-4-4-常用选项-⚙️" class="headerlink" title="11.4.4 常用选项 ⚙️"></a>11.4.4 常用选项 ⚙️</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 只应用更改，不自动提交</span></span><br><span class="line">git cherry-pick --no-commit 提交哈希</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编辑提交信息</span></span><br><span class="line">git cherry-pick --edit 提交哈希</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定作者信息</span></span><br><span class="line">git cherry-pick --author=<span class="string">&quot;新作者 &lt;email@example.com&gt;&quot;</span> 提交哈希</span><br><span class="line"></span><br><span class="line"><span class="comment"># 继续cherry-pick（解决冲突后）</span></span><br><span class="line">git cherry-pick --<span class="built_in">continue</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 跳过当前cherry-pick</span></span><br><span class="line">git cherry-pick --skip</span><br><span class="line"></span><br><span class="line"><span class="comment"># 终止cherry-pick</span></span><br><span class="line">git cherry-pick --abort</span><br></pre></td></tr></table></figure><h4 id="11-4-5-处理冲突-🔧"><a href="#11-4-5-处理冲突-🔧" class="headerlink" title="11.4.5 处理冲突 🔧"></a>11.4.5 处理冲突 🔧</h4><p><strong>当cherry-pick遇到冲突时：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 查看冲突文件</span></span><br><span class="line">git status</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 手动解决冲突</span></span><br><span class="line"><span class="comment"># 编辑冲突文件，选择要保留的代码</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 添加解决后的文件</span></span><br><span class="line">git add 冲突文件</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 继续cherry-pick</span></span><br><span class="line">git cherry-pick --<span class="built_in">continue</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者跳过这个提交</span></span><br><span class="line">git cherry-pick --skip</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者终止整个操作</span></span><br><span class="line">git cherry-pick --abort</span><br></pre></td></tr></table></figure><h4 id="11-4-6-实际工作流程-🔄"><a href="#11-4-6-实际工作流程-🔄" class="headerlink" title="11.4.6 实际工作流程 🔄"></a>11.4.6 实际工作流程 🔄</h4><p><strong>完整的cherry-pick工作流程：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 查看可用的提交</span></span><br><span class="line">git <span class="built_in">log</span> --oneline --graph --all</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 选择要拣选的提交</span></span><br><span class="line">git cherry-pick 提交哈希</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 如果有冲突，解决冲突</span></span><br><span class="line"><span class="comment"># 编辑冲突文件...</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 添加解决后的文件</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 继续cherry-pick</span></span><br><span class="line">git cherry-pick --<span class="built_in">continue</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. 推送到远程仓库</span></span><br><span class="line">git push origin 分支名</span><br></pre></td></tr></table></figure><h4 id="11-4-7-注意事项-⚠️"><a href="#11-4-7-注意事项-⚠️" class="headerlink" title="11.4.7 注意事项 ⚠️"></a>11.4.7 注意事项 ⚠️</h4><ol><li><strong>提交哈希会改变</strong>：cherry-pick会创建新的提交，哈希值会不同</li><li><strong>可能产生冲突</strong>：如果目标分支有相关修改，可能产生冲突</li><li><strong>提交历史</strong>：cherry-pick会保留原始提交的提交信息</li><li><strong>分支关系</strong>：cherry-pick不会建立分支间的直接关系</li></ol><h4 id="11-4-8-与其他命令的区别-🔍"><a href="#11-4-8-与其他命令的区别-🔍" class="headerlink" title="11.4.8 与其他命令的区别 🔍"></a>11.4.8 与其他命令的区别 🔍</h4><table><thead><tr><th>命令</th><th>作用</th><th>提交历史</th><th>适用场景</th></tr></thead><tbody><tr><td><code>git merge</code></td><td>合并分支</td><td>保留分支结构</td><td>合并整个分支</td></tr><tr><td><code>git rebase</code></td><td>变基</td><td>线性历史</td><td>整理提交历史</td></tr><tr><td><code>git cherry-pick</code></td><td>拣选提交</td><td>复制提交</td><td>选择性应用提交</td></tr></tbody></table><h4 id="11-4-9-高级用法-🚀"><a href="#11-4-9-高级用法-🚀" class="headerlink" title="11.4.9 高级用法 🚀"></a>11.4.9 高级用法 🚀</h4><p><strong>批量cherry-pick：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从某个分支拣选多个提交</span></span><br><span class="line">git cherry-pick 提交1^..提交2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拣选所有提交（从某个点开始）</span></span><br><span class="line">git cherry-pick 起始提交^..HEAD</span><br></pre></td></tr></table></figure><p><strong>交互式cherry-pick：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用rebase进行交互式cherry-pick</span></span><br><span class="line">git rebase -i 起始提交</span><br><span class="line"><span class="comment"># 在编辑器中标记要拣选的提交</span></span><br></pre></td></tr></table></figure><blockquote><p>💡 <strong>小贴士</strong>: cherry-pick是Git协作开发中非常实用的工具，特别适合需要将特定修复或功能应用到多个分支的场景。记住，它创建的是新的提交，而不是移动原有的提交。</p></blockquote><h3 id="11-5-git-diff-🔍"><a href="#11-5-git-diff-🔍" class="headerlink" title="11.5 git diff 🔍"></a>11.5 git diff 🔍</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看差异</span></span><br><span class="line">git diff                           <span class="comment"># 工作区与暂存区</span></span><br><span class="line">git diff --cached                  <span class="comment"># 暂存区与仓库</span></span><br><span class="line">git diff HEAD                      <span class="comment"># 工作区与仓库</span></span><br><span class="line">git diff 分支1 分支2               <span class="comment"># 两个分支差异</span></span><br><span class="line">git diff 提交1 提交2               <span class="comment"># 两个提交差异</span></span><br></pre></td></tr></table></figure><h3 id="11-6-重写历史-📝"><a href="#11-6-重写历史-📝" class="headerlink" title="11.6 重写历史 📝"></a>11.6 重写历史 📝</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 交互式变基</span></span><br><span class="line">git rebase -i HEAD~3               <span class="comment"># 修改最近3个提交</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改提交信息</span></span><br><span class="line">git commit --amend -m <span class="string">&quot;新信息&quot;</span>     <span class="comment"># 修改最近一次提交</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并提交</span></span><br><span class="line">git rebase -i HEAD~3</span><br><span class="line"><span class="comment"># 在编辑器中修改pick为squash</span></span><br></pre></td></tr></table></figure><h3 id="11-7-回滚与撤销-↩️"><a href="#11-7-回滚与撤销-↩️" class="headerlink" title="11.7 回滚与撤销 ↩️"></a>11.7 回滚与撤销 ↩️</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 撤销工作区修改</span></span><br><span class="line">git checkout -- 文件名</span><br><span class="line">git restore 文件名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 撤销暂存区修改</span></span><br><span class="line">git reset HEAD 文件名</span><br><span class="line">git restore --staged 文件名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 回退提交</span></span><br><span class="line">git reset --soft HEAD~1            <span class="comment"># 保留修改在暂存区</span></span><br><span class="line">git reset --mixed HEAD~1           <span class="comment"># 保留修改在工作区</span></span><br><span class="line">git reset --hard HEAD~1            <span class="comment"># 完全删除修改</span></span><br></pre></td></tr></table></figure><h3 id="11-8-其他后悔药-💊"><a href="#11-8-其他后悔药-💊" class="headerlink" title="11.8 其他后悔药 💊"></a>11.8 其他后悔药 💊</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 撤销已推送的提交</span></span><br><span class="line">git revert 提交哈希                <span class="comment"># 创建新提交撤销指定提交</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改历史提交</span></span><br><span class="line">git rebase -i HEAD~3</span><br><span class="line"><span class="comment"># 在编辑器中修改pick为edit</span></span><br><span class="line"><span class="comment"># 修改文件后</span></span><br><span class="line">git add .</span><br><span class="line">git commit --amend</span><br><span class="line">git rebase --<span class="built_in">continue</span></span><br></pre></td></tr></table></figure><h3 id="11-9-abort终止-🛑"><a href="#11-9-abort终止-🛑" class="headerlink" title="11.9 abort终止 🛑"></a>11.9 abort终止 🛑</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 终止各种操作</span></span><br><span class="line">git merge --abort                  <span class="comment"># 终止合并</span></span><br><span class="line">git rebase --abort                 <span class="comment"># 终止变基</span></span><br><span class="line">git cherry-pick --abort            <span class="comment"># 终止拣选</span></span><br></pre></td></tr></table></figure><h3 id="11-10-合并commit-🔀"><a href="#11-10-合并commit-🔀" class="headerlink" title="11.10 合并commit 🔀"></a>11.10 合并commit 🔀</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 交互式变基合并提交</span></span><br><span class="line">git rebase -i HEAD~3</span><br><span class="line"><span class="comment"># 在编辑器中修改pick为squash或s</span></span><br></pre></td></tr></table></figure><h3 id="11-11-指定当前工作分支与远程分支的链接关系-🔗"><a href="#11-11-指定当前工作分支与远程分支的链接关系-🔗" class="headerlink" title="11.11 指定当前工作分支与远程分支的链接关系 🔗"></a>11.11 指定当前工作分支与远程分支的链接关系 🔗</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置上游分支</span></span><br><span class="line">git branch --set-upstream-to=origin/分支名 本地分支名</span><br><span class="line">git push -u origin 分支名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看分支跟踪关系</span></span><br><span class="line">git branch -vv</span><br></pre></td></tr></table></figure><h3 id="11-12-更安全的强制推送-🚀"><a href="#11-12-更安全的强制推送-🚀" class="headerlink" title="11.12 更安全的强制推送 🚀"></a>11.12 更安全的强制推送 🚀</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安全的强制推送</span></span><br><span class="line">git push --force-with-lease origin 分支名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 强制推送（谨慎使用）</span></span><br><span class="line">git push --force origin 分支名</span><br></pre></td></tr></table></figure><h2 id="12-其他操作流程-🔄"><a href="#12-其他操作流程-🔄" class="headerlink" title="12. 其他操作流程 🔄"></a>12. 其他操作流程 🔄</h2><h3 id="12-1-推送到远程仓库-📤"><a href="#12-1-推送到远程仓库-📤" class="headerlink" title="12.1 推送到远程仓库 📤"></a>12.1 推送到远程仓库 📤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 标准推送流程</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;提交信息&quot;</span></span><br><span class="line">git push origin 分支名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 首次推送</span></span><br><span class="line">git push -u origin 分支名</span><br></pre></td></tr></table></figure><h3 id="12-2-拉取远程分支到本地-📥"><a href="#12-2-拉取远程分支到本地-📥" class="headerlink" title="12.2 拉取远程分支到本地 📥"></a>12.2 拉取远程分支到本地 📥</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拉取并合并</span></span><br><span class="line">git pull origin 分支名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只拉取不合并</span></span><br><span class="line">git fetch origin</span><br><span class="line">git merge origin/分支名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拉取远程分支到本地</span></span><br><span class="line">git checkout -b 本地分支名 origin/远程分支名</span><br></pre></td></tr></table></figure><h3 id="12-3-GitHub的默认分支-🌿"><a href="#12-3-GitHub的默认分支-🌿" class="headerlink" title="12.3 GitHub的默认分支 🌿"></a>12.3 GitHub的默认分支 🌿</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看默认分支</span></span><br><span class="line">git symbolic-ref refs/remotes/origin/HEAD</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置默认分支</span></span><br><span class="line">git remote set-head origin main</span><br></pre></td></tr></table></figure><h3 id="12-4-修改远程仓库地址-🔄"><a href="#12-4-修改远程仓库地址-🔄" class="headerlink" title="12.4 修改远程仓库地址 🔄"></a>12.4 修改远程仓库地址 🔄</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看远程仓库</span></span><br><span class="line">git remote -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改远程仓库地址</span></span><br><span class="line">git remote set-url origin 新地址</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加新的远程仓库</span></span><br><span class="line">git remote add upstream 新地址</span><br></pre></td></tr></table></figure><h3 id="12-5-修改历史commit用户名和邮箱-👤"><a href="#12-5-修改历史commit用户名和邮箱-👤" class="headerlink" title="12.5 修改历史commit用户名和邮箱 👤"></a>12.5 修改历史commit用户名和邮箱 👤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改最近一次提交</span></span><br><span class="line">git commit --amend --author=<span class="string">&quot;新用户名 &lt;新邮箱&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改多个提交</span></span><br><span class="line">git rebase -i HEAD~3</span><br><span class="line"><span class="comment"># 在编辑器中修改pick为edit</span></span><br><span class="line"><span class="comment"># 修改后</span></span><br><span class="line">git commit --amend --author=<span class="string">&quot;新用户名 &lt;新邮箱&gt;&quot;</span></span><br><span class="line">git rebase --<span class="built_in">continue</span></span><br></pre></td></tr></table></figure><h3 id="12-6-删除某次提交-🗑️"><a href="#12-6-删除某次提交-🗑️" class="headerlink" title="12.6 删除某次提交 🗑️"></a>12.6 删除某次提交 🗑️</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用revert（推荐）</span></span><br><span class="line">git revert 提交哈希</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用reset（危险）</span></span><br><span class="line">git reset --hard 提交哈希</span><br><span class="line">git push --force origin 分支名</span><br></pre></td></tr></table></figure><h3 id="12-7-修改历史提交内容-✏️"><a href="#12-7-修改历史提交内容-✏️" class="headerlink" title="12.7 修改历史提交内容 ✏️"></a>12.7 修改历史提交内容 ✏️</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 交互式变基</span></span><br><span class="line">git rebase -i HEAD~3</span><br><span class="line"><span class="comment"># 在编辑器中修改pick为edit</span></span><br><span class="line"><span class="comment"># 修改文件后</span></span><br><span class="line">git add .</span><br><span class="line">git commit --amend</span><br><span class="line">git rebase --<span class="built_in">continue</span></span><br></pre></td></tr></table></figure><h3 id="12-8-merge的回退-↩️"><a href="#12-8-merge的回退-↩️" class="headerlink" title="12.8 merge的回退 ↩️"></a>12.8 merge的回退 ↩️</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 回退合并</span></span><br><span class="line">git reset --hard HEAD~1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者使用revert</span></span><br><span class="line">git revert -m 1 合并提交哈希</span><br></pre></td></tr></table></figure><h3 id="12-9-修改最近一次的commit时间-⏰"><a href="#12-9-修改最近一次的commit时间-⏰" class="headerlink" title="12.9 修改最近一次的commit时间 ⏰"></a>12.9 修改最近一次的commit时间 ⏰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改提交时间</span></span><br><span class="line">git commit --amend --<span class="built_in">date</span>=<span class="string">&quot;2025-01-02 12:00:00&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改作者时间</span></span><br><span class="line">git commit --amend --<span class="built_in">date</span>=<span class="string">&quot;2025-01-02 12:00:00&quot;</span> --no-edit</span><br></pre></td></tr></table></figure><h3 id="12-10-将其他分支完全覆盖到当前分支-🔄"><a href="#12-10-将其他分支完全覆盖到当前分支-🔄" class="headerlink" title="12.10 将其他分支完全覆盖到当前分支 🔄"></a>12.10 将其他分支完全覆盖到当前分支 🔄</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重置到指定分支</span></span><br><span class="line">git reset --hard 其他分支名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 强制推送（谨慎使用）</span></span><br><span class="line">git push --force origin 当前分支名</span><br></pre></td></tr></table></figure><h3 id="13-1-IDEA-Git出现Line-Separators-Warning-⚠️"><a href="#13-1-IDEA-Git出现Line-Separators-Warning-⚠️" class="headerlink" title="13.1 IDEA Git出现Line Separators Warning ⚠️"></a>13.1 IDEA Git出现Line Separators Warning ⚠️</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解决换行符警告</span></span><br><span class="line">git config --global core.autocrlf <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="13-2-LF-will-be-replaced-by-CRLF-🔄"><a href="#13-2-LF-will-be-replaced-by-CRLF-🔄" class="headerlink" title="13.2 LF will be replaced by CRLF 🔄"></a>13.2 LF will be replaced by CRLF 🔄</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Windows系统换行符问题</span></span><br><span class="line">git config --global core.autocrlf <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="13-3-git-reset-–hard-HEAD-后显示-more-🤔"><a href="#13-3-git-reset-–hard-HEAD-后显示-more-🤔" class="headerlink" title="13.3 git reset –hard HEAD^ 后显示 more? 🤔"></a>13.3 git reset –hard HEAD^ 后显示 more? 🤔</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在Windows CMD中，^ 是特殊字符，需要使用引号</span></span><br><span class="line">git reset --hard <span class="string">&quot;HEAD^&quot;</span></span><br><span class="line"><span class="comment"># 或者使用</span></span><br><span class="line">git reset --hard HEAD~1</span><br></pre></td></tr></table></figure><h3 id="13-4-git-pull-提示-warning-ignoring-broken-ref-refs-remotes-origin-HEAD-⚠️"><a href="#13-4-git-pull-提示-warning-ignoring-broken-ref-refs-remotes-origin-HEAD-⚠️" class="headerlink" title="13.4 git pull 提示 warning: ignoring broken ref refs&#x2F;remotes&#x2F;origin&#x2F;HEAD ⚠️"></a>13.4 git pull 提示 warning: ignoring broken ref refs&#x2F;remotes&#x2F;origin&#x2F;HEAD ⚠️</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修复损坏的远程HEAD引用</span></span><br><span class="line">git remote set-head origin main</span><br></pre></td></tr></table></figure><h3 id="13-5-unable-to-get-local-issuer-certificate-🔐"><a href="#13-5-unable-to-get-local-issuer-certificate-🔐" class="headerlink" title="13.5 unable to get local issuer certificate 🔐"></a>13.5 unable to get local issuer certificate 🔐</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解决SSL证书问题</span></span><br><span class="line">git config --global http.sslVerify <span class="literal">false</span></span><br></pre></td></tr></table></figure><h3 id="13-6-git-status-中文文件名乱码-🔤"><a href="#13-6-git-status-中文文件名乱码-🔤" class="headerlink" title="13.6 git status 中文文件名乱码 🔤"></a>13.6 git status 中文文件名乱码 🔤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解决中文文件名显示问题</span></span><br><span class="line">git config --global core.quotepath <span class="literal">false</span></span><br></pre></td></tr></table></figure><h3 id="13-7-右键菜单没有-Git-Bash-here-📁"><a href="#13-7-右键菜单没有-Git-Bash-here-📁" class="headerlink" title="13.7 右键菜单没有 Git Bash here 📁"></a>13.7 右键菜单没有 Git Bash here 📁</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重新安装Git时选择&quot;Git Bash Here&quot;选项</span></span><br><span class="line"><span class="comment"># 或手动添加到注册表</span></span><br></pre></td></tr></table></figure><h3 id="13-8-fatal-detected-dubious-ownership-in-repository-🚫"><a href="#13-8-fatal-detected-dubious-ownership-in-repository-🚫" class="headerlink" title="13.8 fatal: detected dubious ownership in repository 🚫"></a>13.8 fatal: detected dubious ownership in repository 🚫</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解决仓库所有权问题</span></span><br><span class="line">git config --global --add safe.directory /path/to/your/repo</span><br></pre></td></tr></table></figure><h3 id="13-9-能访问GitHub但不能进行Git相关操作-🌐"><a href="#13-9-能访问GitHub但不能进行Git相关操作-🌐" class="headerlink" title="13.9 能访问GitHub但不能进行Git相关操作 🌐"></a>13.9 能访问GitHub但不能进行Git相关操作 🌐</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查网络代理设置</span></span><br><span class="line">git config --global http.proxy http://proxy:port</span><br><span class="line">git config --global https.proxy https://proxy:port</span><br><span class="line"></span><br><span class="line"><span class="comment"># 清除代理设置</span></span><br><span class="line">git config --global --<span class="built_in">unset</span> http.proxy</span><br><span class="line">git config --global --<span class="built_in">unset</span> https.proxy</span><br></pre></td></tr></table></figure><h3 id="13-10-查看Git远程仓库信息完整指南-🔍"><a href="#13-10-查看Git远程仓库信息完整指南-🔍" class="headerlink" title="13.10 查看Git远程仓库信息完整指南 🔍"></a>13.10 查看Git远程仓库信息完整指南 🔍</h3><h4 id="13-10-1-基本查看命令-📋"><a href="#13-10-1-基本查看命令-📋" class="headerlink" title="13.10.1 基本查看命令 📋"></a>13.10.1 基本查看命令 📋</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看所有远程仓库（简洁版）</span></span><br><span class="line">git remote</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有远程仓库（详细版）</span></span><br><span class="line">git remote -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看特定远程仓库的详细信息</span></span><br><span class="line">git remote show origin</span><br></pre></td></tr></table></figure><h4 id="13-10-2-git-remote-命令详解-🔍"><a href="#13-10-2-git-remote-命令详解-🔍" class="headerlink" title="13.10.2 git remote 命令详解 🔍"></a>13.10.2 git remote 命令详解 🔍</h4><h5 id="git-remote（简洁版）"><a href="#git-remote（简洁版）" class="headerlink" title="git remote（简洁版）"></a><strong>git remote（简洁版）</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git remote</span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line"><span class="comment"># origin</span></span><br><span class="line"><span class="comment"># upstream</span></span><br></pre></td></tr></table></figure><h5 id="git-remote-v（详细版）"><a href="#git-remote-v（详细版）" class="headerlink" title="git remote -v（详细版）"></a><strong>git remote -v（详细版）</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line"><span class="comment"># origin    https://github.com/用户名/仓库名.git (fetch)</span></span><br><span class="line"><span class="comment"># origin    https://github.com/用户名/仓库名.git (push)</span></span><br><span class="line"><span class="comment"># upstream  https://github.com/原作者/仓库名.git (fetch)</span></span><br><span class="line"><span class="comment"># upstream  https://github.com/原作者/仓库名.git (push)</span></span><br></pre></td></tr></table></figure><h5 id="git-remote-show（详细信息）"><a href="#git-remote-show（详细信息）" class="headerlink" title="git remote show（详细信息）"></a><strong>git remote show（详细信息）</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">git remote show origin</span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line"><span class="comment"># * remote origin</span></span><br><span class="line"><span class="comment">#   Fetch URL: https://github.com/用户名/仓库名.git</span></span><br><span class="line"><span class="comment">#   Push  URL: https://github.com/用户名/仓库名.git</span></span><br><span class="line"><span class="comment">#   HEAD branch: main</span></span><br><span class="line"><span class="comment">#   Remote branches:</span></span><br><span class="line"><span class="comment">#     main tracked</span></span><br><span class="line"><span class="comment">#     dev  tracked</span></span><br><span class="line"><span class="comment">#   Local branch configured for &#x27;git pull&#x27;:</span></span><br><span class="line"><span class="comment">#     main merges with remote main</span></span><br><span class="line"><span class="comment">#   Local ref configured for &#x27;git push&#x27;:</span></span><br><span class="line"><span class="comment">#     main pushes to main (up to date)</span></span><br></pre></td></tr></table></figure><h4 id="13-10-3-远程仓库信息解读-📖"><a href="#13-10-3-远程仓库信息解读-📖" class="headerlink" title="13.10.3 远程仓库信息解读 📖"></a>13.10.3 远程仓库信息解读 📖</h4><h5 id="远程仓库名称"><a href="#远程仓库名称" class="headerlink" title="远程仓库名称"></a><strong>远程仓库名称</strong></h5><ul><li><strong>origin</strong>：默认的远程仓库名称</li><li><strong>upstream</strong>：上游仓库（通常用于Fork项目）</li><li><strong>其他名称</strong>：自定义的远程仓库名称</li></ul><h5 id="URL类型"><a href="#URL类型" class="headerlink" title="URL类型"></a><strong>URL类型</strong></h5><ul><li><strong>HTTPS</strong>：<code>https://github.com/用户名/仓库名.git</code></li><li><strong>SSH</strong>：<code>git@github.com:用户名/仓库名.git</code></li></ul><h5 id="操作类型"><a href="#操作类型" class="headerlink" title="操作类型"></a><strong>操作类型</strong></h5><ul><li><strong>fetch</strong>：拉取操作对应的URL</li><li><strong>push</strong>：推送操作对应的URL</li></ul><h4 id="13-10-4-查看分支跟踪关系-🌿"><a href="#13-10-4-查看分支跟踪关系-🌿" class="headerlink" title="13.10.4 查看分支跟踪关系 🌿"></a>13.10.4 查看分支跟踪关系 🌿</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看本地分支与远程分支的跟踪关系</span></span><br><span class="line">git branch -vv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出示例：</span></span><br><span class="line"><span class="comment"># * main    a1b2c3d [origin/main] 最新提交信息</span></span><br><span class="line"><span class="comment">#   dev     e4f5g6h [origin/dev] 开发分支</span></span><br><span class="line"><span class="comment">#   feature f7g8h9i 功能分支（无跟踪关系）</span></span><br></pre></td></tr></table></figure><h4 id="13-10-5-查看远程分支信息-📡"><a href="#13-10-5-查看远程分支信息-📡" class="headerlink" title="13.10.5 查看远程分支信息 📡"></a>13.10.5 查看远程分支信息 📡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看所有远程分支</span></span><br><span class="line">git branch -r</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line"><span class="comment"># origin/main</span></span><br><span class="line"><span class="comment"># origin/dev</span></span><br><span class="line"><span class="comment"># origin/feature</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有分支（本地+远程）</span></span><br><span class="line">git branch -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line"><span class="comment"># * main</span></span><br><span class="line"><span class="comment">#   dev</span></span><br><span class="line"><span class="comment">#   feature</span></span><br><span class="line"><span class="comment">#   remotes/origin/main</span></span><br><span class="line"><span class="comment">#   remotes/origin/dev</span></span><br><span class="line"><span class="comment">#   remotes/origin/feature</span></span><br></pre></td></tr></table></figure><h4 id="13-10-6-查看远程仓库状态-📊"><a href="#13-10-6-查看远程仓库状态-📊" class="headerlink" title="13.10.6 查看远程仓库状态 📊"></a>13.10.6 查看远程仓库状态 📊</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看远程仓库的详细信息</span></span><br><span class="line">git remote show origin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出包含：</span></span><br><span class="line"><span class="comment"># - 远程仓库URL</span></span><br><span class="line"><span class="comment"># - HEAD分支</span></span><br><span class="line"><span class="comment"># - 远程分支列表</span></span><br><span class="line"><span class="comment"># - 本地分支配置</span></span><br><span class="line"><span class="comment"># - 推送/拉取配置</span></span><br></pre></td></tr></table></figure><h4 id="13-10-7-实际使用场景-🎯"><a href="#13-10-7-实际使用场景-🎯" class="headerlink" title="13.10.7 实际使用场景 🎯"></a>13.10.7 实际使用场景 🎯</h4><h5 id="场景1：检查仓库配置"><a href="#场景1：检查仓库配置" class="headerlink" title="场景1：检查仓库配置"></a><strong>场景1：检查仓库配置</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入项目目录</span></span><br><span class="line"><span class="built_in">cd</span> 你的项目</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看远程仓库</span></span><br><span class="line">git remote -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查分支跟踪关系</span></span><br><span class="line">git branch -vv</span><br></pre></td></tr></table></figure><h5 id="场景2：Fork项目协作"><a href="#场景2：Fork项目协作" class="headerlink" title="场景2：Fork项目协作"></a><strong>场景2：Fork项目协作</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看Fork项目的远程配置</span></span><br><span class="line">git remote -v</span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line"><span class="comment"># origin    https://github.com/你的用户名/仓库名.git (fetch)</span></span><br><span class="line"><span class="comment"># origin    https://github.com/你的用户名/仓库名.git (push)</span></span><br><span class="line"><span class="comment"># upstream  https://github.com/原作者/仓库名.git (fetch)</span></span><br><span class="line"><span class="comment"># upstream  https://github.com/原作者/仓库名.git (push)</span></span><br></pre></td></tr></table></figure><h5 id="场景3：多远程仓库管理"><a href="#场景3：多远程仓库管理" class="headerlink" title="场景3：多远程仓库管理"></a><strong>场景3：多远程仓库管理</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看所有远程仓库</span></span><br><span class="line">git remote</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看特定远程仓库详情</span></span><br><span class="line">git remote show upstream</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看分支跟踪关系</span></span><br><span class="line">git branch -vv</span><br></pre></td></tr></table></figure><h4 id="13-10-8-常见问题解决-🔧"><a href="#13-10-8-常见问题解决-🔧" class="headerlink" title="13.10.8 常见问题解决 🔧"></a>13.10.8 常见问题解决 🔧</h4><h5 id="问题1：没有远程仓库"><a href="#问题1：没有远程仓库" class="headerlink" title="问题1：没有远程仓库"></a><strong>问题1：没有远程仓库</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果显示没有远程仓库</span></span><br><span class="line">git remote -v</span><br><span class="line"><span class="comment"># 输出：空（没有远程仓库）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加远程仓库</span></span><br><span class="line">git remote add origin https://github.com/用户名/仓库名.git</span><br></pre></td></tr></table></figure><h5 id="问题2：远程仓库地址错误"><a href="#问题2：远程仓库地址错误" class="headerlink" title="问题2：远程仓库地址错误"></a><strong>问题2：远程仓库地址错误</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前地址</span></span><br><span class="line">git remote -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改远程仓库地址</span></span><br><span class="line">git remote set-url origin 新的仓库地址</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证修改</span></span><br><span class="line">git remote -v</span><br></pre></td></tr></table></figure><h5 id="问题3：分支跟踪关系丢失"><a href="#问题3：分支跟踪关系丢失" class="headerlink" title="问题3：分支跟踪关系丢失"></a><strong>问题3：分支跟踪关系丢失</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看分支状态</span></span><br><span class="line">git branch -vv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新设置跟踪关系</span></span><br><span class="line">git branch --set-upstream-to=origin/main main</span><br></pre></td></tr></table></figure><h4 id="13-10-9-高级用法-🚀"><a href="#13-10-9-高级用法-🚀" class="headerlink" title="13.10.9 高级用法 🚀"></a>13.10.9 高级用法 🚀</h4><h5 id="查看远程仓库的完整信息"><a href="#查看远程仓库的完整信息" class="headerlink" title="查看远程仓库的完整信息"></a><strong>查看远程仓库的完整信息</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取远程仓库的详细信息</span></span><br><span class="line">git remote show origin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 包含内容：</span></span><br><span class="line"><span class="comment"># - 远程仓库URL</span></span><br><span class="line"><span class="comment"># - HEAD分支</span></span><br><span class="line"><span class="comment"># - 远程分支列表</span></span><br><span class="line"><span class="comment"># - 本地分支配置</span></span><br><span class="line"><span class="comment"># - 推送/拉取配置</span></span><br><span class="line"><span class="comment"># - 过时的分支信息</span></span><br></pre></td></tr></table></figure><h5 id="检查远程仓库连接"><a href="#检查远程仓库连接" class="headerlink" title="检查远程仓库连接"></a><strong>检查远程仓库连接</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试远程仓库连接</span></span><br><span class="line">git ls-remote origin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line"><span class="comment"># a1b2c3d4e5f6... refs/heads/main</span></span><br><span class="line"><span class="comment"># e7f8g9h0i1j2... refs/heads/dev</span></span><br><span class="line"><span class="comment"># k3l4m5n6o7p8... refs/tags/v1.0.0</span></span><br></pre></td></tr></table></figure><h5 id="查看远程仓库的标签"><a href="#查看远程仓库的标签" class="headerlink" title="查看远程仓库的标签"></a><strong>查看远程仓库的标签</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看远程标签</span></span><br><span class="line">git ls-remote --tags origin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line"><span class="comment"># a1b2c3d4e5f6... refs/tags/v1.0.0</span></span><br><span class="line"><span class="comment"># e7f8g9h0i1j2... refs/tags/v1.1.0</span></span><br></pre></td></tr></table></figure><h4 id="13-10-10-最佳实践建议-💡"><a href="#13-10-10-最佳实践建议-💡" class="headerlink" title="13.10.10 最佳实践建议 💡"></a>13.10.10 最佳实践建议 💡</h4><h5 id="1-定期检查远程仓库状态"><a href="#1-定期检查远程仓库状态" class="headerlink" title="1. 定期检查远程仓库状态"></a><strong>1. 定期检查远程仓库状态</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定期执行</span></span><br><span class="line">git remote -v</span><br><span class="line">git branch -vv</span><br><span class="line">git status</span><br></pre></td></tr></table></figure><h5 id="2-使用SSH密钥（推荐）"><a href="#2-使用SSH密钥（推荐）" class="headerlink" title="2. 使用SSH密钥（推荐）"></a><strong>2. 使用SSH密钥（推荐）</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查是否使用SSH</span></span><br><span class="line">git remote -v</span><br><span class="line"><span class="comment"># 应该显示：git@github.com:用户名/仓库名.git</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果不是SSH，可以修改</span></span><br><span class="line">git remote set-url origin git@github.com:用户名/仓库名.git</span><br></pre></td></tr></table></figure><h5 id="3-验证远程仓库权限"><a href="#3-验证远程仓库权限" class="headerlink" title="3. 验证远程仓库权限"></a><strong>3. 验证远程仓库权限</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试推送权限</span></span><br><span class="line">git push origin main</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试拉取权限</span></span><br><span class="line">git pull origin main</span><br></pre></td></tr></table></figure><blockquote><p>💡 <strong>小贴士</strong>: 定期检查远程仓库信息是Git协作开发的重要习惯，确保你的本地仓库与远程仓库保持正确的连接关系！</p></blockquote><h3 id="13-11-新建GitHub仓库本地推送完整指南-🚀"><a href="#13-11-新建GitHub仓库本地推送完整指南-🚀" class="headerlink" title="13.11 新建GitHub仓库本地推送完整指南 🚀"></a>13.11 新建GitHub仓库本地推送完整指南 🚀</h3><h4 id="13-10-1-在GitHub上创建新仓库-🌐"><a href="#13-10-1-在GitHub上创建新仓库-🌐" class="headerlink" title="13.10.1 在GitHub上创建新仓库 🌐"></a>13.10.1 在GitHub上创建新仓库 🌐</h4><ol><li><strong>登录GitHub</strong>：访问 <a href="https://github.com/">https://github.com</a></li><li><strong>点击”New repository”</strong>：右上角的”+”按钮 → “New repository”</li><li><strong>填写仓库信息</strong>：<ul><li>Repository name: <code>test_create_repo</code>（你的仓库名）</li><li>Description: <code>测试仓库</code>（可选）</li><li>Public&#x2F;Private: 选择可见性</li><li><strong>不要勾选</strong> “Add a README file”</li><li><strong>不要勾选</strong> “Add .gitignore”</li><li><strong>不要勾选</strong> “Choose a license”</li></ul></li><li><strong>点击”Create repository”</strong></li></ol><h4 id="13-10-2-本地操作完整流程-💻"><a href="#13-10-2-本地操作完整流程-💻" class="headerlink" title="13.10.2 本地操作完整流程 💻"></a>13.10.2 本地操作完整流程 💻</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 进入你的项目目录</span></span><br><span class="line"><span class="built_in">cd</span> ~/Desktop/归档材料/test_create_repo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 初始化Git仓库（如果还没做）</span></span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 添加远程仓库（替换为你的实际仓库地址）</span></span><br><span class="line">git remote add origin https://github.com/你的用户名/test_create_repo.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 创建第一个文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# 测试仓库&quot;</span> &gt; README.md</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 添加文件到暂存区</span></span><br><span class="line">git add README.md</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. 提交到本地仓库</span></span><br><span class="line">git commit -m <span class="string">&quot;Initial commit: 添加README文件&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 7. 推送到远程仓库</span></span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><h4 id="13-10-3-git-push命令详解-🔍"><a href="#13-10-3-git-push命令详解-🔍" class="headerlink" title="13.10.3 git push命令详解 🔍"></a>13.10.3 git push命令详解 🔍</h4><h5 id="命令结构"><a href="#命令结构" class="headerlink" title="命令结构"></a><strong>命令结构</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git push -u origin master</span><br><span class="line"><span class="comment">#     ↑    ↑      ↑</span></span><br><span class="line"><span class="comment">#     │    │      └── 本地分支名</span></span><br><span class="line"><span class="comment">#     │    └────────── 远程仓库名</span></span><br><span class="line"><span class="comment">#     └─────────────── 设置上游分支</span></span><br></pre></td></tr></table></figure><h5 id="分支关系说明"><a href="#分支关系说明" class="headerlink" title="分支关系说明"></a><strong>分支关系说明</strong></h5><ul><li><strong>本地分支</strong>：<code>master</code>（命令最后的参数）</li><li><strong>远程分支</strong>：<code>origin/master</code>（远程仓库名 + “&#x2F;“ + 分支名）</li></ul><h5 id="分支关系图"><a href="#分支关系图" class="headerlink" title="分支关系图"></a><strong>分支关系图</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">本地仓库                   远程仓库(origin)</span><br><span class="line">┌─────────────┐           ┌─────────────┐</span><br><span class="line">│   master    │ ──────→   │   master    │</span><br><span class="line">│  (本地分支)  │           │ (远程分支)   │</span><br><span class="line">└─────────────┘           └─────────────┘</span><br></pre></td></tr></table></figure><h4 id="13-10-4-推送过程详解-🔄"><a href="#13-10-4-推送过程详解-🔄" class="headerlink" title="13.10.4 推送过程详解 🔄"></a>13.10.4 推送过程详解 🔄</h4><p><strong>推送前状态</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">本地仓库: master (有新的提交)</span><br><span class="line">远程仓库: origin/master (没有新提交)</span><br></pre></td></tr></table></figure><p><strong>执行命令</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><p><strong>推送后状态</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">本地仓库: master (与远程同步)</span><br><span class="line">远程仓库: origin/master (有了新提交)</span><br></pre></td></tr></table></figure><h4 id="13-10-5-不同分支名推送示例-🛠️"><a href="#13-10-5-不同分支名推送示例-🛠️" class="headerlink" title="13.10.5 不同分支名推送示例 🛠️"></a>13.10.5 不同分支名推送示例 🛠️</h4><h5 id="推送到不同分支名"><a href="#推送到不同分支名" class="headerlink" title="推送到不同分支名"></a><strong>推送到不同分支名</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 本地master推送到远程main分支</span></span><br><span class="line">git push -u origin master:main</span><br><span class="line"></span><br><span class="line"><span class="comment"># 本地feature推送到远程develop分支</span></span><br><span class="line">git push -u origin feature:develop</span><br></pre></td></tr></table></figure><h5 id="本地分支4055推送到远程4056"><a href="#本地分支4055推送到远程4056" class="headerlink" title="本地分支4055推送到远程4056"></a><strong>本地分支4055推送到远程4056</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git push -u origin 4055:4056</span><br><span class="line"><span class="comment">#     ↑    ↑      ↑    ↑</span></span><br><span class="line"><span class="comment">#     │    │      │    └── 远程分支名</span></span><br><span class="line"><span class="comment">#     │    │      └─────── 本地分支名</span></span><br><span class="line"><span class="comment">#     │    └────────────── 远程仓库名</span></span><br><span class="line"><span class="comment">#     └─────────────────── 设置上游分支</span></span><br></pre></td></tr></table></figure><p><strong>分支关系图</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">本地仓库                   远程仓库(origin)</span><br><span class="line">┌─────────────┐           ┌─────────────┐</span><br><span class="line">│     4055    │ ──────→   │     4056    │</span><br><span class="line">│  (本地分支)  │           │ (远程分支)   │</span><br><span class="line">└─────────────┘           └─────────────┘</span><br></pre></td></tr></table></figure><h4 id="13-10-6-u参数详解-⚙️"><a href="#13-10-6-u参数详解-⚙️" class="headerlink" title="13.10.6 -u参数详解 ⚙️"></a>13.10.6 -u参数详解 ⚙️</h4><h5 id="u参数的作用"><a href="#u参数的作用" class="headerlink" title="-u参数的作用"></a><strong>-u参数的作用</strong></h5><ul><li><strong>全称</strong>：<code>--set-upstream</code></li><li><strong>作用</strong>：设置上游分支（upstream branch）</li><li><strong>效果</strong>：建立本地分支与远程分支的跟踪关系</li></ul><h5 id="使用-u的好处"><a href="#使用-u的好处" class="headerlink" title="使用-u的好处"></a><strong>使用-u的好处</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置了上游分支后，可以直接使用</span></span><br><span class="line">git push                    <span class="comment"># 等同于 git push origin master</span></span><br><span class="line">git pull                    <span class="comment"># 等同于 git pull origin master</span></span><br><span class="line">git status                  <span class="comment"># 会显示与远程分支的关系</span></span><br></pre></td></tr></table></figure><h5 id="对比：有-u和没有-u"><a href="#对比：有-u和没有-u" class="headerlink" title="对比：有-u和没有-u"></a><strong>对比：有-u和没有-u</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用-u参数</span></span><br><span class="line">git push -u origin master</span><br><span class="line"><span class="comment"># 结果：本地master分支跟踪远程origin/master分支</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 不使用-u参数</span></span><br><span class="line">git push origin master</span><br><span class="line"><span class="comment"># 结果：没有建立跟踪关系</span></span><br></pre></td></tr></table></figure><h4 id="13-10-7-常见问题解决-🔧"><a href="#13-10-7-常见问题解决-🔧" class="headerlink" title="13.10.7 常见问题解决 🔧"></a>13.10.7 常见问题解决 🔧</h4><h5 id="问题1：分支名称不匹配"><a href="#问题1：分支名称不匹配" class="headerlink" title="问题1：分支名称不匹配"></a><strong>问题1：分支名称不匹配</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果GitHub默认分支是main，而本地是master</span></span><br><span class="line">git branch -M main</span><br><span class="line">git push -u origin main</span><br></pre></td></tr></table></figure><h5 id="问题2：权限问题"><a href="#问题2：权限问题" class="headerlink" title="问题2：权限问题"></a><strong>问题2：权限问题</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用Personal Access Token</span></span><br><span class="line">git remote set-url origin https://你的用户名:你的Token@github.com/你的用户名/test_create_repo.git</span><br></pre></td></tr></table></figure><h5 id="问题3：SSH密钥问题"><a href="#问题3：SSH密钥问题" class="headerlink" title="问题3：SSH密钥问题"></a><strong>问题3：SSH密钥问题</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用SSH地址</span></span><br><span class="line">git remote set-url origin git@github.com:你的用户名/test_create_repo.git</span><br></pre></td></tr></table></figure><h4 id="13-10-8-验证推送结果-✅"><a href="#13-10-8-验证推送结果-✅" class="headerlink" title="13.10.8 验证推送结果 ✅"></a>13.10.8 验证推送结果 ✅</h4><h5 id="检查本地状态"><a href="#检查本地状态" class="headerlink" title="检查本地状态"></a><strong>检查本地状态</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前状态</span></span><br><span class="line">git status</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看提交历史</span></span><br><span class="line">git <span class="built_in">log</span> --oneline</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看远程仓库</span></span><br><span class="line">git remote -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看分支跟踪关系</span></span><br><span class="line">git branch -vv</span><br></pre></td></tr></table></figure><h5 id="检查远程仓库"><a href="#检查远程仓库" class="headerlink" title="检查远程仓库"></a><strong>检查远程仓库</strong></h5><ul><li>访问你的GitHub仓库页面</li><li>确认README.md文件已上传</li><li>确认提交历史显示正确</li></ul><h4 id="13-10-9-最佳实践建议-💡"><a href="#13-10-9-最佳实践建议-💡" class="headerlink" title="13.10.9 最佳实践建议 💡"></a>13.10.9 最佳实践建议 💡</h4><h5 id="1-使用SSH密钥（推荐）"><a href="#1-使用SSH密钥（推荐）" class="headerlink" title="1. 使用SSH密钥（推荐）"></a><strong>1. 使用SSH密钥（推荐）</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成SSH密钥</span></span><br><span class="line">ssh-keygen -t rsa -b 4096 -C <span class="string">&quot;你的邮箱@example.com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加到GitHub</span></span><br><span class="line"><span class="comment"># 1. 复制公钥内容</span></span><br><span class="line"><span class="built_in">cat</span> ~/.ssh/id_rsa.pub</span><br><span class="line"><span class="comment"># 2. 在GitHub Settings → SSH and GPG keys 中添加</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用SSH地址</span></span><br><span class="line">git remote add origin git@github.com:你的用户名/test_create_repo.git</span><br></pre></td></tr></table></figure><h5 id="2-统一分支名称"><a href="#2-统一分支名称" class="headerlink" title="2. 统一分支名称"></a><strong>2. 统一分支名称</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置默认分支为main</span></span><br><span class="line">git branch -M main</span><br><span class="line">git push -u origin main</span><br></pre></td></tr></table></figure><h5 id="3-添加-gitignore文件"><a href="#3-添加-gitignore文件" class="headerlink" title="3. 添加.gitignore文件"></a><strong>3. 添加.gitignore文件</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建.gitignore文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;node_modules/&quot;</span> &gt; .gitignore</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;*.log&quot;</span> &gt;&gt; .gitignore</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加并提交</span></span><br><span class="line">git add .gitignore</span><br><span class="line">git commit -m <span class="string">&quot;feat: 添加.gitignore文件&quot;</span></span><br><span class="line">git push origin main</span><br></pre></td></tr></table></figure><blockquote><p>💡 <strong>小贴士</strong>: 新建GitHub仓库的推送操作是Git协作开发的基础，理解每个参数的作用和分支关系对于掌握Git非常重要！</p></blockquote><h2 id="14-其他补充信息-📚"><a href="#14-其他补充信息-📚" class="headerlink" title="14. 其他补充信息 📚"></a>14. 其他补充信息 📚</h2><h3 id="14-1-Commit-Type-类别-📋"><a href="#14-1-Commit-Type-类别-📋" class="headerlink" title="14.1 Commit Type 类别 📋"></a>14.1 Commit Type 类别 📋</h3><table><thead><tr><th>类型</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td><code>feat</code></td><td>新功能</td><td><code>feat: 添加用户登录功能</code></td></tr><tr><td><code>fix</code></td><td>修复bug</td><td><code>fix: 修复登录验证bug</code></td></tr><tr><td><code>docs</code></td><td>文档更新</td><td><code>docs: 更新API文档</code></td></tr><tr><td><code>style</code></td><td>代码格式调整</td><td><code>style: 调整代码缩进</code></td></tr><tr><td><code>refactor</code></td><td>代码重构</td><td><code>refactor: 重构用户模块</code></td></tr><tr><td><code>test</code></td><td>测试相关</td><td><code>test: 添加单元测试</code></td></tr><tr><td><code>chore</code></td><td>构建过程或辅助工具的变动</td><td><code>chore: 更新依赖版本</code></td></tr></tbody></table><h3 id="14-2-管理多个用户信息-👥"><a href="#14-2-管理多个用户信息-👥" class="headerlink" title="14.2 管理多个用户信息 👥"></a>14.2 管理多个用户信息 👥</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 全局配置</span></span><br><span class="line">git config --global user.name <span class="string">&quot;全局用户名&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;全局邮箱@example.com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 项目级配置</span></span><br><span class="line">git config user.name <span class="string">&quot;项目用户名&quot;</span></span><br><span class="line">git config user.email <span class="string">&quot;项目邮箱@example.com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看配置</span></span><br><span class="line">git config --list</span><br><span class="line">git config user.name</span><br><span class="line">git config user.email</span><br></pre></td></tr></table></figure><h2 id="15-可能有用的小工具-🛠️"><a href="#15-可能有用的小工具-🛠️" class="headerlink" title="15. 可能有用的小工具 🛠️"></a>15. 可能有用的小工具 🛠️</h2><h3 id="15-1-push-sh-智能推送脚本-🤖"><a href="#15-1-push-sh-智能推送脚本-🤖" class="headerlink" title="15.1 push.sh - 智能推送脚本 🤖"></a>15.1 push.sh - 智能推送脚本 🤖</h3><blockquote><p>根据<a href="https://mofan212.github.io/posts/Git/">Mofan的Git理论与使用</a>文章整理</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 自动完成以下操作：</span></span><br><span class="line"><span class="comment"># 1. 检查当前分支</span></span><br><span class="line"><span class="comment"># 2. 拉取最新代码</span></span><br><span class="line"><span class="comment"># 3. 合并到目标分支</span></span><br><span class="line"><span class="comment"># 4. 推送到远端</span></span><br><span class="line"><span class="comment"># 5. 检出到原分支</span></span><br><span class="line"><span class="comment"># 6. cherry-pick到原分支并推送</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 脚本地址：my-tools/git/push.sh</span></span><br></pre></td></tr></table></figure><h3 id="15-2-pull-sh-批量拉取脚本-📥"><a href="#15-2-pull-sh-批量拉取脚本-📥" class="headerlink" title="15.2 pull.sh - 批量拉取脚本 📥"></a>15.2 pull.sh - 批量拉取脚本 📥</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 通过项目名称在GitHub、Gitee上拉取代码</span></span><br><span class="line"><span class="comment"># 适用场景：知道项目名但不知道用户名的情况</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 脚本地址：my-tools/git/pull.sh</span></span><br></pre></td></tr></table></figure><h3 id="15-3-常用别名配置-⚡"><a href="#15-3-常用别名配置-⚡" class="headerlink" title="15.3 常用别名配置 ⚡"></a>15.3 常用别名配置 ⚡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置常用Git别名</span></span><br><span class="line">git config --global alias.st status</span><br><span class="line">git config --global alias.co checkout</span><br><span class="line">git config --global alias.br branch</span><br><span class="line">git config --global alias.ci commit</span><br><span class="line">git config --global alias.unstage <span class="string">&#x27;reset HEAD --&#x27;</span></span><br><span class="line">git config --global alias.last <span class="string">&#x27;log -1 HEAD&#x27;</span></span><br><span class="line">git config --global alias.visual <span class="string">&#x27;!gitk&#x27;</span></span><br><span class="line">git config --global alias.lg <span class="string">&quot;log --color --graph --pretty=format:&#x27;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#x27; --abbrev-commit&quot;</span></span><br></pre></td></tr></table></figure><h2 id="🔗-参考资源"><a href="#🔗-参考资源" class="headerlink" title="🔗 参考资源"></a>🔗 参考资源</h2><ul><li><a href="https://liaoxuefeng.com/books/git/introduction/index.html">廖雪峰Git教程</a> - 中文Git教程经典 📚</li><li><a href="https://mofan212.github.io/posts/Git/">Mofan的Git理论与使用</a> - 详细的Git理论讲解 🎯</li><li><a href="https://git-scm.com/book">Pro Git Book</a> - Git官方文档 📖</li><li><a href="https://docs.github.com/">GitHub官方文档</a> - GitHub使用指南 🌐</li></ul><h2 id="📝-总结"><a href="#📝-总结" class="headerlink" title="📝 总结"></a>📝 总结</h2><p>Git作为现代软件开发的核心工具，掌握其基本操作和最佳实践对于开发者来说至关重要。本文涵盖了从基础概念到高级应用的完整Git操作指南，希望能够帮助你在日常开发中更好地使用Git进行版本控制和团队协作。</p><p>记住，Git是一个强大的工具，但更重要的是理解其背后的设计理念和工作原理。通过不断的实践和学习，你将能够熟练运用Git的各种功能，提高开发效率。</p><hr><p><strong>最后更新</strong>: 2025-01-02<br><strong>作者</strong>: suoChina<br><strong>标签</strong>: Git, 版本控制, 开发工具, 协作开发</p>]]></content>
      
      
      <categories>
          
          <category> 开发工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> 版本控制 </tag>
            
            <tag> 开发工具 </tag>
            
            <tag> 协作开发 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
